(self.webpackChunknas_extension=self.webpackChunknas_extension||[]).push([[179],{930:(Ra,Jr,Ti)=>{"use strict";function Er(e){return"function"==typeof e}function fr(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ut=fr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,l)=>`${l+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function $e(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class ne{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const f of n)f.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Er(r))try{r()}catch(f){t=f instanceof Ut?f.errors:[f]}const{_finalizers:l}=this;if(l){this._finalizers=null;for(const f of l)try{_(f)}catch(m){t=t??[],m instanceof Ut?t=[...t,...m.errors]:t.push(m)}}if(t)throw new Ut(t)}}add(t){var n;if(t&&t!==this)if(this.closed)_(t);else{if(t instanceof ne){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&$e(n,t)}remove(t){const{_finalizers:n}=this;n&&$e(n,t),t instanceof ne&&t._removeParent(this)}}ne.EMPTY=(()=>{const e=new ne;return e.closed=!0,e})();const De=ne.EMPTY;function H(e){return e instanceof ne||e&&"closed"in e&&Er(e.remove)&&Er(e.add)&&Er(e.unsubscribe)}function _(e){Er(e)?e():e.unsubscribe()}const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},k={setTimeout(e,t,...n){const{delegate:r}=k;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=k;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function V(e){k.setTimeout(()=>{const{onUnhandledError:t}=E;if(!t)throw e;t(e)})}function w(){}const F=M("C",void 0,void 0);function M(e,t,n){return{kind:e,value:t,error:n}}let O=null;function te(e){if(E.useDeprecatedSynchronousErrorHandling){const t=!O;if(t&&(O={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=O;if(O=null,n)throw r}}else e()}class ue extends ne{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,H(t)&&t.add(this)):this.destination=he}static create(t,n,r){return new be(t,n,r)}next(t){this.isStopped?_e(function T(e){return M("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?_e(function G(e){return M("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?_e(F,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const se=Function.prototype.bind;function Ne(e,t){return se.call(e,t)}class ${constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){xe(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){xe(r)}else xe(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){xe(n)}}}class be extends ue{constructor(t,n,r){let l;if(super(),Er(t)||!t)l={next:t??void 0,error:n??void 0,complete:r??void 0};else{let f;this&&E.useDeprecatedNextContext?(f=Object.create(t),f.unsubscribe=()=>this.unsubscribe(),l={next:t.next&&Ne(t.next,f),error:t.error&&Ne(t.error,f),complete:t.complete&&Ne(t.complete,f)}):l=t}this.destination=new $(l)}}function xe(e){E.useDeprecatedSynchronousErrorHandling?function ce(e){E.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=e)}(e):V(e)}function _e(e,t){const{onStoppedNotification:n}=E;n&&k.setTimeout(()=>n(e,t))}const he={closed:!0,next:w,error:function x(e){throw e},complete:w},Je="function"==typeof Symbol&&Symbol.observable||"@@observable";function Me(e){return e}let Dt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,l){const f=function Lt(e){return e&&e instanceof ue||function Le(e){return e&&Er(e.next)&&Er(e.error)&&Er(e.complete)}(e)&&H(e)}(n)?n:new be(n,r,l);return te(()=>{const{operator:m,source:S}=this;f.add(m?m.call(f,S):S?this._subscribe(f):this._trySubscribe(f))}),f}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Qe(r))((l,f)=>{const m=new be({next:S=>{try{n(S)}catch(L){f(L),m.unsubscribe()}},error:f,complete:l});this.subscribe(m)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Je](){return this}pipe(...n){return function yt(e){return 0===e.length?Me:1===e.length?e[0]:function(n){return e.reduce((r,l)=>l(r),n)}}(n)(this)}toPromise(n){return new(n=Qe(n))((r,l)=>{let f;this.subscribe(m=>f=m,m=>l(m),()=>r(f))})}}return e.create=t=>new e(t),e})();function Qe(e){var t;return null!==(t=e??E.Promise)&&void 0!==t?t:Promise}const Vt=fr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ze=(()=>{class e extends Dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new mt(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Vt}next(n){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:l,observers:f}=this;return r||l?De:(this.currentObservers=null,f.push(n),new ne(()=>{this.currentObservers=null,$e(f,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:l,isStopped:f}=this;r?n.error(l):f&&n.complete()}asObservable(){const n=new Dt;return n.source=this,n}}return e.create=(t,n)=>new mt(t,n),e})();class mt extends ze{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:De}}function Yt(e){return t=>{if(function fn(e){return Er(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tt(e,t,n,r,l){return new Rt(e,t,n,r,l)}class Rt extends ue{constructor(t,n,r,l,f,m){super(t),this.onFinalize=f,this.shouldUnsubscribe=m,this._next=n?function(S){try{n(S)}catch(L){t.error(L)}}:super._next,this._error=l?function(S){try{l(S)}catch(L){t.error(L)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(S){t.error(S)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ze(e,t){return Yt((n,r)=>{let l=0;n.subscribe(Tt(r,f=>{r.next(e.call(t,f,l++))}))})}function Xn(e){return this instanceof Xn?(this.v=e,this):new Xn(e)}function Li(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function _n(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(f){n[f]=e[f]&&function(m){return new Promise(function(S,L){!function l(f,m,S,L){Promise.resolve(L).then(function(Y){f({value:Y,done:S})},m)}(S,L,(m=e[f](m)).done,m.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Io=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function cn(e){return Er(e?.then)}function un(e){return Er(e[Je])}function rn(e){return Symbol.asyncIterator&&Er(e?.[Symbol.asyncIterator])}function Ct(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const xt=function $t(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kt(e){return Er(e?.[xt])}function bn(e){return function Ir(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,r=n.apply(e,t||[]),f=[];return l={},m("next"),m("throw"),m("return"),l[Symbol.asyncIterator]=function(){return this},l;function m(st){r[st]&&(l[st]=function(bt){return new Promise(function(Wt,sn){f.push([st,bt,Wt,sn])>1||S(st,bt)})})}function S(st,bt){try{!function L(st){st.value instanceof Xn?Promise.resolve(st.value.v).then(Y,Se):He(f[0][2],st)}(r[st](bt))}catch(Wt){He(f[0][3],Wt)}}function Y(st){S("next",st)}function Se(st){S("throw",st)}function He(st,bt){st(bt),f.shift(),f.length&&S(f[0][0],f[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:l}=yield Xn(n.read());if(l)return yield Xn(void 0);yield yield Xn(r)}}finally{n.releaseLock()}})}function zt(e){return Er(e?.getReader)}function On(e){if(e instanceof Dt)return e;if(null!=e){if(un(e))return function Wn(e){return new Dt(t=>{const n=e[Je]();if(Er(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Io(e))return function In(e){return new Dt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(cn(e))return function ln(e){return new Dt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,V)})}(e);if(rn(e))return Vn(e);if(kt(e))return function gn(e){return new Dt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(zt(e))return function sr(e){return Vn(bn(e))}(e)}throw Ct(e)}function Vn(e){return new Dt(t=>{(function Dr(e,t){var n,r,l,f;return function et(e,t,n,r){return new(n||(n=Promise))(function(f,m){function S(Se){try{Y(r.next(Se))}catch(He){m(He)}}function L(Se){try{Y(r.throw(Se))}catch(He){m(He)}}function Y(Se){Se.done?f(Se.value):function l(f){return f instanceof n?f:new n(function(m){m(f)})}(Se.value).then(S,L)}Y((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Li(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(m){l={error:m}}finally{try{r&&!r.done&&(f=n.return)&&(yield f.call(n))}finally{if(l)throw l.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Vr(e,t,n,r=0,l=!1){const f=t.schedule(function(){n(),l?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(f),!l)return f}function nn(e,t,n=1/0){return Er(t)?nn((r,l)=>Ze((f,m)=>t(r,f,l,m))(On(e(r,l))),n):("number"==typeof t&&(n=t),Yt((r,l)=>function tr(e,t,n,r,l,f,m,S){const L=[];let Y=0,Se=0,He=!1;const st=()=>{He&&!L.length&&!Y&&t.complete()},bt=sn=>Y<r?Wt(sn):L.push(sn),Wt=sn=>{f&&t.next(sn),Y++;let Tn=!1;On(n(sn,Se++)).subscribe(Tt(t,Hn=>{l?.(Hn),f?bt(Hn):t.next(Hn)},()=>{Tn=!0},void 0,()=>{if(Tn)try{for(Y--;L.length&&Y<r;){const Hn=L.shift();m?Vr(t,m,()=>Wt(Hn)):Wt(Hn)}st()}catch(Hn){t.error(Hn)}}))};return e.subscribe(Tt(t,bt,()=>{He=!0,st()})),()=>{S?.()}}(r,l,e,n)))}const Cn=new Dt(e=>e.complete());function zr(e){return e[e.length-1]}function ci(e){return function jr(e){return e&&Er(e.schedule)}(zr(e))?e.pop():void 0}function Vi(e,t=0){return Yt((n,r)=>{n.subscribe(Tt(r,l=>Vr(r,e,()=>r.next(l),t),()=>Vr(r,e,()=>r.complete(),t),l=>Vr(r,e,()=>r.error(l),t)))})}function Ii(e,t=0){return Yt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function To(e,t){if(!e)throw new Error("Iterable cannot be null");return new Dt(n=>{Vr(n,t,()=>{const r=e[Symbol.asyncIterator]();Vr(n,t,()=>{r.next().then(l=>{l.done?n.complete():n.next(l.value)})},0,!0)})})}function Ma(e,t){return t?function vs(e,t){if(null!=e){if(un(e))return function lo(e,t){return On(e).pipe(Ii(t),Vi(t))}(e,t);if(Io(e))return function Ja(e,t){return new Dt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(cn(e))return function Qa(e,t){return On(e).pipe(Ii(t),Vi(t))}(e,t);if(rn(e))return To(e,t);if(kt(e))return function ta(e,t){return new Dt(n=>{let r;return Vr(n,t,()=>{r=e[xt](),Vr(n,t,()=>{let l,f;try{({value:l,done:f}=r.next())}catch(m){return void n.error(m)}f?n.complete():n.next(l)},0,!0)}),()=>Er(r?.return)&&r.return()})}(e,t);if(zt(e))return function Kl(e,t){return To(bn(e),t)}(e,t)}throw Ct(e)}(e,t):On(e)}class Us extends ze{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function es(...e){return Ma(e,ci(e))}function pn(e={}){const{connector:t=(()=>new ze),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:l=!0}=e;return f=>{let m,S,L,Y=0,Se=!1,He=!1;const st=()=>{S?.unsubscribe(),S=void 0},bt=()=>{st(),m=L=void 0,Se=He=!1},Wt=()=>{const sn=m;bt(),sn?.unsubscribe()};return Yt((sn,Tn)=>{Y++,!He&&!Se&&st();const Hn=L=L??t();Tn.add(()=>{Y--,0===Y&&!He&&!Se&&(S=Qn(Wt,l))}),Hn.subscribe(Tn),!m&&Y>0&&(m=new be({next:mn=>Hn.next(mn),error:mn=>{He=!0,st(),S=Qn(bt,n,mn),Hn.error(mn)},complete:()=>{Se=!0,st(),S=Qn(bt,r),Hn.complete()}}),On(sn).subscribe(m))})(f)}}function Qn(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new be({next:()=>{r.unsubscribe(),e()}});return On(t(...n)).subscribe(r)}function Sr(e,t){return Yt((n,r)=>{let l=null,f=0,m=!1;const S=()=>m&&!l&&r.complete();n.subscribe(Tt(r,L=>{l?.unsubscribe();let Y=0;const Se=f++;On(e(L,Se)).subscribe(l=Tt(r,He=>r.next(t?t(L,He,Se,Y++):He),()=>{l=null,S()}))},()=>{m=!0,S()}))})}function fi(e,t){return e===t}function _r(e){for(let t in e)if(e[t]===_r)return t;throw Error("Could not find renamed property on target object.")}function si(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function qr(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(qr).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Di(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const li=_r({__forward_ref__:_r});function Kr(e){return e.__forward_ref__=Kr,e.toString=function(){return qr(this())},e}function or(e){return jo(e)?e():e}function jo(e){return"function"==typeof e&&e.hasOwnProperty(li)&&e.__forward_ref__===Kr}function No(e){return e&&!!e.\u0275providers}class Zn extends Error{constructor(t,n){super(function Na(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function br(e){return"string"==typeof e?e:null==e?"":String(e)}function ga(e,t){throw new Zn(-201,!1)}function Yi(e,t){null==e&&function yr(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Wr(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ri(e){return{providers:e.providers||[],imports:e.imports||[]}}function Bs(e){return $l(e,_l)||$l(e,wc)}function $l(e,t){return e.hasOwnProperty(t)?e[t]:null}function Vs(e){return e&&(e.hasOwnProperty(Ku)||e.hasOwnProperty(Xl))?e[Ku]:null}const _l=_r({\u0275prov:_r}),Ku=_r({\u0275inj:_r}),wc=_r({ngInjectableDef:_r}),Xl=_r({ngInjectorDef:_r});var $r=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}($r||{});let Es;function uo(e){const t=Es;return Es=e,t}function Tl(e,t,n){const r=Bs(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&$r.Optional?null:void 0!==t?t:void ga(qr(e))}const ui=globalThis;class lr{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Wr({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ja={},tu="__NG_DI_FLAG__",ns="ngTempTokenPath",ru=/\n/gm,ou="__source";let _s;function pa(e){const t=_s;return _s=e,t}function Gs(e,t=$r.Default){if(void 0===_s)throw new Zn(-203,!1);return null===_s?Tl(e,void 0,t):_s.get(e,t&$r.Optional?null:void 0,t)}function Fr(e,t=$r.Default){return(function Rc(){return Es}()||Gs)(or(e),t)}function Mr(e,t=$r.Default){return Fr(e,Sl(t))}function Sl(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function bl(e){const t=[];for(let n=0;n<e.length;n++){const r=or(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Zn(900,!1);let l,f=$r.Default;for(let m=0;m<r.length;m++){const S=r[m],L=Al(S);"number"==typeof L?-1===L?l=S.token:f|=L:l=S}t.push(Fr(l,f))}else t.push(Fr(r))}return t}function La(e,t){return e[tu]=t,e.prototype[tu]=t,e}function Al(e){return e[tu]}function ma(e){return{toString:e}.toString()}var lu=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(lu||{}),Bo=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Bo||{});const Oa={},oi=[],Zs=_r({\u0275cmp:_r}),va=_r({\u0275dir:_r}),js=_r({\u0275pipe:_r}),Yu=_r({\u0275mod:_r}),fo=_r({\u0275fac:_r}),na=_r({__NG_ELEMENT_ID__:_r}),uu=_r({__NG_ENV_ID__:_r});function Ts(e,t,n){let r=e.length;for(;;){const l=e.indexOf(t,n);if(-1===l)return l;if(0===l||e.charCodeAt(l-1)<=32){const f=t.length;if(l+f===r||e.charCodeAt(l+f)<=32)return l}n=l+1}}function qs(e,t,n){let r=0;for(;r<n.length;){const l=n[r];if("number"==typeof l){if(0!==l)break;r++;const f=n[r++],m=n[r++],S=n[r++];e.setAttribute(t,m,S,f)}else{const f=l,m=n[++r];Fc(f)?e.setProperty(t,f,m):e.setAttribute(t,f,m),r++}}return r}function cu(e){return 3===e||4===e||6===e}function Fc(e){return 64===e.charCodeAt(0)}function Ss(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const l=t[r];"number"==typeof l?n=l:0===n||Qi(e,n,l,null,-1===n||2===n?t[++r]:null)}}return e}function Qi(e,t,n,r,l){let f=0,m=e.length;if(-1===t)m=-1;else for(;f<e.length;){const S=e[f++];if("number"==typeof S){if(S===t){m=-1;break}if(S>t){m=f-1;break}}}for(;f<e.length;){const S=e[f];if("number"==typeof S)break;if(S===n){if(null===r)return void(null!==l&&(e[f+1]=l));if(r===e[f+1])return void(e[f+2]=l)}f++,null!==r&&f++,null!==l&&f++}-1!==m&&(e.splice(m,0,t),f=m+1),e.splice(f++,0,n),null!==r&&e.splice(f++,0,r),null!==l&&e.splice(f++,0,l)}const kc="ng-template";function bs(e,t,n){let r=0,l=!0;for(;r<e.length;){let f=e[r++];if("string"==typeof f&&l){const m=e[r++];if(n&&"class"===f&&-1!==Ts(m.toLowerCase(),t,0))return!0}else{if(1===f){for(;r<e.length&&"string"==typeof(f=e[r++]);)if(f.toLowerCase()===t)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function As(e){return 4===e.type&&e.value!==kc}function jf(e,t,n){return t===(4!==e.type||n?e.value:kc)}function Mi(e,t,n){let r=4;const l=e.attrs||[],f=function qf(e){for(let t=0;t<e.length;t++)if(cu(e[t]))return t;return e.length}(l);let m=!1;for(let S=0;S<t.length;S++){const L=t[S];if("number"!=typeof L){if(!m)if(4&r){if(r=2|1&r,""!==L&&!jf(e,L,n)||""===L&&1===t.length){if(bo(r))return!1;m=!0}}else{const Y=8&r?L:t[++S];if(8&r&&null!==e.attrs){if(!bs(e.attrs,Y,n)){if(bo(r))return!1;m=!0}continue}const He=Ks(8&r?"class":L,l,As(e),n);if(-1===He){if(bo(r))return!1;m=!0;continue}if(""!==Y){let st;st=He>f?"":l[He+1].toLowerCase();const bt=8&r?st:null;if(bt&&-1!==Ts(bt,Y,0)||2&r&&Y!==st){if(bo(r))return!1;m=!0}}}}else{if(!m&&!bo(r)&&!bo(L))return!1;if(m&&bo(L))continue;m=!1,r=L|1&r}}return bo(r)||m}function bo(e){return 0==(1&e)}function Ks(e,t,n,r){if(null===t)return-1;let l=0;if(r||!n){let f=!1;for(;l<t.length;){const m=t[l];if(m===e)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let S=t[++l];for(;"string"==typeof S;)S=t[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function Uc(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Cl(e,t,n=!1){for(let r=0;r<t.length;r++)if(Mi(e,t[r],n))return!0;return!1}function Vc(e,t){return e?":not("+t.trim()+")":t}function Ys(e){let t=e[0],n=1,r=2,l="",f=!1;for(;n<e.length;){let m=e[n];if("string"==typeof m)if(2&r){const S=e[++n];l+="["+m+(S.length>0?'="'+S+'"':"")+"]"}else 8&r?l+="."+m:4&r&&(l+=" "+m);else""!==l&&!bo(m)&&(t+=Vc(f,l),l=""),r=m,f=f||!bo(r);n++}return""!==l&&(t+=Vc(f,l)),t}function Cs(e){return ma(()=>{const t=zu(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===lu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Bo.Emulated,styles:e.styles||oi,_:null,schemas:e.schemas||null,tView:null,id:""};ra(n);const r=e.dependencies;return n.directiveDefs=Ws(r,!1),n.pipeDefs=Ws(r,!0),n.id=function Gc(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const l of n)t=Math.imul(31,t)+l.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function Hc(e){return Xr(e)||ho(e)}function ya(e){return null!==e}function Ea(e){return ma(()=>({type:e.type,bootstrap:e.bootstrap||oi,declarations:e.declarations||oi,imports:e.imports||oi,exports:e.exports||oi,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Dl(e,t){if(null==e)return Oa;const n={};for(const r in e)if(e.hasOwnProperty(r)){let l=e[r],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),n[l]=r,t&&(t[l]=f)}return n}function Pr(e){return ma(()=>{const t=zu(e);return ra(t),t})}function Xr(e){return e[Zs]||null}function ho(e){return e[va]||null}function En(e){return e[js]||null}function zu(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Oa,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||oi,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Dl(e.inputs,t),outputs:Dl(e.outputs)}}function ra(e){e.features?.forEach(t=>t(e))}function Ws(e,t){if(!e)return null;const n=t?En:Hc;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(ya)}const Hi=0,Jn=1,xr=2,wi=3,Lo=4,wl=5,Do=6,is=7,Gi=8,_a=9,os=10,Rr=11,$s=12,Zc=13,Is=14,Ji=15,as=16,qa=17,ia=18,Xs=19,Wu=20,Ka=21,Ya=22,Qs=23,Js=24,kr=25,Rl=1,$u=2,Ta=7,Ds=9,Ao=11;function Oo(e){return Array.isArray(e)&&"object"==typeof e[Rl]}function wo(e){return Array.isArray(e)&&!0===e[Rl]}function Ml(e){return 0!=(4&e.flags)}function Yo(e){return e.componentOffset>-1}function gu(e){return 1==(1&e.flags)}function zo(e){return!!e.template}function oa(e){return 0!=(512&e[xr])}function Pa(e,t){return e.hasOwnProperty(fo)?e[fo]:null}let Pi=null,mu=!1;function Wo(e){const t=Pi;return Pi=e,t}const ec={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ls(e){if(!tl(e)||e.dirty){if(!e.producerMustRecompute(e)&&!zc(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function tc(e){e.dirty=!0,function yu(e){if(void 0===e.liveConsumerNode)return;const t=mu;mu=!0;try{for(const n of e.liveConsumerNode)n.dirty||tc(n)}finally{mu=t}}(e),e.consumerMarkedDirty?.(e)}function Rs(e){return e&&(e.nextProducerIndex=0),Wo(e)}function nc(e,t){if(Wo(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(tl(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)el(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function zc(e){$o(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(ls(n),r!==n.version))return!0}return!1}function rc(e){if($o(e),tl(e))for(let t=0;t<e.producerNode.length;t++)el(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function el(e,t){if(function Ll(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),$o(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)el(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],l=e.liveConsumerNode[t];$o(l),l.producerIndexOfThis[r]=t}}function tl(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function $o(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let $c=null;const U=()=>{},z=(()=>({...ec,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:U}))();class ve{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function fe(){return J}function J(e){return e.type.prototype.ngOnChanges&&(e.setInput=de),pe}function pe(){const e=Oe(this),t=e?.current;if(t){const n=e.previous;if(n===Oa)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function de(e,t,n,r){const l=this.declaredInputs[n],f=Oe(e)||function je(e,t){return e[Ke]=t}(e,{previous:Oa,current:null}),m=f.current||(f.current={}),S=f.previous,L=S[l];m[l]=new ve(L&&L.currentValue,t,S===Oa),e[r]=t}fe.ngInherit=!0;const Ke="__ngSimpleChanges__";function Oe(e){return e[Ke]||null}const Pe=function(e,t,n){};function P(e){for(;Array.isArray(e);)e=e[Hi];return e}function oe(e,t){return P(t[e])}function X(e,t){return P(t[e.index])}function Ae(e,t){return e.data[t]}function Fe(e,t){const n=t[e];return Oo(n)?n:n[Hi]}function We(e,t){return null==t?null:e[t]}function gt(e){e[qa]=0}function ht(e){1024&e[xr]||(e[xr]|=1024,lt(e,1))}function ft(e){1024&e[xr]&&(e[xr]&=-1025,lt(e,-1))}function lt(e,t){let n=e[wi];if(null===n)return;n[wl]+=t;let r=n;for(n=n[wi];null!==n&&(1===t&&1===r[wl]||-1===t&&0===r[wl]);)n[wl]+=t,r=n,n=n[wi]}const _t={lFrame:us(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ve(){return _t.bindingsEnabled}function Mt(){return _t.lFrame.lView}function Dn(){return _t.lFrame.tView}function qn(e){return _t.lFrame.contextLView=e,e[Gi]}function kn(e){return _t.lFrame.contextLView=null,e}function Kn(){let e=zn();for(;null!==e&&64===e.type;)e=e.parent;return e}function zn(){return _t.lFrame.currentTNode}function er(e,t){const n=_t.lFrame;n.currentTNode=e,n.isParent=t}function rr(){return _t.lFrame.isParent}function dt(){return _t.lFrame.bindingIndex++}function Gt(e){const t=_t.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Xt(e,t){const n=_t.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ln(t)}function Ln(e){_t.lFrame.currentDirectiveIndex=e}function di(){return _t.lFrame.currentQueryIndex}function Fi(e){_t.lFrame.currentQueryIndex=e}function Si(e){const t=e[Jn];return 2===t.type?t.declTNode:1===t.type?e[Do]:null}function Ni(e,t,n){if(n&$r.SkipSelf){let l=t,f=e;for(;!(l=l.parent,null!==l||n&$r.Host||(l=Si(f),null===l||(f=f[Is],10&l.type))););if(null===l)return!1;t=l,e=f}const r=_t.lFrame=za();return r.currentTNode=t,r.lView=e,!0}function zi(e){const t=za(),n=e[Jn];_t.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function za(){const e=_t.lFrame,t=null===e?null:e.child;return null===t?us(e):t}function us(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Wa(){const e=_t.lFrame;return _t.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const aa=Wa;function sa(){const e=Wa();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function eo(){return _t.lFrame.selectedIndex}function po(e){_t.lFrame.selectedIndex=e}function Ei(){const e=_t.lFrame;return Ae(e.tView,e.selectedIndex)}let Pt=!0;function vn(){return Pt}function Yn(e){Pt=e}function Lr(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const f=e.data[n].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:S,ngAfterViewInit:L,ngAfterViewChecked:Y,ngOnDestroy:Se}=f;m&&(e.contentHooks??=[]).push(-n,m),S&&((e.contentHooks??=[]).push(n,S),(e.contentCheckHooks??=[]).push(n,S)),L&&(e.viewHooks??=[]).push(-n,L),Y&&((e.viewHooks??=[]).push(n,Y),(e.viewCheckHooks??=[]).push(n,Y)),null!=Se&&(e.destroyHooks??=[]).push(n,Se)}}function Ur(e,t,n){ai(e,t,3,n)}function dr(e,t,n,r){(3&e[xr])===n&&ai(e,t,n,r)}function hi(e,t){let n=e[xr];(3&n)===t&&(n&=8191,n+=1,e[xr]=n)}function ai(e,t,n,r){const f=r??-1,m=t.length-1;let S=0;for(let L=void 0!==r?65535&e[qa]:0;L<m;L++)if("number"==typeof t[L+1]){if(S=t[L],null!=r&&S>=r)break}else t[L]<0&&(e[qa]+=65536),(S<f||-1==f)&&(il(e,n,t,L),e[qa]=(4294901760&e[qa])+L+2),L++}function Ua(e,t){Pe(4,e,t);const n=Wo(null);try{t.call(e)}finally{Wo(n),Pe(5,e,t)}}function il(e,t,n,r){const l=n[r]<0,f=n[r+1],S=e[l?-n[r]:n[r]];l?e[xr]>>13<e[qa]>>16&&(3&e[xr])===t&&(e[xr]+=8192,Ua(S,f)):Ua(S,f)}const Fl=-1;class ac{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Jc(e){return e!==Fl}function Tu(e){return 32767&e}function Su(e,t){let n=function cp(e){return e>>16}(e),r=t;for(;n>0;)r=r[Is],n--;return r}let ud=!0;function ef(e){const t=ud;return ud=e,t}const ph=255,mh=5;let dp=0;const ds={};function tf(e,t){const n=vh(e,t);if(-1!==n)return n;const r=t[Jn];r.firstCreatePass&&(e.injectorIndex=t.length,cd(r.data,e),cd(t,null),cd(r.blueprint,null));const l=sc(e,t),f=e.injectorIndex;if(Jc(l)){const m=Tu(l),S=Su(l,t),L=S[Jn].data;for(let Y=0;Y<8;Y++)t[f+Y]=S[m+Y]|L[m+Y]}return t[f+8]=l,f}function cd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function vh(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function sc(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,l=t;for(;null!==l;){if(r=hd(l),null===r)return Fl;if(n++,l=l[Is],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Fl}function fd(e,t,n){!function hp(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(na)&&(r=n[na]),null==r&&(r=n[na]=dp++);const l=r&ph;t.data[e+(l>>mh)]|=1<<l}(e,t,n)}function nf(e,t,n){if(n&$r.Optional||void 0!==e)return e;ga()}function yh(e,t,n,r){if(n&$r.Optional&&void 0===r&&(r=null),!(n&($r.Self|$r.Host))){const l=e[_a],f=uo(void 0);try{return l?l.get(t,r,n&$r.Optional):Tl(t,r,n&$r.Optional)}finally{uo(f)}}return nf(r,0,n)}function rf(e,t,n,r=$r.Default,l){if(null!==e){if(2048&t[xr]&&!(r&$r.Self)){const m=function mp(e,t,n,r,l){let f=e,m=t;for(;null!==f&&null!==m&&2048&m[xr]&&!(512&m[xr]);){const S=Eh(f,m,n,r|$r.Self,ds);if(S!==ds)return S;let L=f.parent;if(!L){const Y=m[Wu];if(Y){const Se=Y.get(n,ds,r);if(Se!==ds)return Se}L=hd(m),m=m[Is]}f=L}return l}(e,t,n,r,ds);if(m!==ds)return m}const f=Eh(e,t,n,r,ds);if(f!==ds)return f}return yh(t,n,r,l)}function Eh(e,t,n,r,l){const f=function Th(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(na)?e[na]:void 0;return"number"==typeof t?t>=0?t&ph:pp:t}(n);if("function"==typeof f){if(!Ni(t,e,r))return r&$r.Host?nf(l,0,r):yh(t,n,r,l);try{let m;if(m=f(r),null!=m||r&$r.Optional)return m;ga()}finally{aa()}}else if("number"==typeof f){let m=null,S=vh(e,t),L=Fl,Y=r&$r.Host?t[Ji][Do]:null;for((-1===S||r&$r.SkipSelf)&&(L=-1===S?sc(e,t):t[S+8],L!==Fl&&bh(r,!1)?(m=t[Jn],S=Tu(L),t=Su(L,t)):S=-1);-1!==S;){const Se=t[Jn];if(Sh(f,S,Se.data)){const He=_h(S,t,n,m,r,Y);if(He!==ds)return He}L=t[S+8],L!==Fl&&bh(r,t[Jn].data[S+8]===Y)&&Sh(f,S,t)?(m=Se,S=Tu(L),t=Su(L,t)):S=-1}}return l}function _h(e,t,n,r,l,f){const m=t[Jn],S=m.data[e+8],Se=af(S,m,n,null==r?Yo(S)&&ud:r!=m&&0!=(3&S.type),l&$r.Host&&f===S);return null!==Se?ol(t,m,Se,S):ds}function af(e,t,n,r,l){const f=e.providerIndexes,m=t.data,S=1048575&f,L=e.directiveStart,Se=f>>20,st=l?S+Se:e.directiveEnd;for(let bt=r?S:S+Se;bt<st;bt++){const Wt=m[bt];if(bt<L&&n===Wt||bt>=L&&Wt.type===n)return bt}if(l){const bt=m[L];if(bt&&zo(bt)&&bt.type===n)return L}return null}function ol(e,t,n,r){let l=e[n];const f=t.data;if(function ap(e){return e instanceof ac}(l)){const m=l;m.resolving&&function Yl(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Zn(-200,`Circular dependency in DI detected for ${e}${n}`)}(function ii(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():br(e)}(f[n]));const S=ef(m.canSeeViewProviders);m.resolving=!0;const Y=m.injectImpl?uo(m.injectImpl):null;Ni(e,r,$r.Default);try{l=e[n]=m.factory(void 0,f,e,r),t.firstCreatePass&&n>=r.directiveStart&&function hr(e,t,n){const{ngOnChanges:r,ngOnInit:l,ngDoCheck:f}=t.type.prototype;if(r){const m=J(t);(n.preOrderHooks??=[]).push(e,m),(n.preOrderCheckHooks??=[]).push(e,m)}l&&(n.preOrderHooks??=[]).push(0-e,l),f&&((n.preOrderHooks??=[]).push(e,f),(n.preOrderCheckHooks??=[]).push(e,f))}(n,f[n],t)}finally{null!==Y&&uo(Y),ef(S),m.resolving=!1,aa()}}return l}function Sh(e,t,n){return!!(n[t+(e>>mh)]&1<<e)}function bh(e,t){return!(e&$r.Self||e&$r.Host&&t)}class Xo{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return rf(this._tNode,this._lView,t,Sl(r),n)}}function pp(){return new Xo(Kn(),Mt())}function Ho(e){return ma(()=>{const t=e.prototype.constructor,n=t[fo]||dd(t),r=Object.prototype;let l=Object.getPrototypeOf(e.prototype).constructor;for(;l&&l!==r;){const f=l[fo]||dd(l);if(f&&f!==n)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function dd(e){return jo(e)?()=>{const t=dd(or(e));return t&&t()}:Pa(e)}function hd(e){const t=e[Jn],n=t.type;return 2===n?t.declTNode:1===n?e[Do]:null}const c="__parameters__";function h(e,t,n){return ma(()=>{const r=function u(e){return function(...n){if(e){const r=e(...n);for(const l in r)this[l]=r[l]}}}(t);function l(...f){if(this instanceof l)return r.apply(this,f),this;const m=new l(...f);return S.annotation=m,S;function S(L,Y,Se){const He=L.hasOwnProperty(c)?L[c]:Object.defineProperty(L,c,{value:[]})[c];for(;He.length<=Se;)He.push(null);return(He[Se]=He[Se]||[]).push(m),L}}return n&&(l.prototype=Object.create(n.prototype)),l.prototype.ngMetadataName=e,l.annotationCls=l,l})}function Ht(e,t){e.forEach(n=>Array.isArray(n)?Ht(n,t):t(n))}function Nt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function en(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function nr(e,t,n){let r=Nr(e,t);return r>=0?e[1|r]=n:(r=~r,function $n(e,t,n,r){let l=e.length;if(l==t)e.push(n,r);else if(1===l)e.push(r,e[0]),e[0]=n;else{for(l--,e.push(e[l-1],e[l]);l>t;)e[l]=e[l-2],l--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Hr(e,t){const n=Nr(e,t);if(n>=0)return e[1|n]}function Nr(e,t){return function Qr(e,t,n){let r=0,l=e.length>>n;for(;l!==r;){const f=r+(l-r>>1),m=e[f<<n];if(t===m)return f<<n;m>t?l=f:r=f+1}return~(l<<n)}(e,t,1)}const Qo=La(h("Optional"),8),ko=La(h("SkipSelf"),4);function Rh(e){return 128==(128&e.flags)}var Iu=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Iu||{});const Tp=new Map;let $A=0;const bp="__ngContext__";function ua(e,t){Oo(t)?(e[bp]=t[Xs],function QA(e){Tp.set(e[Xs],e)}(t)):e[bp]=t}let Ap;function Cp(e,t){return Ap(e,t)}function Ed(e){const t=e[wi];return wo(t)?t[wi]:t}function Vy(e){return Gy(e[$s])}function Hy(e){return Gy(e[Lo])}function Gy(e){for(;null!==e&&!wo(e);)e=e[Lo];return e}function cf(e,t,n,r,l){if(null!=r){let f,m=!1;wo(r)?f=r:Oo(r)&&(m=!0,r=r[Hi]);const S=P(r);0===e&&null!==n?null==l?Ky(t,n,S):uc(t,n,S,l||null,!0):1===e&&null!==n?uc(t,n,S,l||null,!0):2===e?function Fh(e,t,n){const r=Oh(e,t);r&&function vC(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,S,m):3===e&&t.destroyNode(S),null!=f&&function _C(e,t,n,r,l){const f=n[Ta];f!==P(n)&&cf(t,e,r,f,l);for(let S=Ao;S<n.length;S++){const L=n[S];Td(L[Jn],L,e,t,r,f)}}(t,e,f,n,l)}}function xh(e,t,n){return e.createElement(t,n)}function jy(e,t){const n=e[Ds],r=n.indexOf(t);ft(t),n.splice(r,1)}function Lh(e,t){if(e.length<=Ao)return;const n=Ao+t,r=e[n];if(r){const l=r[as];null!==l&&l!==e&&jy(l,r),t>0&&(e[n-1][Lo]=r[Lo]);const f=en(e,Ao+t);!function uC(e,t){Td(e,t,t[Rr],2,null,null),t[Hi]=null,t[Do]=null}(r[Jn],r);const m=f[ia];null!==m&&m.detachView(f[Jn]),r[wi]=null,r[Lo]=null,r[xr]&=-129}return r}function Dp(e,t){if(!(256&t[xr])){const n=t[Rr];t[Qs]&&rc(t[Qs]),t[Js]&&rc(t[Js]),n.destroyNode&&Td(e,t,n,3,null,null),function dC(e){let t=e[$s];if(!t)return wp(e[Jn],e);for(;t;){let n=null;if(Oo(t))n=t[$s];else{const r=t[Ao];r&&(n=r)}if(!n){for(;t&&!t[Lo]&&t!==e;)Oo(t)&&wp(t[Jn],t),t=t[wi];null===t&&(t=e),Oo(t)&&wp(t[Jn],t),n=t&&t[Lo]}t=n}}(t)}}function wp(e,t){if(!(256&t[xr])){t[xr]&=-129,t[xr]|=256,function mC(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const l=t[n[r]];if(!(l instanceof ac)){const f=n[r+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const S=l[f[m]],L=f[m+1];Pe(4,S,L);try{L.call(S)}finally{Pe(5,S,L)}}else{Pe(4,l,f);try{f.call(l)}finally{Pe(5,l,f)}}}}}(e,t),function pC(e,t){const n=e.cleanup,r=t[is];if(null!==n)for(let f=0;f<n.length-1;f+=2)if("string"==typeof n[f]){const m=n[f+3];m>=0?r[m]():r[-m].unsubscribe(),f+=2}else n[f].call(r[n[f+1]]);null!==r&&(t[is]=null);const l=t[Ka];if(null!==l){t[Ka]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(e,t),1===t[Jn].type&&t[Rr].destroy();const n=t[as];if(null!==n&&wo(t[wi])){n!==t[wi]&&jy(n,t);const r=t[ia];null!==r&&r.detachView(e)}!function JA(e){Tp.delete(e[Xs])}(t)}}function Rp(e,t,n){return function qy(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Hi];{const{componentOffset:l}=r;if(l>-1){const{encapsulation:f}=e.data[r.directiveStart+l];if(f===Bo.None||f===Bo.Emulated)return null}return X(r,n)}}(e,t.parent,n)}function uc(e,t,n,r,l){e.insertBefore(t,n,r,l)}function Ky(e,t,n){e.appendChild(t,n)}function Yy(e,t,n,r,l){null!==r?uc(e,t,n,r,l):Ky(e,t,n)}function Oh(e,t){return e.parentNode(t)}let Mp,kh,Op,$y=function Wy(e,t,n){return 40&e.type?X(e,n):null};function Ph(e,t,n,r){const l=Rp(e,r,t),f=t[Rr],S=function zy(e,t,n){return $y(e,t,n)}(r.parent||t[Do],r,t);if(null!=l)if(Array.isArray(n))for(let L=0;L<n.length;L++)Yy(f,l,n[L],S,!1);else Yy(f,l,n,S,!1);void 0!==Mp&&Mp(f,r,t,n,l)}function _d(e,t){if(null!==t){const n=t.type;if(3&n)return X(t,e);if(4&n)return Np(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return _d(e,r);{const l=e[t.index];return wo(l)?Np(-1,l):P(l)}}if(32&n)return Cp(t,e)()||P(e[t.index]);{const r=Qy(e,t);return null!==r?Array.isArray(r)?r[0]:_d(Ed(e[Ji]),r):_d(e,t.next)}}return null}function Qy(e,t){return null!==t?e[Ji][Do].projection[t.projection]:null}function Np(e,t){const n=Ao+e+1;if(n<t.length){const r=t[n],l=r[Jn].firstChild;if(null!==l)return _d(r,l)}return t[Ta]}function xp(e,t,n,r,l,f,m){for(;null!=n;){const S=r[n.index],L=n.type;if(m&&0===t&&(S&&ua(P(S),r),n.flags|=2),32!=(32&n.flags))if(8&L)xp(e,t,n.child,r,l,f,!1),cf(t,e,l,S,f);else if(32&L){const Y=Cp(n,r);let Se;for(;Se=Y();)cf(t,e,l,Se,f);cf(t,e,l,S,f)}else 16&L?eE(e,t,r,n,l,f):cf(t,e,l,S,f);n=m?n.projectionNext:n.next}}function Td(e,t,n,r,l,f){xp(n,r,e.firstChild,t,l,f,!1)}function eE(e,t,n,r,l,f){const m=n[Ji],L=m[Do].projection[r.projection];if(Array.isArray(L))for(let Y=0;Y<L.length;Y++)cf(t,e,l,L[Y],f);else{let Y=L;const Se=m[wi];Rh(r)&&(Y.flags|=128),xp(e,t,Y,Se,l,f,!0)}}function tE(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function nE(e,t,n){const{mergedAttrs:r,classes:l,styles:f}=n;null!==r&&qs(e,t,r),null!==l&&tE(e,t,l),null!==f&&function SC(e,t,n){e.setAttribute(t,"style",n)}(e,t,f)}class aE{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function pE(e){return function AC(e){return function Lp(){if(void 0===kh&&(kh=null,ui.trustedTypes))try{kh=ui.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return kh}()?.createScriptURL(e)||e}(e[0])}const Vh=new lr("ENVIRONMENT_INITIALIZER"),mE=new lr("INJECTOR",-1),vE=new lr("INJECTOR_DEF_TYPES");class Vp{get(t,n=ja){if(n===ja){const r=new Error(`NullInjectorError: No provider for ${qr(t)}!`);throw r.name="NullInjectorError",r}return n}}function WC(...e){return{\u0275providers:yE(0,e),\u0275fromNgModule:!0}}function yE(e,...t){const n=[],r=new Set;let l;const f=m=>{n.push(m)};return Ht(t,m=>{const S=m;Hh(S,f,[],r)&&(l||=[],l.push(S))}),void 0!==l&&EE(l,f),n}function EE(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:l}=e[n];Gp(l,f=>{t(f,r)})}}function Hh(e,t,n,r){if(!(e=or(e)))return!1;let l=null,f=Vs(e);const m=!f&&Xr(e);if(f||m){if(m&&!m.standalone)return!1;l=e}else{const L=e.ngModule;if(f=Vs(L),!f)return!1;l=L}const S=r.has(l);if(m){if(S)return!1;if(r.add(l),m.dependencies){const L="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const Y of L)Hh(Y,t,n,r)}}else{if(!f)return!1;{if(null!=f.imports&&!S){let Y;r.add(l);try{Ht(f.imports,Se=>{Hh(Se,t,n,r)&&(Y||=[],Y.push(Se))})}finally{}void 0!==Y&&EE(Y,t)}if(!S){const Y=Pa(l)||(()=>new l);t({provide:l,useFactory:Y,deps:oi},l),t({provide:vE,useValue:l,multi:!0},l),t({provide:Vh,useValue:()=>Fr(l),multi:!0},l)}const L=f.providers;if(null!=L&&!S){const Y=e;Gp(L,Se=>{t(Se,Y)})}}}return l!==e&&void 0!==e.providers}function Gp(e,t){for(let n of e)No(n)&&(n=n.\u0275providers),Array.isArray(n)?Gp(n,t):t(n)}const $C=_r({provide:String,useValue:_r});function Zp(e){return null!==e&&"object"==typeof e&&$C in e}function cc(e){return"function"==typeof e}const jp=new lr("Set Injector scope."),Gh={},QC={};let qp;function Zh(){return void 0===qp&&(qp=new Vp),qp}class al{}class gf extends al{get destroyed(){return this._destroyed}constructor(t,n,r,l){super(),this.parent=n,this.source=r,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yp(t,m=>this.processProvider(m)),this.records.set(mE,pf(void 0,this)),l.has("environment")&&this.records.set(al,pf(void 0,this));const f=this.records.get(jp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(vE.multi,oi,$r.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=pa(this),r=uo(void 0);try{return t()}finally{pa(n),uo(r)}}get(t,n=ja,r=$r.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(uu))return t[uu](this);r=Sl(r);const f=pa(this),m=uo(void 0);try{if(!(r&$r.SkipSelf)){let L=this.records.get(t);if(void 0===L){const Y=function rI(e){return"function"==typeof e||"object"==typeof e&&e instanceof lr}(t)&&Bs(t);L=Y&&this.injectableDefInScope(Y)?pf(Kp(t),Gh):null,this.records.set(t,L)}if(null!=L)return this.hydrate(t,L)}return(r&$r.Self?Zh():this.parent).get(t,n=r&$r.Optional&&n===ja?null:n)}catch(S){if("NullInjectorError"===S.name){if((S[ns]=S[ns]||[]).unshift(qr(t)),f)throw S;return function su(e,t,n,r){const l=e[ns];throw t[ou]&&l.unshift(t[ou]),e.message=function mi(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let l=qr(t);if(Array.isArray(t))l=t.map(qr).join(" -> ");else if("object"==typeof t){let f=[];for(let m in t)if(t.hasOwnProperty(m)){let S=t[m];f.push(m+":"+("string"==typeof S?JSON.stringify(S):qr(S)))}l=`{${f.join(", ")}}`}return`${n}${r?"("+r+")":""}[${l}]: ${e.replace(ru,"\n  ")}`}("\n"+e.message,l,n,r),e.ngTokenPath=l,e[ns]=null,e}(S,t,"R3InjectorError",this.source)}throw S}finally{uo(m),pa(f)}}resolveInjectorInitializers(){const t=pa(this),n=uo(void 0);try{const l=this.get(Vh.multi,oi,$r.Self);for(const f of l)f()}finally{pa(t),uo(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(qr(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Zn(205,!1)}processProvider(t){let n=cc(t=or(t))?t:or(t&&t.provide);const r=function eI(e){return Zp(e)?pf(void 0,e.useValue):pf(SE(e),Gh)}(t);if(cc(t)||!0!==t.multi)this.records.get(n);else{let l=this.records.get(n);l||(l=pf(void 0,Gh,!0),l.factory=()=>bl(l.multi),this.records.set(n,l)),n=t,l.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Gh&&(n.value=QC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function nI(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=or(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Kp(e){const t=Bs(e),n=null!==t?t.factory:Pa(e);if(null!==n)return n;if(e instanceof lr)throw new Zn(204,!1);if(e instanceof Function)return function JC(e){const t=e.length;if(t>0)throw function tn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new Zn(204,!1);const n=function El(e){return e&&(e[_l]||e[wc])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Zn(204,!1)}function SE(e,t,n){let r;if(cc(e)){const l=or(e);return Pa(l)||Kp(l)}if(Zp(e))r=()=>or(e.useValue);else if(function TE(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...bl(e.deps||[]));else if(function _E(e){return!(!e||!e.useExisting)}(e))r=()=>Fr(or(e.useExisting));else{const l=or(e&&(e.useClass||e.provide));if(!function tI(e){return!!e.deps}(e))return Pa(l)||Kp(l);r=()=>new l(...bl(e.deps))}return r}function pf(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Yp(e,t){for(const n of e)Array.isArray(n)?Yp(n,t):n&&No(n)?Yp(n.\u0275providers,t):t(n)}const jh=new lr("AppId",{providedIn:"root",factory:()=>iI}),iI="ng",bE=new lr("Platform Initializer"),fc=new lr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),AE=new lr("CSP nonce",{providedIn:"root",factory:()=>function df(){if(void 0!==Op)return Op;if(typeof document<"u")return document;throw new Zn(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let CE=(e,t,n)=>null;function tm(e,t,n=!1){return CE(e,t,n)}class gI{}class wE{}class mI{resolveComponentFactory(t){throw function pI(e){const t=Error(`No component factory found for ${qr(e)}.`);return t.ngComponent=e,t}(t)}}let $h=(()=>{class e{static#e=this.NULL=new mI}return e})();function vI(){return yf(Kn(),Mt())}function yf(e,t){return new xs(X(e,t))}let xs=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=vI}return e})();function yI(e){return e instanceof xs?e.nativeElement:e}class ME{}let dc=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function EI(){const e=Mt(),n=Fe(Kn().index,e);return(Oo(n)?n:e)[Rr]}()}return e})(),_I=(()=>{class e{static#e=this.\u0275prov=Wr({token:e,providedIn:"root",factory:()=>null})}return e})();class Xh{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const TI=new Xh("16.2.12"),im={};function OE(e,t=null,n=null,r){const l=PE(e,t,n,r);return l.resolveInjectorInitializers(),l}function PE(e,t=null,n=null,r,l=new Set){const f=[n||oi,WC(e)];return r=r||("object"==typeof e?void 0:qr(e)),new gf(f,t||Zh(),r||null,l)}let Ls=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=ja;static#t=this.NULL=new Vp;static create(n,r){if(Array.isArray(n))return OE({name:""},r,n,"");{const l=n.name??"";return OE({name:l},n.parent,n.providers,l)}}static#n=this.\u0275prov=Wr({token:e,providedIn:"any",factory:()=>Fr(mE)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function am(e){return e.ngOriginalError}class Ul{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&am(t);for(;n&&am(n);)n=am(n);return n||null}}function lm(e){return t=>{setTimeout(e,void 0,t)}}const qi=class wI extends ze{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let l=t,f=n||(()=>null),m=r;if(t&&"object"==typeof t){const L=t;l=L.next?.bind(L),f=L.error?.bind(L),m=L.complete?.bind(L)}this.__isAsync&&(f=lm(f),l&&(l=lm(l)),m&&(m=lm(m)));const S=super.subscribe({next:l,error:f,complete:m});return t instanceof ne&&t.add(S),S}};function kE(...e){}class mo{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qi(!1),this.onMicrotaskEmpty=new qi(!1),this.onStable=new qi(!1),this.onError=new qi(!1),typeof Zone>"u")throw new Zn(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!r&&n,l.shouldCoalesceRunChangeDetection=r,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function RI(){const e="function"==typeof ui.requestAnimationFrame;let t=ui[e?"requestAnimationFrame":"setTimeout"],n=ui[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function xI(e){const t=()=>{!function NI(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ui,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,cm(e),e.isCheckStableRunning=!0,um(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),cm(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,l,f,m,S)=>{if(function OI(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(S))return n.invokeTask(l,f,m,S);try{return UE(e),n.invokeTask(l,f,m,S)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||e.shouldCoalesceRunChangeDetection)&&t(),BE(e)}},onInvoke:(n,r,l,f,m,S,L)=>{try{return UE(e),n.invoke(l,f,m,S,L)}finally{e.shouldCoalesceRunChangeDetection&&t(),BE(e)}},onHasTask:(n,r,l,f)=>{n.hasTask(l,f),r===l&&("microTask"==f.change?(e._hasPendingMicrotasks=f.microTask,cm(e),um(e)):"macroTask"==f.change&&(e.hasPendingMacrotasks=f.macroTask))},onHandleError:(n,r,l,f)=>(n.handleError(l,f),e.runOutsideAngular(()=>e.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mo.isInAngularZone())throw new Zn(909,!1)}static assertNotInAngularZone(){if(mo.isInAngularZone())throw new Zn(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,t,MI,kE,kE);try{return f.runTask(m,n,r)}finally{f.cancelTask(m)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const MI={};function um(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function cm(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function UE(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function BE(e){e._nesting--,um(e)}class LI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qi,this.onMicrotaskEmpty=new qi,this.onStable=new qi,this.onError=new qi}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,l){return t.apply(n,r)}}const VE=new lr("",{providedIn:"root",factory:HE});function HE(){const e=Mr(mo);let t=!0;return function ml(...e){const t=ci(e),n=function pi(e,t){return"number"==typeof zr(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?On(r[0]):function hn(e=1/0){return nn(Me,e)}(n)(Ma(r,t)):Cn}(new Dt(l=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{l.next(t),l.complete()})}),new Dt(l=>{let f;e.runOutsideAngular(()=>{f=e.onStable.subscribe(()=>{mo.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,l.next(!0))})})});const m=e.onUnstable.subscribe(()=>{mo.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}}).pipe(pn()))}function fm(e){return e.ownerDocument.defaultView}let dm=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Wr({token:e,providedIn:"root",factory:()=>new e})}return e})();function Dd(e){for(;e;){e[xr]|=64;const t=Ed(e);if(oa(e)&&!t)return e;e=t}return null}const KE=new lr("",{providedIn:"root",factory:()=>!1});let Jh=null;function $E(e,t){return e[t]??JE()}function XE(e,t){const n=JE();n.producerNode?.length&&(e[t]=Jh,n.lView=e,Jh=QE())}const ZI={...ec,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Dd(e.lView)},lView:null};function QE(){return Object.create(ZI)}function JE(){return Jh??=QE(),Jh}const Zr={};function Tr(e){e0(Dn(),Mt(),eo()+e,!1)}function e0(e,t,n,r){if(!r)if(3==(3&t[xr])){const f=e.preOrderCheckHooks;null!==f&&Ur(t,f,n)}else{const f=e.preOrderHooks;null!==f&&dr(t,f,0,n)}po(n)}function Fn(e,t=$r.Default){const n=Mt();return null===n?Fr(e,t):rf(Kn(),n,or(e),t)}function eg(e,t,n,r,l,f,m,S,L,Y,Se){const He=t.blueprint.slice();return He[Hi]=l,He[xr]=140|r,(null!==Y||e&&2048&e[xr])&&(He[xr]|=2048),gt(He),He[wi]=He[Is]=e,He[Gi]=n,He[os]=m||e&&e[os],He[Rr]=S||e&&e[Rr],He[_a]=L||e&&e[_a]||null,He[Do]=f,He[Xs]=function XA(){return $A++}(),He[Ya]=Se,He[Wu]=Y,He[Ji]=2==t.type?e[Ji]:He,He}function Tf(e,t,n,r,l){let f=e.data[t];if(null===f)f=function hm(e,t,n,r,l){const f=zn(),m=rr(),L=e.data[t]=function QI(e,t,n,r,l,f){let m=t?t.injectorIndex:-1,S=0;return function ut(){return null!==_t.skipHydrationRootTNode}()&&(S|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,n,t,r,l);return null===e.firstChild&&(e.firstChild=L),null!==f&&(m?null==f.child&&null!==L.parent&&(f.child=L):null===f.next&&(f.next=L,L.prev=f)),L}(e,t,n,r,l),function Re(){return _t.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=n,f.value=r,f.attrs=l;const m=function ar(){const e=_t.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return er(f,!0),f}function wd(e,t,n,r){if(0===n)return-1;const l=t.length;for(let f=0;f<n;f++)t.push(r),e.blueprint.push(r),e.data.push(null);return l}function t0(e,t,n,r,l){const f=$E(t,Qs),m=eo(),S=2&r;try{po(-1),S&&t.length>kr&&e0(e,t,kr,!1),Pe(S?2:0,l);const Y=S?f:null,Se=Rs(Y);try{null!==Y&&(Y.dirty=!1),n(r,l)}finally{nc(Y,Se)}}finally{S&&null===t[Qs]&&XE(t,Qs),po(m),Pe(S?3:1,l)}}function gm(e,t,n){if(Ml(t)){const r=Wo(null);try{const f=t.directiveEnd;for(let m=t.directiveStart;m<f;m++){const S=e.data[m];S.contentQueries&&S.contentQueries(1,n[m],m)}}finally{Wo(r)}}}function pm(e,t,n){Ve()&&(function oD(e,t,n,r){const l=n.directiveStart,f=n.directiveEnd;Yo(n)&&function dD(e,t,n){const r=X(t,e),l=n0(n);let m=16;n.signals?m=4096:n.onPush&&(m=64);const S=tg(e,eg(e,l,null,m,r,t,null,e[os].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=S}(t,n,e.data[l+n.componentOffset]),e.firstCreatePass||tf(n,t),ua(r,t);const m=n.initialInputs;for(let S=l;S<f;S++){const L=e.data[S],Y=ol(t,e,S,n);ua(Y,t),null!==m&&hD(0,S-l,Y,L,0,m),zo(L)&&(Fe(n.index,t)[Gi]=ol(t,e,S,n))}}(e,t,n,X(n,t)),64==(64&n.flags)&&l0(e,t,n))}function mm(e,t,n=X){const r=t.localNames;if(null!==r){let l=t.index+1;for(let f=0;f<r.length;f+=2){const m=r[f+1],S=-1===m?n(t,e):e[m];e[l++]=S}}}function n0(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=vm(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function vm(e,t,n,r,l,f,m,S,L,Y,Se){const He=kr+r,st=He+l,bt=function KI(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Zr);return n}(He,st),Wt="function"==typeof Y?Y():Y;return bt[Jn]={type:e,blueprint:bt,template:n,queries:null,viewQuery:S,declTNode:t,data:bt.slice().fill(null,He),bindingStartIndex:He,expandoStartIndex:st,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:L,consts:Wt,incompleteFirstPass:!1,ssrId:Se}}let r0=e=>null;function o0(e,t,n,r){for(let l in e)if(e.hasOwnProperty(l)){n=null===n?{}:n;const f=e[l];null===r?a0(n,t,l,f):r.hasOwnProperty(l)&&a0(n,t,r[l],f)}return n}function a0(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function ym(e,t,n,r){if(Ve()){const l=null===r?null:{"":-1},f=function sD(e,t){const n=e.directiveRegistry;let r=null,l=null;if(n)for(let f=0;f<n.length;f++){const m=n[f];if(Cl(t,m.selectors,!1))if(r||(r=[]),zo(m))if(null!==m.findHostDirectiveDefs){const S=[];l=l||new Map,m.findHostDirectiveDefs(m,S,l),r.unshift(...S,m),Em(e,t,S.length)}else r.unshift(m),Em(e,t,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,r,l),r.push(m)}return null===r?null:[r,l]}(e,n);let m,S;null===f?m=S=null:[m,S]=f,null!==m&&s0(e,t,n,m,l,S),l&&function lD(e,t,n){if(t){const r=e.localNames=[];for(let l=0;l<t.length;l+=2){const f=n[t[l+1]];if(null==f)throw new Zn(-301,!1);r.push(t[l],f)}}}(n,r,l)}n.mergedAttrs=Ss(n.mergedAttrs,n.attrs)}function s0(e,t,n,r,l,f){for(let Y=0;Y<r.length;Y++)fd(tf(n,t),e,r[Y].type);!function cD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let Y=0;Y<r.length;Y++){const Se=r[Y];Se.providersResolver&&Se.providersResolver(Se)}let m=!1,S=!1,L=wd(e,t,r.length,null);for(let Y=0;Y<r.length;Y++){const Se=r[Y];n.mergedAttrs=Ss(n.mergedAttrs,Se.hostAttrs),fD(e,n,t,L,Se),uD(L,Se,l),null!==Se.contentQueries&&(n.flags|=4),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(n.flags|=64);const He=Se.type.prototype;!m&&(He.ngOnChanges||He.ngOnInit||He.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),m=!0),!S&&(He.ngOnChanges||He.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),S=!0),L++}!function JI(e,t,n){const l=t.directiveEnd,f=e.data,m=t.attrs,S=[];let L=null,Y=null;for(let Se=t.directiveStart;Se<l;Se++){const He=f[Se],st=n?n.get(He):null,Wt=st?st.outputs:null;L=o0(He.inputs,Se,L,st?st.inputs:null),Y=o0(He.outputs,Se,Y,Wt);const sn=null===L||null===m||As(t)?null:gD(L,Se,m);S.push(sn)}null!==L&&(L.hasOwnProperty("class")&&(t.flags|=8),L.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=S,t.inputs=L,t.outputs=Y}(e,n,f)}function l0(e,t,n){const r=n.directiveStart,l=n.directiveEnd,f=n.index,m=function dn(){return _t.lFrame.currentDirectiveIndex}();try{po(f);for(let S=r;S<l;S++){const L=e.data[S],Y=t[S];Ln(S),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&aD(L,Y)}}finally{po(-1),Ln(m)}}function aD(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Em(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function uD(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;zo(t)&&(n[""]=e)}}function fD(e,t,n,r,l){e.data[r]=l;const f=l.factory||(l.factory=Pa(l.type)),m=new ac(f,zo(l),Fn);e.blueprint[r]=m,n[r]=m,function rD(e,t,n,r,l){const f=l.hostBindings;if(f){let m=e.hostBindingOpCodes;null===m&&(m=e.hostBindingOpCodes=[]);const S=~t.index;(function iD(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(m)!=S&&m.push(S),m.push(n,r,f)}}(e,t,r,wd(e,n,l.hostVars,Zr),l)}function sl(e,t,n,r,l,f){const m=X(e,t);!function _m(e,t,n,r,l,f,m){if(null==f)e.removeAttribute(t,l,n);else{const S=null==m?br(f):m(f,r||"",l);e.setAttribute(t,l,S,n)}}(t[Rr],m,f,e.value,n,r,l)}function hD(e,t,n,r,l,f){const m=f[t];if(null!==m)for(let S=0;S<m.length;)u0(r,n,m[S++],m[S++],m[S++])}function u0(e,t,n,r,l){const f=Wo(null);try{const m=e.inputTransforms;null!==m&&m.hasOwnProperty(r)&&(l=m[r].call(t,l)),null!==e.setInput?e.setInput(t,l,n,r):t[r]=l}finally{Wo(f)}}function gD(e,t,n){let r=null,l=0;for(;l<n.length;){const f=n[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(e.hasOwnProperty(f)){null===r&&(r=[]);const m=e[f];for(let S=0;S<m.length;S+=2)if(m[S]===t){r.push(f,m[S+1],n[l+1]);break}}l+=2}else l+=2;else l+=4}return r}function c0(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function f0(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const f=n[r+1];if(-1!==f){const m=e.data[f];Fi(n[r]),m.contentQueries(2,t[f],f)}}}function tg(e,t){return e[$s]?e[Zc][Lo]=t:e[$s]=t,e[Zc]=t,t}function Tm(e,t,n){Fi(0);const r=Wo(null);try{t(e,n)}finally{Wo(r)}}function d0(e){return e[is]||(e[is]=[])}function h0(e){return e.cleanup||(e.cleanup=[])}function p0(e,t){const n=e[_a],r=n?n.get(Ul,null):null;r&&r.handleError(t)}function Sm(e,t,n,r,l){for(let f=0;f<n.length;){const m=n[f++],S=n[f++];u0(e.data[m],t[m],r,S,l)}}function Vl(e,t,n){const r=oe(t,e);!function Zy(e,t,n){e.setValue(t,n)}(e[Rr],r,n)}function pD(e,t){const n=Fe(t,e),r=n[Jn];!function mD(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const l=n[Hi];null!==l&&null===n[Ya]&&(n[Ya]=tm(l,n[_a])),bm(r,n,n[Gi])}function bm(e,t,n){zi(t);try{const r=e.viewQuery;null!==r&&Tm(1,r,n);const l=e.template;null!==l&&t0(e,t,l,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&f0(e,t),e.staticViewQueries&&Tm(2,e.viewQuery,n);const f=e.components;null!==f&&function vD(e,t){for(let n=0;n<t.length;n++)pD(e,t[n])}(t,f)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[xr]&=-5,sa()}}let m0=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,l){const f=typeof Zone>"u"?null:Zone.current,m=function K(e,t,n){const r=Object.create(z);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const l=m=>{r.cleanupFn=m};return r.ref={notify:()=>tc(r),run:()=>{if(r.dirty=!1,r.hasRun&&!zc(r))return;r.hasRun=!0;const m=Rs(r);try{r.cleanupFn(),r.cleanupFn=U,r.fn(l)}finally{nc(r,m)}},cleanup:()=>r.cleanupFn()},r.ref}(n,Y=>{this.all.has(Y)&&this.queue.set(Y,f)},l);let S;this.all.add(m),m.notify();const L=()=>{m.cleanup(),S?.(),this.all.delete(m),this.queue.delete(m)};return S=r?.onDestroy(L),{destroy:L}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Wr({token:e,providedIn:"root",factory:()=>new e})}return e})();function ng(e,t,n){let r=n?e.styles:null,l=n?e.classes:null,f=0;if(null!==t)for(let m=0;m<t.length;m++){const S=t[m];"number"==typeof S?f=S:1==f?l=Di(l,S):2==f&&(r=Di(r,S+": "+t[++m]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=l:e.classesWithoutHost=l}function Rd(e,t,n,r,l=!1){for(;null!==n;){const f=t[n.index];null!==f&&r.push(P(f)),wo(f)&&v0(f,r);const m=n.type;if(8&m)Rd(e,t,n.child,r);else if(32&m){const S=Cp(n,t);let L;for(;L=S();)r.push(L)}else if(16&m){const S=Qy(t,n);if(Array.isArray(S))r.push(...S);else{const L=Ed(t[Ji]);Rd(L[Jn],L,S,r,!0)}}n=l?n.projectionNext:n.next}return r}function v0(e,t){for(let n=Ao;n<e.length;n++){const r=e[n],l=r[Jn].firstChild;null!==l&&Rd(r[Jn],r,l,t)}e[Ta]!==e[Hi]&&t.push(e[Ta])}function rg(e,t,n,r=!0){const l=t[os],f=l.rendererFactory,m=l.afterRenderEventManager;f.begin?.(),m?.begin();try{y0(e,t,e.template,n)}catch(L){throw r&&p0(t,L),L}finally{f.end?.(),l.effectManager?.flush(),m?.end()}}function y0(e,t,n,r){const l=t[xr];if(256!=(256&l)){t[os].effectManager?.flush(),zi(t);try{gt(t),function Ft(e){return _t.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&t0(e,t,n,2,r);const m=3==(3&l);if(m){const Y=e.preOrderCheckHooks;null!==Y&&Ur(t,Y,null)}else{const Y=e.preOrderHooks;null!==Y&&dr(t,Y,0,null),hi(t,0)}if(function _D(e){for(let t=Vy(e);null!==t;t=Hy(t)){if(!t[$u])continue;const n=t[Ds];for(let r=0;r<n.length;r++){ht(n[r])}}}(t),E0(t,2),null!==e.contentQueries&&f0(e,t),m){const Y=e.contentCheckHooks;null!==Y&&Ur(t,Y)}else{const Y=e.contentHooks;null!==Y&&dr(t,Y,1),hi(t,1)}!function qI(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=$E(t,Js);try{for(let l=0;l<n.length;l++){const f=n[l];if(f<0)po(~f);else{const m=f,S=n[++l],L=n[++l];Xt(S,m),r.dirty=!1;const Y=Rs(r);try{L(2,t[m])}finally{nc(r,Y)}}}}finally{null===t[Js]&&XE(t,Js),po(-1)}}(e,t);const S=e.components;null!==S&&T0(t,S,0);const L=e.viewQuery;if(null!==L&&Tm(2,L,r),m){const Y=e.viewCheckHooks;null!==Y&&Ur(t,Y)}else{const Y=e.viewHooks;null!==Y&&dr(t,Y,2),hi(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[xr]&=-73,ft(t)}finally{sa()}}}function E0(e,t){for(let n=Vy(e);null!==n;n=Hy(n))for(let r=Ao;r<n.length;r++)_0(n[r],t)}function TD(e,t,n){_0(Fe(t,e),n)}function _0(e,t){if(!function ae(e){return 128==(128&e[xr])}(e))return;const n=e[Jn],r=e[xr];if(80&r&&0===t||1024&r||2===t)y0(n,e,n.template,e[Gi]);else if(e[wl]>0){E0(e,1);const l=n.components;null!==l&&T0(e,l,1)}}function T0(e,t,n){for(let r=0;r<t.length;r++)TD(e,t[r],n)}class Md{get rootNodes(){const t=this._lView,n=t[Jn];return Rd(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gi]}set context(t){this._lView[Gi]=t}get destroyed(){return 256==(256&this._lView[xr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[wi];if(wo(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Lh(t,r),en(n,r))}this._attachedToViewContainer=!1}Dp(this._lView[Jn],this._lView)}onDestroy(t){!function qt(e,t){if(256==(256&e[xr]))throw new Zn(911,!1);null===e[Ka]&&(e[Ka]=[]),e[Ka].push(t)}(this._lView,t)}markForCheck(){Dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[xr]&=-129}reattach(){this._lView[xr]|=128}detectChanges(){rg(this._lView[Jn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Zn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fC(e,t){Td(e,t,t[Rr],2,null,null)}(this._lView[Jn],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Zn(902,!1);this._appRef=t}}class SD extends Md{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;rg(t[Jn],t,t[Gi],!1)}checkNoChanges(){}get context(){return null}}class S0 extends $h{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Xr(t);return new Nd(n,this.ngModule)}}function b0(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class AD{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Sl(r);const l=this.injector.get(t,im,r);return l!==im||n===im?l:this.parentInjector.get(t,n,r)}}class Nd extends wE{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=b0(t.inputs);if(null!==n)for(const l of r)n.hasOwnProperty(l.propName)&&(l.transform=n[l.propName]);return r}get outputs(){return b0(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function zs(e){return e.map(Ys).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,l){let f=(l=l||this.ngModule)instanceof al?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new AD(t,f):t,S=m.get(ME,null);if(null===S)throw new Zn(407,!1);const He={rendererFactory:S,sanitizer:m.get(_I,null),effectManager:m.get(m0,null),afterRenderEventManager:m.get(dm,null)},st=S.createRenderer(null,this.componentDef),bt=this.componentDef.selectors[0][0]||"div",Wt=r?function YI(e,t,n,r){const f=r.get(KE,!1)||n===Bo.ShadowDom,m=e.selectRootElement(t,f);return function zI(e){r0(e)}(m),m}(st,r,this.componentDef.encapsulation,m):xh(st,bt,function bD(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(bt)),Hn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let mn=null;null!==Wt&&(mn=tm(Wt,m,!0));const ir=vm(0,null,null,1,0,null,null,null,null,null,null),wr=eg(null,ir,null,Hn,null,null,He,st,m,null,mn);let ri,Go;zi(wr);try{const pl=this.componentDef;let Dc,Ey=null;pl.findHostDirectiveDefs?(Dc=[],Ey=new Map,pl.findHostDirectiveDefs(pl,Dc,Ey),Dc.push(pl)):Dc=[pl];const uF=function ID(e,t){const n=e[Jn],r=kr;return e[r]=t,Tf(n,r,2,"#host",null)}(wr,Wt),cF=function DD(e,t,n,r,l,f,m){const S=l[Jn];!function wD(e,t,n,r){for(const l of e)t.mergedAttrs=Ss(t.mergedAttrs,l.hostAttrs);null!==t.mergedAttrs&&(ng(t,t.mergedAttrs,!0),null!==n&&nE(r,n,t))}(r,e,t,m);let L=null;null!==t&&(L=tm(t,l[_a]));const Y=f.rendererFactory.createRenderer(t,n);let Se=16;n.signals?Se=4096:n.onPush&&(Se=64);const He=eg(l,n0(n),null,Se,l[e.index],e,f,Y,null,null,L);return S.firstCreatePass&&Em(S,e,r.length-1),tg(l,He),l[e.index]=He}(uF,Wt,pl,Dc,wr,He,st);Go=Ae(ir,kr),Wt&&function MD(e,t,n,r){if(r)qs(e,n,["ng-version",TI.full]);else{const{attrs:l,classes:f}=function du(e){const t=[],n=[];let r=1,l=2;for(;r<e.length;){let f=e[r];if("string"==typeof f)2===l?""!==f&&t.push(f,e[++r]):8===l&&n.push(f);else{if(!bo(l))break;l=f}r++}return{attrs:t,classes:n}}(t.selectors[0]);l&&qs(e,n,l),f&&f.length>0&&tE(e,n,f.join(" "))}}(st,pl,Wt,r),void 0!==n&&function ND(e,t,n){const r=e.projection=[];for(let l=0;l<t.length;l++){const f=n[l];r.push(null!=f?Array.from(f):null)}}(Go,this.ngContentSelectors,n),ri=function RD(e,t,n,r,l,f){const m=Kn(),S=l[Jn],L=X(m,l);s0(S,l,m,n,null,r);for(let Se=0;Se<n.length;Se++)ua(ol(l,S,m.directiveStart+Se,m),l);l0(S,l,m),L&&ua(L,l);const Y=ol(l,S,m.directiveStart+m.componentOffset,m);if(e[Gi]=l[Gi]=Y,null!==f)for(const Se of f)Se(Y,t);return gm(S,m,e),Y}(cF,pl,Dc,Ey,wr,[xD]),bm(ir,wr,null)}finally{sa()}return new CD(this.componentType,ri,yf(Go,wr),wr,Go)}}class CD extends gI{constructor(t,n,r,l,f){super(),this.location=r,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new SD(l),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let l;if(null!==r&&(l=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const f=this._rootLView;Sm(f[Jn],f,l,t,n),this.previousInputValues.set(t,n),Dd(Fe(this._tNode.index,f))}}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function xD(){const e=Kn();Lr(Mt()[Jn],e)}function xi(e){let t=function A0(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let l;if(zo(e))l=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Zn(903,!1);l=t.\u0275dir}if(l){if(n){r.push(l);const m=e;m.inputs=ig(e.inputs),m.inputTransforms=ig(e.inputTransforms),m.declaredInputs=ig(e.declaredInputs),m.outputs=ig(e.outputs);const S=l.hostBindings;S&&FD(e,S);const L=l.viewQuery,Y=l.contentQueries;if(L&&OD(e,L),Y&&PD(e,Y),si(e.inputs,l.inputs),si(e.declaredInputs,l.declaredInputs),si(e.outputs,l.outputs),null!==l.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),si(m.inputTransforms,l.inputTransforms)),zo(l)&&l.data.animation){const Se=e.data;Se.animation=(Se.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let m=0;m<f.length;m++){const S=f[m];S&&S.ngInherit&&S(e),S===xi&&(n=!1)}}t=Object.getPrototypeOf(t)}!function LD(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const l=e[r];l.hostVars=t+=l.hostVars,l.hostAttrs=Ss(l.hostAttrs,n=Ss(n,l.hostAttrs))}}(r)}function ig(e){return e===Oa?{}:e===oi?[]:e}function OD(e,t){const n=e.viewQuery;e.viewQuery=n?(r,l)=>{t(r,l),n(r,l)}:t}function PD(e,t){const n=e.contentQueries;e.contentQueries=n?(r,l,f)=>{t(r,l,f),n(r,l,f)}:t}function FD(e,t){const n=e.hostBindings;e.hostBindings=n?(r,l)=>{t(r,l),n(r,l)}:t}function og(e){return!!Am(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Am(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ca(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ag(e,t,n,r,l){const f=function hc(e,t,n,r){const l=ca(e,t,n);return ca(e,t+1,r)||l}(e,t,n,r);return ca(e,t+2,l)||f}function Hl(e,t,n,r){const l=Mt();return ca(l,dt(),t)&&(Dn(),sl(Ei(),l,e,t,n,r)),Hl}function Cf(e,t,n,r,l,f,m,S){const Y=ag(e,function Bn(){return _t.lFrame.bindingIndex}(),n,l,m);return Gt(3),Y?t+br(n)+r+br(l)+f+br(m)+S:Zr}function wu(e,t,n,r,l,f,m,S){const L=Mt(),Y=Dn(),Se=e+kr,He=Y.firstCreatePass?function lw(e,t,n,r,l,f,m,S,L){const Y=t.consts,Se=Tf(t,e,4,m||null,We(Y,S));ym(t,n,Se,We(Y,L)),Lr(t,Se);const He=Se.tView=vm(2,Se,r,l,f,t.directiveRegistry,t.pipeRegistry,null,t.schemas,Y,null);return null!==t.queries&&(t.queries.template(t,Se),He.queries=t.queries.embeddedTView(Se)),Se}(Se,Y,L,t,n,r,l,f,m):Y.data[Se];er(He,!1);const st=V0(Y,L,He,e);vn()&&Ph(Y,L,st,He),ua(st,L),tg(L,L[Se]=c0(st,L,st,He)),gu(He)&&pm(Y,L,He),null!=m&&mm(L,He,S)}let V0=function H0(e,t,n,r){return Yn(!0),t[Rr].createComment("")};function Mm(e){return function me(e,t){return e[t]}(function an(){return _t.lFrame.contextLView}(),kr+e)}function Or(e,t,n){const r=Mt();return ca(r,dt(),t)&&function $a(e,t,n,r,l,f,m,S){const L=X(t,n);let Se,Y=t.inputs;!S&&null!=Y&&(Se=Y[r])?(Sm(e,n,Se,r,l),Yo(t)&&function tD(e,t){const n=Fe(t,e);16&n[xr]||(n[xr]|=64)}(n,t.index)):3&t.type&&(r=function eD(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),l=null!=m?m(l,t.value||"",r):l,f.setProperty(L,r,l))}(Dn(),Ei(),r,e,t,r[Rr],n,!1),Or}function Nm(e,t,n,r,l){const m=l?"class":"style";Sm(e,n,t.inputs[m],m,r)}function Nn(e,t,n,r){const l=Mt(),f=Dn(),m=kr+e,S=l[Rr],L=f.firstCreatePass?function dw(e,t,n,r,l,f){const m=t.consts,L=Tf(t,e,2,r,We(m,l));return ym(t,n,L,We(m,f)),null!==L.attrs&&ng(L,L.attrs,!1),null!==L.mergedAttrs&&ng(L,L.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,L),L}(m,f,l,t,n,r):f.data[m],Y=G0(f,l,L,S,t,e);l[m]=Y;const Se=gu(L);return er(L,!0),nE(S,Y,L),32!=(32&L.flags)&&vn()&&Ph(f,l,Y,L),0===function tt(){return _t.lFrame.elementDepthCount}()&&ua(Y,l),function St(){_t.lFrame.elementDepthCount++}(),Se&&(pm(f,l,L),gm(f,L,l)),null!==r&&mm(l,L),Nn}function jn(){let e=Kn();rr()?function Ar(){_t.lFrame.isParent=!1}():(e=e.parent,er(e,!1));const t=e;(function ct(e){return _t.skipHydrationRootTNode===e})(t)&&function Sn(){_t.skipHydrationRootTNode=null}(),function Jt(){_t.lFrame.elementDepthCount--}();const n=Dn();return n.firstCreatePass&&(Lr(n,e),Ml(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function lp(e){return 0!=(8&e.flags)}(t)&&Nm(n,t,Mt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function up(e){return 0!=(16&e.flags)}(t)&&Nm(n,t,Mt(),t.stylesWithoutHost,!1),jn}function Aa(e,t,n,r){return Nn(e,t,n,r),jn(),Aa}let G0=(e,t,n,r,l,f)=>(Yn(!0),xh(r,l,function fs(){return _t.lFrame.currentNamespace}()));function Fd(){return Mt()}function cg(e){return!!e&&"function"==typeof e.then}function q0(e){return!!e&&"function"==typeof e.subscribe}function Cr(e,t,n,r){const l=Mt(),f=Dn(),m=Kn();return function Y0(e,t,n,r,l,f,m){const S=gu(r),Y=e.firstCreatePass&&h0(e),Se=t[Gi],He=d0(t);let st=!0;if(3&r.type||m){const sn=X(r,t),Tn=m?m(sn):sn,Hn=He.length,mn=m?wr=>m(P(wr[r.index])):r.index;let ir=null;if(!m&&S&&(ir=function yw(e,t,n,r){const l=e.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===n&&l[f+1]===r){const S=t[is],L=l[f+2];return S.length>L?S[L]:null}"string"==typeof m&&(f+=2)}return null}(e,t,l,r.index)),null!==ir)(ir.__ngLastListenerFn__||ir).__ngNextListenerFn__=f,ir.__ngLastListenerFn__=f,st=!1;else{f=W0(r,t,Se,f,!1);const wr=n.listen(Tn,l,f);He.push(f,wr),Y&&Y.push(l,mn,Hn,Hn+1)}}else f=W0(r,t,Se,f,!1);const bt=r.outputs;let Wt;if(st&&null!==bt&&(Wt=bt[l])){const sn=Wt.length;if(sn)for(let Tn=0;Tn<sn;Tn+=2){const ri=t[Wt[Tn]][Wt[Tn+1]].subscribe(f),Go=He.length;He.push(f,ri),Y&&Y.push(l,r.index,Go,-(Go+1))}}}(f,l,l[Rr],m,e,t,r),Cr}function z0(e,t,n,r){try{return Pe(6,t,n),!1!==n(r)}catch(l){return p0(e,l),!1}finally{Pe(7,t,n)}}function W0(e,t,n,r,l){return function f(m){if(m===Function)return r;Dd(e.componentOffset>-1?Fe(e.index,t):t);let L=z0(t,n,r,m),Y=f.__ngNextListenerFn__;for(;Y;)L=z0(t,n,Y,m)&&L,Y=Y.__ngNextListenerFn__;return l&&!1===L&&m.preventDefault(),L}}function fa(e=1){return function Po(e){return(_t.lFrame.contextLView=function cs(e,t){for(;e>0;)t=t[Is],e--;return t}(e,_t.lFrame.contextLView))[Gi]}(e)}function fg(e,t){return e<<17|t<<2}function Ru(e){return e>>17&32767}function Pm(e){return 2|e}function gc(e){return(131068&e)>>2}function Fm(e,t){return-131069&e|t<<2}function km(e){return 1|e}function o_(e,t,n,r,l){const f=e[n+1],m=null===t;let S=r?Ru(f):gc(f),L=!1;for(;0!==S&&(!1===L||m);){const Se=e[S+1];Dw(e[S],t)&&(L=!0,e[S+1]=r?km(Se):Pm(Se)),S=r?Ru(Se):gc(Se)}L&&(e[n+1]=r?Pm(f):km(f))}function Dw(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Nr(e,t)>=0}function dg(e,t){return function Os(e,t,n,r){const l=Mt(),f=Dn(),m=Gt(2);f.firstUpdatePass&&function g_(e,t,n,r){const l=e.data;if(null===l[n+1]){const f=l[eo()],m=function h_(e,t){return t>=e.expandoStartIndex}(e,n);(function y_(e,t){return 0!=(e.flags&(t?8:16))})(f,r)&&null===t&&!m&&(t=!1),t=function Fw(e,t,n,r){const l=function pr(e){const t=_t.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let f=r?t.residualClasses:t.residualStyles;if(null===l)0===(r?t.classBindings:t.styleBindings)&&(n=kd(n=Um(null,e,t,n,r),t.attrs,r),f=null);else{const m=t.directiveStylingLast;if(-1===m||e[m]!==l)if(n=Um(l,e,t,n,r),null===f){let L=function kw(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==gc(r))return e[Ru(r)]}(e,t,r);void 0!==L&&Array.isArray(L)&&(L=Um(null,e,t,L[1],r),L=kd(L,t.attrs,r),function Uw(e,t,n,r){e[Ru(n?t.classBindings:t.styleBindings)]=r}(e,t,r,L))}else f=function Bw(e,t,n){let r;const l=t.directiveEnd;for(let f=1+t.directiveStylingLast;f<l;f++)r=kd(r,e[f].hostAttrs,n);return kd(r,t.attrs,n)}(e,t,r)}return void 0!==f&&(r?t.residualClasses=f:t.residualStyles=f),n}(l,f,t,r),function Cw(e,t,n,r,l,f){let m=f?t.classBindings:t.styleBindings,S=Ru(m),L=gc(m);e[r]=n;let Se,Y=!1;if(Array.isArray(n)?(Se=n[1],(null===Se||Nr(n,Se)>0)&&(Y=!0)):Se=n,l)if(0!==L){const st=Ru(e[S+1]);e[r+1]=fg(st,S),0!==st&&(e[st+1]=Fm(e[st+1],r)),e[S+1]=function bw(e,t){return 131071&e|t<<17}(e[S+1],r)}else e[r+1]=fg(S,0),0!==S&&(e[S+1]=Fm(e[S+1],r)),S=r;else e[r+1]=fg(L,0),0===S?S=r:e[L+1]=Fm(e[L+1],r),L=r;Y&&(e[r+1]=Pm(e[r+1])),o_(e,Se,r,!0),o_(e,Se,r,!1),function Iw(e,t,n,r,l){const f=l?e.residualClasses:e.residualStyles;null!=f&&"string"==typeof t&&Nr(f,t)>=0&&(n[r+1]=km(n[r+1]))}(t,Se,e,r,f),m=fg(S,L),f?t.classBindings=m:t.styleBindings=m}(l,f,t,n,m,r)}}(f,e,m,r),t!==Zr&&ca(l,m,t)&&function m_(e,t,n,r,l,f,m,S){if(!(3&t.type))return;const L=e.data,Y=L[S+1],Se=function Aw(e){return 1==(1&e)}(Y)?v_(L,t,n,l,gc(Y),m):void 0;hg(Se)||(hg(f)||function Sw(e){return 2==(2&e)}(Y)&&(f=v_(L,null,n,l,S,m)),function TC(e,t,n,r,l){if(t)l?e.addClass(n,r):e.removeClass(n,r);else{let f=-1===r.indexOf("-")?void 0:Iu.DashCase;null==l?e.removeStyle(n,r,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Iu.Important),e.setStyle(n,r,l,f))}}(r,m,oe(eo(),n),l,f))}(f,f.data[eo()],l,l[Rr],e,l[m+1]=function Zw(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=qr(function Du(e){return e instanceof aE?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),r,m)}(e,t,null,!0),dg}function Um(e,t,n,r,l){let f=null;const m=n.directiveEnd;let S=n.directiveStylingLast;for(-1===S?S=n.directiveStart:S++;S<m&&(f=t[S],r=kd(r,f.hostAttrs,l),f!==e);)S++;return null!==e&&(n.directiveStylingLast=S),r}function kd(e,t,n){const r=n?1:2;let l=-1;if(null!==t)for(let f=0;f<t.length;f++){const m=t[f];"number"==typeof m?l=m:l===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),nr(e,m,!!n||t[++f]))}return void 0===e?null:e}function v_(e,t,n,r,l,f){const m=null===t;let S;for(;l>0;){const L=e[l],Y=Array.isArray(L),Se=Y?L[1]:L,He=null===Se;let st=n[l+1];st===Zr&&(st=He?oi:void 0);let bt=He?Hr(st,r):Se===r?st:void 0;if(Y&&!hg(bt)&&(bt=Hr(L,r)),hg(bt)&&(S=bt,m))return S;const Wt=e[l+1];l=m?Ru(Wt):gc(Wt)}if(null!==t){let L=f?t.residualClasses:t.residualStyles;null!=L&&(S=Hr(L,r))}return S}function hg(e){return void 0!==e}function ur(e,t=""){const n=Mt(),r=Dn(),l=e+kr,f=r.firstCreatePass?Tf(r,l,1,t,null):r.data[l],m=E_(r,n,f,t,e);n[l]=m,vn()&&Ph(r,n,m,f),er(f,!1)}let E_=(e,t,n,r,l)=>(Yn(!0),function Nh(e,t){return e.createText(t)}(t[Rr],r));function fl(e){return Ud("",e,""),fl}function Ud(e,t,n){const r=Mt(),l=function bf(e,t,n,r){return ca(e,dt(),n)?t+br(n)+r:Zr}(r,e,t,n);return l!==Zr&&Vl(r,eo(),l),Ud}function gg(e,t,n,r,l,f,m){const S=Mt(),L=Cf(S,e,t,n,r,l,f,m);return L!==Zr&&Vl(S,eo(),L),gg}const Lf="en-US";let V_=Lf;function Hm(e,t,n,r,l){if(e=or(e),Array.isArray(e))for(let f=0;f<e.length;f++)Hm(e[f],t,n,r,l);else{const f=Dn(),m=Mt(),S=Kn();let L=cc(e)?e:or(e.provide);const Y=SE(e),Se=1048575&S.providerIndexes,He=S.directiveStart,st=S.providerIndexes>>20;if(cc(e)||!e.multi){const bt=new ac(Y,l,Fn),Wt=Zm(L,t,l?Se:Se+st,He);-1===Wt?(fd(tf(S,m),f,L),Gm(f,e,t.length),t.push(L),S.directiveStart++,S.directiveEnd++,l&&(S.providerIndexes+=1048576),n.push(bt),m.push(bt)):(n[Wt]=bt,m[Wt]=bt)}else{const bt=Zm(L,t,Se+st,He),Wt=Zm(L,t,Se,Se+st),Tn=Wt>=0&&n[Wt];if(l&&!Tn||!l&&!(bt>=0&&n[bt])){fd(tf(S,m),f,L);const Hn=function cM(e,t,n,r,l){const f=new ac(e,n,Fn);return f.multi=[],f.index=t,f.componentProviders=0,fT(f,l,r&&!n),f}(l?uM:lM,n.length,l,r,Y);!l&&Tn&&(n[Wt].providerFactory=Hn),Gm(f,e,t.length,0),t.push(L),S.directiveStart++,S.directiveEnd++,l&&(S.providerIndexes+=1048576),n.push(Hn),m.push(Hn)}else Gm(f,e,bt>-1?bt:Wt,fT(n[l?Wt:bt],Y,!l&&r));!l&&r&&Tn&&n[Wt].componentProviders++}}}function Gm(e,t,n,r){const l=cc(t),f=function XC(e){return!!e.useClass}(t);if(l||f){const L=(f?or(t.useClass):t).prototype.ngOnDestroy;if(L){const Y=e.destroyHooks||(e.destroyHooks=[]);if(!l&&t.multi){const Se=Y.indexOf(n);-1===Se?Y.push(n,[r,L]):Y[Se+1].push(r,L)}else Y.push(n,L)}}}function fT(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Zm(e,t,n,r){for(let l=n;l<r;l++)if(t[l]===e)return l;return-1}function lM(e,t,n,r){return jm(this.multi,[])}function uM(e,t,n,r){const l=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,S=ol(n,n[Jn],this.providerFactory.index,r);f=S.slice(0,m),jm(l,f);for(let L=m;L<S.length;L++)f.push(S[L])}else f=[],jm(l,f);return f}function jm(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function ro(e,t=[]){return n=>{n.providersResolver=(r,l)=>function sM(e,t,n){const r=Dn();if(r.firstCreatePass){const l=zo(e);Hm(n,r.data,r.blueprint,l,!0),Hm(t,r.data,r.blueprint,l,!1)}}(r,l?l(e):e,t)}}class mc{}class fM{}class qm extends mc{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new S0(this);const l=function Vo(e,t){const n=e[Yu]||null;if(!n&&!0===t)throw new Error(`Type ${qr(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function Bl(e){return e instanceof Function?e():e}(l.bootstrap),this._r3Injector=PE(t,n,[{provide:mc,useValue:this},{provide:$h,useValue:this.componentFactoryResolver},...r],qr(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Km extends fM{constructor(t){super(),this.moduleType=t}create(t){return new qm(this.moduleType,t,[])}}function vo(e,t,n,r){return function ET(e,t,n,r,l,f){const m=t+n;return ca(e,m,l)?function ll(e,t,n){return e[t]=n}(e,m+1,f?r.call(f,l):r(l)):function jd(e,t){const n=e[t];return n===Zr?void 0:n}(e,m+1)}(Mt(),function Pn(){const e=_t.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),e,t,n,r)}function HM(){return this._results[Symbol.iterator]()}class zm{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new qi)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=zm.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=HM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const l=function jt(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function wt(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let l=e[r],f=t[r];if(n&&(l=n(l),f=n(f)),f!==l)return!1}return!0}(r._results,l,n))&&(r._results=l,r.length=l.length,r.last=l[this.length-1],r.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function ZM(e,t,n,r=!0){const l=t[Jn];if(function hC(e,t,n,r){const l=Ao+r,f=n.length;r>0&&(n[l-1][Lo]=t),r<f-Ao?(t[Lo]=n[l],Nt(n,Ao+r,t)):(n.push(t),t[Lo]=null),t[wi]=n;const m=t[as];null!==m&&n!==m&&function gC(e,t){const n=e[Ds];t[Ji]!==t[wi][wi][Ji]&&(e[$u]=!0),null===n?e[Ds]=[t]:n.push(t)}(m,t);const S=t[ia];null!==S&&S.insertView(e),t[xr]|=128}(l,t,e,n),r){const f=Np(n,e),m=t[Rr],S=Oh(m,e[Ta]);null!==S&&function cC(e,t,n,r,l,f){r[Hi]=l,r[Do]=t,Td(e,r,n,1,l,f)}(l,e[Do],m,t,S,f)}}let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=KM}return e})();const jM=Gl,qM=class extends jM{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const l=function GM(e,t,n,r){const l=t.tView,S=eg(e,l,n,4096&e[xr]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);S[as]=e[t.index];const Y=e[ia];return null!==Y&&(S[ia]=Y.createEmbeddedView(l)),bm(l,S,n),S}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new Md(l)}};function KM(){return Eg(Kn(),Mt())}function Eg(e,t){return 4&e.type?new qM(t,e,yf(e,t)):null}let dl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=QM}return e})();function QM(){return MT(Kn(),Mt())}const JM=dl,wT=class extends JM{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return yf(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){const t=sc(this._hostTNode,this._hostLView);if(Jc(t)){const n=Su(t,this._hostLView),r=Tu(t);return new Xo(n[Jn].data[r+8],n)}return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=RT(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Ao}createEmbeddedView(t,n,r){let l,f;"number"==typeof r?l=r:null!=r&&(l=r.index,f=r.injector);const S=t.createEmbeddedViewImpl(n||{},f,null);return this.insertImpl(S,l,false),S}createComponent(t,n,r,l,f){const m=t&&!function vt(e){return"function"==typeof e}(t);let S;if(m)S=n;else{const sn=n||{};S=sn.index,r=sn.injector,l=sn.projectableNodes,f=sn.environmentInjector||sn.ngModuleRef}const L=m?t:new Nd(Xr(t)),Y=r||this.parentInjector;if(!f&&null==L.ngModule){const Tn=(m?Y:this.parentInjector).get(al,null);Tn&&(f=Tn)}Xr(L.componentType??{});const bt=L.create(Y,l,null,f);return this.insertImpl(bt.hostView,S,false),bt}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const l=t._lView;if(function ke(e){return wo(e[wi])}(l)){const L=this.indexOf(t);if(-1!==L)this.detach(L);else{const Y=l[wi],Se=new wT(Y,Y[Do],Y[wi]);Se.detach(Se.indexOf(t))}}const m=this._adjustIndex(n),S=this._lContainer;return ZM(S,l,m,!r),t.attachToViewContainerRef(),Nt(Wm(S),m,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=RT(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Lh(this._lContainer,n);r&&(en(Wm(this._lContainer),n),Dp(r[Jn],r))}detach(t){const n=this._adjustIndex(t,-1),r=Lh(this._lContainer,n);return r&&null!=en(Wm(this._lContainer),n)?new Md(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function RT(e){return e[8]}function Wm(e){return e[8]||(e[8]=[])}function MT(e,t){let n;const r=t[e.index];return wo(r)?n=r:(n=c0(r,t,null,e),t[e.index]=n,tg(t,n)),NT(n,t,e,r),new wT(n,e,t)}let NT=function xT(e,t,n,r){if(e[Ta])return;let l;l=8&n.type?P(r):function eN(e,t){const n=e[Rr],r=n.createComment(""),l=X(t,e);return uc(n,Oh(n,l),r,function yC(e,t){return e.nextSibling(t)}(n,l),!1),r}(t,n),e[Ta]=l};class $m{constructor(t){this.queryList=t,this.matches=null}clone(){return new $m(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xm{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,l=[];for(let f=0;f<r;f++){const m=n.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new Xm(l)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==kT(t,n).matches&&this.queries[n].setDirty()}}class LT{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class Qm{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const l=null!==n?n.length:0,f=this.getByIndex(r).embeddedTView(t,l);f&&(f.indexInDeclarationView=r,null!==n?n.push(f):n=[f])}return null!==n?new Qm(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Jm{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Jm(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let l=0;l<r.length;l++){const f=r[l];this.matchTNodeWithReadOption(t,n,rN(n,f)),this.matchTNodeWithReadOption(t,n,af(n,t,f,!1,!1))}else r===Gl?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,af(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const l=this.metadata.read;if(null!==l)if(l===xs||l===dl||l===Gl&&4&n.type)this.addMatch(n.index,-2);else{const f=af(n,t,l,!1,!1);null!==f&&this.addMatch(n.index,f)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function rN(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function oN(e,t,n,r){return-1===n?function iN(e,t){return 11&e.type?yf(e,t):4&e.type?Eg(e,t):null}(t,e):-2===n?function aN(e,t,n){return n===xs?yf(t,e):n===Gl?Eg(t,e):n===dl?MT(t,e):void 0}(e,t,r):ol(e,e[Jn],n,t)}function OT(e,t,n,r){const l=t[ia].queries[r];if(null===l.matches){const f=e.data,m=n.matches,S=[];for(let L=0;L<m.length;L+=2){const Y=m[L];S.push(Y<0?null:oN(t,f[Y],m[L+1],n.metadata.read))}l.matches=S}return l.matches}function ev(e,t,n,r){const l=e.queries.getByIndex(n),f=l.matches;if(null!==f){const m=OT(e,t,l,n);for(let S=0;S<f.length;S+=2){const L=f[S];if(L>0)r.push(m[S/2]);else{const Y=f[S+1],Se=t[-L];for(let He=Ao;He<Se.length;He++){const st=Se[He];st[as]===st[wi]&&ev(st[Jn],st,Y,r)}if(null!==Se[Ds]){const He=Se[Ds];for(let st=0;st<He.length;st++){const bt=He[st];ev(bt[Jn],bt,Y,r)}}}}}return r}function vc(e){const t=Mt(),n=Dn(),r=di();Fi(r+1);const l=kT(n,r);if(e.dirty&&function Ie(e){return 4==(4&e[xr])}(t)===(2==(2&l.metadata.flags))){if(null===l.matches)e.reset([]);else{const f=l.crossesNgTemplate?ev(n,t,r,[]):OT(n,t,l,r);e.reset(f,yI),e.notifyOnChanges()}return!0}return!1}function yc(e,t,n){const r=Dn();r.firstCreatePass&&(function FT(e,t,n){null===e.queries&&(e.queries=new Qm),e.queries.track(new Jm(t,n))}(r,new LT(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function PT(e,t,n){const r=new zm(4==(4&n));(function XI(e,t,n,r){const l=d0(t);l.push(n),e.firstCreatePass&&h0(e).push(r,l.length-1)})(e,t,r,r.destroy),null===t[ia]&&(t[ia]=new Xm),t[ia].queries.push(new $m(r))}(r,Mt(),t)}function Ec(){return function lN(e,t){return e[ia].queries[t].queryList}(Mt(),di())}function kT(e,t){return e.queries.getByIndex(t)}const NN=new lr("Application Initializer");let ov=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Mr(NN,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const l of this.appInits){const f=l();if(cg(f))n.push(f);else if(q0(f)){const m=new Promise((S,L)=>{f.subscribe({complete:S,error:L})});n.push(m)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(l=>{this.reject(l)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Zl=new lr("LocaleId",{providedIn:"root",factory:()=>Mr(Zl,$r.Optional|$r.SkipSelf)||function LN(){return typeof $localize<"u"&&$localize.locale||Lf}()});let av=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Us(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const iS=new lr(""),bg=new lr("");let fv,uv=(()=>{class e{constructor(n,r,l){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fv||(function i1(e){fv=e}(l),l.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,l){let f=-1;r&&r>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:f,updateCb:l})}whenStable(n,r,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,l){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(mo),Fr(cv),Fr(bg))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})(),cv=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return fv?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),Mu=null;const oS=new lr("AllowMultipleToken"),dv=new lr("PlatformDestroyListeners"),aS=new lr("appBootstrapListener");function uS(e,t,n=[]){const r=`Platform: ${t}`,l=new lr(r);return(f=[])=>{let m=hv();if(!m||m.injector.get(oS,!1)){const S=[...n,...f,{provide:l,useValue:!0}];e?e(S):function s1(e){if(Mu&&!Mu.get(oS,!1))throw new Zn(400,!1);(function sS(){!function Xc(e){$c=e}(()=>{throw new Zn(600,!1)})})(),Mu=e;const t=e.get(fS);(function lS(e){e.get(bE,null)?.forEach(n=>n())})(e)}(function cS(e=[],t){return Ls.create({name:t,providers:[{provide:jp,useValue:"platform"},{provide:dv,useValue:new Set([()=>Mu=null])},...e]})}(S,r))}return function u1(e){const t=hv();if(!t)throw new Zn(401,!1);return t}()}}function hv(){return Mu?.get(fS)??null}let fS=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const l=function c1(e="zone.js",t){return"noop"===e?new LI:"zone.js"===e?new mo(t):e}(r?.ngZone,function dS(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return l.run(()=>{const f=function hM(e,t,n){return new qm(e,t,n)}(n.moduleType,this.injector,function vS(e){return[{provide:mo,useFactory:e},{provide:Vh,multi:!0,useFactory:()=>{const t=Mr(d1,{optional:!0});return()=>t.initialize()}},{provide:mS,useFactory:f1},{provide:VE,useFactory:HE}]}(()=>l)),m=f.injector.get(Ul,null);return l.runOutsideAngular(()=>{const S=l.onError.subscribe({next:L=>{m.handleError(L)}});f.onDestroy(()=>{Ag(this._modules,f),S.unsubscribe()})}),function hS(e,t,n){try{const r=n();return cg(r)?r.catch(l=>{throw t.runOutsideAngular(()=>e.handleError(l)),l}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(m,l,()=>{const S=f.injector.get(ov);return S.runInitializers(),S.donePromise.then(()=>(function H_(e){Yi(e,"Expected localeId to be defined"),"string"==typeof e&&(V_=e.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Zl,Lf)||Lf),this._moduleDoBootstrap(f),f))})})}bootstrapModule(n,r=[]){const l=gS({},r);return function o1(e,t,n){const r=new Km(n);return Promise.resolve(r)}(0,0,n).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(n){const r=n.injector.get(zd);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(l=>r.bootstrap(l));else{if(!n.instance.ngDoBootstrap)throw new Zn(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Zn(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(dv,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(Ls))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function gS(e,t){return Array.isArray(t)?t.reduce(gS,e):{...e,...t}}let zd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Mr(mS),this.zoneIsStable=Mr(VE),this.componentTypes=[],this.components=[],this.isStable=Mr(av).hasPendingTasks.pipe(Sr(n=>n?es(!1):this.zoneIsStable),function Oi(e,t=Me){return e=e??fi,Yt((n,r)=>{let l,f=!0;n.subscribe(Tt(r,m=>{const S=t(m);(f||!e(l,S))&&(f=!1,l=S,r.next(m))}))})}(),pn()),this._injector=Mr(al)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const l=n instanceof wE;if(!this._injector.get(ov).done)throw!l&&function rs(e){const t=Xr(e)||ho(e)||En(e);return null!==t&&t.standalone}(n),new Zn(405,!1);let m;m=l?n:this._injector.get($h).resolveComponentFactory(n),this.componentTypes.push(m.componentType);const S=function a1(e){return e.isBoundToModule}(m)?void 0:this._injector.get(mc),Y=m.create(Ls.NULL,[],r||m.selector,S),Se=Y.location.nativeElement,He=Y.injector.get(iS,null);return He?.registerApplication(Se),Y.onDestroy(()=>{this.detachView(Y.hostView),Ag(this.components,Y),He?.unregisterApplication(Se)}),this._loadComponent(Y),Y}tick(){if(this._runningTick)throw new Zn(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Ag(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(aS,[]);r.push(...this._bootstrapListeners),r.forEach(l=>l(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ag(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Zn(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ag(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const mS=new lr("",{providedIn:"root",factory:()=>Mr(Ul).handleError.bind(void 0)});function f1(){const e=Mr(mo),t=Mr(Ul);return n=>e.runOutsideAngular(()=>t.handleError(n))}let d1=(()=>{class e{constructor(){this.zone=Mr(mo),this.applicationRef=Mr(zd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let ES=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=g1}return e})();function g1(e){return function p1(e,t,n){if(Yo(e)&&!n){const r=Fe(e.index,t);return new Md(r,r)}return 47&e.type?new Md(t[Ji],t):null}(Kn(),Mt(),16==(16&e))}class SS{constructor(){}supports(t){return og(t)}create(t){return new T1(t)}}const _1=(e,t)=>t;class T1{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_1}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,l=0,f=null;for(;n||r;){const m=!r||n&&n.currentIndex<AS(r,l,f)?n:r,S=AS(m,l,f),L=m.currentIndex;if(m===r)l--,r=r._nextRemoved;else if(n=n._next,null==m.previousIndex)l++;else{f||(f=[]);const Y=S-l,Se=L-l;if(Y!=Se){for(let st=0;st<Y;st++){const bt=st<f.length?f[st]:f[st]=0,Wt=bt+st;Se<=Wt&&Wt<Y&&(f[st]=bt+1)}f[m.previousIndex]=Se-Y}}S!==L&&t(m,S,L)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!og(t))throw new Zn(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let l,f,m,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let S=0;S<this.length;S++)f=t[S],m=this._trackByFn(S,f),null!==n&&Object.is(n.trackById,m)?(r&&(n=this._verifyReinsertion(n,f,m,S)),Object.is(n.item,f)||this._addIdentityChange(n,f)):(n=this._mismatch(n,f,m,S),r=!0),n=n._next}else l=0,function jD(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,S=>{m=this._trackByFn(l,S),null!==n&&Object.is(n.trackById,m)?(r&&(n=this._verifyReinsertion(n,S,m,l)),Object.is(n.item,S)||this._addIdentityChange(n,S)):(n=this._mismatch(n,S,m,l),r=!0),n=n._next,l++}),this.length=l;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,l){let f;return null===t?f=this._itTail:(f=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,f,l)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,l))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,f,l)):t=this._addAfter(new S1(n,r),f,l),t}_verifyReinsertion(t,n,r,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==f?t=this._reinsertAfter(f,t._prev,l):t.currentIndex!=l&&(t.currentIndex=l,this._addToMoves(t,l)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const l=t._prevRemoved,f=t._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const l=null===n?this._itHead:n._next;return t._next=l,t._prev=n,null===l?this._itTail=t:l._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new bS),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bS),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class S1{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class b1{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class bS{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new b1,this.map.set(n,r)),r.add(t)}get(t,n){const l=this.map.get(t);return l?l.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AS(e,t,n){const r=e.previousIndex;if(null===r)return r;let l=0;return n&&r<n.length&&(l=n[r]),r+t+l}class CS{constructor(){}supports(t){return t instanceof Map||Am(t)}create(){return new A1}}class A1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Am(t)))throw new Zn(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,l)=>{if(n&&n.key===l)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const f=this._getOrCreateRecordForKey(l,r);n=this._insertBeforeOrAppend(n,f)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const l=this._records.get(t);this._maybeAddToChanges(l,n);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const r=new C1(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class C1{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IS(){return new Dg([new SS])}let Dg=(()=>{class e{static#e=this.\u0275prov=Wr({token:e,providedIn:"root",factory:IS});constructor(n){this.factories=n}static create(n,r){if(null!=r){const l=r.factories.slice();n=n.concat(l)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||IS()),deps:[[e,new ko,new Qo]]}}find(n){const r=this.factories.find(l=>l.supports(n));if(null!=r)return r;throw new Zn(901,!1)}}return e})();function DS(){return new Wd([new CS])}let Wd=(()=>{class e{static#e=this.\u0275prov=Wr({token:e,providedIn:"root",factory:DS});constructor(n){this.factories=n}static create(n,r){if(r){const l=r.factories.slice();n=n.concat(l)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||DS()),deps:[[e,new ko,new Qo]]}}find(n){const r=this.factories.find(l=>l.supports(n));if(r)return r;throw new Zn(901,!1)}}return e})();const w1=uS(null,"core",[]);let R1=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(zd))};static#t=this.\u0275mod=Ea({type:e});static#n=this.\u0275inj=Ri({})}return e})();let _v=null;function $d(){return _v}class G1{}const Nu=new lr("DocumentToken");function jS(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[l,f]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(l.trim()===t)return decodeURIComponent(f)}return null}const Mv=/\s+/,qS=[];let Bg=(()=>{class e{constructor(n,r,l,f){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=l,this._renderer=f,this.initialClasses=qS,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Mv):qS}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Mv):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const l=this.stateMap.get(n);void 0!==l?(l.enabled!==r&&(l.changed=!0,l.enabled=r),l.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],l=n[1];l.changed?(this._toggleClass(r,l.enabled),l.changed=!1):l.touched||(l.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),l.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Mv).forEach(l=>{r?this._renderer.addClass(this._ngEl.nativeElement,l):this._renderer.removeClass(this._ngEl.nativeElement,l)})}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(Dg),Fn(Wd),Fn(xs),Fn(dc))};static#t=this.\u0275dir=Pr({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return e})();class Rx{constructor(t,n,r,l){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let YS=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,l){this._viewContainer=n,this._template=r,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((l,f,m)=>{if(null==l.previousIndex)r.createEmbeddedView(this._template,new Rx(l.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)r.remove(null===f?void 0:f);else if(null!==f){const S=r.get(f);r.move(S,m),zS(S,l)}});for(let l=0,f=r.length;l<f;l++){const S=r.get(l).context;S.index=l,S.count=f,S.ngForOf=this._ngForOf}n.forEachIdentityChange(l=>{zS(r.get(l.currentIndex),l)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(dl),Fn(Gl),Fn(Dg))};static#t=this.\u0275dir=Pr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function zS(e,t){e.context.$implicit=t.item}let nL=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ea({type:e});static#n=this.\u0275inj=Ri({})}return e})();function JS(e){return"server"===e}class eb{}class RL extends G1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class kv extends RL{static makeCurrent(){!function H1(e){_v||(_v=e)}(new kv)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function ML(){return eh=eh||document.querySelector("base"),eh?eh.getAttribute("href"):null}();return null==n?null:function NL(e){Gg=Gg||document.createElement("a"),Gg.setAttribute("href",e);const t=Gg.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){eh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return jS(document.cookie,t)}}let Gg,eh=null,LL=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();const Uv=new lr("EventManagerPlugins");let ob=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(l=>{l.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,l){return this._findPluginFor(r).addEventListener(n,r,l)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(f=>f.supports(n)),!r)throw new Zn(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(Uv),Fr(mo))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();class ab{constructor(t){this._doc=t}}const Bv="ng-app-id";let sb=(()=>{class e{constructor(n,r,l,f={}){this.doc=n,this.appId=r,this.nonce=l,this.platformId=f,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=JS(f),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(l=>l.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Bv}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(l=>{null!=l.textContent&&r.set(l.textContent,l)}),r}return null}changeUsageCount(n,r){const l=this.styleRef;if(l.has(n)){const f=l.get(n);return f.usage+=r,f.usage}return l.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const l=this.styleNodesInDOM,f=l?.get(r);if(f?.parentNode===n)return l.delete(r),f.removeAttribute(Bv),f;{const m=this.doc.createElement("style");return this.nonce&&m.setAttribute("nonce",this.nonce),m.textContent=r,this.platformIsServer&&m.setAttribute(Bv,this.appId),m}}addStyleToHost(n,r){const l=this.getStyleElement(n,r);n.appendChild(l);const f=this.styleRef,m=f.get(r)?.elements;m?m.push(l):f.set(r,{elements:[l],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(Nu),Fr(jh),Fr(AE,8),Fr(fc))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();const Vv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hv=/%COMP%/g,kL=new lr("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ub(e,t){return t.map(n=>n.replace(Hv,e))}let cb=(()=>{class e{constructor(n,r,l,f,m,S,L,Y=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=l,this.removeStylesOnCompDestroy=f,this.doc=m,this.platformId=S,this.ngZone=L,this.nonce=Y,this.rendererByCompId=new Map,this.platformIsServer=JS(S),this.defaultRenderer=new Gv(n,m,L,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Bo.ShadowDom&&(r={...r,encapsulation:Bo.Emulated});const l=this.getOrCreateRenderer(n,r);return l instanceof db?l.applyToHost(n):l instanceof Zv&&l.applyStyles(),l}getOrCreateRenderer(n,r){const l=this.rendererByCompId;let f=l.get(r.id);if(!f){const m=this.doc,S=this.ngZone,L=this.eventManager,Y=this.sharedStylesHost,Se=this.removeStylesOnCompDestroy,He=this.platformIsServer;switch(r.encapsulation){case Bo.Emulated:f=new db(L,Y,r,this.appId,Se,m,S,He);break;case Bo.ShadowDom:return new HL(L,Y,n,r,m,S,this.nonce,He);default:f=new Zv(L,Y,r,Se,m,S,He)}l.set(r.id,f)}return f}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(ob),Fr(sb),Fr(jh),Fr(kL),Fr(Nu),Fr(fc),Fr(mo),Fr(AE))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();class Gv{constructor(t,n,r,l){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=l,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Vv[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(fb(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(fb(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new Zn(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,l){if(l){n=l+":"+n;const f=Vv[l];f?t.setAttributeNS(f,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const l=Vv[r];l?t.removeAttributeNS(l,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,l){l&(Iu.DashCase|Iu.Important)?t.style.setProperty(n,r,l&Iu.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Iu.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=$d().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function fb(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class HL extends Gv{constructor(t,n,r,l,f,m,S,L){super(t,f,m,L),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Y=ub(l.id,l.styles);for(const Se of Y){const He=document.createElement("style");S&&He.setAttribute("nonce",S),He.textContent=Se,this.shadowRoot.appendChild(He)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Zv extends Gv{constructor(t,n,r,l,f,m,S,L){super(t,f,m,S),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=l,this.styles=L?ub(L,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class db extends Zv{constructor(t,n,r,l,f,m,S,L){const Y=l+"-"+r.id;super(t,n,r,f,m,S,L,Y),this.contentAttr=function UL(e){return"_ngcontent-%COMP%".replace(Hv,e)}(Y),this.hostAttr=function BL(e){return"_nghost-%COMP%".replace(Hv,e)}(Y)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let GL=(()=>{class e extends ab{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,l){return n.addEventListener(r,l,!1),()=>this.removeEventListener(n,r,l)}removeEventListener(n,r,l){return n.removeEventListener(r,l)}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(Nu))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();const hb=["alt","control","meta","shift"],ZL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jL={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let qL=(()=>{class e extends ab{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,l){const f=e.parseEventName(r),m=e.eventCallback(f.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$d().onAndCancel(n,f.domEventName,m))}static parseEventName(n){const r=n.toLowerCase().split("."),l=r.shift();if(0===r.length||"keydown"!==l&&"keyup"!==l)return null;const f=e._normalizeKey(r.pop());let m="",S=r.indexOf("code");if(S>-1&&(r.splice(S,1),m="code."),hb.forEach(Y=>{const Se=r.indexOf(Y);Se>-1&&(r.splice(Se,1),m+=Y+".")}),m+=f,0!=r.length||0===f.length)return null;const L={};return L.domEventName=l,L.fullKey=m,L}static matchEventFullKeyCode(n,r){let l=ZL[n.key]||n.key,f="";return r.indexOf("code.")>-1&&(l=n.code,f="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),hb.forEach(m=>{m!==l&&(0,jL[m])(n)&&(f+=m+".")}),f+=l,f===r)}static eventCallback(n,r,l){return f=>{e.matchEventFullKeyCode(f,n)&&l.runGuarded(()=>r(f))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(Nu))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();const WL=uS(w1,"browser",[{provide:fc,useValue:"browser"},{provide:bE,useValue:function KL(){kv.makeCurrent()},multi:!0},{provide:Nu,useFactory:function zL(){return function IC(e){Op=e}(document),document},deps:[]}]),$L=new lr(""),mb=[{provide:bg,useClass:class xL{addToWindow(t){ui.getAngularTestability=(r,l=!0)=>{const f=t.findTestabilityInTree(r,l);if(null==f)throw new Zn(5103,!1);return f},ui.getAllAngularTestabilities=()=>t.getAllTestabilities(),ui.getAllAngularRootElements=()=>t.getAllRootElements(),ui.frameworkStabilizers||(ui.frameworkStabilizers=[]),ui.frameworkStabilizers.push(r=>{const l=ui.getAllAngularTestabilities();let f=l.length,m=!1;const S=function(L){m=m||L,f--,0==f&&r(m)};l.forEach(L=>{L.whenStable(S)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?$d().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:iS,useClass:uv,deps:[mo,cv,bg]},{provide:uv,useClass:uv,deps:[mo,cv,bg]}],vb=[{provide:jp,useValue:"root"},{provide:Ul,useFactory:function YL(){return new Ul},deps:[]},{provide:Uv,useClass:GL,multi:!0,deps:[Nu,mo,fc]},{provide:Uv,useClass:qL,multi:!0,deps:[Nu]},cb,sb,ob,{provide:ME,useExisting:cb},{provide:eb,useClass:LL,deps:[]},[]];let XL=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:jh,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(Fr($L,12))};static#t=this.\u0275mod=Ea({type:e});static#n=this.\u0275inj=Ri({providers:[...vb,...mb],imports:[nL,R1]})}return e})();typeof window<"u"&&window;const{isArray:iO}=Array,{getPrototypeOf:oO,prototype:aO,keys:sO}=Object;const{isArray:cO}=Array;function hO(e,t){return e.reduce((n,r,l)=>(n[r]=t[l],n),{})}function gO(...e){const t=function so(e){return Er(zr(e))?e.pop():void 0}(e),{args:n,keys:r}=function lO(e){if(1===e.length){const t=e[0];if(iO(t))return{args:t,keys:null};if(function uO(e){return e&&"object"==typeof e&&oO(e)===aO}(t)){const n=sO(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e),l=new Dt(f=>{const{length:m}=n;if(!m)return void f.complete();const S=new Array(m);let L=m,Y=m;for(let Se=0;Se<m;Se++){let He=!1;On(n[Se]).subscribe(Tt(f,st=>{He||(He=!0,Y--),S[Se]=st},()=>L--,void 0,()=>{(!L||!He)&&(Y||f.next(r?hO(r,S):S),f.complete())}))}});return t?l.pipe(function dO(e){return Ze(t=>function fO(e,t){return cO(t)?e(...t):e(t)}(e,t))}(t)):l}let Tb=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(dc),Fn(xs))};static#t=this.\u0275dir=Pr({type:e})}return e})(),Tc=(()=>{class e extends Tb{static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Pr({type:e,features:[xi]})}return e})();const hl=new lr("NgValueAccessor"),pO={provide:hl,useExisting:Kr(()=>qv),multi:!0};let qv=(()=>{class e extends Tc{writeValue(n){this.setProperty("checked",n)}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Pr({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,l){1&r&&Cr("change",function(m){return l.onChange(m.target.checked)})("blur",function(){return l.onTouched()})},features:[ro([pO]),xi]})}return e})();const mO={provide:hl,useExisting:Kr(()=>Zg),multi:!0},yO=new lr("CompositionEventMode");let Zg=(()=>{class e extends Tb{constructor(n,r,l){super(n,r),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vO(){const e=$d()?$d().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(dc),Fn(xs),Fn(yO,8))};static#t=this.\u0275dir=Pr({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,l){1&r&&Cr("input",function(m){return l._handleInput(m.target.value)})("blur",function(){return l.onTouched()})("compositionstart",function(){return l._compositionStart()})("compositionend",function(m){return l._compositionEnd(m.target.value)})},features:[ro([mO]),xi]})}return e})();function Lu(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}const da=new lr("NgValidators"),Ou=new lr("NgAsyncValidators");function jg(e){return null}function Nb(e){return null!=e}function xb(e){return cg(e)?Ma(e):e}function Lb(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function Ob(e,t){return t.map(n=>n(e))}function Pb(e){return e.map(t=>function _O(e){return!e.validate}(t)?t:n=>t.validate(n))}function Kv(e){return null!=e?function Fb(e){if(!e)return null;const t=e.filter(Nb);return 0==t.length?null:function(n){return Lb(Ob(n,t))}}(Pb(e)):null}function Yv(e){return null!=e?function kb(e){if(!e)return null;const t=e.filter(Nb);return 0==t.length?null:function(n){return gO(Ob(n,t).map(xb)).pipe(Ze(Lb))}}(Pb(e)):null}function Ub(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function zv(e){return e?Array.isArray(e)?e:[e]:[]}function qg(e,t){return Array.isArray(e)?e.includes(t):e===t}function Hb(e,t){const n=zv(t);return zv(e).forEach(l=>{qg(n,l)||n.push(l)}),n}function Gb(e,t){return zv(t).filter(n=>!qg(e,n))}class Zb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Kv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Yv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class wa extends Zb{get formDirective(){return null}get path(){return null}}class Pu extends Zb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jb{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let qb=(()=>{class e extends jb{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(Pu,2))};static#t=this.\u0275dir=Pr({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,l){2&r&&dg("ng-untouched",l.isUntouched)("ng-touched",l.isTouched)("ng-pristine",l.isPristine)("ng-dirty",l.isDirty)("ng-valid",l.isValid)("ng-invalid",l.isInvalid)("ng-pending",l.isPending)},features:[xi]})}return e})();const th="VALID",Yg="INVALID",kf="PENDING",nh="DISABLED";function zg(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Wb{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===th}get invalid(){return this.status===Yg}get pending(){return this.status==kf}get disabled(){return this.status===nh}get enabled(){return this.status!==nh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Hb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Hb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Gb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Gb(t,this._rawAsyncValidators))}hasValidator(t){return qg(this._rawValidators,t)}hasAsyncValidator(t){return qg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=kf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=nh,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=th,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===th||this.status===kf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nh:th}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=kf,this._hasOwnPendingAsyncValidator=!0;const n=xb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,l)=>r&&r._find(l),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new qi,this.statusChanges=new qi}_calculateStatus(){return this._allControlsDisabled()?nh:this.errors?Yg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kf)?kf:this._anyControlsHaveStatus(Yg)?Yg:th}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){zg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function CO(e){return Array.isArray(e)?Kv(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function IO(e){return Array.isArray(e)?Yv(e):e||null}(this._rawAsyncValidators)}}const Uf=new lr("CallSetDisabledState",{providedIn:"root",factory:()=>Wg}),Wg="always";function rh(e,t,n=Wg){(function ey(e,t){const n=function Bb(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(Ub(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function Vb(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(Ub(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const l=()=>e.updateValueAndValidity();Qg(t._rawValidators,l),Qg(t._rawAsyncValidators,l)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function RO(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&$b(e,t)})}(e,t),function NO(e,t){const n=(r,l)=>{t.valueAccessor.writeValue(r),l&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function MO(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&$b(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function wO(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Qg(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function $b(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Jb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function eA(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const tA=class extends Wb{constructor(t=null,n,r){super(function Xv(e){return(zg(e)?e.validators:e)||null}(n),function Qv(e,t){return(zg(t)?t.asyncValidators:e)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=eA(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Jb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Jb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){eA(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},BO={provide:Pu,useExisting:Kr(()=>oy)},iA=(()=>Promise.resolve())();let oy=(()=>{class e extends Pu{constructor(n,r,l,f,m,S){super(),this._changeDetectorRef=m,this.callSetDisabledState=S,this.control=new tA,this._registered=!1,this.name="",this.update=new qi,this._parent=n,this._setValidators(r),this._setAsyncValidators(l),this.valueAccessor=function ry(e,t){if(!t)return null;let n,r,l;return Array.isArray(t),t.forEach(f=>{f.constructor===Zg?n=f:function OO(e){return Object.getPrototypeOf(e.constructor)===Tc}(f)?r=f:l=f}),l||r||n||null}(0,f)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function ny(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){iA.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,l=0!==r&&function Ev(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(r);iA.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function $g(e,t){return[...t.path,e]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(wa,9),Fn(da,10),Fn(Ou,10),Fn(hl,10),Fn(ES,8),Fn(Uf,8))};static#t=this.\u0275dir=Pr({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ro([BO]),xi,fe]})}return e})();const HO={provide:hl,useExisting:Kr(()=>ay),multi:!0};let ay=(()=>{class e extends Tc{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Pr({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,l){1&r&&Cr("input",function(m){return l.onChange(m.target.value)})("blur",function(){return l.onTouched()})},features:[ro([HO]),xi]})}return e})(),oA=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ea({type:e});static#n=this.\u0275inj=Ri({})}return e})();const $O={provide:hl,useExisting:Kr(()=>ep),multi:!0};function dA(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let ep=(()=>{class e extends Tc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const l=dA(this._getOptionId(n),n);this.setProperty("value",l)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function XO(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Pr({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,l){1&r&&Cr("change",function(m){return l.onChange(m.target.value)})("blur",function(){return l.onTouched()})},inputs:{compareWith:"compareWith"},features:[ro([$O]),xi]})}return e})(),hA=(()=>{class e{constructor(n,r,l){this._element=n,this._renderer=r,this._select=l,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(dA(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(xs),Fn(dc),Fn(ep,9))};static#t=this.\u0275dir=Pr({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return e})();const QO={provide:hl,useExisting:Kr(()=>cy),multi:!0};function gA(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let cy=(()=>{class e extends Tc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const l=n.map(f=>this._getOptionId(f));r=(f,m)=>{f._setSelected(l.indexOf(m.toString())>-1)}}else r=(l,f)=>{l._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const l=[],f=r.selectedOptions;if(void 0!==f){const m=f;for(let S=0;S<m.length;S++){const Y=this._getOptionValue(m[S].value);l.push(Y)}}else{const m=r.options;for(let S=0;S<m.length;S++){const L=m[S];if(L.selected){const Y=this._getOptionValue(L.value);l.push(Y)}}}this.value=l,n(l)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function JO(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Pr({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,l){1&r&&Cr("change",function(m){return l.onChange(m.target)})("blur",function(){return l.onTouched()})},inputs:{compareWith:"compareWith"},features:[ro([QO]),xi]})}return e})(),pA=(()=>{class e{constructor(n,r,l){this._element=n,this._renderer=r,this._select=l,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(gA(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(gA(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(xs),Fn(dc),Fn(cy,9))};static#t=this.\u0275dir=Pr({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return e})();let Sc=(()=>{class e{constructor(){this._validator=jg}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):jg,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=Pr({type:e,features:[fe]})}return e})();const tP={provide:da,useExisting:Kr(()=>fy),multi:!0};let fy=(()=>{class e extends Sc{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>function vA(e){return"number"==typeof e?e:parseFloat(e)}(n),this.createValidator=n=>function bb(e){return t=>{if(Lu(t.value)||Lu(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(n)}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Pr({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,l){2&r&&Hl("min",l._enabled?l.min:null)},inputs:{min:"min"},features:[ro([tP]),xi]})}return e})(),lP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ea({type:e});static#n=this.\u0275inj=Ri({imports:[oA]})}return e})(),cP=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Uf,useValue:n.callSetDisabledState??Wg}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ea({type:e});static#n=this.\u0275inj=Ri({imports:[lP]})}return e})(),bc=(()=>{class e{constructor(){this.transitions={},this.debug=!1}log(n){this.debug&&console.log(n)}registerTransitions(n,r,l){this.transitions[n]={namespace:n,timeout_id:null,state:l,definitions:r,locked:!1},this.log(this.transitions)}lock(n,r){this.log("Locking "+n),this.transition(n,r),this.transitions[n].locked=!0}unlock(n){this.log("Unlocking "+n),this.transitions[n].locked=!1}getIsLocked(n){return this.transitions[n].locked}getState(n){return n in this.transitions?this.transitions[n].state:""}setState(n,r){this.transitions[n].state=r}transition(n,r){var l=this.transitions[n];if(l)if(null!=l.locked&&l.locked)this.log(n+" is locked");else for(var f=0;f<l.definitions.length;f++){var m=l.definitions[f];if(m.to==r){if(m.from!=l.state)continue;this.log(m),l.timeout_id&&clearTimeout(l.timeout_id),null!=m.delay?l.timeout_id=setTimeout(function(){l.state=r,m.handle&&m.handle(m)},m.delay):(l.state=r,m.handle&&m.handle(m));break}}else this.log("Transitions for "+n+" not found")}setDebug(n){this.debug=n}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function AA(e,t,n,r,l,f,m){try{var S=e[f](m),L=S.value}catch(Y){return void n(Y)}S.done?t(L):Promise.resolve(L).then(r,l)}class CA{constructor(t,n,r,l,f,m,S,L){if(this.percentage=0,this.seekMouseUp=Y=>{window.removeEventListener("mouseup",this.seekMouseUp),this.seek_lock&&(this.seek_lock=!1,window.removeEventListener("mousemove",this.updateProgressPosition),null!=this.valueChanged&&("horizontal"==this.type&&this.valueChanged(this.value),"vertical"==this.type&&this.valueChanged(this.max_value-this.value)))},this.updateProgressPosition=Y=>{var Se=this.target.getBoundingClientRect();"horizontal"==this.type&&this.setPercentage((Y.clientX-Se.left)/Se.width),"vertical"==this.type&&this.setPercentage((Y.clientY-Se.top)/Se.height)},l>f)throw"max_value must be larger than min_value";if(m>f||m<l)throw"Default value out of range";this.target=t,this.valueChanged=n,this.percentageChanged=r,this.seek_lock=!1,this.value=m,this.min_value=l,this.max_value=f,this.type=S,this.path=document.createElement("div"),this.path.style.border="1px solid white",this.path.style.cursor="pointer",this.fill=document.createElement("div"),"horizontal"==this.type&&(this.path.style.height="15px",this.path.style.width="100%",this.fill.style.height="100%",this.fill.style.width="0",this.fill.style.backgroundColor="#c54310"),"vertical"==this.type&&(this.path.style.width="4px",this.path.style.height="100%",this.path.style.backgroundColor="white",this.fill.style.width="2px",this.fill.style.height="100%",this.fill.style.backgroundColor="black"),this.path.appendChild(this.fill),this.target.appendChild(this.path),this.target.className=L,this.target.addEventListener("mousedown",Y=>{this.seek_lock=!0;var Se=this.target.getBoundingClientRect();window.addEventListener("mousemove",this.updateProgressPosition,!1),window.addEventListener("mouseup",this.seekMouseUp,!1),"horizontal"==this.type&&this.setPercentage((Y.clientX-Se.left)/Se.width),"vertical"==this.type&&this.setPercentage((Y.clientY-Se.top)/Se.height)},!1),this.setValue(m)}setMaxValue(t){this.max_value=t}getValue(){return this.value}getPercentage(){return this.percentage}setValue(t,n=!1){this.seek_lock||("vertical"==this.type&&(t=this.max_value-t),t>=this.max_value&&(t=this.max_value),t<=this.min_value&&(t=this.min_value),this.value=t,this.percentage=(t-this.min_value)/(this.max_value-this.min_value),this.represent(),this.valueChanged&&n&&this.valueChanged(this.value))}setPercentage(t,n=!1){t<0&&(t=0),t>1&&(t=1),this.value=t*(this.max_value-this.min_value),this.percentage=t,this.represent(),this.percentageChanged&&n&&this.percentageChanged(this.percentage)}represent(){"vertical"==this.type&&(this.fill.style.height=100*this.percentage+"%"),"horizontal"==this.type&&(this.fill.style.width=100*this.percentage+"%")}}var tp=Ti(660),hy=Ti(86);let gy=(()=>{class e{constructor(n){this.stateControllerService=n,this.title="Test Title",this.message="Test Message",n.registerTransitions("notification",[{from:"visible",to:"collapsed"},{from:"collapsed",to:"visible"}],"collapsed")}show(n,r){this.title=n,this.message=r,this.stateControllerService.transition("notification","visible")}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(bc))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),IA=(()=>{class e{static#e=this.STORAGE_API_CHROME=0;static#t=this.STORAGE_API_BROWSER=1;constructor(){this.storageApi=e.STORAGE_API_BROWSER,this.logger=new hy.Logger("StorageService",!0),null!=chrome.storage&&(console.log("STORAGE_API_CHROME"),this.storageApi=e.STORAGE_API_CHROME)}get(n,r=null){if(e.STORAGE_API_CHROME!=this.storageApi){var l=localStorage.getItem(n);l&&(l=JSON.parse(l)),r?.(l)}else chrome.storage.local.get([n]).then(f=>{r?.(f[n])})}set(n,r,l=null){if(e.STORAGE_API_CHROME==this.storageApi){let f={};return f[n]=r,void chrome.storage.local.set(f).then(()=>{l?.()})}localStorage.setItem(n,JSON.stringify(r)),l?.()}remove(n,r=null){e.STORAGE_API_CHROME!=this.storageApi?(localStorage.removeItem(n),r?.()):chrome.storage.local.remove(n).then(()=>{r?.()})}static#n=this.\u0275fac=function(r){return new(r||e)};static#r=this.\u0275prov=Wr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function DA(e){return Yt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class np{}class rp{}class gl{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const l=n.slice(0,r),f=l.toLowerCase(),m=n.slice(r+1).trim();this.maybeSetNormalizedName(l,f),this.headers.has(f)?this.headers.get(f).push(m):this.headers.set(f,[m])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof gl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new gl;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof gl?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const l=("a"===t.op?this.headers.get(n):void 0)||[];l.push(...r),this.headers.set(n,l);break;case"d":const f=t.value;if(f){let m=this.headers.get(n);if(!m)return;m=m.filter(S=>-1===f.indexOf(S)),0===m.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,m)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(t,n){const r=(Array.isArray(n)?n:[n]).map(f=>f.toString()),l=t.toLowerCase();this.headers.set(l,r),this.maybeSetNormalizedName(t,l)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class gP{encodeKey(t){return wA(t)}encodeValue(t){return wA(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const mP=/%(\d[a-f0-9])/gi,vP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wA(e){return encodeURIComponent(e).replace(mP,(t,n)=>vP[n]??t)}function ip(e){return`${e}`}class Fu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new gP,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pP(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(l=>{const f=l.indexOf("="),[m,S]=-1==f?[t.decodeKey(l),""]:[t.decodeKey(l.slice(0,f)),t.decodeValue(l.slice(f+1))],L=n.get(m)||[];L.push(S),n.set(m,L)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],l=Array.isArray(r)?r.map(ip):[ip(r)];this.map.set(n,l)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const l=t[r];Array.isArray(l)?l.forEach(f=>{n.push({param:r,value:f,op:"a"})}):n.push({param:r,value:l,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Fu({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(ip(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const l=r.indexOf(ip(t.value));-1!==l&&r.splice(l,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class yP{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function RA(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function MA(e){return typeof Blob<"u"&&e instanceof Blob}function NA(e){return typeof FormData<"u"&&e instanceof FormData}class oh{constructor(t,n,r,l){let f;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function EP(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||l?(this.body=void 0!==r?r:null,f=l):f=r,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new gl),this.context||(this.context=new yP),this.params){const m=this.params.toString();if(0===m.length)this.urlWithParams=n;else{const S=n.indexOf("?");this.urlWithParams=n+(-1===S?"?":S<n.length-1?"&":"")+m}}else this.params=new Fu,this.urlWithParams=n}serializeBody(){return null===this.body?null:RA(this.body)||MA(this.body)||NA(this.body)||function _P(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||NA(this.body)?null:MA(this.body)?this.body.type||null:RA(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,l=t.responseType||this.responseType,f=void 0!==t.body?t.body:this.body,m=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,S=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let L=t.headers||this.headers,Y=t.params||this.params;const Se=t.context??this.context;return void 0!==t.setHeaders&&(L=Object.keys(t.setHeaders).reduce((He,st)=>He.set(st,t.setHeaders[st]),L)),t.setParams&&(Y=Object.keys(t.setParams).reduce((He,st)=>He.set(st,t.setParams[st]),Y)),new oh(n,r,f,{params:Y,headers:L,context:Se,reportProgress:S,responseType:l,withCredentials:m})}}var Bf=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Bf||{});class py{constructor(t,n=200,r="OK"){this.headers=t.headers||new gl,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class my extends py{constructor(t={}){super(t),this.type=Bf.ResponseHeader}clone(t={}){return new my({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Vf extends py{constructor(t={}){super(t),this.type=Bf.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Vf({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class xA extends py{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function vy(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let LA=(()=>{class e{constructor(n){this.handler=n}request(n,r,l={}){let f;if(n instanceof oh)f=n;else{let L,Y;L=l.headers instanceof gl?l.headers:new gl(l.headers),l.params&&(Y=l.params instanceof Fu?l.params:new Fu({fromObject:l.params})),f=new oh(n,r,void 0!==l.body?l.body:null,{headers:L,context:l.context,params:Y,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const m=es(f).pipe(function dP(e,t){return Er(t)?nn(e,t,1):nn(e,1)}(L=>this.handler.handle(L)));if(n instanceof oh||"events"===l.observe)return m;const S=m.pipe(function hP(e,t){return Yt((n,r)=>{let l=0;n.subscribe(Tt(r,f=>e.call(t,f,l++)&&r.next(f)))})}(L=>L instanceof Vf));switch(l.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return S.pipe(Ze(L=>{if(null!==L.body&&!(L.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return L.body}));case"blob":return S.pipe(Ze(L=>{if(null!==L.body&&!(L.body instanceof Blob))throw new Error("Response is not a Blob.");return L.body}));case"text":return S.pipe(Ze(L=>{if(null!==L.body&&"string"!=typeof L.body)throw new Error("Response is not a string.");return L.body}));default:return S.pipe(Ze(L=>L.body))}case"response":return S;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Fu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,l={}){return this.request("PATCH",n,vy(l,r))}post(n,r,l={}){return this.request("POST",n,vy(l,r))}put(n,r,l={}){return this.request("PUT",n,vy(l,r))}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(np))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();function FA(e,t){return t(e)}function SP(e,t){return(n,r)=>t.intercept(n,{handle:l=>e(l,r)})}const AP=new lr(""),ah=new lr(""),kA=new lr("");function CP(){let e=null;return(t,n)=>{null===e&&(e=(Mr(AP,{optional:!0})??[]).reduceRight(SP,FA));const r=Mr(av),l=r.add();return e(t,n).pipe(DA(()=>r.remove(l)))}}let UA=(()=>{class e extends np{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Mr(av)}handle(n){if(null===this.chain){const l=Array.from(new Set([...this.injector.get(ah),...this.injector.get(kA,[])]));this.chain=l.reduceRight((f,m)=>function bP(e,t,n){return(r,l)=>n.runInContext(()=>t(r,f=>e(f,l)))}(f,m,this.injector),FA)}const r=this.pendingTasks.add();return this.chain(n,l=>this.backend.handle(l)).pipe(DA(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(rp),Fr(al))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();const RP=/^\)\]\}',?\n/;let VA=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Zn(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Ma(r.\u0275loadImpl()):es(null)).pipe(Sr(()=>new Dt(f=>{const m=r.build();if(m.open(n.method,n.urlWithParams),n.withCredentials&&(m.withCredentials=!0),n.headers.forEach((sn,Tn)=>m.setRequestHeader(sn,Tn.join(","))),n.headers.has("Accept")||m.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const sn=n.detectContentTypeHeader();null!==sn&&m.setRequestHeader("Content-Type",sn)}if(n.responseType){const sn=n.responseType.toLowerCase();m.responseType="json"!==sn?sn:"text"}const S=n.serializeBody();let L=null;const Y=()=>{if(null!==L)return L;const sn=m.statusText||"OK",Tn=new gl(m.getAllResponseHeaders()),Hn=function MP(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(m)||n.url;return L=new my({headers:Tn,status:m.status,statusText:sn,url:Hn}),L},Se=()=>{let{headers:sn,status:Tn,statusText:Hn,url:mn}=Y(),ir=null;204!==Tn&&(ir=typeof m.response>"u"?m.responseText:m.response),0===Tn&&(Tn=ir?200:0);let wr=Tn>=200&&Tn<300;if("json"===n.responseType&&"string"==typeof ir){const ri=ir;ir=ir.replace(RP,"");try{ir=""!==ir?JSON.parse(ir):null}catch(Go){ir=ri,wr&&(wr=!1,ir={error:Go,text:ir})}}wr?(f.next(new Vf({body:ir,headers:sn,status:Tn,statusText:Hn,url:mn||void 0})),f.complete()):f.error(new xA({error:ir,headers:sn,status:Tn,statusText:Hn,url:mn||void 0}))},He=sn=>{const{url:Tn}=Y(),Hn=new xA({error:sn,status:m.status||0,statusText:m.statusText||"Unknown Error",url:Tn||void 0});f.error(Hn)};let st=!1;const bt=sn=>{st||(f.next(Y()),st=!0);let Tn={type:Bf.DownloadProgress,loaded:sn.loaded};sn.lengthComputable&&(Tn.total=sn.total),"text"===n.responseType&&m.responseText&&(Tn.partialText=m.responseText),f.next(Tn)},Wt=sn=>{let Tn={type:Bf.UploadProgress,loaded:sn.loaded};sn.lengthComputable&&(Tn.total=sn.total),f.next(Tn)};return m.addEventListener("load",Se),m.addEventListener("error",He),m.addEventListener("timeout",He),m.addEventListener("abort",He),n.reportProgress&&(m.addEventListener("progress",bt),null!==S&&m.upload&&m.upload.addEventListener("progress",Wt)),m.send(S),f.next({type:Bf.Sent}),()=>{m.removeEventListener("error",He),m.removeEventListener("abort",He),m.removeEventListener("load",Se),m.removeEventListener("timeout",He),n.reportProgress&&(m.removeEventListener("progress",bt),null!==S&&m.upload&&m.upload.removeEventListener("progress",Wt)),m.readyState!==m.DONE&&m.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(eb))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();const yy=new lr("XSRF_ENABLED"),HA=new lr("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),GA=new lr("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ZA{}let LP=(()=>{class e{constructor(n,r,l){this.doc=n,this.platform=r,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=jS(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||e)(Fr(Nu),Fr(fc),Fr(HA))};static#t=this.\u0275prov=Wr({token:e,factory:e.\u0275fac})}return e})();function OP(e,t){const n=e.url.toLowerCase();if(!Mr(yy)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const r=Mr(ZA).getToken(),l=Mr(GA);return null!=r&&!e.headers.has(l)&&(e=e.clone({headers:e.headers.set(l,r)})),t(e)}var ku=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(ku||{});function PP(...e){const t=[LA,VA,UA,{provide:np,useExisting:UA},{provide:rp,useExisting:VA},{provide:ah,useValue:OP,multi:!0},{provide:yy,useValue:!0},{provide:ZA,useClass:LP}];for(const n of e)t.push(...n.\u0275providers);return function Hp(e){return{\u0275providers:e}}(t)}const jA=new lr("LEGACY_INTERCEPTOR_FN");function FP(){return function Ac(e,t){return{\u0275kind:e,\u0275providers:t}}(ku.LegacyInterceptors,[{provide:jA,useFactory:CP},{provide:ah,useExisting:jA,multi:!0}])}let kP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ea({type:e});static#n=this.\u0275inj=Ri({providers:[PP(FP())]})}return e})();function ZP(e,t){if(1&e&&(Nn(0,"option",56),ur(1),jn()),2&e){const n=t.$implicit;Or("ngValue",n),Tr(1),fl(n.lang)}}function jP(e,t){if(1&e&&(Nn(0,"option",56),ur(1),jn()),2&e){const n=t.$implicit;Or("ngValue",n),Tr(1),gg("",n.width,"x",n.height,": ",n.bitrateStr,"")}}function qP(e,t){if(1&e&&(Nn(0,"option",56),ur(1),jn()),2&e){const n=t.$implicit;Or("ngValue",n),Tr(1),fl(n)}}function KP(e,t){if(1&e){const n=Fd();Nn(0,"div",6)(1,"div",57)(2,"input",58),Cr("ngModelChange",function(l){const m=qn(n).index;return kn(fa().streamingUrlHeaders[m].name=l)})("ngModelChange",function(){qn(n);const l=fa();return kn(l.streamingUrlHeadersChange.emit(l.streamingUrlHeaders))}),jn()(),Nn(3,"div",57)(4,"input",58),Cr("ngModelChange",function(l){const m=qn(n).index;return kn(fa().streamingUrlHeaders[m].value=l)})("ngModelChange",function(){qn(n);const l=fa();return kn(l.streamingUrlHeadersChange.emit(l.streamingUrlHeaders))}),jn()(),Nn(5,"div",59),Cr("click",function(){const f=qn(n).index;return kn(fa().removeStreamingUrlHeader(f))}),Nn(6,"span",42),ur(7,"close"),jn()()()}if(2&e){const n=t.index,r=fa();Tr(2),Or("ngModel",r.streamingUrlHeaders[n].name),Tr(2),Or("ngModel",r.streamingUrlHeaders[n].value)}}function YP(e,t){if(1&e){const n=Fd();Nn(0,"div",6)(1,"div",57)(2,"input",58),Cr("ngModelChange",function(l){const m=qn(n).index;return kn(fa().licenseUrlHeaders[m].name=l)})("ngModelChange",function(){qn(n);const l=fa();return kn(l.licenseUrlHeadersChange.emit(l.licenseUrlHeaders))}),jn()(),Nn(3,"div",57)(4,"input",58),Cr("ngModelChange",function(l){const m=qn(n).index;return kn(fa().licenseUrlHeaders[m].value=l)})("ngModelChange",function(){qn(n);const l=fa();return kn(l.licenseUrlHeadersChange.emit(l.licenseUrlHeaders))}),jn()(),Nn(5,"div",59),Cr("click",function(){const f=qn(n).index;return kn(fa().removeLicenseUrlHeader(f))}),Nn(6,"span",42),ur(7,"close"),jn()()()}if(2&e){const n=t.index,r=fa();Tr(2),Or("ngModel",r.licenseUrlHeaders[n].name),Tr(2),Or("ngModel",r.licenseUrlHeaders[n].value)}}function zP(e,t){if(1&e){const n=Fd();Nn(0,"div",6)(1,"div",60),Cr("click",function(){const f=qn(n).$implicit;return kn(fa().playSavedStream(f))}),Nn(2,"span",42),ur(3,"play_arrow"),jn()(),Nn(4,"div",61),ur(5),jn(),Nn(6,"div",62),Cr("click",function(){const f=qn(n).index;return kn(fa().removeSavedStream(f))}),Nn(7,"span",42),ur(8,"close"),jn()()()}if(2&e){const n=t.$implicit;Tr(5),Ud(" ",n.name," ")}}function WP(e,t){if(1&e){const n=Fd();Nn(0,"div",6)(1,"div",60),Cr("click",function(){const f=qn(n).$implicit;return kn(fa().playSavedStream(f))}),Nn(2,"span",42),ur(3,"play_arrow"),jn()(),Nn(4,"div",61),ur(5),jn()()}if(2&e){const n=t.$implicit;Tr(5),Ud(" ",n.name," ")}}const Cc=function(e){return{"settings-menu-item-active":e}},Ic=function(e){return{"settings-section-active":e}};let $P=(()=>{class e{constructor(n,r,l,f){this.http=n,this.storageService=r,this.notificationService=l,this.stateControllerService=f,this.streamLoad=new qi,this.speedChange=new qi,this.qualityChange=new qi,this.licenseUrlChange=new qi,this.subtitleUrlChange=new qi,this.streamingUrlChange=new qi,this.audioTrackChange=new qi,this.licenseUrlHeadersChange=new qi,this.showNativePlayerControlsChange=new qi,this.streamingUrlHeadersChange=new qi,this.alwaysShowFullPlayerControlsChange=new qi,this.hrefUrl="",this.licenseUrl="",this.m3uPlaylist="",this.subtitleUrl="",this.streamingUrl="",this.selectedSpeed=1,this.currentStreamName="",this.m3uItems=[],this.savedStreams=[],this.licenseUrlHeaders=[],this.streamingUrlHeaders=[],this.showNativePlayerControls=!1,this.settingsSection="source-settings",this.alwaysShowFullPlayerControls=!1,this.logger=new hy.Logger("SettingsComponent"),this.speeds=[.25,.5,.75,1,1.25,1.5,1.75,2];var m=window.location.href.split("#");this.hrefUrl=m[1],-1==this.hrefUrl.indexOf(".m3u8")&&this.hrefUrl.indexOf(".m3u")>-1?(this.m3uPlaylist=this.hrefUrl,this.loadM3UPlaylist(),this.stateControllerService.transition("settings","visible"),this.settingsSection="m3u-source-settings"):(this.streamingUrl=this.hrefUrl,this.streamingUrlChange.emit(this.streamingUrl)),this.storageService.get("saved_streams",S=>{S&&(this.savedStreams=S)}),this.storageService.get("always-show-full-player-controls",S=>{void 0!==S&&(this.alwaysShowFullPlayerControls=S,this.alwaysShowFullPlayerControlsChange.emit(S))}),this.storageService.get("show-native-player-controls",S=>{void 0!==S&&(this.showNativePlayerControls=S,this.showNativePlayerControlsChange.emit(S))})}ngAfterViewInit(){-1==this.hrefUrl.indexOf(".m3u8")&&this.hrefUrl.indexOf(".m3u")>-1||this.loadStream()}toggleSettings(){this.stateControllerService.transition("settings","collapsed")}loadStream(){this.licenseUrlChange?.emit(this.licenseUrl),this.subtitleUrlChange.emit(this.subtitleUrl),this.streamingUrlChange?.emit(this.streamingUrl),this.licenseUrlHeadersChange.emit(this.licenseUrlHeaders),this.streamingUrlHeadersChange.emit(this.streamingUrlHeaders),this.alwaysShowFullPlayerControlsChange.emit(this.alwaysShowFullPlayerControls),this.showNativePlayerControlsChange.emit(this.showNativePlayerControls),this.streamLoad.emit(this.streamingUrl)}showSection(n){this.settingsSection=n}addStreamingUrlHeader(){this.streamingUrlHeaders.push({name:"",value:""}),this.streamingUrlHeadersChange.emit(this.streamingUrlHeaders)}removeStreamingUrlHeader(n){this.streamingUrlHeaders.splice(n,1),this.streamingUrlHeadersChange.emit(this.streamingUrlHeaders)}addLicenseUrlHeader(){this.licenseUrlHeaders.push({name:"",value:""}),this.licenseUrlHeadersChange.emit(this.licenseUrlHeaders)}removeLicenseUrlHeader(n){this.licenseUrlHeaders.splice(n,1),this.licenseUrlHeadersChange.emit(this.licenseUrlHeaders)}saveCurrentStream(){this.currentStreamName?(this.savedStreams.push({name:this.currentStreamName,streamingUrl:this.streamingUrl,licenseUrl:this.licenseUrl,subtitleUrl:this.subtitleUrl,licenseUrlHeaders:this.licenseUrlHeaders,streamingUrlHeaders:this.streamingUrlHeaders}),this.storageService.set("saved_streams",this.savedStreams)):this.notificationService.show("Stream Save Error","You need to provide a stream name.")}removeSavedStream(n){confirm("Are you sure?")&&this.savedStreams.splice(n,1),this.storageService.set("saved_streams",this.savedStreams)}playSavedStream(n){this.licenseUrl=n.licenseUrl,this.currentStreamName=n.name,this.subtitleUrl=n.subtitleUrl,this.streamingUrl=n.streamingUrl,this.streamingUrlHeaders=n.streamingUrlHeaders,this.licenseUrlHeaders=n.licenseUrlHeaders,this.loadStream()}loadM3UPlaylist(){this.stateControllerService.transition("loader","visible"),this.logger.d(this.m3uPlaylist),this.m3uItems=[],this.http.request("GET",this.m3uPlaylist,{responseType:"text"}).subscribe(n=>{for(var r=n.split("\n"),l=0;l<r.length;l++){var f=r[l];if(""!=f&&"#EXTM3U"!=f&&0==f.indexOf("#EXTINF")&&0==r[l+1].indexOf("http")){var m=f.split(",");this.m3uItems.push({name:m[1],streamingUrl:r[l+1],licenseUrl:"",subtitleUrl:"",licenseUrlHeaders:[],streamingUrlHeaders:[]})}}this.logger.d(this.m3uItems),this.stateControllerService.transition("loader","collapsed")})}alwaysShowFullPlayerControlsChanged(){this.alwaysShowFullPlayerControlsChange.emit(this.alwaysShowFullPlayerControls),this.storageService.set("always-show-full-player-controls",this.alwaysShowFullPlayerControls)}showNativePlayerControlsChanged(){this.showNativePlayerControlsChange.emit(this.showNativePlayerControls),this.storageService.set("show-native-player-controls",this.showNativePlayerControls)}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(LA),Fn(IA),Fn(gy),Fn(bc))};static#t=this.\u0275cmp=Cs({type:e,selectors:[["app-settings"]],inputs:{qualities:"qualities",selectedQuality:"selectedQuality",audioTracks:"audioTracks",currentAutoQuality:"currentAutoQuality",selectedAudioTrack:"selectedAudioTrack"},outputs:{streamLoad:"streamLoad",speedChange:"speedChange",qualityChange:"qualityChange",licenseUrlChange:"licenseUrlChange",subtitleUrlChange:"subtitleUrlChange",streamingUrlChange:"streamingUrlChange",audioTrackChange:"audioTrackChange",licenseUrlHeadersChange:"licenseUrlHeadersChange",showNativePlayerControlsChange:"showNativePlayerControlsChange",streamingUrlHeadersChange:"streamingUrlHeadersChange",alwaysShowFullPlayerControlsChange:"alwaysShowFullPlayerControlsChange"},decls:197,vars:63,consts:[["id","settings"],[1,"settings-menu"],[1,"settings-menu-item",3,"ngClass","click"],[2,"float","right","width","20px","cursor","pointer","height","20px","margin-right","10px","margin-left","10px",3,"click"],[1,"material-icons",2,"font-size","14pt"],[1,"settings-section",3,"ngClass"],[1,"form-field-container"],[1,"form-field-container-inline"],["for","streaming-url"],["type","text","id","streaming-url","name","streaming-url",3,"ngModel","ngModelChange"],["for","license-url"],["type","text","id","license-url","name","license-url",3,"ngModel","ngModelChange"],["for","subtitle-url"],["type","text","id","subtitle-url","name","subtitle-url",3,"ngModel","ngModelChange"],[3,"click"],["for","audio-track-selection"],["id","audio-track-selection","name","audio-track-selection",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["for","quality-selection"],[1,"form-field-container-inline",2,"width","200px"],["id","quality-selection","name","quality-selection",3,"ngModel","ngModelChange"],["for","playback-speed-selection"],["id","playback-speed-selection","name","playback-speed-selection",3,"ngModel","ngModelChange"],["for","playback-speed-input"],["type","number","step",".1","min","0","id","playback-speed-input","name","playback-speed-input",3,"ngModel","ngModelChange"],["for","full-player-controls-checkbox"],["type","checkbox","id","full-player-controls-checkbox",3,"ngModel","ngModelChange"],["for","native-player-controls-checkbox"],["type","checkbox","id","native-player-controls-checkbox",3,"ngModel","ngModelChange"],["class","form-field-container",4,"ngFor","ngForOf"],[1,"form-field-container-inline",2,"width","250px","margin-right","10px"],[1,"http-btn",3,"click"],[1,"form-field-container-inline",2,"width","250px"],[1,"form-field-container",2,"height","500px","overflow-y","auto"],["for","current-stream-name-input"],[1,"form-field-container-inline",2,"width","225px"],["name","current-stream-name-input","id","current-stream-name-input",3,"ngModel","ngModelChange"],["for","m3u-source-input"],["name","m3u-source-input","id","m3u-source-input",3,"ngModel","ngModelChange"],["target","_blank","href","https://github.com/Palethorn/nas-extension/blob/master/Privacy%20Policy.pdf"],["target","_blank","href","/release_notes.html"],["target","_blank","href","https://github.com/Palethorn/nas-extension"],[1,"material-icons"],["target","_blank","href","https://music.youtube.com/channel/UC3gBKosgHP9qAeCUJH0xIrQ"],["target","_blank","href","https://music.apple.com/us/artist/shiro-ryuu/1666369706"],["target","_blank","href","https://open.spotify.com/artist/0ZlEd7woVoVeooBpBWaxGh"],["target","_blank","href","https://www.deezer.com/us/artist/197843387"],["target","_blank","href","https://shiroryuu.bandcamp.com/"],["target","_blank","href","https://www.youtube.com/@shiro_ryuu"],["target","_blank","href","https://www.instagram.com/palethorn/"],["target","_blank","href","https://www.threads.net/@palethorn"],["target","_blank","href","https://paypal.me/nativeadaptivestream"],["href","monero:86vY4r573cpBSs2RmLT6H9EGpw8LihAbL75Qxcspg9YW3j4sXB6BUVHLLbypXm6tR5hGg2eqfEJxDF2MgZYzFU618jddxVR"],["width","150","height","150","src","assets/monero_address.png"],["href","bitcoin:bc1qex67zfjfnv57w436p2uhdmxdlyu8dyy5lghrck"],["width","150","height","150","src","assets/bitcoin_address.png"],[3,"ngValue"],[1,"form-field-container-inline",2,"width","260px"],["type","text",1,"http-header-input",3,"ngModel","ngModelChange"],[1,"form-field-container-inline",2,"width","40px","cursor","pointer","padding-top","2px",3,"click"],[1,"form-field-container-inline",2,"width","40px","height","20px","cursor","pointer","vertical-align","top",3,"click"],[1,"form-field-container-inline",2,"width","312px","height","20px"],[1,"form-field-container-inline",2,"width","176px","cursor","pointer","text-align","right",3,"click"]],template:function(r,l){1&r&&(Nn(0,"div",0)(1,"div",1)(2,"div",2),Cr("click",function(){return l.showSection("source-settings")}),ur(3," Source Settings "),jn(),Nn(4,"div",2),Cr("click",function(){return l.showSection("stream-settings")}),ur(5," Stream Settings "),jn(),Nn(6,"div",2),Cr("click",function(){return l.showSection("player-settings")}),ur(7," Player Settings "),jn(),Nn(8,"div",2),Cr("click",function(){return l.showSection("http-settings")}),ur(9," HTTP Settings "),jn(),Nn(10,"div",2),Cr("click",function(){return l.showSection("m3u-source-settings")}),ur(11," M3U Source "),jn(),Nn(12,"div",2),Cr("click",function(){return l.showSection("saved-streams")}),ur(13," Saved Streams "),jn(),Nn(14,"div",2),Cr("click",function(){return l.showSection("about")}),ur(15," Links "),jn(),Nn(16,"div",3),Cr("click",function(){return l.toggleSettings()}),Nn(17,"span",4),ur(18,"close"),jn()()(),Nn(19,"div",5)(20,"div",6)(21,"div",7)(22,"label",8),ur(23,"Streaming URL"),jn()(),Nn(24,"div",7)(25,"input",9),Cr("ngModelChange",function(m){return l.streamingUrl=m}),jn()()(),Nn(26,"div",6)(27,"div",7)(28,"label",10),ur(29,"License URL"),jn()(),Nn(30,"div",7)(31,"input",11),Cr("ngModelChange",function(m){return l.licenseUrl=m}),jn()()(),Nn(32,"div",6)(33,"div",7)(34,"label",12),ur(35,"Subtitle URL"),jn()(),Nn(36,"div",7)(37,"input",13),Cr("ngModelChange",function(m){return l.subtitleUrl=m})("ngModelChange",function(){return l.subtitleUrlChange.emit(l.subtitleUrl)}),jn()()(),Nn(38,"div",6)(39,"div",7)(40,"button",14),Cr("click",function(){return l.loadStream()}),ur(41,"Load Stream"),jn()()()(),Nn(42,"div",5)(43,"div",6)(44,"div",7)(45,"label",15),ur(46,"Select Audio Track"),jn()(),Nn(47,"div",7)(48,"select",16),Cr("ngModelChange",function(m){return l.selectedAudioTrack=m})("ngModelChange",function(){return l.audioTrackChange.emit(l.selectedAudioTrack)}),wu(49,ZP,2,2,"option",17),jn()()(),Nn(50,"div",6)(51,"div",7)(52,"label",18),ur(53),jn()(),Nn(54,"div",19)(55,"select",20),Cr("ngModelChange",function(m){return l.selectedQuality=m})("ngModelChange",function(){return l.qualityChange.emit(l.selectedQuality)}),wu(56,jP,2,4,"option",17),jn()()(),Nn(57,"div",6)(58,"div",7)(59,"label",21),ur(60,"Select Playback Speed"),jn()(),Nn(61,"div",7)(62,"select",22),Cr("ngModelChange",function(m){return l.selectedSpeed=m})("ngModelChange",function(){return l.speedChange.emit(l.selectedSpeed)}),wu(63,qP,2,2,"option",17),jn()()(),Nn(64,"div",6)(65,"div",7)(66,"label",23),ur(67,"Custom Playback Speed"),jn()(),Nn(68,"div",7)(69,"div",7)(70,"input",24),Cr("ngModelChange",function(m){return l.selectedSpeed=m})("ngModelChange",function(){return l.speedChange.emit(l.selectedSpeed)}),jn()()()()(),Nn(71,"div",5)(72,"div",6)(73,"div",7)(74,"label",25),ur(75,"Always show full player controls"),jn()(),Nn(76,"div",7)(77,"input",26),Cr("ngModelChange",function(m){return l.alwaysShowFullPlayerControls=m})("ngModelChange",function(){return l.alwaysShowFullPlayerControlsChanged()}),jn()()(),Nn(78,"div",6)(79,"div",7)(80,"label",27),ur(81,"Show native player controls"),jn()(),Nn(82,"div",7)(83,"input",28),Cr("ngModelChange",function(m){return l.showNativePlayerControls=m})("ngModelChange",function(){return l.showNativePlayerControlsChanged()}),jn()()()(),Nn(84,"div",5)(85,"div",6),ur(86,"Streaming Url Headers"),jn(),wu(87,KP,8,2,"div",29),Nn(88,"div",6),ur(89,"License Url Headers"),jn(),wu(90,YP,8,2,"div",29),Nn(91,"div",6)(92,"div",30)(93,"button",31),Cr("click",function(){return l.addStreamingUrlHeader()}),ur(94,"Add Streaming URL Header"),jn()(),Nn(95,"div",30)(96,"button",31),Cr("click",function(){return l.addLicenseUrlHeader()}),ur(97,"Add License Url Header"),jn()()(),Nn(98,"div")(99,"div",32)(100,"button",31),Cr("click",function(){return l.loadStream()}),ur(101,"Reload stream"),jn()()()(),Nn(102,"div",5)(103,"div",33),wu(104,zP,9,1,"div",29),jn(),Nn(105,"div",6)(106,"div",7)(107,"label",34),ur(108,"Current Stream Name"),jn()(),Nn(109,"div",35)(110,"input",36),Cr("ngModelChange",function(m){return l.currentStreamName=m}),jn()()(),Nn(111,"div",6)(112,"div",35)(113,"button",14),Cr("click",function(){return l.saveCurrentStream()}),ur(114,"Save Current Stream"),jn()()()(),Nn(115,"div",5)(116,"div",33),wu(117,WP,6,1,"div",29),jn(),Nn(118,"div",6)(119,"div",7)(120,"label",37),ur(121,"Current Stream Name"),jn()(),Nn(122,"div",35)(123,"input",38),Cr("ngModelChange",function(m){return l.m3uPlaylist=m}),jn()()(),Nn(124,"div",6)(125,"div",35)(126,"button",14),Cr("click",function(){return l.loadM3UPlaylist()}),ur(127,"Load M3U Playlist"),jn()()()(),Nn(128,"div",5)(129,"div",6)(130,"a",39),ur(131,"Privacy Policy"),jn()(),Nn(132,"div",6)(133,"a",40),ur(134,"Release Notes"),jn()(),Nn(135,"div",6)(136,"a",41),ur(137,"Extension Github Page"),jn()(),Nn(138,"div",6),ur(139," Check Out My Music "),Nn(140,"span",42),ur(141,"music_note"),jn(),Nn(142,"ul")(143,"li")(144,"a",43),ur(145,"Youtube Music"),jn()(),Nn(146,"li")(147,"a",44),ur(148,"Apple Music"),jn()(),Nn(149,"li")(150,"a",45),ur(151,"Spotify"),jn()(),Nn(152,"li")(153,"a",46),ur(154,"Deezer"),jn()(),Nn(155,"li")(156,"a",47),ur(157,"Bandcamp"),jn()(),Nn(158,"li"),ur(159,"iTunes"),jn(),Nn(160,"li"),ur(161,"Tidal"),jn()()(),Nn(162,"div",6),ur(163," Follow me on social "),Nn(164,"span",42),ur(165,"group"),jn(),Nn(166,"ul")(167,"li")(168,"a",48),ur(169,"Personal Youtube"),jn()(),Nn(170,"li")(171,"a",49),ur(172,"Instagram"),jn()(),Nn(173,"li")(174,"a",50),ur(175,"Threads"),jn()()()(),Nn(176,"div",6),ur(177," Donate "),Nn(178,"span",42),ur(179,"favorite"),jn(),Nn(180,"ul")(181,"li")(182,"a",51),Aa(183,"span"),ur(184,"Donate using PayPal"),jn()(),Nn(185,"li")(186,"a",52),Aa(187,"span"),ur(188,"Donate using Monero"),jn(),Nn(189,"div"),Aa(190,"img",53),jn()(),Nn(191,"li")(192,"a",54),Aa(193,"span"),ur(194,"Donate using BTC"),jn(),Nn(195,"div"),Aa(196,"img",55),jn()()()()()()),2&r&&(Tr(2),Or("ngClass",vo(35,Cc,"source-settings"==l.settingsSection)),Tr(2),Or("ngClass",vo(37,Cc,"stream-settings"==l.settingsSection)),Tr(2),Or("ngClass",vo(39,Cc,"player-settings"==l.settingsSection)),Tr(2),Or("ngClass",vo(41,Cc,"http-settings"==l.settingsSection)),Tr(2),Or("ngClass",vo(43,Cc,"m3u-source-settings"==l.settingsSection)),Tr(2),Or("ngClass",vo(45,Cc,"saved-streams"==l.settingsSection)),Tr(2),Or("ngClass",vo(47,Cc,"about"==l.settingsSection)),Tr(5),Or("ngClass",vo(49,Ic,"source-settings"==l.settingsSection)),Tr(6),Or("ngModel",l.streamingUrl),Tr(6),Or("ngModel",l.licenseUrl),Tr(6),Or("ngModel",l.subtitleUrl),Tr(5),Or("ngClass",vo(51,Ic,"stream-settings"==l.settingsSection)),Tr(6),Or("ngModel",l.selectedAudioTrack),Tr(1),Or("ngForOf",l.audioTracks),Tr(4),gg("Select Quality (Current: ",l.currentAutoQuality.width,"x",l.currentAutoQuality.height,": ",l.currentAutoQuality.bitrateStr,")"),Tr(2),Or("ngModel",l.selectedQuality),Tr(1),Or("ngForOf",l.qualities),Tr(6),Or("ngModel",l.selectedSpeed),Tr(1),Or("ngForOf",l.speeds),Tr(7),Or("ngModel",l.selectedSpeed),Tr(1),Or("ngClass",vo(53,Ic,"player-settings"==l.settingsSection)),Tr(6),Or("ngModel",l.alwaysShowFullPlayerControls),Tr(6),Or("ngModel",l.showNativePlayerControls),Tr(1),Or("ngClass",vo(55,Ic,"http-settings"==l.settingsSection)),Tr(3),Or("ngForOf",l.streamingUrlHeaders),Tr(3),Or("ngForOf",l.licenseUrlHeaders),Tr(12),Or("ngClass",vo(57,Ic,"saved-streams"==l.settingsSection)),Tr(2),Or("ngForOf",l.savedStreams),Tr(6),Or("ngModel",l.currentStreamName),Tr(5),Or("ngClass",vo(59,Ic,"m3u-source-settings"==l.settingsSection)),Tr(2),Or("ngForOf",l.m3uItems),Tr(6),Or("ngModel",l.m3uPlaylist),Tr(5),Or("ngClass",vo(61,Ic,"about"==l.settingsSection)))},dependencies:[hA,pA,Zg,ay,qv,ep,qb,fy,oy,Bg,YS],styles:["[_nghost-%COMP%]{position:absolute;width:100%;margin-top:10px}.form-field-container-inline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:25px;height:25px;text-align:center;vertical-align:middle}#settings[_ngcontent-%COMP%]{width:952px;position:relative;margin-left:auto;margin-right:auto;background-color:#242424;padding:10px;border:1px solid #929292}.settings-menu[_ngcontent-%COMP%]{background-color:#3d3d3d;border-bottom:1px solid #929292;width:950px;height:40px;text-align:left;padding-top:10px;margin-left:-10px;margin-top:-10px}.settings-menu-item[_ngcontent-%COMP%]{margin-left:10px;display:inline-block;font-size:12pt;height:20px;cursor:pointer;color:#dbdbdb;width:120px;text-align:center}.settings-menu-item-active[_ngcontent-%COMP%]{border-bottom:1px solid #929292;color:#fff}.settings-section[_ngcontent-%COMP%]{overflow:hidden;height:0;max-height:800px;overflow-y:auto;overflow-x:hidden}.settings-section-active[_ngcontent-%COMP%]{height:initial}.http-btn[_ngcontent-%COMP%], .http-header-input[_ngcontent-%COMP%]{width:250px}input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px}"]})}return e})();const XP=["settings"],QP=["progress"],JP=["volume"],sh=function(e){return{"visibility-collapsed":e}};let eF=(()=>{class e{constructor(n,r,l){this.stateControllerService=n,this.notificationService=r,this.storageService=l,this.seekLock=!1,this.fullscreen=!1,this.icon="play_arrow",this.duration="00:00:00",this.currentTime="00:00:00",this.volumeIcon="volume_up",this.showNativePlayerControls=!1,this.alwaysShowFullPlayerControls=!1,this.selectedAudioTrack={lang:"Default",name:"Default",index:0},this.selectedQuality={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0},this.currentAutoQuality={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0},this.streamingUrlHeaders={},this.licenseUrlHeaders={},this.qualities=[{index:0,bitrate:0,bitrateStr:"0k",width:0,height:0}],this.audioTracks=[this.selectedAudioTrack],this.logger=new hy.Logger("PlayerControlsComponent"),this.keyEvents=f=>{console.log(f),"KeyF"==f.code&&this.toggleFullscreen(),"KeyM"==f.code&&this.toggleMute(),"Space"==f.code&&this.playPause(),"ArrowRight"==f.code&&this.progressBar.setValue(this.progressBar.getValue()+5,!0),"ArrowLeft"==f.code&&this.progressBar.setValue(this.progressBar.getValue()-5,!0),"ArrowUp"==f.code&&this.volumeBar.setValue(this.volumeBar.getValue()+.1,!0),"ArrowDown"==f.code&&this.volumeBar.setValue(this.volumeBar.getValue()-.1,!0),"KeyS"==f.code&&("collapsed"==this.stateControllerService.getState("settings")?this.stateControllerService.transition("settings","visible"):this.stateControllerService.transition("settings","collapsed"))},this.freezeControls=()=>{this.stateControllerService.lock("controls","visible")},this.unfreezeControls=()=>{this.stateControllerService.unlock("controls"),this.stateControllerService.transition("controls","collapsed")},n.setDebug(!1),n.registerTransitions("settings",[{from:"collapsed",to:"visible",object:this,handle:()=>{document.removeEventListener("keydown",this.keyEvents)}},{from:"visible",to:"collapsed",object:this,handle:()=>{document.addEventListener("keydown",this.keyEvents)}}],"collapsed"),n.registerTransitions("controls",[{from:"collapsed",to:"visible",object:this,handle:()=>{document.body.style.cursor="initial"}},{from:"visible",to:"collapsed",object:this,delay:2500,handle:()=>{n.getIsLocked("controls")||(document.body.style.cursor="none")}}],"collapsed"),this.player=new tp.J5}ngOnInit(){}ngAfterViewInit(){this.resizeProgressBar(),this.progressBar=new CA(this.progress.nativeElement,r=>{isNaN(r)||this.player.seek(r)},null,0,this.player.getDuration(),0,"horizontal","controls-item controls-padding"),this.volumeBar=new CA(this.volume.nativeElement,r=>{isNaN(r)||this.setVolume(r)},null,0,.99,.99,"horizontal","controls-item controls-padding"),window.addEventListener("mousemove",r=>{this.displayControls()},!1);var n=document.querySelectorAll(".controls-item");for(let r=0;r<n.length;r++)n[r].addEventListener("click",this.animateControlItem.bind(n[r]));document.addEventListener("keydown",this.keyEvents),this.storageService.get("player-volume",r=>{console.log("get player-volume",r),void 0!==r&&this.volumeBar.setValue(r),this.storageService.get("player-muted",l=>{console.log("get player-muted",l),void 0!==l&&(console.log("get player-muted",l),l&&this.player.mute(),this.setVolumeIcon())})})}animateControlItem(n){n.target.style.background="click_animation .250s"}loadStream(){if(!this.streamingUrl)return this.notificationService.show("Player Error","Please enter streaming URL"),this.stateControllerService.transition("settings","visible"),void this.stateControllerService.transition("loader","collapsed");this.stateControllerService.transition("settings","collapsed"),this.player.destroy(),this.player=new tp.J5,this.guessTech(this.streamingUrl),this.attachPlayerEventHandlers();let n=null,r=null;0!=Object.keys(this.streamingUrlHeaders).length&&(r=this.streamingUrlHeaders),0!=Object.keys(this.licenseUrlHeaders).length&&(n=this.licenseUrlHeaders),this.player.init(this.tech,this.videoElement,this.streamingUrl,!0,!1,r,{"com.widevine.alpha":{serverURL:this.licenseUrl,httpRequestHeaders:n}},l=>{this.notificationService.show("Player Error","Please enter license URL"),this.stateControllerService.transition("settings","visible"),this.stateControllerService.transition("loader","collapsed")}),this.subtitleUrl&&this.player.loadSubtitles(this.subtitleUrl)}loadSubtitle(n){this.player.loadSubtitles(n)}displayControls(){this.stateControllerService.transition("controls","visible"),this.stateControllerService.transition("controls","collapsed")}playPause(){this.player.videoElement.paused?(this.icon="pause",this.player.play()):(this.icon="play_arrow",this.player.pause())}subtitleDelay(n){var r=n.target.value;r&&this.player.getSubtitlesUrl()&&""!=this.player.getSubtitlesUrl()&&this.player.loadSubtitles(this.player.getSubtitlesUrl()+"&delay="+r)}selectAudioTrack(n){this.selectedAudioTrack=n,this.player.setAudioTrack(n.index)}selectQuality(n){this.selectedQuality=n,this.player.setQuality(n.index)}selectSpeed(n){n<0?this.notificationService.show("Playback rate","Playback rate cannot be negative"):this.player.setPlaybackRate(n)}toggleFullscreen(){this.fullscreen?(document.exitFullscreen(),this.fullscreen=!1):(this.parent.requestFullscreen(),this.fullscreen=!0)}toggleSettings(){"visible"==this.stateControllerService.getState("settings")?this.stateControllerService.transition("settings","collapsed"):this.stateControllerService.transition("settings","visible")}guessTech(n){if(typeof n>"u")this.logger.e("URL is undefined");else if(n.indexOf(".mpd")>-1?(this.logger.d("Selecting DASH tech..."),this.tech=new tp.tX):n.indexOf(".m3u8")>-1&&(this.logger.d("Selecting HLS tech..."),this.tech=new tp.X6),null==this.tech)throw"Url "+n+" not recognized."}attachPlayerEventHandlers(){this.player.addEventHandler("playing",n=>{this.logger.d("play"),this.stateControllerService.transition("loader","collapsed"),this.icon="pause",this.audioTracks=this.player.getAudioTracks(),this.selectedAudioTrack=this.audioTracks[0],this.qualities=this.player.getQualities(),this.updateCurrentAutoQuality().then(()=>{this.selectedQuality=this.qualities[0]});let r=this.player.getDuration();Number.isFinite(r)&&(this.duration=this.formatTimeFromSeconds(this.player.getDuration()))}),this.player.addEventHandler("seeking",()=>{this.logger.d("seeking"),this.stateControllerService.transition("loader","visible")}),this.player.addEventHandler("waiting",()=>{this.logger.d("waiting"),this.stateControllerService.transition("loader","visible")}),this.player.addEventHandler("error",n=>{this.logger.e(n),this.notificationService.show("Player error",n.message)}),this.player.addEventHandler("hlsError",n=>{this.logger.e(n.details),this.notificationService.show("Player error",n.details)}),this.player.addEventHandler("streamInitialized",()=>{}),this.player.addEventHandler("timeupdate",()=>{this.currentTime=this.formatTimeFromSeconds(this.player.getCurrentTime()),this.progressBar&&this.progressBar.setMaxValue(this.player.getDuration()),this.player.getCurrentTime&&this.progressBar.setValue(this.player.getCurrentTime()),this.updateCurrentAutoQuality()})}updateCurrentAutoQuality(){var n=this;return function fP(e){return function(){var t=this,n=arguments;return new Promise(function(r,l){var f=e.apply(t,n);function m(L){AA(f,r,l,m,S,"next",L)}function S(L){AA(f,r,l,m,S,"throw",L)}m(void 0)})}}(function*(){var r=n.player.getCurrentQuality();for(var l in n.qualities)if(n.qualities[l].index==r.index)return void(n.currentAutoQuality=n.qualities[l])})()}formatTimeFromSeconds(n){var r=Math.floor(n/3600),l=Math.floor(n/60);l=l<60?l:Math.floor(n/60)-60*r;var f=n<60?n:n-(3600*r+60*l);return f=Math.floor(f),r.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0")}resizeProgressBar(){this.progress.nativeElement.style.width=window.innerWidth-445+"px"}onResize(n){this.resizeProgressBar()}changeStreamingUrl(n){this.streamingUrl=n}changeLicenseUrl(n){this.licenseUrl=n}changeStreamingUrlHeaders(n){this.streamingUrlHeaders={};for(let r=0;r<n.length;r++)""!=n[r].name&&""!=n[r].value&&(this.streamingUrlHeaders[n[r].name]=n[r].value)}changeLicenseUrlHeaders(n){this.licenseUrlHeaders={};for(let r=0;r<n.length;r++)""!=n[r].name&&""!=n[r].value&&(this.licenseUrlHeaders[n[r].name]=n[r].value)}toggleMute(){this.player.isMuted()?(this.player.unmute(),this.storageService.set("player-muted",!1,()=>{console.log("set player-muted false")})):(this.player.mute(),this.storageService.set("player-muted",!0,()=>{console.log("set player-muted true")})),this.setVolumeIcon()}setVolume(n){this.player.setVolume(n),this.setVolumeIcon(),this.storageService.set("player-volume",n,()=>{console.log("set player-volume",n)})}setVolumeIcon(){console.log(this.player.getVolume()),this.player.isMuted()?this.volumeIcon="volume_off":0==this.player.getVolume()?this.volumeIcon="volume_mute":this.player.getVolume()>0&&this.player.getVolume()<=.5?this.volumeIcon="volume_down":this.player.getVolume()>.5&&(this.volumeIcon="volume_up")}changeAlwaysShowFullPlayerControls(n){this.alwaysShowFullPlayerControls=n}changeShowNativePlayerControls(n){this.showNativePlayerControls=n,1==n?(this.stateControllerService.lock("controls","collapsed"),this.videoElement.controls=!0):(this.stateControllerService.unlock("controls"),this.videoElement.controls=!1)}ngOnDestroy(){var n=document.querySelectorAll(".controls-item");for(let r=0;r<n.length;r++)n[r].removeEventListener("click",this.animateControlItem)}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(bc),Fn(gy),Fn(IA))};static#t=this.\u0275cmp=Cs({type:e,selectors:[["app-player-controls"]],viewQuery:function(r,l){if(1&r&&(yc(XP,5),yc(QP,5),yc(JP,5)),2&r){let f;vc(f=Ec())&&(l.settings=f.first),vc(f=Ec())&&(l.progress=f.first),vc(f=Ec())&&(l.volume=f.first)}},hostBindings:function(r,l){1&r&&Cr("resize",function(m){return l.onResize(m)},0,fm)},inputs:{parent:"parent",videoElement:"videoElement"},decls:24,vars:24,consts:[["id","player-controls",3,"ngClass","mouseover","mouseleave"],["id","controls-play-pause",1,"controls-item","controls-btn",3,"click"],[1,"material-icons","control-item",2,"width","40px","height","40px"],["id","controls-time",1,"controls-item","controls-padding",3,"ngClass"],["id","controls-progress",1,"controls-item","controls-padding",3,"ngClass"],["progress",""],["id","controls-duration",1,"controls-item","controls-padding",3,"ngClass"],["id","controls-volume-icon",1,"controls-item","controls-btn",3,"click"],["id","controls-volume",1,"controls-item","controls-padding"],["volume",""],["id","controls-settings",1,"controls-item","controls-btn",3,"click"],["id","controls-fullscreen",1,"controls-item","controls-btn",3,"click"],["id","settings-container",3,"qualities","audioTracks","selectedAudioTrack","selectedQuality","currentAutoQuality","ngClass","streamLoad","speedChange","qualityChange","subtitleUrlChange","audioTrackChange","licenseUrlChange","streamingUrlChange","licenseUrlHeadersChange","streamingUrlHeadersChange","showNativePlayerControlsChange","alwaysShowFullPlayerControlsChange"]],template:function(r,l){1&r&&(Nn(0,"div",0),Cr("mouseover",function(){return l.freezeControls()})("mouseleave",function(){return l.unfreezeControls()}),Nn(1,"div",1),Cr("click",function(){return l.playPause()}),Nn(2,"span",2),ur(3),jn()(),Nn(4,"div",3)(5,"span"),ur(6),jn()(),Aa(7,"div",4,5),Nn(9,"div",6)(10,"span"),ur(11),jn()(),Nn(12,"div",7),Cr("click",function(){return l.toggleMute()}),Nn(13,"span",2),ur(14),jn()(),Aa(15,"div",8,9),Nn(17,"div",10),Cr("click",function(){return l.toggleSettings()}),Nn(18,"span",2),ur(19,"settings"),jn()(),Nn(20,"div",11),Cr("click",function(){return l.toggleFullscreen()}),Nn(21,"span",2),ur(22,"fullscreen"),jn()()(),Nn(23,"app-settings",12),Cr("streamLoad",function(){return l.loadStream()})("speedChange",function(m){return l.selectSpeed(m)})("qualityChange",function(m){return l.selectQuality(m)})("subtitleUrlChange",function(m){return l.loadSubtitle(m)})("audioTrackChange",function(m){return l.selectAudioTrack(m)})("licenseUrlChange",function(m){return l.changeLicenseUrl(m)})("streamingUrlChange",function(m){return l.changeStreamingUrl(m)})("licenseUrlHeadersChange",function(m){return l.changeLicenseUrlHeaders(m)})("streamingUrlHeadersChange",function(m){return l.changeStreamingUrlHeaders(m)})("showNativePlayerControlsChange",function(m){return l.changeShowNativePlayerControls(m)})("alwaysShowFullPlayerControlsChange",function(m){return l.changeAlwaysShowFullPlayerControls(m)}),jn()),2&r&&(Or("ngClass",vo(14,sh,"collapsed"==l.stateControllerService.getState("controls"))),Tr(3),fl(l.icon),Tr(1),Or("ngClass",vo(16,sh,l.player.isLive()&&0==l.alwaysShowFullPlayerControls)),Tr(2),fl(l.currentTime),Tr(1),Or("ngClass",vo(18,sh,l.player.isLive()&&0==l.alwaysShowFullPlayerControls)),Tr(2),Or("ngClass",vo(20,sh,l.player.isLive()&&0==l.alwaysShowFullPlayerControls)),Tr(2),fl(l.duration),Tr(3),fl(l.volumeIcon),Tr(9),Or("qualities",l.qualities)("audioTracks",l.audioTracks)("selectedAudioTrack",l.selectedAudioTrack)("selectedQuality",l.selectedQuality)("currentAutoQuality",l.currentAutoQuality)("ngClass",vo(22,sh,"collapsed"==l.stateControllerService.getState("settings"))))},dependencies:[Bg,$P],styles:[".material-icons[_ngcontent-%COMP%]{font-size:25pt;margin-top:2px}#player-controls[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;height:40px;margin:0;background:rgba(0,0,0,.5);border-top:1px solid #383838}.controls-btn[_ngcontent-%COMP%]{width:40px;height:40px;cursor:pointer}.controls-btn[_ngcontent-%COMP%]:active{background-color:#c54310}.controls-item[_ngcontent-%COMP%]{user-select:none;-moz-user-select:none;-webkit-user-select:none;height:40px;float:left;margin-right:10px}.controls-padding[_ngcontent-%COMP%]{margin-top:11px}#controls-time[_ngcontent-%COMP%], #controls-duration[_ngcontent-%COMP%]{width:63px}#controls-progress[_ngcontent-%COMP%]{height:20px}#controls-volume[_ngcontent-%COMP%]{height:20px;width:63px}#settings-container[_ngcontent-%COMP%]{position:absolute;width:100%}#settings[_ngcontent-%COMP%]{width:500px;position:relative;margin-left:auto;margin-right:auto;background-color:#242424;padding:10px;border:1px solid #929292}.settings-title[_ngcontent-%COMP%]{background-color:#3d3d3d;border-bottom:1px solid #929292;width:498px;height:40px;text-align:left;padding:10px;margin-left:-10px;margin-top:-10px;margin-bottom:10px}"]})}return e})();const tF=["videoElement"],nF=["videoElementContainer"],rF=["playerControlsParent"];let iF=(()=>{class e{constructor(n){this.stateControllerService=n}ngOnInit(){}ngAfterViewInit(){this.resizeVideoContainer()}resizeVideoContainer(){this.videoElement.nativeElement.style.width=this.videoElementContainer.nativeElement.style.width,this.videoElement.nativeElement.style.height=this.videoElementContainer.nativeElement.style.height}onResize(n){this.resizeVideoContainer()}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(bc))};static#t=this.\u0275cmp=Cs({type:e,selectors:[["app-player"]],viewQuery:function(r,l){if(1&r&&(yc(tF,5),yc(nF,5),yc(rF,5)),2&r){let f;vc(f=Ec())&&(l.videoElement=f.first),vc(f=Ec())&&(l.videoElementContainer=f.first),vc(f=Ec())&&(l.playerControlsParent=f.first)}},hostBindings:function(r,l){1&r&&Cr("resize",function(m){return l.onResize(m)},0,fm)},decls:7,vars:2,consts:[["id","video-element-container"],["videoElementContainer",""],["crossorigin","anonymous","id","video-element",2,"width","100%","height","100%"],["videoElement",""],["playerControlsParent",""],["id","app-player-controls",3,"parent","videoElement"]],template:function(r,l){if(1&r&&(Nn(0,"div",0,1),Aa(2,"video",2,3),Nn(4,"div",null,4),Aa(6,"app-player-controls",5),jn()()),2&r){const f=Mm(1),m=Mm(3);Tr(6),Or("parent",f)("videoElement",m)}},dependencies:[eF],styles:["#video-element-container[_ngcontent-%COMP%]{position:absolute;background-color:#000;top:0;left:0;margin:0;padding:0;height:100%;width:100%;overflow:hidden}#video-element[_ngcontent-%COMP%]{position:absolute;left:0;right:0;margin-left:auto;margin-right:auto;max-height:100%;height:100%;width:100%}#app-player-controls[_ngcontent-%COMP%]{width:100%;height:40px}[_ngcontent-%COMP%]::cue{bottom:100px}"]})}return e})(),oF=(()=>{class e{constructor(n){n.registerTransitions("loader",[{from:"collapsed",to:"visible",object:this,handle:null},{from:"visible",to:"collapsed",object:this,handle:null}],"collapsed")}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(bc))};static#t=this.\u0275cmp=Cs({type:e,selectors:[["app-loader"]],decls:2,vars:0,consts:[["id","loader-container-inner",2,"background-color","transparent"],["id","loader-object","data",pE`assets/loader.svg`,"type","image/svg+xml",2,"background-color","transparent"]],template:function(r,l){1&r&&(Nn(0,"div",0),Aa(1,"object",1),jn())},styles:["#loader-container-inner[_ngcontent-%COMP%]{background-color:transparent;width:200px;height:200px;margin-left:auto;margin-right:auto;margin-top:15%}#loader-object[_ngcontent-%COMP%]{position:relative;width:200px;height:200px}"]})}return e})(),aF=(()=>{class e{constructor(n,r){this.notificationService=n,this.stateControllerService=r}close(){this.stateControllerService.transition("notification","collapsed")}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(gy),Fn(bc))};static#t=this.\u0275cmp=Cs({type:e,selectors:[["app-notification"]],decls:5,vars:2,consts:[[3,"click"]],template:function(r,l){1&r&&(Nn(0,"div",0),Cr("click",function(){return l.close()}),Nn(1,"h4"),ur(2),jn(),Nn(3,"p"),ur(4),jn()()),2&r&&(Tr(2),fl(l.notificationService.title),Tr(2),fl(l.notificationService.message))},styles:["[_nghost-%COMP%]{position:absolute;border:1px solid #c54310;top:20px;left:20px;border-radius:5%;width:300px;padding:10px;background-color:#272727c2}h4[_ngcontent-%COMP%]{height:24px;display:inline-block;color:#adadad;margin:0}"]})}return e})();const qA=function(e){return{"visibility-collapsed":e}};let sF=(()=>{class e{constructor(n){this.stateControllerService=n,this.title="nas-player-embed"}static#e=this.\u0275fac=function(r){return new(r||e)(Fn(bc))};static#t=this.\u0275cmp=Cs({type:e,selectors:[["app-root"]],decls:5,vars:6,consts:[["id","notification-container",3,"ngClass"],["id","loader-container",3,"ngClass"]],template:function(r,l){1&r&&(Aa(0,"app-player"),Nn(1,"div",0),Aa(2,"app-notification"),jn(),Nn(3,"div",1),Aa(4,"app-loader"),jn()),2&r&&(Tr(1),Or("ngClass",vo(2,qA,"collapsed"==l.stateControllerService.getState("notification"))),Tr(2),Or("ngClass",vo(4,qA,"collapsed"==l.stateControllerService.getState("loader"))))},dependencies:[Bg,iF,oF,aF]})}return e})(),lF=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ea({type:e,bootstrap:[sF]});static#n=this.\u0275inj=Ri({imports:[cP,XL,kP]})}return e})();WL().bootstrapModule(lF).catch(e=>console.error(e))},584:Ra=>{self,Ra.exports=function(){var Jr={4593:function(Ut,$e){var ne,De,H,_,E,w={};ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",De=function(F){for(var G=0,T=[],M=0|F.length/3;0<M--;){var O=(F[G]<<16)+(F[G+1]<<8)+F[G+2];G+=3,T.push(ne.charAt(63&O>>18)),T.push(ne.charAt(63&O>>12)),T.push(ne.charAt(63&O>>6)),T.push(ne.charAt(63&O))}return F.length-G==2?(T.push(ne.charAt(63&(O=(F[G]<<16)+(F[G+1]<<8))>>18)),T.push(ne.charAt(63&O>>12)),T.push(ne.charAt(63&O>>6)),T.push("=")):F.length-G==1&&(T.push(ne.charAt(63&(O=F[G]<<16)>>18)),T.push(ne.charAt(63&O>>12)),T.push("==")),T.join("")},H=function(){for(var F=[],G=0;G<64;++G)F[ne.charCodeAt(G)]=G;return F["=".charCodeAt(0)]=0,F}(),_=function(F){for(var G=0,T=[],M=0|F.length/4;0<M--;){var O=(H[F.charCodeAt(G)]<<18)+(H[F.charCodeAt(G+1)]<<12)+(H[F.charCodeAt(G+2)]<<6)+H[F.charCodeAt(G+3)];T.push(255&O>>16),T.push(255&O>>8),T.push(255&O),G+=4}return T&&("="==F.charAt(G-2)?(T.pop(),T.pop()):"="==F.charAt(G-1)&&T.pop()),T},E={encode:function(F){for(var G=[],T=0;T<F.length;++T)G.push(F.charCodeAt(T));return G},decode:function(F){for(var G=0;G<s.length;++G)a[G]=String.fromCharCode(a[G]);return a.join("")}},w.decodeArray=function(F){var G=_(F);return new Uint8Array(G)},w.encodeASCII=function(F){var G=E.encode(F);return De(G)},w.decodeASCII=function(F){var G=_(F);return E.decode(G)},w.encode=function(F){var G=function(F){for(var G=[],T=0;T<F.length;++T){var M=F.charCodeAt(T);M<128?G.push(M):M<2048?(G.push(192|M>>6),G.push(128|63&M)):M<65536?(G.push(224|M>>12),G.push(128|63&M>>6),G.push(128|63&M)):(G.push(240|M>>18),G.push(128|63&M>>12),G.push(128|63&M>>6),G.push(128|63&M))}return G}(F);return De(G)},w.decode=function(F){return function(F){for(var G=[],T=0;T<F.length;){var M=F[T++];M<128||(M<224?(M=(31&M)<<6,M|=63&F[T++]):M<240?(M=(15&M)<<12,M|=(63&F[T++])<<6,M|=63&F[T++]):(M=(7&M)<<18,M|=(63&F[T++])<<12,M|=(63&F[T++])<<6,M|=63&F[T++])),G.push(String.fromCharCode(M))}return G.join("")}(_(F))},$e.decode=w.decode,$e.decodeArray=w.decodeArray,$e.encode=w.encode,$e.encodeASCII=w.encodeASCII},452:function(Ut,$e){!function(ne){"use strict";var De={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},H=function($){var be=$;return De.hasOwnProperty($)&&(be=De[$]),String.fromCharCode(be)},_=15,E=32,k={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},V={17:2,18:4,21:6,22:8,23:10,19:13,20:15},w={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},F={25:2,26:4,29:6,30:8,31:10,27:13,28:15},G=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],T={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function($){this.time=$},log:function($,be){this.verboseLevel>=this.verboseFilter[$]&&console.log(this.time+" ["+$+"] "+be)}},M=function($){for(var be=[],xe=0;xe<$.length;xe++)be.push($[xe].toString(16));return be},O=function($,be,xe,x,_e){this.foreground=$||"white",this.underline=be||!1,this.italics=xe||!1,this.background=x||"black",this.flash=_e||!1};O.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function($){for(var be=["foreground","underline","italics","background","flash"],xe=0;xe<be.length;xe++){var x=be[xe];$.hasOwnProperty(x)&&(this[x]=$[x])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function($){return this.foreground===$.foreground&&this.underline===$.underline&&this.italics===$.italics&&this.background===$.background&&this.flash===$.flash},copy:function($){this.foreground=$.foreground,this.underline=$.underline,this.italics=$.italics,this.background=$.background,this.flash=$.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var te=function($,be,xe,x,_e,he){this.uchar=$||" ",this.penState=new O(be,xe,x,_e,he)};te.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function($,be){this.uchar=$,this.penState.copy(be)},setPenState:function($){this.penState.copy($)},equals:function($){return this.uchar===$.uchar&&this.penState.equals($.penState)},copy:function($){this.uchar=$.uchar,this.penState.copy($.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var ce=function(){this.chars=[];for(var $=0;$<E;$++)this.chars.push(new te);this.pos=0,this.currPenState=new O};ce.prototype={equals:function($){for(var be=!0,xe=0;xe<E;xe++)if(!this.chars[xe].equals($.chars[xe])){be=!1;break}return be},copy:function($){for(var be=0;be<E;be++)this.chars[be].copy($.chars[be])},isEmpty:function(){for(var $=!0,be=0;be<E;be++)if(!this.chars[be].isEmpty()){$=!1;break}return $},setCursor:function($){this.pos!==$&&(this.pos=$),this.pos<0?(T.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>E&&(T.log("ERROR","Too large cursor position "+this.pos),this.pos=E)},moveCursor:function($){var be=this.pos+$;if($>1)for(var xe=this.pos+1;xe<be+1;xe++)this.chars[xe].setPenState(this.currPenState);this.setCursor(be)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function($){$>=144&&this.backSpace();var be=H($);this.pos>=E?T.log("ERROR","Cannot insert "+$.toString(16)+" ("+be+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(be,this.currPenState),this.moveCursor(1))},clearFromPos:function($){var be;for(be=$;be<E;be++)this.chars[be].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var $=[],be=!0,xe=0;xe<E;xe++){var x=this.chars[xe].uchar;" "!==x&&(be=!1),$.push(x)}return be?"":$.join("")},setPenStyles:function($){this.currPenState.setStyles($),this.chars[this.pos].setPenState(this.currPenState)}};var ue=function(){this.rows=[];for(var $=0;$<_;$++)this.rows.push(new ce);this.currRow=14,this.nrRollUpRows=null,this.reset()};ue.prototype={reset:function(){for(var $=0;$<_;$++)this.rows[$].clear();this.currRow=14},equals:function($){for(var be=!0,xe=0;xe<_;xe++)if(!this.rows[xe].equals($.rows[xe])){be=!1;break}return be},copy:function($){for(var be=0;be<_;be++)this.rows[be].copy($.rows[be])},isEmpty:function(){for(var $=!0,be=0;be<_;be++)if(!this.rows[be].isEmpty()){$=!1;break}return $},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function($){this.rows[this.currRow].insertChar($)},setPen:function($){this.rows[this.currRow].setPenStyles($)},moveCursor:function($){this.rows[this.currRow].moveCursor($)},setCursor:function($){T.log("INFO","setCursor: "+$),this.rows[this.currRow].setCursor($)},setPAC:function($){T.log("INFO","pacData = "+JSON.stringify($));var be=$.row-1;this.nrRollUpRows&&be<this.nrRollUpRows-1&&(be=this.nrRollUpRows-1),this.currRow=be;var xe=this.rows[this.currRow];if(null!==$.indent){var _e=Math.max($.indent-1,0);xe.setCursor($.indent),$.color=xe.chars[_e].penState.foreground}this.setPen({foreground:$.color,underline:$.underline,italics:$.italics,background:"black",flash:!1})},setBkgData:function($){T.log("INFO","bkgData = "+JSON.stringify($)),this.backSpace(),this.setPen($),this.insertChar(32)},setRollUpRows:function($){this.nrRollUpRows=$},rollUp:function(){if(null!==this.nrRollUpRows){T.log("TEXT",this.getDisplayText());var be=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];be.clear(),this.rows.splice(this.currRow,0,be),T.log("INFO","Rolling up")}else T.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function($){$=$||!1;for(var be=[],xe="",_e=0;_e<_;_e++){var he=this.rows[_e].getTextString();he&&be.push($?"Row "+(_e+1)+': "'+he+'"':he.trim())}return be.length>0&&(xe=$?"["+be.join(" | ")+"]":be.join("\n")),xe},getTextAndFormat:function(){return this.rows}};var se=function($,be){this.chNr=$,this.outputFilter=be,this.mode=null,this.verbose=0,this.displayedMemory=new ue,this.nonDisplayedMemory=new ue,this.lastOutputScreen=new ue,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};se.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function($){this.outputFilter=$},setPAC:function($){this.writeScreen.setPAC($)},setBkgData:function($){this.writeScreen.setBkgData($)},setMode:function($){$!==this.mode&&(this.mode=$,T.log("INFO","MODE="+$),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=$)},insertChars:function($){for(var be=0;be<$.length;be++)this.writeScreen.insertChar($[be]);T.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(T.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){T.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){T.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){T.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function($){T.log("INFO","RU("+$+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows($)},cc_FON:function(){T.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){T.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){T.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){T.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){T.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){T.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){T.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(T.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var $=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=$,this.writeScreen=this.nonDisplayedMemory,T.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function($){T.log("INFO","TO("+$+") - Tab Offset"),this.writeScreen.moveCursor($)},cc_MIDROW:function($){var be={flash:!1};if(be.underline=$%2==1,be.italics=$>=46,be.italics)be.foreground="white";else{var xe=Math.floor($/2)-16;be.foreground=["white","green","blue","cyan","red","yellow","magenta"][xe]}T.log("INFO","MIDROW: "+JSON.stringify(be)),this.writeScreen.setPen(be)},outputDataUpdate:function(){var $=T.time;null!==$&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData($,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,$,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:$):this.cueStartTime=$,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function($){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,$,this.displayedMemory),this.cueStartTime=$))}};var Ne=function($,be,xe){this.field=$||1,this.outputs=[be,xe],this.channels=[new se(1,be),new se(2,xe)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};Ne.prototype={getHandler:function($){return this.channels[$].getHandler()},setHandler:function($,be){this.channels[$].setHandler(be)},addData:function($,be){var xe,x,_e,he=!1;this.lastTime=$,T.setTime($);for(var Je=0;Je<be.length;Je+=2)_e=127&be[Je+1],(x=127&be[Je])>=16&&x<=31&&x===this.lastCmdA&&_e===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,T.log("DEBUG","Repeated command ("+M([x,_e])+") is dropped")):0!==x||0!==_e?(T.log("DATA","["+M([be[Je],be[Je+1]])+"] -> ("+M([x,_e])+")"),(xe=this.parseCmd(x,_e))||(xe=this.parseMidrow(x,_e)),xe||(xe=this.parsePAC(x,_e)),xe||(xe=this.parseBackgroundAttributes(x,_e)),xe||(he=this.parseChars(x,_e))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(he):T.log("WARNING","No channel found yet. TEXT-MODE?")),xe?this.dataCounters.cmd+=2:he?this.dataCounters.char+=2:(this.dataCounters.other+=2,T.log("WARNING","Couldn't parse cleaned data "+M([x,_e])+" orig: "+M([be[Je],be[Je+1]])))):this.dataCounters.padding+=2},parseCmd:function($,be){var xe;if(!((20===$||21===$||28===$||29===$)&&32<=be&&be<=47||(23===$||31===$)&&33<=be&&be<=35))return!1;var x=this.channels[(xe=20===$||21===$||23===$?1:2)-1];return 20===$||21===$||28===$||29===$?32===be?x.cc_RCL():33===be?x.cc_BS():34===be?x.cc_AOF():35===be?x.cc_AON():36===be?x.cc_DER():37===be?x.cc_RU(2):38===be?x.cc_RU(3):39===be?x.cc_RU(4):40===be?x.cc_FON():41===be?x.cc_RDC():42===be?x.cc_TR():43===be?x.cc_RTD():44===be?x.cc_EDM():45===be?x.cc_CR():46===be?x.cc_ENM():47===be&&x.cc_EOC():x.cc_TO(be-32),this.lastCmdA=$,this.lastCmdB=be,this.currChNr=xe,!0},parseMidrow:function($,be){var xe=null;if((17===$||25===$)&&32<=be&&be<=47){if((xe=17===$?1:2)!==this.currChNr)return T.log("ERROR","Mismatch channel in midrow parsing"),!1;var x=this.channels[xe-1];return x.insertChars([32]),x.cc_MIDROW(be),T.log("DEBUG","MIDROW ("+M([$,be])+")"),this.lastCmdA=$,this.lastCmdB=be,!0}return!1},parsePAC:function($,be){var xe;if(!((17<=$&&$<=23||25<=$&&$<=31)&&64<=be&&be<=127||(16===$||24===$)&&64<=be&&be<=95))return!1;xe=$<=23?1:2;var _e=this.interpretPAC(64<=be&&be<=95?1===xe?k[$]:w[$]:1===xe?V[$]:F[$],be);return this.channels[xe-1].setPAC(_e),this.lastCmdA=$,this.lastCmdB=be,this.currChNr=xe,!0},interpretPAC:function($,be){var xe,x={color:null,italics:!1,indent:null,underline:!1,row:$};return x.underline=1==(1&(xe=be>95?be-96:be-64)),xe<=13?x.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(xe/2)]:xe<=15?(x.italics=!0,x.color="white"):x.indent=4*Math.floor((xe-16)/2),x},parseChars:function($,be){var he,xe=null,x=null,_e=null;if($>=25?(xe=2,_e=$-8):(xe=1,_e=$),17<=_e&&_e<=19?(T.log("INFO","Special char '"+H(he=17===_e?be+80:18===_e?be+112:be+144)+"' in channel "+xe),x=[he],this.lastCmdA=$,this.lastCmdB=be):32<=$&&$<=127&&(x=0===be?[$]:[$,be],this.lastCmdA=null,this.lastCmdB=null),x){var Je=M(x);T.log("DEBUG","Char codes =  "+Je.join(","))}return x},parseBackgroundAttributes:function($,be){var xe,x;return((16===$||24===$)&&32<=be&&be<=47||(23===$||31===$)&&45<=be&&be<=47)&&(xe={},16===$||24===$?(x=Math.floor((be-32)/2),xe.background=G[x],be%2==1&&(xe.background=xe.background+"_semi")):45===be?xe.background="transparent":(xe.foreground="black",47===be&&(xe.underline=!0)),this.channels[($<24?1:2)-1].setBkgData(xe),this.lastCmdA=$,this.lastCmdB=be,!0)},reset:function(){for(var $=0;$<this.channels.length;$++)this.channels[$]&&this.channels[$].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function($){for(var be=0;be<this.channels.length;be++)this.channels[be]&&this.channels[be].cueSplitAtTime($)}},ne.logger=T,ne.PenState=O,ne.CaptionScreen=ue,ne.Cea608Parser=Ne,ne.findCea608Nalus=function($,be,xe){for(var x=0,_e=be,he=[],Je=function(Qe,Le,Lt,Vt){if(4!==Qe||Le<8)return null;var ze=Lt.getUint8(Vt),mt=Lt.getUint16(Vt+1),fn=Lt.getUint32(Vt+3),Yt=Lt.getUint8(Vt+7);return 181==ze&&49==mt&&1195456820==fn&&3==Yt};_e<be+xe;){if(x=$.getUint32(_e),6==(31&$.getUint8(_e+4)))for(var Me=_e+5,ot=-1;Me<_e+4+x-1;){ot=0;for(var yt=255;255===yt;)ot+=yt=$.getUint8(Me),Me++;var Dt=0;for(yt=255;255===yt;)Dt+=yt=$.getUint8(Me),Me++;Je(ot,Dt,$,Me)&&he.push([Me,Dt]),Me+=Dt}_e+=x+4}return he},ne.extractCea608DataFromRange=function($,be){var xe=be[0],x=[[],[]],_e=31&$.getUint8(xe+=8);xe+=2;for(var he=0;he<_e;he++){var Je=$.getUint8(xe),Me=4&Je,ot=3&Je;xe++;var yt=$.getUint8(xe);xe++;var Dt=$.getUint8(xe);xe++,Me&&(127&yt)+(127&Dt)!=0&&(0===ot?(x[0].push(yt),x[0].push(Dt)):1===ot&&(x[1].push(yt),x[1].push(Dt)))}return x}}($e)},8416:function(Ut,$e,ne){"use strict";var De=ne(7688),H=ne(5448),_=ne(6398),E=ne(2032),k=(ne(5530),typeof window<"u"&&window||ne.g),V=k.dashjs;V||(V=k.dashjs={}),V.MediaPlayer=De.Z,V.FactoryMaker=H.Z,V.Debug=_.Z,V.Version=(0,E.e)()},6398:function(Ut,$e,ne){"use strict";var De=ne(5595),H=ne(8512),_=ne(5448),E=1,k=2,V=3,w=4,F=5;function G(M){M=M||{};var O,te,ce,ue,Ne=(0,De.Z)(this.context).getInstance(),$=M.settings,be=[];function xe(yt){return yt&&yt.bind?yt.bind(window.console):window.console.log.bind(window.console)}function x(){for(var yt=arguments.length,Dt=new Array(yt),Qe=0;Qe<yt;Qe++)Dt[Qe]=arguments[Qe];ot.apply(void 0,[E,this].concat(Dt))}function _e(){for(var yt=arguments.length,Dt=new Array(yt),Qe=0;Qe<yt;Qe++)Dt[Qe]=arguments[Qe];ot.apply(void 0,[k,this].concat(Dt))}function he(){for(var yt=arguments.length,Dt=new Array(yt),Qe=0;Qe<yt;Qe++)Dt[Qe]=arguments[Qe];ot.apply(void 0,[V,this].concat(Dt))}function Je(){for(var yt=arguments.length,Dt=new Array(yt),Qe=0;Qe<yt;Qe++)Dt[Qe]=arguments[Qe];ot.apply(void 0,[w,this].concat(Dt))}function Me(){for(var yt=arguments.length,Dt=new Array(yt),Qe=0;Qe<yt;Qe++)Dt[Qe]=arguments[Qe];ot.apply(void 0,[F,this].concat(Dt))}function ot(yt,Dt){var Qe="",Le=null;te&&(Le=(new Date).getTime(),Qe+="["+(Le-ue)+"]"),ce&&Dt&&Dt.getClassName&&(Qe+="["+Dt.getClassName()+"]",Dt.getType&&(Qe+="["+Dt.getType()+"]")),Qe.length>0&&(Qe+=" ");for(var Lt=arguments.length,Vt=new Array(Lt>2?Lt-2:0),ze=2;ze<Lt;ze++)Vt[ze-2]=arguments[ze];Array.apply(null,Vt).forEach(function(mt){Qe+=mt+" "}),be[yt]&&$&&$.get().debug.logLevel>=yt&&be[yt](Qe),$&&$.get().debug.dispatchEvent&&Ne.trigger(H.Z.LOG,{message:Qe,level:yt})}return O={getLogger:function(yt){return{fatal:x.bind(yt),error:_e.bind(yt),warn:he.bind(yt),info:Je.bind(yt),debug:Me.bind(yt)}},setLogTimestampVisible:function(yt){te=yt},setCalleeNameVisible:function(yt){ce=yt}},te=!0,ce=!0,ue=(new Date).getTime(),typeof window<"u"&&window.console&&(be[E]=xe(window.console.error),be[k]=xe(window.console.error),be[V]=xe(window.console.warn),be[w]=xe(window.console.info),be[F]=xe(window.console.debug)),O}G.__dashjs_factory_name="Debug";var T=_.Z.getSingletonFactory(G);T.LOG_LEVEL_NONE=0,T.LOG_LEVEL_FATAL=E,T.LOG_LEVEL_ERROR=k,T.LOG_LEVEL_WARNING=V,T.LOG_LEVEL_INFO=w,T.LOG_LEVEL_DEBUG=F,_.Z.updateSingletonFactory(G.__dashjs_factory_name,T),$e.Z=T},5595:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(8825);function _(){var k={};function V(F,G,T){var M=-1;return k[F]&&k[F].some(function(O,te){if(O&&O.callback===G&&(!T||T===O.scope))return M=te,!0}),M}var w={on:function(F,G,T){var M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!F)throw new Error("event type cannot be null or undefined");if(!G||"function"!=typeof G)throw new Error("listener must be a function: "+G);var O=M.priority||0;if(!(V(F,G,T)>=0)){k[F]=k[F]||[];var te={callback:G,scope:T,priority:O};T&&T.getStreamId&&(te.streamId=T.getStreamId()),T&&T.getType&&(te.mediaType=T.getType()),M&&M.mode&&(te.mode=M.mode),k[F].some(function(ue,se){if(ue&&O>ue.priority)return k[F].splice(se,0,te),!0})||k[F].push(te)}},off:function(F,G,T){if(F&&G&&k[F]){var M=V(F,G,T);M<0||(k[F][M]=null)}},trigger:function(F){var G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(F&&k[F]){if((G=G||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");G.type=F,T.streamId&&(G.streamId=T.streamId),T.mediaType&&(G.mediaType=T.mediaType),k[F].filter(function(M){return!(!M||T.streamId&&M.streamId&&M.streamId!==T.streamId||T.mediaType&&M.mediaType&&M.mediaType!==T.mediaType||T.mode&&M.mode&&M.mode!==T.mode||!M.mode&&T.mode&&T.mode===H.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(M){return M&&M.callback.call(M.scope,G)})}},reset:function(){k={}}};return w}_.__dashjs_factory_name="EventBus";var E=De.Z.getSingletonFactory(_);E.EVENT_PRIORITY_LOW=0,E.EVENT_PRIORITY_HIGH=5e3,De.Z.updateSingletonFactory(_.__dashjs_factory_name,E),$e.Z=E},5448:function(Ut,$e){"use strict";var ne=function(){var De,H=[],_={},E={};function k(G,T){for(var M in H){var O=H[M];if(O.context===G&&O.name===T)return O.instance}return null}function V(G,T){return T[G]}function w(G,T,M){G in M&&(M[G]=T)}function F(G,T,M){var O,te=G.__dashjs_factory_name,ce=T[te];if(ce){var ue=ce.instance;if(!ce.override)return ue.apply({context:T,factory:De},M);for(var se in O=G.apply({context:T},M),ue=ue.apply({context:T,factory:De,parent:O},M))O.hasOwnProperty(se)&&(O[se]=ue[se])}else O=G.apply({context:T},M);return O.getClassName=function(){return te},O}return De={extend:function(G,T,M,O){!O[G]&&T&&(O[G]={instance:T,override:M})},getSingletonInstance:k,setSingletonInstance:function(G,T,M){for(var O in H){var te=H[O];if(te.context===G&&te.name===T)return void(H[O].instance=M)}H.push({name:T,context:G,instance:M})},deleteSingletonInstances:function(G){H=H.filter(function(T){return T.context!==G})},getSingletonFactory:function(G){var T=V(G.__dashjs_factory_name,_);return T||(T=function(M){var O;return void 0===M&&(M={}),{getInstance:function(){return O||(O=k(M,G.__dashjs_factory_name)),O||(O=F(G,M,arguments),H.push({name:G.__dashjs_factory_name,context:M,instance:O})),O}}},_[G.__dashjs_factory_name]=T),T},getSingletonFactoryByName:function(G){return V(G,_)},updateSingletonFactory:function(G,T){w(G,T,_)},getClassFactory:function(G){var T=V(G.__dashjs_factory_name,E);return T||(T=function(M){return void 0===M&&(M={}),{create:function(){return F(G,M,arguments)}}},E[G.__dashjs_factory_name]=T),T},getClassFactoryByName:function(G){return V(G,E)},updateClassFactory:function(G,T){w(G,T,E)}},De}();$e.Z=ne},1264:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(703),_=ne(6398),E=ne(3393),k=ne(7855),V=ne(5595),w=ne(8512);function F(O){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(te){return typeof te}:function(te){return te&&"function"==typeof Symbol&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te})(O)}function G(O,te,ce){return te in O?Object.defineProperty(O,te,{value:ce,enumerable:!0,configurable:!0,writable:!0}):O[te]=ce,O}function T(){var O,te,ue=(0,V.Z)(this.context).getInstance(),se={"streaming.delay.liveDelay":w.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":w.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":w.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":w.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":w.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},Ne={debug:{logLevel:_.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,extendSegmentedCues:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:E.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:E.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:E.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:E.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(O={},G(O,k.w.MPD_TYPE,500),G(O,k.w.XLINK_EXPANSION_TYPE,500),G(O,k.w.MEDIA_SEGMENT_TYPE,1e3),G(O,k.w.INIT_SEGMENT_TYPE,1e3),G(O,k.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),G(O,k.w.INDEX_SEGMENT_TYPE,1e3),G(O,k.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),G(O,k.w.LICENSE,1e3),G(O,k.w.OTHER_TYPE,1e3),G(O,"lowLatencyReductionFactor",10),O),retryAttempts:(te={},G(te,k.w.MPD_TYPE,3),G(te,k.w.XLINK_EXPANSION_TYPE,1),G(te,k.w.MEDIA_SEGMENT_TYPE,3),G(te,k.w.INIT_SEGMENT_TYPE,3),G(te,k.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),G(te,k.w.INDEX_SEGMENT_TYPE,3),G(te,k.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),G(te,k.w.LICENSE,3),G(te,k.w.OTHER_TYPE,3),G(te,"lowLatencyMultiplyFactor",5),te),abr:{movingAverageMethod:E.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:E.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:E.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},$=H.Z.clone(Ne);function be(xe,x,_e){for(var he in xe)xe.hasOwnProperty(he)&&(x.hasOwnProperty(he)?"object"!==F(xe[he])||xe[he]instanceof Array||null===xe[he]?(x[he]=H.Z.clone(xe[he]),se[_e+he]&&ue.trigger(se[_e+he])):be(xe[he],x[he],_e.slice()+he+"."):console.error("Settings parameter "+_e+he+" is not supported"))}return{get:function(){return $},update:function(xe){"object"===F(xe)&&be(xe,$,"")},reset:function(){$=H.Z.clone(Ne)}}}T.__dashjs_factory_name="Settings";var M=De.Z.getSingletonFactory(T);$e.Z=M},703:function(Ut,$e,ne){"use strict";var De=ne(3875),H=ne.n(De),_=ne(1067);function E(w){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(w)}var V=function(){function w(){!function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}(this,w)}var G;return G=[{key:"mixin",value:function(T,M,O){var te,ce={};if(T)for(var ue in M)M.hasOwnProperty(ue)&&(te=M[ue],ue in T&&(T[ue]===te||ue in ce&&ce[ue]===te)||(T[ue]="object"===E(T[ue])&&null!==T[ue]?w.mixin(T[ue],te,O):O(te)));return T}},{key:"clone",value:function(T){if(!T||"object"!==E(T))return T;var M;if(T instanceof Array){M=[];for(var O=0,te=T.length;O<te;++O)O in T&&M.push(w.clone(T[O]))}else M={};return w.mixin(M,T,w.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(T,M){try{if(!M||0===M.length)return T;var O=new URL(T);return M.forEach(function(te){te.key&&te.value&&O.searchParams.set(te.key,te.value)}),O.href}catch{return T}}},{key:"parseHttpHeaders",value:function(T){var M={};if(!T)return M;for(var O=T.trim().split("\r\n"),te=0,ce=O.length;te<ce;te++){var ue=O[te],se=ue.indexOf(": ");se>0&&(M[ue.substring(0,se)]=ue.substring(se+2))}return M}},{key:"generateUuid",value:function(){var T=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(M){var O=(T+16*Math.random())%16|0;return T=Math.floor(T/16),("x"==M?O:3&O|8).toString(16)})}},{key:"generateHashCode",value:function(T){var M=0;if(0===T.length)return M;for(var O=0;O<T.length;O++)M=(M<<5)-M+T.charCodeAt(O),M|=0;return M}},{key:"getRelativeUrl",value:function(T,M){try{var O=new URL(T),te=new URL(M);if(O.protocol=te.protocol,O.origin!==te.origin)return M;var ce=H().relative(O.pathname.substr(0,O.pathname.lastIndexOf("/")),te.pathname.substr(0,te.pathname.lastIndexOf("/"))),ue=0===ce.length?1:0;return ce+=te.pathname.substr(te.pathname.lastIndexOf("/")+ue,te.pathname.length-1),te.pathname.length<ce.length?te.pathname:ce}catch{return M}}},{key:"parseUserAgent",value:function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var M=null===T&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,_.UAParser)(M)}catch{return{}}}},{key:"stringHasProtocol",value:function(T){return/(http(s?)):\/\//i.test(T)}}],G&&function k(w,F){for(var G=0;G<F.length;G++){var T=F[G];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}(w,G),w}();$e.Z=V},2032:function(Ut,$e,ne){"use strict";function De(){return"4.7.3"}ne.d($e,{e:function(){return De}})},2230:function(Ut,$e){"use strict";var De=function(){function H(){!function(k,V){if(!(k instanceof V))throw new TypeError("Cannot call a class as a function")}(this,H)}var E;return(E=[{key:"extend",value:function(k,V){if(k){var w=!!V&&V.override,F=!!V&&V.publicOnly;for(var G in k)!k.hasOwnProperty(G)||this[G]&&!w||F&&-1===k[G].indexOf("public_")||(this[G]=k[G])}}}])&&function ne(H,_){for(var E=0;E<_.length;E++){var k=_[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,k.key,k)}}(H.prototype,E),H}();$e.Z=De},4351:function(Ut,$e,ne){"use strict";function De(V){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(w){return typeof w}:function(w){return w&&"function"==typeof Symbol&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(V)}function H(V,w){return(H=Object.setPrototypeOf||function(F,G){return F.__proto__=G,F})(V,w)}function E(V){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(V)}var k=function(V){!function(M,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(O&&O.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),O&&H(M,O)}(T,V);var w,F,G=(w=T,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var M,O=E(w);if(F){var te=E(this).constructor;M=Reflect.construct(O,arguments,te)}else M=O.apply(this,arguments);return function _(V,w){return!w||"object"!==De(w)&&"function"!=typeof w?function(F){if(void 0===F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(V):w}(this,M)});function T(){var M;return function(O,te){if(!(O instanceof te))throw new TypeError("Cannot call a class as a function")}(this,T),(M=G.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",M.BUFFERING_COMPLETED="bufferingCompleted",M.BUFFER_CLEARED="bufferCleared",M.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",M.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",M.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",M.CMSD_STATIC_HEADER="cmsdStaticHeader",M.CURRENT_TRACK_CHANGED="currentTrackChanged",M.DATA_UPDATE_COMPLETED="dataUpdateCompleted",M.INBAND_EVENTS="inbandEvents",M.INITIAL_STREAM_SWITCH="initialStreamSwitch",M.INIT_FRAGMENT_LOADED="initFragmentLoaded",M.INIT_FRAGMENT_NEEDED="initFragmentNeeded",M.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",M.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",M.LOADING_COMPLETED="loadingCompleted",M.LOADING_PROGRESS="loadingProgress",M.LOADING_DATA_PROGRESS="loadingDataProgress",M.LOADING_ABANDONED="loadingAborted",M.MANIFEST_UPDATED="manifestUpdated",M.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",M.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",M.QUOTA_EXCEEDED="quotaExceeded",M.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",M.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",M.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",M.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",M.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",M.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",M.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",M.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",M.SOURCE_BUFFER_ERROR="sourceBufferError",M.STREAMS_COMPOSED="streamsComposed",M.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",M.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",M.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",M.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",M.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",M.URL_RESOLUTION_FAILED="urlResolutionFailed",M.VIDEO_CHUNK_RECEIVED="videoChunkReceived",M.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",M.XLINK_ELEMENT_LOADED="xlinkElementLoaded",M.XLINK_READY="xlinkReady",M.SEEK_TARGET="seekTarget",M.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",M.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",M.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",M.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",M.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",M}return T}(ne(8342).Z);$e.Z=k},8512:function(Ut,$e,ne){"use strict";function De(F){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(G){return typeof G}:function(G){return G&&"function"==typeof Symbol&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(F)}function _(F,G){return(_=Object.setPrototypeOf||function(T,M){return T.__proto__=M,T})(F,G)}function k(F){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)})(F)}var V=function(F){!function(te,ce){if("function"!=typeof ce&&null!==ce)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(ce&&ce.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),ce&&_(te,ce)}(O,F);var G,T,M=(G=O,T=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var te,ce=k(G);if(T){var ue=k(this).constructor;te=Reflect.construct(ce,arguments,ue)}else te=ce.apply(this,arguments);return function E(F,G){return!G||"object"!==De(G)&&"function"!=typeof G?function(T){if(void 0===T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(F):G}(this,te)});function O(){return function H(F,G){if(!(F instanceof G))throw new TypeError("Cannot call a class as a function")}(this,O),M.apply(this,arguments)}return O}(ne(4351).Z),w=new V;$e.Z=w},8342:function(Ut,$e){"use strict";var De=function(){function H(){!function(k,V){if(!(k instanceof V))throw new TypeError("Cannot call a class as a function")}(this,H)}var E;return(E=[{key:"extend",value:function(k,V){if(k){var w=!!V&&V.override,F=!!V&&V.publicOnly;for(var G in k)!k.hasOwnProperty(G)||this[G]&&!w||F&&-1===k[G].indexOf("public_")||(this[G]=k[G])}}}])&&function ne(H,_){for(var E=0;E<_.length;E++){var k=_[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,k.key,k)}}(H.prototype,E),H}();$e.Z=De},9326:function(Ut,$e,ne){"use strict";var De=ne(3186),H=ne(7855),_=ne(5448),E=ne(8825),k=ne(7387),V=ne(1553);function w(F){var G,T,M,O,te,ce=(F=F||{}).eventBus,se=F.urlUtils,Ne=F.type,$=F.streamInfo,be=F.segmentsController,xe=F.timelineConverter,x=F.baseURLController;function _e(){return Ne}function he(){M=null}function Je(Qe,Le,Lt){var Vt,ze,mt=x.resolve(Lt.path),fn={};return mt&&Le!==mt.url&&se.isRelative(Le)?(Vt=mt.url,ze=mt.serviceLocation,fn=mt.queryParams,Le&&(Vt=se.resolve(Le,Vt))):Vt=Le,!se.isRelative(Vt)&&(Qe.url=Vt,Qe.serviceLocation=ze,Qe.queryParams=fn,!0)}function Me(Qe,Le){if(null==Le)return null;var Lt=new De.Z,Vt=Le.representation,ze=Vt.adaptation.period.mpd.manifest.Period_asArray[Vt.adaptation.period.index].AdaptationSet_asArray[Vt.adaptation.index].Representation_asArray[Vt.index].bandwidth,mt=Le.media;return mt=(0,k.vi)(mt,"Number",Le.replacementNumber),mt=(0,k.vi)(mt,"Time",Le.replacementTime),mt=(0,k.vi)(mt,"Bandwidth",ze),mt=(0,k.Aj)(mt,Vt.id),mt=(0,k.eR)(mt),Lt.mediaType=_e(),Lt.type=H.w.MEDIA_SEGMENT_TYPE,Lt.range=Le.mediaRange,Lt.startTime=Le.presentationStartTime,Lt.mediaStartTime=Le.mediaStartTime,Lt.duration=Le.duration,Lt.timescale=Vt.timescale,Lt.availabilityStartTime=Le.availabilityStartTime,Lt.availabilityEndTime=Le.availabilityEndTime,Lt.availabilityTimeComplete=Vt.availabilityTimeComplete,Lt.wallStartTime=Le.wallStartTime,Lt.quality=Vt.index,Lt.index=Le.index,Lt.mediaInfo=Qe,Lt.adaptationIndex=Vt.adaptation.index,Lt.representationId=Vt.id,Je(Lt,mt,Vt)?Lt:void 0}function ot(Qe,Le,Lt){var Vt=null;if(!Le||!Le.segmentInfoType)return Vt;var ze=be.getSegmentByTime(Le,Lt);return ze&&(M=ze,T.debug("Index for time "+Lt+" is "+ze.index),Vt=Me(Qe,ze)),Vt}function yt(Qe,Le,Lt){var Vt=null,ze=be.getSegmentByIndex(Le,Lt,M?M.mediaStartTime:-1);if(ze)Vt=Me(Qe,ze),M=ze;else{if(O&&!te)return T.debug(_e()+" No segment found at index: "+Lt+". Wait for next loop"),null;te=!0}return Vt}function Dt(){T.debug("Dynamic stream complete"),te=!0}return T=F.debug.getLogger(G={getCurrentIndex:function(){return M?M.index:-1},getInitRequest:function(Qe,Le){return Le?function(Lt,Vt,ze){var mt=new De.Z,fn=Vt.adaptation.period,Yt=fn.start;if(mt.mediaType=ze,mt.type=H.w.INIT_SEGMENT_TYPE,mt.range=Vt.range,mt.availabilityStartTime=xe.calcAvailabilityStartTimeFromPresentationTime(Yt,Vt,O),mt.availabilityEndTime=xe.calcAvailabilityEndTimeFromPresentationTime(Yt+fn.duration,Vt,O),mt.quality=Vt.index,mt.mediaInfo=Lt,mt.representationId=Vt.id,Je(mt,Vt.initialization,Vt))return mt.url=(0,k.vi)(mt.url,"Bandwidth",Vt.bandwidth),mt}(Qe,Le,_e()):null},getNextSegmentRequest:function(Qe,Le){return Le&&Le.segmentInfoType?yt(Qe,Le,M?M.index+1:0):null},getNextSegmentRequestIdempotent:function(Qe,Le){var Vt=be.getSegmentByIndex(Le,M?M.index+1:0,M?M.mediaStartTime:-1);return Vt?Me(Qe,Vt):null},getSegmentRequestForTime:ot,getStreamId:function(){return $.id},getStreamInfo:function(){return $},getType:_e,getValidTimeAheadOfTargetTime:function(Qe,Le,Lt,Vt){try{if(isNaN(Qe)||!Le||!Lt)return NaN;if(Qe<0&&(Qe=0),isNaN(Vt)&&(Vt=.5),ot(Le,Lt,Qe))return Qe;if(Lt.adaptation.period.start+Lt.adaptation.period.duration<Qe)return NaN;for(var ze=isFinite(Lt.adaptation.period.duration)?Lt.adaptation.period.start+Lt.adaptation.period.duration:Qe+30,mt=Math.min(Qe+Vt,ze),fn=NaN,Yt=null;mt<=ze;){var Tt=null;if(mt<=ze&&(Tt=ot(Le,Lt,mt)),Tt){fn=mt,Yt=Tt;break}mt+=Vt}if(Yt){var Rt=Yt.startTime+Yt.duration;return Qe>Yt.startTime&&Rt-Qe>Vt?Qe:!isNaN(Yt.startTime)&&Qe<Yt.startTime&&fn>Yt.startTime?Yt.startTime+.001:Math.min(Rt-Vt,fn)}return fn}catch{return NaN}},initialize:function(Qe){O=Qe,te=!1,be.initialize(Qe)},isLastSegmentRequested:function(Qe,Le){return!(!Qe||!M||!te&&(!isFinite(Qe.adaptation.period.duration)||M.presentationStartTime+M.duration>Le||!(Qe.mediaFinishedInformation&&!isNaN(Qe.mediaFinishedInformation.numberOfSegments)&&!isNaN(M.index)&&M.index>=Qe.mediaFinishedInformation.numberOfSegments-1&&(!O||Qe.segmentInfoType===V.Z.SEGMENT_TEMPLATE||O&&Qe.segmentInfoType===V.Z.SEGMENT_LIST&&Qe.adaptation.period.nextPeriodId)||O&&Qe.adaptation.period.nextPeriodId&&Qe.segmentInfoType===V.Z.SEGMENT_TIMELINE&&Qe.mediaFinishedInformation&&!isNaN(Qe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&M&&!isNaN(M.mediaStartTime)&&!isNaN(M.duration)&&M.mediaStartTime+M.duration>=Qe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)))},repeatSegmentRequest:function(Qe,Le){return Le&&Le.segmentInfoType?yt(Qe,Le,M?M.index:0):null},reset:function(){he(),ce.off(E.Z.DYNAMIC_TO_STATIC,Dt,G)}}),he(),ce.on(E.Z.DYNAMIC_TO_STATIC,Dt,G),G}w.__dashjs_factory_name="DashHandler",$e.Z=_.Z.getClassFactory(w)},1553:function(Ut,$e){"use strict";var De=new(function(){function H(){(function(k,V){if(!(k instanceof V))throw new TypeError("Cannot call a class as a function")})(this,H),this.init()}var E;return(E=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&function ne(H,_){for(var E=0;E<_.length;E++){var k=_[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,k.key,k)}}(H.prototype,E),H}());$e.Z=De},7802:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(1724),_=ne(3636),E=ne(1736),k=ne(5246);function V(F){var G,T,M=this.context,O=(F=F||{}).dashConstants,te=F.type,ce=F.segmentBaseController;function ue(se){return se?se.segments?T[O.SEGMENT_BASE]:T[se.segmentInfoType]:null}return G={initialize:function(se){T[O.SEGMENT_TIMELINE]=(0,H.Z)(M).create(F,se),T[O.SEGMENT_TEMPLATE]=(0,_.Z)(M).create(F,se),T[O.SEGMENT_LIST]=(0,E.Z)(M).create(F,se),T[O.SEGMENT_BASE]=(0,k.Z)(M).create(F,se)},updateInitData:function(se,Ne){return Ne?Promise.resolve():ce.getSegmentBaseInitSegment({representation:se,mediaType:te})},updateSegmentData:function(se,Ne){return Ne?Promise.resolve():ce.getSegmentList({mimeType:se.mimeType,representation:se,mediaType:te})},getSegmentByIndex:function(se,Ne,$){var be=ue(se);return be?be.getSegmentByIndex(se,Ne,$):null},getSegmentByTime:function(se,Ne){var $=ue(se);return $?$.getSegmentByTime(se,Ne):null},getMediaFinishedInformation:function(se){var Ne=ue(se);return Ne?Ne.getMediaFinishedInformation(se):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},T={},G}V.__dashjs_factory_name="SegmentsController";var w=De.Z.getClassFactory(V);$e.Z=w},1736:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(3393),_=ne(7387);function E(V,w){var F=(V=V||{}).timelineConverter;function G(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(H.Z.MISSING_CONFIG_ERROR)}function T(M,O){if(G(),!M)return null;var te=M.adaptation.period.mpd.manifest.Period_asArray[M.adaptation.period.index].AdaptationSet_asArray[M.adaptation.index].Representation_asArray[M.index].SegmentList,ce=te.SegmentURL_asArray.length,ue=M&&!isNaN(M.startNumber)?M.startNumber:1,se=Math.max(ue-1,0),Ne=Math.max(O-se,0),$=null;if(Ne<ce){var be=te.SegmentURL_asArray[Ne];($=(0,_.NF)(F,w,M,O))&&($.replacementTime=(ue+O-1)*M.segmentDuration,$.media=be.media?be.media:"",$.mediaRange=be.mediaRange,$.indexRange=be.indexRange)}return $}return{getSegmentByIndex:T,getSegmentByTime:function(M,O){if(G(),!M)return null;var te=M.segmentDuration;if(isNaN(te))return null;var ce=F.calcPeriodRelativeTimeFromMpdRelativeTime(M,O);return T(M,Math.floor(ce/te))},getMediaFinishedInformation:function(M){var O={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return O;var te=M.adaptation.period.mpd.manifest.Period_asArray[M.adaptation.period.index].AdaptationSet_asArray[M.adaptation.index].Representation_asArray[M.index].SegmentList,ce=M&&!isNaN(M.startNumber)?M.startNumber:1,ue=Math.max(ce-1,0);return O.numberOfSegments=ue+te.SegmentURL_asArray.length,O}}}E.__dashjs_factory_name="ListSegmentsGetter";var k=De.Z.getClassFactory(E);$e.Z=k},5246:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(3393);function _(k){var V=(k=k||{}).timelineConverter;function w(){if(!V||!V.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(H.Z.MISSING_CONFIG_ERROR)}function F(G,T){if(w(),!G)return null;var M,O=G.segments?G.segments.length:-1;if(T<O&&(M=G.segments[T])&&M.index===T)return M;for(var te=0;te<O;te++)if((M=G.segments[te])&&M.index===T)return M;return null}return{getSegmentByIndex:F,getSegmentByTime:function(G,T){return w(),F(G,function(O,te){if(!O)return-1;var ce,ue,se,Ne,$,be=O.segments,xe=be?be.length:null,x=-1;if(be&&xe>0)for($=0;$<xe;$++)if(se=(ue=be[$]).presentationStartTime,te+(ce=(Ne=ue.duration)/2)>=se&&te-ce<se+Ne){x=ue.index;break}return x}(G,T))},getMediaFinishedInformation:function(G){var T={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return G&&G.segments&&(T.numberOfSegments=G.segments.length),T}}}_.__dashjs_factory_name="SegmentBaseGetter";var E=De.Z.getClassFactory(_);$e.Z=E},7387:function(Ut,$e,ne){"use strict";ne.d($e,{Aj:function(){return E},NF:function(){return F},TJ:function(){return G},eR:function(){return _},vi:function(){return k}});var De=ne(2011);function H(T,M){for(;T.length<M;)T="0"+T;return T}function _(T){return T&&T.split("$$").join("$")}function E(T,M){if(!M||!T||-1===T.indexOf("$RepresentationID$"))return T;var O=M.toString();return T.split("$RepresentationID$").join(O)}function k(T,M,O){var te,ce,ue,se,Ne,$,be=M.length;if(!T)return T;for(;;){if((te=T.indexOf("$"+M))<0||(ce=T.indexOf("$",te+be))<0)return T;if((ue=T.indexOf("%0",te+be))>te&&ue<ce)switch(se=T.charAt(ce-1),Ne=parseInt(T.substring(ue+2,ce-1),10),se){case"d":case"i":case"u":$=H(O.toString(),Ne);break;case"x":$=H(O.toString(16),Ne);break;case"X":$=H(O.toString(16),Ne).toUpperCase();break;case"o":$=H(O.toString(8),Ne);break;default:return T}else $=O;T=T.substring(0,te)+$+T.substring(ce+1)}}function V(T,M,O,te,ce,ue,se,Ne){var be=new De.Z;return be.representation=T,be.duration=M,be.presentationStartTime=O,be.mediaStartTime=te,be.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(ue,T,se),be.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(ue+M,T,se),be.wallStartTime=ce.calcWallTimeForSegment(be,se),be.replacementNumber=be.representation.startNumber+Ne,be.index=Ne,be}function w(T,M,O,te){var ce=M.adaptation.period;if(isFinite(ce.duration)&&ce.start+ce.duration<=O.presentationStartTime)return!1;if(te){if("INF"===M.availabilityTimeOffset)return!0;var ue=T.getClientReferenceTime();return O.availabilityStartTime.getTime()<=ue&&(!isFinite(O.availabilityEndTime)||O.availabilityEndTime.getTime()>=ue)}return!0}function F(T,M,O,te){var ce,ue,se;ce=O.segmentDuration,isNaN(ce)&&(ce=O.adaptation.period.duration),ue=parseFloat((O.adaptation.period.start+te*ce).toFixed(5)),se=parseFloat((ue+ce).toFixed(5));var Ne=V(O,ce,ue,T.calcMediaTimeFromPresentationTime(ue,O),T,se,M,te);return w(T,O,Ne,M)?Ne:null}function G(T,M,O,te,ce,ue,se,Ne,$,be){var xe,x,_e=te/ue,he=ce/ue;return xe=T.calcPresentationTimeFromMediaTime(_e,O),w(T,O,x=V(O,he,xe,_e,T,xe+he,M,$),M)?(x.replacementTime=be||te,se=k(se,"Number",x.replacementNumber),se=k(se,"Time",x.replacementTime),x.media=se,x.mediaRange=Ne,x):null}},3636:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(3393),_=ne(7387);function E(V,w){var F=(V=V||{}).timelineConverter;function G(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(H.Z.MISSING_CONFIG_ERROR)}function T(M,O){if(G(),!M)return null;var te=M.adaptation.period.mpd.manifest.Period_asArray[M.adaptation.period.index].AdaptationSet_asArray[M.adaptation.index].Representation_asArray[M.index].SegmentTemplate;O=Math.max(O,0);var ce=(0,_.NF)(F,w,M,O);if(ce){ce.replacementTime=Math.round((O-1)*M.segmentDuration*M.timescale,10);var ue=te.media;ue=(0,_.vi)(ue,"Number",ce.replacementNumber),ue=(0,_.vi)(ue,"Time",ce.replacementTime),ce.media=ue}return ce}return{getSegmentByIndex:T,getSegmentByTime:function(M,O){if(G(),!M)return null;var te=M.segmentDuration;if(isNaN(te))return null;var ce=F.calcPeriodRelativeTimeFromMpdRelativeTime(M,O);return T(M,Math.floor(ce/te))},getMediaFinishedInformation:function(M){var O={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return O;var te=M.segmentDuration;return O.numberOfSegments=isNaN(te)?1:Math.ceil(M.adaptation.period.duration/te),O}}}E.__dashjs_factory_name="TemplateSegmentsGetter";var k=De.Z.getClassFactory(E);$e.Z=k},1724:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(3393),_=ne(7387);function E(V,w){var F=(V=V||{}).timelineConverter,G=V.dashMetrics;function T(){if(!F)throw new Error(H.Z.MISSING_CONFIG_ERROR)}function M(te,ce){var ue,se,Ne,$,be,xe,x,_e=te.adaptation.period.mpd.manifest.Period_asArray[te.adaptation.period.index].AdaptationSet_asArray[te.adaptation.index].Representation_asArray[te.index].SegmentTemplate||te.adaptation.period.mpd.manifest.Period_asArray[te.adaptation.period.index].AdaptationSet_asArray[te.adaptation.index].Representation_asArray[te.index].SegmentList,Je=_e.SegmentURL_asArray,Me=0,ot=-1;x=te.timescale;var yt=!1;for(Ne=0,$=(ue=_e.SegmentTimeline.S_asArray).length;Ne<$&&!yt;Ne++)for(xe=0,(se=ue[Ne]).hasOwnProperty("r")&&(xe=se.r),se.hasOwnProperty("t")&&(Me=se.t),xe<0&&(xe=O(te,ue[Ne+1],se,x,Me/x)),be=0;be<=xe&&!yt;be++)(yt=ce(Me,_e,Je,se,x,++ot,Ne))&&(te.segmentDuration=se.d/x),Me+=se.d}function O(te,ce,ue,se,Ne){var $;if(ce&&ce.hasOwnProperty("t"))$=ce.t/se;else try{var be=0;if(isNaN(te.adaptation.period.start)||isNaN(te.adaptation.period.duration)||!isFinite(te.adaptation.period.duration)){var xe=G.getCurrentDVRInfo();be=isNaN(xe.end)?0:xe.end}else be=te.adaptation.period.start+te.adaptation.period.duration;$=F.calcMediaTimeFromPresentationTime(be,te),te.segmentDuration=ue.d/se}catch{$=0}return Math.max(Math.ceil(($-Ne)/(ue.d/se))-1,0)}return{getSegmentByIndex:function(te,ce,ue){if(T(),!te)return null;var se=null,Ne=!1;return M(te,function($,be,xe,x,_e,he,Je){if(Ne||ue<0){var Me=be.media,ot=x.mediaRange;return xe&&(Me=xe[Je].media||"",ot=xe[Je].mediaRange),se=(0,_.TJ)(F,w,te,$,x.d,_e,Me,ot,he,x.tManifest),!0}return $>=ue*_e-.5*x.d&&(Ne=!0),!1}),se},getSegmentByTime:function(te,ce){if(T(),!te)return null;void 0===ce&&(ce=null);var ue=null,se=F.calcMediaTimeFromPresentationTime(ce,te);return M(te,function(Ne,$,be,xe,x,_e,he){var Je=parseFloat((se*x).toPrecision(15));if(Je<Ne+xe.d&&Je>=Ne){var Me=$.media,ot=xe.mediaRange;return be&&(Me=be[he].media||"",ot=be[he].mediaRange),ue=(0,_.TJ)(F,w,te,Ne,xe.d,x,Me,ot,_e,xe.tManifest),!0}return!1}),ue},getMediaFinishedInformation:function(te){if(!te)return 0;var ce,ue,se,Ne,$,be,xe,_e=0,he=0,Je=0;for(xe=te.timescale,Ne=(ce=(te.adaptation.period.mpd.manifest.Period_asArray[te.adaptation.period.index].AdaptationSet_asArray[te.adaptation.index].Representation_asArray[te.index].SegmentTemplate||te.adaptation.period.mpd.manifest.Period_asArray[te.adaptation.period.index].AdaptationSet_asArray[te.adaptation.index].Representation_asArray[te.index].SegmentList).SegmentTimeline.S_asArray).length,se=0;se<Ne;se++)for(be=0,(ue=ce[se]).hasOwnProperty("r")&&(be=ue.r),ue.hasOwnProperty("t")&&(he=(_e=ue.t)/xe),be<0&&(be=O(te,ce[se+1],ue,xe,he)),$=0;$<=be;$++)Je++,he=(_e+=ue.d)/xe;return{numberOfSegments:Je,mediaTimeOfLastSignaledSegment:he}}}}E.__dashjs_factory_name="TimelineSegmentsGetter";var k=De.Z.getClassFactory(E);$e.Z=k},2011:function(Ut,$e){"use strict";$e.Z=function ne(){(function(De,H){if(!(De instanceof H))throw new TypeError("Cannot call a class as a function")})(this,ne),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(Ut,$e){"use strict";$e.Z=function ne(){(function(De,H){if(!(De instanceof H))throw new TypeError("Cannot call a class as a function")})(this,ne),this.schemeIdUri="",this.value=""}},7688:function(Ut,$e,ne){"use strict";ne.d($e,{Z:function(){return oc}});var De=ne(452),H=ne.n(De),_=ne(3393),E=ne(1553),k=ne(3860),V=ne(5595),w=ne(8512),F=ne(5448),G=ne(6398),T=ne(8825);function M(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,Ge,ge,Pe,Te,Be,P,ie,oe=this.context,X=(0,V.Z)(oe).getInstance();function Q(){Ie(),de=!1,ve=0,fe=0,Oe=0,Be=!1,Ge=!1,P=!1,ge=NaN,U&&(X.off(w.Z.DATA_UPDATE_COMPLETED,Jt,C),X.off(w.Z.LOADING_PROGRESS,Gn,C),X.off(w.Z.MANIFEST_UPDATED,dt,C),X.off(w.Z.STREAMS_COMPOSED,Gt,C),X.off(T.Z.PLAYBACK_ENDED,Ar,C),X.off(T.Z.STREAM_INITIALIZING,Bn,C),X.off(T.Z.REPRESENTATION_SWITCH,Ft,C),X.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,ct,C),St(),U.removeEventListener("canplay",Ve),U.removeEventListener("canplaythrough",ut),U.removeEventListener("play",pt),U.removeEventListener("waiting",Qt),U.removeEventListener("playing",on),U.removeEventListener("pause",Sn),U.removeEventListener("error",an),U.removeEventListener("seeking",Mt),U.removeEventListener("seeked",Dn),U.removeEventListener("timeupdate",qn),U.removeEventListener("progress",kn),U.removeEventListener("ratechange",Kn),U.removeEventListener("loadedmetadata",zn),U.removeEventListener("loadeddata",ar),U.removeEventListener("stalled",Pn),U.removeEventListener("ended",er),U.removeEventListener("volumechange",rr)),le=null,U=null,J=null,pe=null}function Ae(){return parseFloat((me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-gt()).toFixed(5))}function me(Re){var at=Re||J;return at.start+at.duration}function Fe(){var Re=arguments.length>0&&void 0!==arguments[0]&&arguments[0];J&&U&&U.getElement()?(Re&&pe&&We(gt()),U.play()):de=!0}function Ie(){J&&U&&U.pause()}function ae(Re){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Xt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],dn=arguments.length>3&&void 0!==arguments[3]&&arguments[3];J&&U&&U.getElement()&&Re!==(isNaN(ge)?U.getTime():ge)&&((Pe=!0===Xt)||(ge=Re),b.info("Requesting seek to time: "+Re+(Pe?" (internal)":"")),pe&&dn&&We(Re),U.setCurrentTime(Re,at))}function ke(){if(J&&U&&pe){var Re=R&&R.hasVideoTrack()?_.Z.VIDEO:_.Z.AUDIO,at=W.getCurrentDVRInfo(Re);return at&&at.range?at.range.end:0}}function We(Re){var at=new Date(z.getClientReferenceTime()),Xt=K.getRegularPeriods()[0],dn=z.calcPresentationTimeFromWallTime(at,Xt);ve=dn-Re}function gt(){return J&&U?U.getTime():null}function ht(){return J&&U?U.isPaused():null}function ft(){return J&&U?U.isSeeking():null}function lt(){return J&&U?U.isStalled():null}function qt(){return J&&U?U.getPlaybackRate():null}function Kt(){return J&&U?U.getEnded():null}function _t(){return pe}function Bt(){var Re=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!ht()&&pe&&0!==U.getReadyState()&&!ft()&&!Be){Re||(Re=R.hasVideoTrack()?_.Z.VIDEO:_.Z.AUDIO);var at=gt(),Xt=function wn(Re,at){var Xt=W.getCurrentDVRInfo(at),dn=Xt?Xt.range:null;return dn?Re>dn.end?Math.max(dn.end-ve,dn.start):Re>0&&Re+.25<dn.start&&Math.abs(Re-dn.start)<31536e4?Ge?Math.max(dn.end-ve,dn.start):dn.start:Re:NaN}(at,Re);!isNaN(Xt)&&Xt!==at&&!ft()&&(lt()||Te||1===U.getReadyState())&&(b.debug("UpdateCurrentTime: Seek to actual time: ".concat(Xt," from currentTime: ").concat(at)),ae(Xt,!1,!1))}}function tt(){null===le&&(le=setInterval(function(){var Re;X.trigger(w.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:pe,time:new Date}),_t()&&(R.addDVRMetric(),ht()?(Re=Date.now(),(!Ke||Re>Ke+500)&&(Ke=Re,qn())):Bt())},ie.get().streaming.wallclockTimeUpdateInterval))}function St(){clearInterval(le),le=null}function Jt(Re){var at=K.convertRepresentationToRepresentationInfo(Re.currentRepresentation),Xt=at?at.mediaInfo.streamInfo:null;null!==Xt&&J.id===Xt.id&&(J=Xt)}function Ve(){X.trigger(w.Z.CAN_PLAY)}function ut(){X.trigger(w.Z.CAN_PLAY_THROUGH)}function ct(Re){Re.streamId===R.getActiveStreamInfo().id&&(Te=Re.state===k.Z.BUFFER_EMPTY,ie.get().streaming.buffer.setStallState&&U.setStallState(Re.mediaType,Re.state===k.Z.BUFFER_EMPTY))}function pt(){b.info("Native video element event: play"),Bt(),tt(),X.trigger(w.Z.PLAYBACK_STARTED,{startTime:gt()})}function Qt(){b.info("Native video element event: waiting"),X.trigger(w.Z.PLAYBACK_WAITING,{playingTime:gt()})}function on(){b.info("Native video element event: playing"),Pe=!1,X.trigger(w.Z.PLAYBACK_PLAYING,{playingTime:gt()})}function Sn(){b.info("Native video element event: pause"),X.trigger(w.Z.PLAYBACK_PAUSED,{ended:Kt()})}function Mt(){if(!Pe){var Re=gt();isNaN(ge)||ge===Re||(Re=ge),ge=NaN,b.info("Seeking to: "+Re),tt(),X.trigger(w.Z.PLAYBACK_SEEKING,{seekTime:Re,streamId:J.id})}}function Dn(){b.info("Native video element event: seeked"),Pe=!1,X.trigger(w.Z.PLAYBACK_SEEKED)}function qn(){J&&X.trigger(w.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:Ae(),time:gt(),streamId:J.id})}function kn(){X.trigger(w.Z.PLAYBACK_PROGRESS,{streamId:J.id})}function Kn(){var Re=qt();b.info("Native video element event: ratechange: ",Re),X.trigger(w.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Re})}function zn(){b.info("Native video element event: loadedmetadata"),X.trigger(w.Z.PLAYBACK_METADATA_LOADED),tt()}function ar(){b.info("Native video element event: loadeddata"),X.trigger(w.Z.PLAYBACK_LOADED_DATA)}function er(){b.info("Native video element event: ended"),Ie(),St();var Re=R?R.getActiveStreamInfo():null;Re&&X.trigger(w.Z.PLAYBACK_ENDED,{isLast:Re.isLast})}function rr(){X.trigger(w.Z.PLAYBACK_VOLUME_CHANGED)}function Ar(Re){if(le&&Re.isLast){b.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var at=Re.seekTime?Re.seekTime:me();U.setCurrentTime(at),Ie(),St()}}function an(Re){X.trigger(w.Z.PLAYBACK_ERROR,{error:(Re.target||Re.srcElement).error})}function Un(){pe=!1}function Gn(Re){if(!1===Re.stream&&Ge&&!isNaN(Re.request.duration)){var at=1.2*Re.request.duration;at>ve&&(b.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",at.toFixed(2)),ve=at,fe=at)}}function Pn(Re){X.trigger(w.Z.PLAYBACK_STALLED,{e:Re})}function Bn(Re){var at;(at=Re.mediaInfo)&&at.supplementalProperties&&"true"===at.supplementalProperties[_.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(b.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Ge=!0)}function Ft(Re){var at=R.getActiveStreamInfo();Re&&at&&Re.currentRepresentation&&Re.streamId&&Re.streamId===at.id&&Re.mediaType&&(Re.mediaType===_.Z.VIDEO||Re.mediaType===_.Z.AUDIO)&&(Ge=!Re.currentRepresentation.availabilityTimeComplete)&&!P&&(P=!0)}function dt(){Be=!0}function Gt(){Be=!1}return C={initialize:function(Re,at){J=Re,!0!==at&&(U.addEventListener("canplay",Ve),U.addEventListener("canplaythrough",ut),U.addEventListener("play",pt),U.addEventListener("waiting",Qt),U.addEventListener("playing",on),U.addEventListener("pause",Sn),U.addEventListener("error",an),U.addEventListener("seeking",Mt),U.addEventListener("seeked",Dn),U.addEventListener("timeupdate",qn),U.addEventListener("progress",kn),U.addEventListener("ratechange",Kn),U.addEventListener("loadedmetadata",zn),U.addEventListener("loadeddata",ar),U.addEventListener("stalled",Pn),U.addEventListener("ended",er),U.addEventListener("volumechange",rr),pe=J.manifestInfo.isDynamic,Te=!1,Pe=!1,X.on(w.Z.DATA_UPDATE_COMPLETED,Jt,C),X.on(w.Z.LOADING_PROGRESS,Gn,C),X.on(w.Z.MANIFEST_UPDATED,dt,C),X.on(w.Z.STREAMS_COMPOSED,Gt,C),X.on(T.Z.PLAYBACK_ENDED,Ar,C,{priority:V.Z.EVENT_PRIORITY_HIGH}),X.on(T.Z.STREAM_INITIALIZING,Bn,C),X.on(T.Z.REPRESENTATION_SWITCH,Ft,C),X.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,ct,C),X.on(T.Z.DYNAMIC_TO_STATIC,Un,C),de&&(de=!1,Fe()))},setConfig:function(Re){Re&&(Re.streamController&&(R=Re.streamController),Re.serviceDescriptionController&&(j=Re.serviceDescriptionController),Re.dashMetrics&&(W=Re.dashMetrics),Re.adapter&&(K=Re.adapter),Re.videoModel&&(U=Re.videoModel),Re.timelineConverter&&(z=Re.timelineConverter),Re.settings&&(ie=Re.settings))},getTimeToStreamEnd:Ae,getBufferLevel:function(){var Re=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,at=null;return R.getActiveStreamProcessors().forEach(function(Xt){if(!Re||0===Re.length||-1===Re.indexOf(Xt.getType())){var dn=Xt.getBufferLevel();at=null===at?dn:Math.min(at,dn)}}),at},getPlaybackStalled:function(){return Te},getTime:gt,getLowLatencyModeEnabled:function(){return Ge},getInitialCatchupModeActivated:function(){return P},getIsManifestUpdateInProgress:function(){return Be},getPlaybackRate:qt,getPlayedRanges:function(){return J&&U?U.getPlayedRanges():null},getEnded:Kt,getIsDynamic:_t,getStreamController:function(){return R},computeAndSetLiveDelay:function(Re,at){var Xt,dn,Ln,pr=!isNaN(Re)&&isFinite(Re)?Re:NaN,di=K.getSuggestedPresentationDelay(),Fi=j.getServiceDescriptionSettings();return Xt=isNaN(ie.get().streaming.delay.liveDelay)?null===ie.get().streaming.delay.liveDelayFragmentCount||isNaN(ie.get().streaming.delay.liveDelayFragmentCount)||isNaN(pr)?Fi&&!isNaN(Fi.liveDelay)&&Fi.liveDelay>0?Fi.liveDelay:!0===ie.get().streaming.delay.useSuggestedPresentationDelay&&null!==di&&!isNaN(di)&&di>0?di:isNaN(pr)?at&&!isNaN(at.minBufferTime)?4*at.minBufferTime:4*J.manifestInfo.minBufferTime:4*pr:pr*ie.get().streaming.delay.liveDelayFragmentCount:ie.get().streaming.delay.liveDelay,null!==(Ln=K.getAvailabilityStartTime())&&(Oe=Ln),dn=at&&at.dvrWindowSize>0?Math.min(Xt,at.dvrWindowSize):Xt,ve=dn,fe=dn,dn},getLiveDelay:function(){return ve},getOriginalLiveDelay:function(){return fe},getCurrentLiveLatency:function(){if(!pe||isNaN(Oe))return NaN;var Re=gt();if(isNaN(Re)||0===Re)return 0;var at=(new Date).getTime()+1e3*z.getClientTimeOffset();return Math.max(((at-Oe-1e3*Re)/1e3).toFixed(3),0)},play:Fe,isPaused:ht,isStalled:lt,pause:Ie,isSeeking:ft,getStreamEndTime:me,seek:ae,seekToOriginalLive:function(){var Re=arguments.length>0&&void 0!==arguments[0]&&arguments[0],at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Xt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],dn=ke();0!==dn&&ae(dn-(ve=fe),Re,at,Xt)},seekToCurrentLive:function(){var Re=arguments.length>0&&void 0!==arguments[0]&&arguments[0],at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Xt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],dn=ke();0!==dn&&ae(dn-ve,Re,at,Xt)},reset:Q,updateCurrentTime:Bt,getAvailabilityStartTime:function(){return Oe}},b=(0,G.Z)(oe).getInstance().getLogger(C),Q(),C}M.__dashjs_factory_name="PlaybackController";var O=F.Z.getSingletonFactory(M),te=ne(3186),ce="loading",ue="executed";function Ne(C){var b,R,j,W,K=(C=C||{}).eventBus,U=C.events,z=C.dashMetrics,le=C.fragmentLoader,fe=C.streamInfo,J=C.type;function pe(P){var ie;return!!P&&(ie=!1,j.some(function(oe){if(X=P,Q=oe,!isNaN(X.index)&&X.startTime===Q.startTime&&X.adaptationIndex===Q.adaptationIndex&&X.type===Q.type||(Ae=P,me=oe,isNaN(Ae.index)&&isNaN(me.index)&&Ae.quality===me.quality)||function(Ae,me){return Ae.action===te.Z.ACTION_COMPLETE&&Ae.action===me.action}(P,oe))return ie=!0;var Ae,me,X,Q}),ie)}function de(P){return isNaN(P.duration)?.25:Math.min(P.duration/8,.5)}function Ke(P){j=j.filter(function(ie){var oe=de(ie);return isNaN(ie.startTime)||void 0!==P&&ie.startTime>=P-oe})}function Oe(P,ie){ie<=P+.5||(j=j.filter(function(oe){var X=de(oe);return isNaN(oe.startTime)||oe.startTime>=ie-X||isNaN(oe.duration)||oe.startTime+oe.duration<=P+X}))}function je(P,ie,oe){for(var X=P.length-1;X>=0;X--){var Q=P[X],Ae=Q.startTime,me=Ae+Q.duration;if(oe=isNaN(oe)?de(Q):oe,!isNaN(Ae)&&!isNaN(me)&&ie+oe>=Ae&&ie-oe<me||isNaN(Ae)&&isNaN(ie))return Q}return null}function Ge(P,ie){z.addSchedulingInfo(P,ie),z.addRequestsQueue(P.mediaType,W,j)}function ge(P){P.sender===le&&(W.splice(W.indexOf(P.request),1),P.response&&!P.error&&j.push(P.request),Ge(P.request,P.error?"failed":ue),K.trigger(U.FRAGMENT_LOADING_COMPLETED,{request:P.request,response:P.response,error:P.error,sender:this},{streamId:fe.id,mediaType:J}))}function Pe(P){P.sender===le&&K.trigger(U.FRAGMENT_LOADING_PROGRESS,{request:P.request,response:P.response,error:P.error,sender:this},{streamId:fe.id,mediaType:J})}function Te(P){P.sender===le&&K.trigger(U.FRAGMENT_LOADING_ABANDONED,{request:P.request},{streamId:fe.id,mediaType:J})}function Be(){j=[],W=[]}return b={getStreamId:function(){return fe.id},getType:function(){return J},getRequests:function(P){var oe=[];return(P?P.state instanceof Array?P.state:[P.state]:[]).forEach(function(X){var Ae,me,Q=function(Ae){var me;switch(Ae){case ce:me=W;break;case ue:me=j;break;default:me=[]}return me}(X);oe=oe.concat((Ae=Q,(me=P).hasOwnProperty("time")?[je(Ae,me.time,me.threshold)]:Ae.filter(function(Fe){for(var Ie in me)if("state"!==Ie&&me.hasOwnProperty(Ie)&&Fe[Ie]!=me[Ie])return!1;return!0})))}),oe},isFragmentLoaded:pe,isFragmentLoadedOrPending:function(P){var ie,oe=!1,X=0;if(!(oe=pe(P)))for(X=0;X<W.length;X++)P.url===(ie=W[X]).url&&P.startTime===ie.startTime&&(oe=!0);return oe},removeExecutedRequestsBeforeTime:Ke,removeExecutedRequestsAfterTime:function(P){j=j.filter(function(ie){return isNaN(ie.startTime)||void 0!==P&&ie.startTime<P})},syncExecutedRequestsWithBufferedRange:function(P,ie){if(P&&0!==P.length){for(var oe=0,X=0,Q=P.length;X<Q;X++)Oe(oe,P.start(X)),oe=P.end(X);ie>0&&Oe(oe,ie)}else Ke()},abortRequests:function(){R.debug("abort requests"),le.abort(),W=[]},executeRequest:function(P){var ie;P.action===te.Z.ACTION_DOWNLOAD?(Ge(P,ce),W.push(P),K.trigger(U.FRAGMENT_LOADING_STARTED,{request:ie=P},{streamId:fe.id,mediaType:J}),le.load(ie)):R.warn("Unknown request action.")},reset:function(){K.off(U.LOADING_COMPLETED,ge,this),K.off(U.LOADING_DATA_PROGRESS,Pe,this),K.off(U.LOADING_ABANDONED,Te,this),le&&le.reset(),Be()},resetInitialSettings:Be,addExecutedRequest:function(P){j.push(P)}},R=C.debug.getLogger(b),Be(),K.on(U.LOADING_COMPLETED,ge,b),K.on(U.LOADING_DATA_PROGRESS,Pe,b),K.on(U.LOADING_ABANDONED,Te,b),b}Ne.__dashjs_factory_name="FragmentModel";var $=F.Z.getClassFactory(Ne);$.FRAGMENT_MODEL_LOADING=ce,$.FRAGMENT_MODEL_EXECUTED=ue,$.FRAGMENT_MODEL_CANCELED="canceled",$.FRAGMENT_MODEL_FAILED="failed",F.Z.updateClassFactory(Ne.__dashjs_factory_name,$);var be=$,xe=ne(5459);function x(C){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function _e(C,b){return(_e=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function Je(C){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var Me=new(function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&_e(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=Je(b);if(R){var z=Je(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function he(C,b){return!b||"object"!==x(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){var K;return function(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}(this,W),(K=j.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,K.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,K.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,K.SEGMENT_BASE_LOADER_ERROR_CODE=15,K.TIME_SYNC_FAILED_ERROR_CODE=16,K.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,K.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,K.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,K.APPEND_ERROR_CODE=20,K.REMOVE_ERROR_CODE=21,K.DATA_UPDATE_FAILED_ERROR_CODE=22,K.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,K.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,K.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,K.DOWNLOAD_ERROR_ID_SIDX_CODE=26,K.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,K.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,K.DOWNLOAD_ERROR_ID_XLINK_CODE=29,K.MANIFEST_ERROR_ID_PARSE_CODE=31,K.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,K.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,K.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,K.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",K.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",K.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",K.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",K.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",K.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",K.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",K.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",K.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",K.APPEND_ERROR_MESSAGE="chunk is not defined",K.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",K.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",K.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",K.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",K.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",K.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",K}return W}(ne(2230).Z)),ot=ne(1264),yt=ne(7855);function Dt(C){var b,R,j,W,K,U,z=this.context,le=(0,ot.Z)(z).getInstance(),ve=C.textController,fe=C.eventBus,J=[],pe=[],de=!1,Ke=C.mediaSource,Oe=null;function je(Q){return new Promise(function(Ae){X(function(){W.changeType&&W.changeType(Q),Ae()})})}function Ge(Q){return W=ve.getTextSourceBuffer(Q),Promise.resolve()}function ge(){if("function"==typeof W.addEventListener)try{W.addEventListener("updateend",ie,!1),W.addEventListener("error",oe,!1),W.addEventListener("abort",oe,!1)}catch{U=setInterval(ie,50)}else U=setInterval(ie,50)}function Pe(Q){return new Promise(function(Ae){W&&le.get().streaming.buffer.useAppendWindow?X(function(){try{if(!W)return void Ae();var me=Ke.duration,Fe=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(me=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(Fe=Q.start),W.appendWindowEnd===me&&W.appendWindowStart===Fe||(W.appendWindowStart=0,W.appendWindowEnd=me+.01,W.appendWindowStart=Math.max(Fe-.1,0),j.debug("Updated append window for ".concat(K.type,". Set start to ").concat(W.appendWindowStart," and end to ").concat(W.appendWindowEnd))),Ae()}catch{j.warn("Failed to set append window"),Ae()}}):Ae()})}function Te(Q){return new Promise(function(Ae){W?X(function(){try{W.timestampOffset===Q||isNaN(Q)||(W.timestampOffset=Q,j.debug("Set MSE timestamp offset to ".concat(Q))),Ae()}catch{Ae()}}):Ae()})}function Be(){if(!de&&pe.length>0){de=!0;var Q=pe[0];pe.splice(0,1);var Ae=function(){de=!1,pe.length>0&&Be.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==yt.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{Oe=Q.request,0===Q.data.bytes.byteLength?Ae.call(this):(W.appendBuffer?W.appendBuffer(Q.data.bytes):W.append(Q.data.bytes,Q.data),X(Ae.bind(this)))}catch(me){j.fatal('SourceBuffer append failed "'+me+'"'),pe.length>0?Be():de=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new xe.Z(me.code,me.message)})}}}function P(){J.length>0&&(W.updating||(J.shift()(),P()))}function ie(){W.updating||P()}function oe(Q){fe.trigger(w.Z.SOURCE_BUFFER_ERROR,{error:Q.target||{},lastRequestAppended:Oe},{streamId:K.streamInfo.id,mediaType:R})}function X(Q){J.push(Q),W.updating||P()}return b={getType:function(){return R},getAllBufferRanges:function(){try{return W.buffered}catch(Q){return j.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return W},append:function(Q){var Ae=this,me=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(Fe,Ie){Q?(pe.push({data:Q,promise:{resolve:Fe,reject:Ie},request:me}),X(Be.bind(Ae))):Ie({chunk:Q,error:new xe.Z(Me.APPEND_ERROR_CODE,Me.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Ae,me){var Fe=Q.start,Ie=Q.end;Fe>=0&&Ie>Fe?X(function(){try{W.remove(Fe,Ie),X(function(){Ae({from:Fe,to:Ie,unintended:!1}),Q.resolve&&Q.resolve()})}catch(ae){me({from:Fe,to:Ie,unintended:!1,error:new xe.Z(Me.REMOVE_ERROR_CODE,Me.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(ae)}}):Ae()})},abort:function(){return new Promise(function(Q){try{pe=[],"open"===Ke.readyState?X(function(){try{W&&W.abort(),Q()}catch{Q()}}):(W&&W.setTextTrack&&"ended"===Ke.readyState&&W.abort(),Q())}catch{Q()}})},reset:function(){if(W){try{J=[],function(){try{"function"==typeof W.removeEventListener&&(W.removeEventListener("updateend",ie,!1),W.removeEventListener("error",oe,!1),W.removeEventListener("abort",oe,!1)),clearInterval(U)}catch(Q){j.error(Q)}}(),de=!1,pe=[],W.getClassName&&"TextSourceBuffer"===W.getClassName()||(j.debug("Removing sourcebuffer from media source"),Ke.removeSourceBuffer(W))}catch{}W=null}Oe=null},updateTimestampOffset:Te,initializeForStreamSwitch:function(Q,Ae,me){R=(K=Q).type;var Fe=K.codec;W=me.getBuffer(),ge();var Ie=[];return Ie.push(new Promise(function(ae){X(function(){var ke=W.appendWindowStart,We=W.appendWindowEnd;W&&(W.abort(),W.appendWindowStart=ke,W.appendWindowEnd=We),ae()})})),Ie.push(Pe(K.streamInfo)),le.get().streaming.buffer.useChangeTypeForTrackSwitch&&Ie.push(je(Fe)),Ae&&void 0!==Ae.MSETimeOffset&&Ie.push(Te(Ae.MSETimeOffset)),Promise.all(Ie)},initializeForFirstUse:function(Q,Ae,me){R=(K=Ae).type;var Fe=K.codec;try{if(Fe.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return Ge(Q);W=Ke.addSourceBuffer(Fe),ge();var Ie=[];return Ie.push(Pe(K.streamInfo)),me&&void 0!==me.MSETimeOffset&&Ie.push(Te(me.MSETimeOffset)),Promise.all(Ie)}catch(ae){return K.type==_.Z.TEXT&&!K.isFragmented||-1!==Fe.indexOf('codecs="stpp')||-1!==Fe.indexOf('codecs="vtt')||-1!==Fe.indexOf("text/vtt")?Ge(Q):Promise.reject(ae)}},updateAppendWindow:Pe,changeType:je},j=(0,G.Z)(z).getInstance().getLogger(b),b}Dt.__dashjs_factory_name="SourceBufferSink";var Qe=F.Z.getClassFactory(Dt);function Le(C){var b,R,j,K=[],U=C;function z(le,ve){return K=K.filter(function(fe){return!((isNaN(ve)||fe.start<ve)&&(isNaN(le)||fe.end>le))}),Promise.resolve()}return b={getAllBufferRanges:function(){for(var le=[],ve=0;ve<K.length;ve++){var fe=K[ve];0===le.length||fe.start>le[le.length-1].end?le.push({start:fe.start,end:fe.end}):le[le.length-1].end=fe.end}var J={start:function(pe){return le[pe].start},end:function(pe){return le[pe].end}};return Object.defineProperty(J,"length",{get:function(){return le.length}}),J},append:function(le){return"InitializationSegment"!==le.segmentType?(K.push(le),K.sort(function(ve,fe){return ve.start-fe.start}),j=null):j=le,R.debug("PreBufferSink appended chunk s: "+le.start+"; e: "+le.end),U&&U({chunk:le}),Promise.resolve()},remove:z,abort:function(){return Promise.resolve()},discharge:function(le,ve){var J,pe,fe=(J=le,pe=ve,K.filter(function(de){return(isNaN(pe)||de.start<pe)&&(isNaN(J)||de.end>J)}));return j&&(fe.push(j),j=null),z(le,ve),fe},reset:function(){K=[],j=null,U=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(le){le()},getBuffer:function(){return this}},R=(0,G.Z)(this.context).getInstance().getLogger(b),b}Le.__dashjs_factory_name="PreBufferSink";var Lt=F.Z.getClassFactory(Le);function Vt(){var C={};return{save:function(b){var R=b.streamId,j=b.representationId;C[R]=C[R]||{},C[R][j]=b},extract:function(b,R){return C&&C[b]&&C[b][R]?C[b][R]:null},reset:function(){C={}}}}Vt.__dashjs_factory_name="InitCache";var ze=F.Z.getSingletonFactory(Vt),fn="BufferController";function Yt(C){C=C||{};var b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je,Ge,ge,Pe,Te,Be,P=this.context,ie=(0,V.Z)(P).getInstance(),oe=C.errHandler,X=C.fragmentModel,Q=C.representationController,Ae=C.adapter,me=C.textController,Fe=C.abrController,Ie=C.playbackController,ae=C.streamInfo,ke=C.type,We=C.settings;function gt(dt){var Gt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(Re,at){U=dt,ve&&Gt&&"function"==typeof ve.discharge?(fe=ve,ft(Gt).then(function(){Re()}).catch(function(Xt){at(Xt)})):Re()})}function ht(dt){return Ae.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(dt))}function ft(dt){var Gt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(Re,at){ge&&dt?U?(J=!1,function qt(dt,Gt){return new Promise(function(Re,at){var dn,Ln,pr,di,Xt=Fe.getQualityFor(ke,ae.id);ve=Qe(P).create({mediaSource:U,textController:me,eventBus:ie}),(dn=dt,Ln=Gt,pr=Xt,di=ht(pr),Ln&&Ln[ke]&&(ke===_.Z.VIDEO||ke===_.Z.AUDIO)?ve.initializeForStreamSwitch(dn,di,Ln[ke]):ve.initializeForFirstUse(ae,dn,di)).then(function(){return ar(ht(Xt))}).then(function(){Re(ve)}).catch(function(dn){R.fatal("Caught error on create SourceBuffer: "+dn),oe.error(new xe.Z(Me.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Me.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+ke)),at(dn)})})}(dt,Gt).then(function(Xt){Re(Xt)}).catch(function(Xt){at(Xt)})):(J=!0,function lt(){var dt=this;return new Promise(function(Gt,Re){var at=Fe.getQualityFor(ke,ae.id);ve=Lt(P).create(tt.bind(dt)),ar(ht(at)).then(function(){Gt(ve)}).catch(function(){Re()})})}().then(function(Xt){Re(Xt)}).catch(function(Xt){at(Xt)})):Re(null)})}function Kt(dt){We.get().streaming.cacheInitSegments&&(R.info("Init fragment finished loading saving to",ke+"'s init cache"),ge.save(dt.chunk)),R.debug("Append Init fragment",ke," with representationId:",dt.chunk.representationId," and quality:",dt.chunk.quality,", data size:",dt.chunk.bytes.byteLength),Bt(dt.chunk)}function _t(dt){Bt(dt.chunk,dt.request)}function Bt(dt){ve&&(ve.append(dt,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).then(function(Re){tt(Re)}).catch(function(Re){tt(Re)}),dt.mediaInfo.type===_.Z.VIDEO&&Bn(w.Z.VIDEO_CHUNK_RECEIVED,{chunk:dt}))}function wn(dt){if(dt&&dt.length>0)for(var Gt=0,Re=dt.length;Gt<Re;Gt++)R.debug("Buffered range: "+dt.start(Gt)+" - "+dt.end(Gt)+", currentTime = ",Ie.getTime())}function tt(dt){if(dt.error)return 22===dt.error.code&&function(){if(Ge=!0,K=.8*Un(),R.warn("Quota exceeded, Critical Buffer: "+K),K>0){var at=Math.max(.2*K,1),Xt=K-at,dn=Math.min(We.get().streaming.buffer.bufferTimeAtTopQuality,.9*Xt),Ln=Math.min(We.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Xt),pr={streaming:{buffer:{bufferToKeep:parseFloat(at.toFixed(5)),bufferTimeAtTopQuality:parseFloat(dn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Ln.toFixed(5))}}};We.update(pr)}}(),void(22!==dt.error.code&&Pn()||(R.warn("Clearing playback buffer to overcome quota exceed situation"),Bn(w.Z.QUOTA_EXCEEDED,{criticalBufferLevel:K,quotaExceededTime:dt.chunk.start}),kn(qn())));if(ve&&(Qt(),Ge=!1,(Ke=dt.chunk)&&Ke.endFragment)){Ke&&!isNaN(Ke.index)&&(z=Math.max(Ke.index,z),on());var Gt=ve.getAllBufferRanges();Ke.segmentType===yt.w.MEDIA_SEGMENT_TYPE&&(wn(Gt),Ve(),function(){if(!isNaN(Be)&&!J)if(ke===_.Z.AUDIO||ke===_.Z.VIDEO){var at=Ie.getTime(),Xt=pt(at,0),dn=pt(Be,0);if(Xt&&dn&&Xt.start===dn.start)Be=NaN;else{var Ln=Q.getCurrentRepresentation().segmentDuration,pr=pt(Be,Ln);pr&&(We.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(at-Be)>Ln?Be<=pr.end&&Ie.seek(Math.max(Be,pr.start),!1,!0):at<pr.start&&Ie.seek(pr.start,!1,!0))}}else Be=NaN}());var Re=!1;pe&&(pe.indexOf(Ke)>0&&(Re=!0),pe=null),Ke&&!Re&&Bn(w.Z.BYTES_APPENDED_END_FRAGMENT,{quality:Ke.quality,startTime:Ke.start,index:Ke.index,bufferedRanges:Gt,segmentType:Ke.segmentType,mediaType:ke})}}function St(){return new Promise(function(dt,Gt){var Re=Jt();if(!Re||0===Re.length)return Ve(),void dt();kn(Re).then(function(){dt()}).catch(function(at){Gt(at)})})}function Jt(dt){var Gt=[],Re=ve.getAllBufferRanges();if(!Re||0===Re.length)return Gt;if(!dt&&0!==dt||isNaN(dt))Gt.push({start:Re.start(0),end:Re.end(Re.length-1)+.5});else{var at=function(dn,Ln){var pr=We.get().streaming.buffer.bufferToKeep,di=Ln.start(0);if(dn-di>pr){var Fi=Math.max(0,dn-pr),Si=X.getRequests({state:be.FRAGMENT_MODEL_EXECUTED,time:dn,threshold:.01})[0];if(Si&&(Fi=Math.min(Si.startTime,Fi)),Fi>0)return{start:di,end:Fi}}return null}(dt,Re),Xt=function(dn,Ln){var pr=Ln.end(Ln.length-1)+.5,di=Gn(dn),Fi=ae.manifestInfo.duration>=We.get().streaming.buffer.longFormContentDurationThreshold?We.get().streaming.buffer.bufferTimeAtTopQualityLongForm:We.get().streaming.buffer.bufferTimeAtTopQuality,Si=isNaN(di)?dn:Math.min(di,dn+Fi);if(Si>=Ln.end(Ln.length-1))return null;var Ni=X.getRequests({state:be.FRAGMENT_MODEL_EXECUTED,time:dn,threshold:.01})[0];if(Ni&&(Si=Math.max(Ni.startTime+Ni.duration,Si)),We.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var zi=0;zi<Ln.length;zi++)if(Ln.start(zi)<=dn&&dn<=Ln.end(zi)&&Ln.start(zi)<=Si&&Si<=Ln.end(zi)){var za=Si;Si=zi+1<Ln.length?Ln.start(zi+1):Ln.end(zi)+1,R.debug("Buffered range ["+Ln.start(zi)+", "+Ln.end(zi)+"] overlaps with targetTime "+dn+" and range to be pruned ["+za+", "+pr+"], using ["+Si+", "+pr+"] instead"+(Si<pr?"":" (no actual pruning)"));break}return Si<Ln.end(Ln.length-1)?{start:Si,end:pr}:null}(dt,Re);at&&Gt.push(at),Xt&&Gt.push(Xt)}return Gt}function Ve(){(!Te||ke===_.Z.TEXT&&me.isTextEnabled())&&Qt()}function ut(){Sn()}function ct(){Sn(),Be=NaN}function pt(dt,Gt){if(!ve)return null;var Re,at,Xt=ve.getAllBufferRanges(),dn=0,Ln=0,pr=null,di=null,Fi=0,Si=isNaN(Gt)?.15:Gt;if(null!=Xt){for(at=0,Re=Xt.length;at<Re;at++)if(dn=Xt.start(at),Ln=Xt.end(at),null===pr)Fi=Math.abs(dn-dt),(dt>=dn&&dt<Ln||Fi<=Si)&&(pr=dn,di=Ln);else{if(!((Fi=dn-di)<=Si))break;di=Ln}if(null!==pr)return{start:pr,end:di}}return null}function Qt(){if(Ie){var dt=Ie.getTime()||0;J&&(dt=isNaN(Be)?0:Be);var Gt=We.get().streaming.gaps.jumpGaps&&!isNaN(We.get().streaming.gaps.smallGapLimit)?We.get().streaming.gaps.smallGapLimit:NaN;W=Math.max((Re=dt,at=Gt,We.get().streaming.gaps.jumpGaps&&(at=We.get().streaming.gaps.smallGapLimit),null===(Xt=pt(Re,at))?0:Xt.end-Re),0),Bn(w.Z.BUFFER_LEVEL_UPDATED,{mediaType:ke,bufferLevel:W}),Sn()}var Re,at,Xt}function on(){var dt=z>=le-1,Gt=Ie.getTimeToStreamEnd(ae)-W<1e-5;!dt&&!Gt||j||(an(!0),R.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(ae.id," and type ").concat(ke)))}function Sn(){ke!==_.Z.AUDIO&&ke!==_.Z.VIDEO||((!Ie.getLowLatencyModeEnabled()&&W<We.get().streaming.buffer.stallThreshold||0===W)&&!j?Mt(k.Z.BUFFER_EMPTY):(j||W>=We.get().streaming.buffer.stallThreshold||Ie.getLowLatencyModeEnabled()&&W>0)&&Mt(k.Z.BUFFER_LOADED))}function Mt(dt){de===dt||dt===k.Z.BUFFER_EMPTY&&0===Ie.getTime()||ke===_.Z.TEXT&&!me.isTextEnabled()||(de=dt,Bn(w.Z.BUFFER_LEVEL_STATE_CHANGED,{state:dt}),Bn(dt===k.Z.BUFFER_LOADED?w.Z.BUFFER_LOADED:w.Z.BUFFER_EMPTY),R.debug(dt===k.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Dn(){ve&&ke!==_.Z.TEXT&&(j||kn(qn()))}function qn(){var dt=[],Gt=ve.getAllBufferRanges();if(!Gt||0===Gt.length)return dt;var Re=Ie.getTime(),at=Math.max(0,Re-We.get().streaming.buffer.bufferToKeep),Xt=X.getRequests({state:be.FRAGMENT_MODEL_EXECUTED,time:Re,threshold:.01})[0];if(Xt)at=Math.min(Xt.startTime,at);else if(0===Re&&Ie.getIsDynamic())return[];if(Gt.start(0)<=at){for(var dn={start:0,end:at},Ln=0;Ln<Gt.length&&Gt.end(Ln)<=at;Ln++)dn.end=Gt.end(Ln);dn.start<dn.end&&dt.push(dn)}return dt}function kn(dt){return new Promise(function(Gt,Re){if(dt&&ve&&0!==dt.length){var at=[];dt.forEach(function(Xt){var dn;at.push((dn=Xt,new Promise(function(Ln,pr){dn.resolve=Ln,dn.reject=pr,Pe.push(dn)})))}),je||Kn(),Promise.all(at).then(function(){Gt()}).catch(function(Xt){Re(Xt)})}else Gt()})}function Kn(){try{if(0===Pe.length||!ve)return R.debug("Nothing to prune, halt pruning"),Pe=[],void(je=!1);var dt=ve.getBuffer();if(!dt||!dt.buffered||0===dt.buffered.length)return R.debug("SourceBuffer is empty (or does not exist), halt pruning"),Pe=[],void(je=!1);var Gt=Pe.shift();R.debug("".concat(ke,": Removing buffer from: ").concat(Gt.start," to ").concat(Gt.end)),je=!0,Ie.getTime()<Gt.end&&an(!1),ve.remove(Gt).then(function(Re){zn(Re)}).catch(function(Re){zn(Re)})}catch{je=!1}}function zn(dt){R.debug("onRemoved buffer from:",dt.from,"to",dt.to),ve&&(wn(ve.getAllBufferRanges()),0===Pe.length&&(je=!1,Qt()),dt.unintended&&(R.warn("Detected unintended removal from:",dt.from,"to",dt.to,"setting streamprocessor time to",dt.from),Bn(w.Z.SEEK_TARGET,{time:dt.from})),je?Kn():(Te?Te=!1:Qt(),Bn(w.Z.BUFFER_CLEARED,{from:dt.from,to:dt.to,unintended:dt.unintended,hasEnoughSpaceToAppend:Pn(),quotaExceeded:Ge})))}function ar(dt){return new Promise(function(Gt){dt&&void 0!==dt.MSETimeOffset&&ve&&ve.updateTimestampOffset?ve.updateTimestampOffset(dt.MSETimeOffset).then(function(){Gt()}).catch(function(){Gt()}):Gt()})}function er(){return ve&&!j?ve.updateAppendWindow(ae):Promise.resolve()}function rr(){++Oe*(We.get().streaming.wallclockTimeUpdateInterval/1e3)>=We.get().streaming.buffer.bufferPruningInterval&&(Oe=0,Dn())}function Ar(){Sn()}function an(dt){(j=dt)?Bn(w.Z.BUFFERING_COMPLETED):le=Number.POSITIVE_INFINITY}function Un(){try{var dt,Gt,Re=ve.getAllBufferRanges(),at=0;if(!Re)return at;for(Gt=0,dt=Re.length;Gt<dt;Gt++)at+=Re.end(Gt)-Re.start(Gt);return at}catch{return 0}}function Gn(dt){try{var Gt=dt,Re=ve.getAllBufferRanges();if(!Re||0===Re.length)return NaN;for(var at=0;Gt===dt&&at<Re.length;){var Xt=Re.start(at),dn=Re.end(at);Gt>=Xt&&Gt<=dn&&(Gt=dn),at+=1}return Gt===dt?NaN:Gt}catch{}}function Pn(){var dt=Un();return isNaN(dt)||dt<K}function Bn(dt,Gt){ie.trigger(dt,Gt||{},{streamId:ae.id,mediaType:ke})}function Ft(dt,Gt){if(K=Number.POSITIVE_INFINITY,de=void 0,le=Number.POSITIVE_INFINITY,z=0,Ke=null,j=!1,je=!1,Ge=!1,W=0,Oe=0,Pe=[],Be=NaN,J=!1,ve){var Re=ve;ve=null,dt||Gt||Re.abort().then(function(){Re.reset(Gt),Re=null})}Te=!1}return b={initialize:function(dt){gt(dt),ie.on(w.Z.INIT_FRAGMENT_LOADED,Kt,b),ie.on(w.Z.MEDIA_FRAGMENT_LOADED,_t,b),ie.on(w.Z.WALLCLOCK_TIME_UPDATED,rr,b),ie.on(T.Z.PLAYBACK_PLAYING,ct,b),ie.on(T.Z.PLAYBACK_PROGRESS,Ve,b),ie.on(T.Z.PLAYBACK_TIME_UPDATED,Ve,b),ie.on(T.Z.PLAYBACK_RATE_CHANGED,Ar,b),ie.on(T.Z.PLAYBACK_STALLED,ut,b)},getStreamId:function(){return ae.id},getType:function(){return ke},getBufferControllerType:function(){return fn},createBufferSink:ft,dischargePreBuffer:function(){if(ve&&fe&&"function"==typeof fe.discharge){var dt=fe.getAllBufferRanges();if(dt.length>0){for(var Gt="Beginning "+ke+"PreBuffer discharge, adding buffer for:",Re=0;Re<dt.length;Re++)Gt+=" start: "+dt.start(Re)+", end: "+dt.end(Re)+";";R.debug(Gt)}else R.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");pe=[];for(var at=fe.discharge(),Xt=null,dn=0;dn<at.length;dn++){var Ln=at[dn];if(Ln.segmentType!==yt.w.INIT_SEGMENT_TYPE){var pr=ge.extract(Ln.streamId,Ln.representationId);pr&&Xt!==pr&&(pe.push(pr),ve.append(pr),Xt=pr)}pe.push(Ln),ve.append(Ln)}fe.reset(),fe=null}},getBuffer:function(){return ve},getBufferLevel:function(){return W},getRangeAt:pt,hasBufferAtTime:function(dt){try{var Gt=ve.getAllBufferRanges();if(!Gt||0===Gt.length)return!1;for(var Re=0;Re<Gt.length;){var at=Gt.start(Re),Xt=Gt.end(Re);if(dt>=at&&dt<=Xt)return!0;Re+=1}return!1}catch(dn){return R.error(dn),!1}},pruneBuffer:Dn,setMediaSource:gt,getMediaSource:function(){return U},appendInitSegmentFromCache:function(dt){var Gt=ge.extract(ae.id,dt);return!!Gt&&(R.info("Append Init fragment",ke," with representationId:",Gt.representationId," and quality:",Gt.quality,", data size:",Gt.bytes.byteLength),Bt(Gt),!0)},getIsBufferingCompleted:function(){return j},setIsBufferingCompleted:an,getIsPruningInProgress:function(){return je},reset:function(dt,Gt){ie.off(w.Z.INIT_FRAGMENT_LOADED,Kt,this),ie.off(w.Z.MEDIA_FRAGMENT_LOADED,_t,this),ie.off(w.Z.WALLCLOCK_TIME_UPDATED,rr,this),ie.off(T.Z.PLAYBACK_PLAYING,ct,this),ie.off(T.Z.PLAYBACK_PROGRESS,Ve,this),ie.off(T.Z.PLAYBACK_TIME_UPDATED,Ve,this),ie.off(T.Z.PLAYBACK_RATE_CHANGED,Ar,this),ie.off(T.Z.PLAYBACK_STALLED,ut,this),Ft(dt,Gt)},prepareForPlaybackSeek:function(){return j&&an(!1),ve.abort()},prepareForReplacementTrackSwitch:function(dt){return new Promise(function(Gt,Re){ve.abort().then(function(){return er()}).then(function(){return We.get().streaming.buffer.useChangeTypeForTrackSwitch?ve.changeType(dt):Promise.resolve()}).then(function(){return St()}).then(function(){an(!1),Gt()}).catch(function(at){Re(at)})})},prepareForNonReplacementTrackSwitch:function(dt){return new Promise(function(Gt,Re){er().then(function(){return We.get().streaming.buffer.useChangeTypeForTrackSwitch?ve.changeType(dt):Promise.resolve()}).then(function(){Gt()}).catch(function(at){Re(at)})})},prepareForForceReplacementQualitySwitch:function(dt){return new Promise(function(Gt,Re){ve.abort().then(function(){return er()}).then(function(){return St()}).then(function(){return ar(dt)}).then(function(){an(!1),Gt()}).catch(function(at){Re(at)})})},updateAppendWindow:er,getAllRangesWithSafetyFactor:Jt,getContinuousBufferTimeForTargetTime:Gn,clearBuffers:kn,pruneAllSafely:St,updateBufferTimestampOffset:ar,setSeekTarget:function(dt){Be=dt},segmentRequestingCompleted:function(dt){isNaN(dt)||(le=dt,on())}},R=(0,G.Z)(P).getInstance().getLogger(b),ge=ze(P).getInstance(),Ft(),b}Yt.__dashjs_factory_name=fn;var Tt=F.Z.getClassFactory(Yt),Rt="NotFragmentedTextBufferController";function Ze(C){C=C||{};var b,R,j,W,K,U,z=this.context,le=(0,V.Z)(z).getInstance(),ve=C.textController,fe=C.errHandler,J=C.streamInfo,pe=C.type;function de(je){W=je}function Ke(je){R!==je&&(R=je)&&le.trigger(w.Z.BUFFERING_COMPLETED,{},{streamId:J.id,mediaType:pe})}function Oe(je){je.chunk.bytes&&!R&&(U.save(je.chunk),K.append(je.chunk),Ke(!0))}return b={initialize:function(je){de(je)},getStreamId:function(){return J.id},getType:function(){return pe},getBufferControllerType:function(){return Rt},createBufferSink:function(je){return new Promise(function(Ge,ge){try{(K=Qe(z).create({mediaSource:W,textController:ve,eventBus:le})).initializeForFirstUse(J,je),j||(K.getBuffer()&&"function"==typeof K.getBuffer().initialize&&K.getBuffer().initialize(),j=!0),Ge(K)}catch(Pe){fe.error(new xe.Z(Me.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Me.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+pe)),ge(Pe)}})},dischargePreBuffer:function(){},getBuffer:function(){return K},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:de,getMediaSource:function(){return W},appendInitSegmentFromCache:function(je){return null!==U.extract(J.id,je)},getIsBufferingCompleted:function(){return R},setIsBufferingCompleted:Ke,getIsPruningInProgress:function(){return!1},reset:function(je){le.off(w.Z.INIT_FRAGMENT_LOADED,Oe,b),!je&&K&&(K.abort(),K.reset(),K=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return R=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},j=!1,W=null,R=!1,U=ze(z).getInstance(),le.on(w.Z.INIT_FRAGMENT_LOADED,Oe,b),b}Ze.__dashjs_factory_name=Rt;var qe=F.Z.getClassFactory(Ze);function It(C){C=C||{};var b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke=this.context,Oe=(0,V.Z)(Ke).getInstance(),je=C.dashMetrics,Ge=C.mediaPlayerModel,ge=C.fragmentModel,Pe=C.abrController,Te=C.playbackController,Be=C.textController,P=C.type,ie=C.bufferController,oe=C.representationController,X=C.settings;function Q(){pe=!0}function Ae(){pe=!1}function me(qt){if(!ie.getIsBufferingCompleted()){Fe();var Kt=isNaN(qt)?0:qt;K=setTimeout(Ie,Kt)}}function Fe(){K&&(clearTimeout(K),K=null)}function Ie(){try{if(function(){try{return P===_.Z.TEXT&&!Be.isTextEnabled()||Te.isPaused()&&(!Te.getStreamController().getInitialPlayback()||!Te.getStreamController().getAutoPlay())&&!X.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void Fe();if(function(){try{return!!pe&&oe.getCurrentRepresentationInfo()&&(isNaN(ve)||fe||(Bt=Pe.getMaxAllowedIndexFor(P,R.id),!(!isNaN(le)&&le==Bt||(j.info("Top quality "+P+" index has changed from "+le+" to "+Bt),le=Bt,0)))||(wn=oe.getCurrentRepresentationInfo(),!P||!wn||je.getCurrentBufferLevel(P)<ae()))}catch{return!1}var wn,Bt}()){var qt=!1;de&&(qt=Pe.checkPlaybackQuality(P,R.id)),qt||(Kt=oe.getCurrentRepresentationInfo(),J||Kt.quality!==ve||fe?(fe?(j.debug("Switch track for "+P+", representation id = "+Kt.id),fe=!1):j.debug("Quality has changed, get init request for representationid = "+Kt.id),Oe.trigger(w.Z.INIT_FRAGMENT_NEEDED,{representationId:Kt.id,sender:b},{streamId:R.id,mediaType:P}),de=!1,J=!1):(j.debug("Media segment needed for ".concat(P," and stream id ").concat(R.id)),Oe.trigger(w.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:R.id,mediaType:P}),de=!0))}else me(Te.getLowLatencyModeEnabled()?X.get().streaming.scheduling.lowLatencyTimeout:X.get().streaming.scheduling.defaultTimeout)}catch{me(Te.getLowLatencyModeEnabled()?X.get().streaming.scheduling.lowLatencyTimeout:X.get().streaming.scheduling.defaultTimeout)}var Kt}function ae(){var qt=NaN,Kt=oe.getCurrentRepresentationInfo();return P&&Kt&&(qt=P===_.Z.TEXT?function(){try{if(Be.isTextEnabled()){var _t=oe.getCurrentRepresentationInfo();if(isNaN(_t.fragmentDuration)){var Bt=je.getCurrentSchedulingInfo(k.Z.SCHEDULING_INFO);return Bt?Bt.duration:0}return _t.fragmentDuration}return 0}catch{return 0}}():P===_.Z.AUDIO&&U?function(){try{var _t=je.getCurrentBufferLevel(_.Z.VIDEO),Bt=oe.getCurrentRepresentationInfo();return isNaN(Bt.fragmentDuration)?_t+1:Math.max(_t+1,Bt.fragmentDuration)}catch{return 0}}():function(){try{var _t=oe.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Pe.isPlayingAtTopQuality(_t)?_t.manifestInfo.duration>=X.get().streaming.buffer.longFormContentDurationThreshold?X.get().streaming.buffer.bufferTimeAtTopQualityLongForm:X.get().streaming.buffer.bufferTimeAtTopQuality:Ge.getStableBufferTime()}catch{return Ge.getStableBufferTime()}}()),qt}function ke(){We(!0)}function We(qt){if(Te&&ge){var Kt=ge.getRequests({state:be.FRAGMENT_MODEL_EXECUTED,time:Te.getTime(),threshold:0})[0];Kt&&Te.getTime()>=Kt.startTime&&((!z.mediaInfo||Kt.mediaInfo.type===z.mediaInfo.type&&Kt.mediaInfo.index!==z.mediaInfo.index)&&qt&&Oe.trigger(w.Z.TRACK_CHANGE_RENDERED,{mediaType:P,oldMediaInfo:z.mediaInfo,newMediaInfo:Kt.mediaInfo,streamId:R.id}),Kt.quality===z.quality&&Kt.adaptationIndex===z.adaptationIndex||!qt||(j.debug("Quality change rendered for streamId ".concat(R.id," and type ").concat(P)),Oe.trigger(w.Z.QUALITY_CHANGE_RENDERED,{mediaType:P,oldQuality:z.quality,newQuality:Kt.quality,streamId:R.id})),z={mediaInfo:Kt.mediaInfo,quality:Kt.quality,adaptationIndex:Kt.adaptationIndex})}}function gt(){ge.abortRequests(),Fe()}function ht(){X.get().streaming.scheduling.scheduleWhilePaused||me()}function ft(qt){je.updatePlayListTraceMetrics({playbackspeed:qt.playbackRate.toString()})}function lt(){de=!0,W=0,ve=NaN,z={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},le=NaN,fe=!1,J=!1,pe=!0}return b={initialize:function(qt){U=qt,Oe.on(w.Z.URL_RESOLUTION_FAILED,gt,b),Oe.on(T.Z.PLAYBACK_STARTED,ht,b),Oe.on(T.Z.PLAYBACK_RATE_CHANGED,ft,b),Oe.on(T.Z.PLAYBACK_TIME_UPDATED,ke,b),Oe.on(T.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,b),Oe.on(T.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Ae,b)},getType:function(){return P},getStreamId:function(){return R.id},setTimeToLoadDelay:function(qt){W=qt},getTimeToLoadDelay:function(){return W},setSwitchTrack:function(qt){fe=qt},getSwitchTrack:function(){return fe},startScheduleTimer:me,clearScheduleTimer:Fe,reset:function(){Oe.off(w.Z.URL_RESOLUTION_FAILED,gt,b),Oe.off(T.Z.PLAYBACK_STARTED,ht,b),Oe.off(T.Z.PLAYBACK_RATE_CHANGED,ft,b),Oe.off(T.Z.PLAYBACK_TIME_UPDATED,ke,b),Oe.off(T.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,b),Oe.off(T.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Ae,b),Fe(),We(!1),lt(),R=null},getBufferTarget:ae,getPlaybackController:function(){return Te},setCheckPlaybackQuality:function(qt){de=qt},setInitSegmentRequired:function(qt){J=qt},setLastInitializedQuality:function(qt){ve=qt}},j=(0,G.Z)(Ke).getInstance().getLogger(b),lt(),R=C.streamInfo,b}It.__dashjs_factory_name="ScheduleController";var N=F.Z.getClassFactory(It),I=ne(7387);function Z(C){var b,R,j,W,K,U,z=(C=C||{}).eventBus,le=C.events,ve=C.abrController,fe=C.dashMetrics,J=C.playbackController,pe=C.timelineConverter,de=C.type,Ke=C.streamInfo,Oe=C.dashConstants,je=C.segmentsController,Ge=C.isDynamic,ge=C.adapter;function Pe(){return de}function Te(){return j}function Be(){return U}function P(){R=null,j=!0,W=[],K=null}function ie(Fe){return new Promise(function(Ie,ae){var ke=Fe.hasInitialization(),We=Fe.hasSegments(),gt=[];gt.push(je.updateInitData(Fe,ke)),gt.push(je.updateSegmentData(Fe,We)),Promise.all(gt).then(function(ht){var ft,qt;ht[0]&&!ht[0].error&&(Fe=(qt=ht[0])&&!qt.error&&qt.representation?qt.representation:Fe),ht[1]&&!ht[1].error&&(Fe=function(lt,qt){if(qt&&!qt.error){var Kt,_t,Bt,wn,tt=qt.segments,St=[],Jt=0;for(Kt=0,_t=tt?tt.length:0;Kt<_t;Kt++)(wn=(0,I.TJ)(pe,Ge,lt,(Bt=tt[Kt]).startTime,Bt.duration,Bt.timescale,Bt.media,Bt.mediaRange,Jt))&&(St.push(wn),wn=null,Jt++);return St.length>0&&(lt.segments=St),lt}}(Fe,ht[1])),(ft=Fe).mediaFinishedInformation=je.getMediaFinishedInformation(ft),function(lt){if(Te()){var qt,_t=fe.getCurrentManifestUpdate(),Bt=!1;if(_t){for(var wn=0;wn<_t.representationInfo.length;wn++)if((qt=_t.representationInfo[wn]).index===lt.index&&qt.mediaType===Pe()){Bt=!0;break}Bt||fe.addManifestUpdateRepresentationInfo(lt,Pe())}if(function(){for(var St=0,Jt=W.length;St<Jt;St++){var Ve=W[St].segmentInfoType;if(!W[St].hasInitialization()||(Ve===Oe.SEGMENT_BASE||Ve===Oe.BASE_URL)&&!W[St].segments)return!1}return!0}()){ve.setPlaybackQuality(de,Ke,W.indexOf(U));var tt=fe.getCurrentDVRInfo(de);tt&&fe.updateManifestUpdateInfo({latency:tt.range.end-J.getTime()}),fe.getCurrentRepresentationSwitch(Be().adaptation.type)||oe(),Q()}}}(Fe),Ie()}).catch(function(ht){ae(ht)})})}function oe(){!function(){if(!(ve&&fe&&J&&pe))throw new Error(_.Z.MISSING_CONFIG_ERROR)}();var Fe=new Date,Ie=Be(),ae=1e3*J.getTime();Ie&&fe.addRepresentationSwitch(Ie.adaptation.type,Fe,ae,Ie.id),z.trigger(T.Z.REPRESENTATION_SWITCH,{mediaType:de,streamId:Ke.id,currentRepresentation:Ie,numberOfRepresentations:W.length},{streamId:Ke.id,mediaType:de})}function X(Fe){return null==Fe||Fe>=W.length?null:W[Fe]}function Q(Fe){j=!1,z.trigger(le.DATA_UPDATE_COMPLETED,{data:R,currentRepresentation:U,error:Fe},{streamId:Ke.id,mediaType:de})}function Ae(Fe){K=ge.convertRepresentationToRepresentationInfo(U=Fe)}function me(Fe){if(Fe.newDuration){var Ie=Be();Ie&&Ie.adaptation.period&&(Ie.adaptation.period.duration=Fe.newDuration)}}return b={getStreamId:function(){return Ke.id},getType:Pe,getData:function(){return R},isUpdating:Te,updateData:function(Fe,Ie,ae,ke,We){return new Promise(function(gt,ht){if(j=!0,W=Ie,R=Fe,Ae(X(We)),ae!==_.Z.VIDEO&&ae!==_.Z.AUDIO&&(ae!==_.Z.TEXT||!ke))return Q(),void gt();for(var ft=[],lt=0,qt=W.length;lt<qt;lt++)ft.push(ie(W[lt]));Promise.all(ft).then(function(){Ae(X(We)),gt()}).catch(function(_t){ht(_t)})})},getCurrentRepresentation:Be,getCurrentRepresentationInfo:function(){return K},getRepresentationForQuality:X,prepareQualityChange:function(Fe){Ae(X(Fe)),oe()},reset:function(){z.off(T.Z.MANIFEST_VALIDITY_CHANGED,me,b),P()}},P(),z.on(T.Z.MANIFEST_VALIDITY_CHANGED,me,b),b}Z.__dashjs_factory_name="RepresentationController";var q=F.Z.getClassFactory(Z),Ce=ne(3106),Ee=ne(9326),nt=ne(7473),At=ne(2594);function it(C,b){if(!(C instanceof b))throw new TypeError("Cannot call a class as a function")}var et=function C(){it(this,C),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};et.INITIAL_PLAYOUT_START_REASON="initial_playout",et.SEEK_START_REASON="seek",et.RESUME_FROM_PAUSE_START_REASON="resume",et.METRICS_COLLECTION_START_REASON="metrics_collection_start";var rt=function C(){it(this,C),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};rt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",rt.REBUFFERING_REASON="rebuffering",rt.USER_REQUEST_STOP_REASON="user_request",rt.END_OF_PERIOD_STOP_REASON="end_of_period",rt.END_OF_CONTENT_STOP_REASON="end_of_content",rt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",rt.FAILURE_STOP_REASON="failure";var Et=ne(7802);function Ot(){return{ntpToUTC:function(C){var b=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(b.getTime()+C).getTime()}}}Ot.__dashjs_factory_name="TimeUtils";var _n=F.Z.getSingletonFactory(Ot);function Zt(C){C=C||{};var b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je=this.context,Ge=(0,V.Z)(je).getInstance(),ge=C.streamInfo,Pe=C.type,Te=C.errHandler,Be=C.mimeType,P=C.timelineConverter,ie=C.adapter,oe=C.manifestModel,X=C.mediaPlayerModel,Q=C.fragmentModel,Ae=C.abrController,me=C.playbackController,Fe=C.mediaController,Ie=C.textController,ae=C.dashMetrics,ke=C.settings,We=C.boxParser,gt=C.segmentBlacklistController;function ht(){return ge.id}function ft(){return Pe}function lt(){return ie.getIsTextTrack(le.getData())}function qt(){K=[],W=null,Ke=0,ve=!1,fe=!1,J=!1,Oe=null}function Kt(Ft){return!isNaN(Ft)&&!isNaN(ge.duration)&&isFinite(ge.duration)&&Ft>=ge.start+ge.duration}function _t(Ft){var dt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ft.sender)if(me.getIsManifestUpdateInProgress())Jt();else if((!lt()||Ie.isTextEnabled())&&U&&Ft.representationId&&!U.appendInitSegmentFromCache(Ft.representationId)){var Gt=le.getCurrentRepresentation();if(0===Gt.range)return void Bt();var Re=pe?pe.getInitRequest(W,Gt):null;Re?Q.executeRequest(Re):dt&&(z.setInitSegmentRequired(!0),Jt())}}function Bt(Ft){var dt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(me.getIsManifestUpdateInProgress()||U.getIsPruningInProgress())Jt();else{var Gt=function St(){var Ft,dt=er();if(isNaN(Ke)||ft()===_.Z.TEXT&&!Ie.isTextEnabled())return null;if(pe){var Gt=le&&dt?le.getRepresentationForQuality(dt.quality):null;Ft=ve?pe.getSegmentRequestForTime(W,Gt,Ke):fe?pe.repeatSegmentRequest(W,Gt):pe.getNextSegmentRequest(W,Gt)}return Ft}();Gt?(ve=!1,fe=!1,function wn(Ft){var dt,Gt;isNaN(Ft.startTime+Ft.duration)||(Ke=Ft.startTime+Ft.duration),Ft.delayLoadingTime=(new Date).getTime()+z.getTimeToLoadDelay(),z.setTimeToLoadDelay(0),Gt=(dt=Ft).url,dt.range&&(Gt=Gt.concat("_",dt.range)),gt.contains(Gt)?(R.warn("Fragment request url ".concat(Ft.url," for stream id ").concat(ge.id," and media type ").concat(Pe," is on the ignore list and will be skipped")),Jt()):(R.debug("Next fragment request url for stream id ".concat(ge.id," and media type ").concat(Pe," is ").concat(Ft.url)),Q.executeRequest(Ft))}(Gt)):function tt(Ft){var dt,Gt=le.getCurrentRepresentation();if(!ke.get().streaming.gaps.enableSeekFix||!ve&&0!==me.getTime()||(j?j&&Gt.segmentInfoType===E.Z.SEGMENT_TIMELINE&&(dt=pe.getValidTimeAheadOfTargetTime(Ke,W,Gt,ke.get().streaming.gaps.threshold)):dt=pe.getValidTimeAheadOfTargetTime(Ke,W,Gt,ke.get().streaming.gaps.threshold),isNaN(dt)||dt===Ke)){if(pe.isLastSegmentRequested(Gt,Ke)){var Re=pe.getCurrentIndex();return R.debug("Segment requesting for stream ".concat(ge.id," has finished")),Ge.trigger(w.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Re},{streamId:ge.id,mediaType:Pe}),U.segmentRequestingCompleted(Re),void z.clearScheduleTimer()}Ft&&Jt()}else me.isSeeking()||0===me.getTime()?(R.warn("Adjusting playback time ".concat(dt," because of gap in the manifest. Seeking by ").concat(dt-Ke)),me.seek(dt,!1,!1)):(R.warn("Adjusting buffering time ".concat(dt," because of gap in the manifest. Adjusting time by ").concat(dt-Ke)),Bn(dt),Ft&&Jt())}(dt)}}function Jt(){z.startScheduleTimer(me.getLowLatencyModeEnabled()?ke.get().streaming.scheduling.lowLatencyTimeout:ke.get().streaming.scheduling.defaultTimeout)}function Ve(Ft){Ft.error||U.getIsBufferingCompleted()||U.updateBufferTimestampOffset(Ft.currentRepresentation)}function ut(Ft){ae.addBufferState(Pe,Ft.state,z.getBufferTarget()),Ft.state!==k.Z.BUFFER_EMPTY||me.isSeeking()||(R.info("Buffer is empty! Stalling!"),ae.pushPlayListTraceMetrics(new Date,rt.REBUFFERING_REASON))}function ct(Ft){Q.syncExecutedRequestsWithBufferedRange(U.getBuffer().getAllBufferRanges(),ge.duration),Ft.quotaExceeded&&Ft.from>me.getTime()&&Bn(Ft.from),Ft.hasEnoughSpaceToAppend&&Ft.quotaExceeded&&z.startScheduleTimer()}function pt(Ft){if(Ft&&Ft.lastRequestAppended&&Ft.lastRequestAppended.url){var dt=Ft.lastRequestAppended.url;Ft.lastRequestAppended.range&&(dt=dt.concat("_",Ft.lastRequestAppended.range)),R.warn("Blacklisting segment with url ".concat(dt)),gt.add(dt)}}function Qt(Ft){R.debug("Appended bytes for ".concat(Ft.mediaType," and stream id ").concat(Ft.streamId)),Ft.segmentType===yt.w.INIT_SEGMENT_TYPE&&(z.setLastInitializedQuality(Ft.quality),R.info("["+Pe+"] lastInitializedRepresentationInfo changed to "+Ft.quality)),Oe?on(Oe):z.startScheduleTimer(0)}function on(Ft){var dt=Q.getRequests({state:be.FRAGMENT_MODEL_LOADING});if(dt&&dt.length>0)return R.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Oe=Ft);U.updateBufferTimestampOffset(Ft).then(function(){z.setCheckPlaybackQuality(!1),W.segmentAlignment||W.subSegmentAlignment?z.startScheduleTimer():Gn(),Oe=null,J=!1}).catch(function(){Oe=null,J=!1})}function Sn(Ft){R.info("onFragmentLoadingAbandoned request: "+Ft.request.url+" has been aborted"),me.isSeeking()||z.getSwitchTrack()||J||(R.info("onFragmentLoadingAbandoned request: "+Ft.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ft.request&&Ft.request.isInitializationRequest()?z.setInitSegmentRequired(!0):Bn(Ft.request.startTime+Ft.request.duration/2),z.startScheduleTimer(0))}function Mt(Ft){var dt;R.info("OnFragmentLoadingCompleted for stream id "+ge.id+" and media type "+Pe+" - Url:",Ft.request?Ft.request.url:"undefined",Ft.request.range?", Range:"+Ft.request.range:""),lt()&&z.startScheduleTimer(0),Ft.error&&Ft.request.serviceLocation&&(dt=Ft,R.info("Fragment loading completed with an error"),dt&&dt.request&&dt.request.type&&(dt.request.type===yt.w.INIT_SEGMENT_TYPE?_t({representationId:dt.request.representationId,sender:{}},!1):dt.request.type===yt.w.MEDIA_SEGMENT_TYPE&&(Bn(dt.request.startTime+dt.request.duration/2),Bt({},!1))))}function Dn(){Bn(me.getTime()),ar().startScheduleTimer()}function qn(Ft){var dt=Ft.currentTrackInfo;if(dt){var Gt=K.find(function(Re){return Re.index===dt.index&&Re.lang===dt.lang});Gt&&zn(Gt).then(function(){U.setIsBufferingCompleted(!1),Bn(me.getTime()),z.setInitSegmentRequired(!0),z.startScheduleTimer()})}}function kn(Ft){Bn(Ft.quotaExceededTime),z.clearScheduleTimer()}function Kn(){return U?U.getBuffer():null}function zn(Ft){Ft===W||Ft&&W&&Ft.type!==W.type||(W=Ft);var dt=ie.getRealAdaptation(ge,W),Gt=ie.getVoRepresentations(W);if(le){var Re,at=le.getData(),Xt=Ae.getMaxAllowedIndexFor(Pe,ge.id),dn=Ae.getMinAllowedIndexFor(Pe,ge.id),Ln=null;return null!==at&&at.id===dt.id||Pe===_.Z.TEXT?Re=Ae.getQualityFor(Pe,ge.id):(Ln=Ae.getThroughputHistory().getAverageThroughput(Pe,j)||Ae.getInitialBitrateFor(Pe,ge.id),Re=Ae.getQualityForBitrate(W,Ln,ge.id)),void 0!==dn&&Re<dn&&(Re=dn),Re>Xt&&(Re=Xt),le.updateData(dt,Gt,Pe,W.isFragmented,Re)}return Promise.resolve()}function ar(){return z}function er(Ft){var dt;return void 0!==Ft?((0,Ce.SE)(Ft),dt=le?le.getRepresentationForQuality(Ft):null):dt=le?le.getCurrentRepresentation():null,ie.convertRepresentationToRepresentationInfo(dt)}function rr(){return!!U&&U.getIsBufferingCompleted()}function Ar(Ft){if(ke.get().streaming.enableManifestTimescaleMismatchFix){var dt=Ft.chunk,Gt=dt.bytes,Re=er(dt.quality),at=le&&Re?le.getRepresentationForQuality(Re.quality):null;Re&&at&&(at.timescale=We.getMediaTimescaleFromMoov(Gt))}}function an(Ft){var Ni,zi,za,us,dt=Ft.chunk,Gt=dt.bytes,Re=dt.quality,at=er(Re),Xt=le&&at?le.getRepresentationForQuality(at.quality):null;if(at&&Xt){var dn;if(ke.get().streaming.parseInbandPrft&&Ft.request.type===yt.w.MEDIA_SEGMENT_TYPE){var Ln=(Ni=dn=dn||We.parse(Gt),zi=Xt.timescale,za=Ni.getBoxes("prft"),us=[],za.forEach(function(Wa){us.push(function(aa,sa){var Po="unknown";switch(aa.flags){case 0:Po=E.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Po=E.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Po=E.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var cs=1e3*aa.ntp_timestamp_sec+aa.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Po,ntpTimestamp:cs=_n(je).getInstance().ntpToUTC(cs),mediaTime:aa.media_time/sa}}(Wa,zi))}),us);Ln&&Ln.length&&Ge.trigger(T.Z.INBAND_PRFT,{data:Ln},{streamId:ge.id,mediaType:Pe})}var pr=ie.getEventsFor(at.mediaInfo,null,ge),di=ie.getEventsFor(at,Xt,ge);if(pr&&pr.length>0||di&&di.length>0){var Fi=Q.getRequests({state:be.FRAGMENT_MODEL_EXECUTED,quality:Re,index:dt.index})[0],Si=function(Ni,zi,za,us){try{for(var Wa={},aa=[],sa=za.concat(us),Po=0,cs=sa.length;Po<cs;Po++)Wa[sa[Po].schemeIdUri+"/"+sa[Po].value]=sa[Po];var eo=Ni.getBoxes("emsg");if(!eo||0===eo.length)return aa;for(var po=Ni.getBox("sidx"),Ei=!po||isNaN(po.earliest_presentation_time)||isNaN(po.timescale)?zi&&!isNaN(zi.mediaStartTime)?zi.mediaStartTime:0:po.earliest_presentation_time/po.timescale,nl=Math.max(Ei,0),rl=le.getCurrentRepresentation(),ka=0,Pl=eo.length;ka<Pl;ka++){var fs=ie.getEvent(eo[ka],Wa,nl,rl);fs&&aa.push(fs)}return aa}catch{return[]}}(dn=dn||We.parse(Gt),Fi,pr,di);Ge.trigger(w.Z.INBAND_EVENTS,{events:Si},{streamId:ge.id})}}}function Un(){var Ft=me.getTime();ke.get().streaming.buffer.flushBufferAtTrackSwitch&&me.seek(Ft+.001,!1,!0),Bn(Ft),U.setSeekTarget(Ft),z.startScheduleTimer()}function Gn(){var Ft=me.getTime(),dt=U.getContinuousBufferTimeForTargetTime(Ft);Bn(isNaN(dt)?Ft:dt),z.startScheduleTimer()}function Pn(Ft){Ft&&!isNaN(Ft.time)&&(Bn(Ft.time),U.setSeekTarget(Ft.time))}function Bn(Ft){Ke=Ft,ve=!0}return b={initialize:function(Ft,dt,Gt){var Re;de=(0,Et.Z)(je).create({events:w.Z,eventBus:Ge,streamInfo:ge,timelineConverter:P,dashConstants:E.Z,segmentBaseController:C.segmentBaseController,type:Pe}),(pe=(0,Ee.Z)(je).create({streamInfo:ge,type:Pe,timelineConverter:P,dashMetrics:ae,mediaPlayerModel:X,baseURLController:C.baseURLController,errHandler:Te,segmentsController:de,settings:ke,boxParser:We,events:w.Z,eventBus:Ge,errors:Me,debug:(0,G.Z)(je).getInstance(),requestModifier:(0,nt.Z)(je).getInstance(),dashConstants:E.Z,constants:_.Z,urlUtils:(0,At.Z)(je).getInstance()})).initialize(j=ge.manifestInfo.isDynamic),Ae.registerStreamType(Pe,b),le=q(je).create({streamInfo:ge,type:Pe,abrController:Ae,dashMetrics:ae,playbackController:me,timelineConverter:P,dashConstants:E.Z,events:w.Z,eventBus:Ge,errors:Me,isDynamic:j,adapter:ie,segmentsController:de}),(U=(Re=Pe)?Re!==_.Z.TEXT||Gt?Tt(je).create({streamInfo:ge,type:Re,mediaPlayerModel:X,manifestModel:oe,fragmentModel:Q,errHandler:Te,mediaController:Fe,representationController:le,adapter:ie,textController:Ie,abrController:Ae,playbackController:me,settings:ke}):qe(je).create({streamInfo:ge,type:Re,mimeType:Be,fragmentModel:Q,textController:Ie,errHandler:Te,settings:ke}):(Te.error(new xe.Z(Me.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Me.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null))&&U.initialize(Ft),(z=N(je).create({streamInfo:ge,type:Pe,mimeType:Be,adapter:ie,dashMetrics:ae,mediaPlayerModel:X,fragmentModel:Q,abrController:Ae,playbackController:me,textController:Ie,mediaController:Fe,bufferController:U,representationController:le,settings:ke})).initialize(dt),Ke=0,ve=!1,fe=!1},getStreamId:ht,getType:ft,isUpdating:function(){return!!le&&le.isUpdating()},getBufferController:function(){return U},dischargePreBuffer:function(){U.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:ar,getRepresentationController:function(){return le},getRepresentationInfo:er,getBufferLevel:function(){return U?U.getBufferLevel():0},isBufferingCompleted:rr,createBufferSinks:function(Ft){var dt=Kn();return dt?Promise.resolve(dt):U?U.createBufferSink(W,Ft):Promise.resolve(null)},updateStreamInfo:function(Ft){return ge=Ft,rr()?Promise.resolve():U.updateAppendWindow()},getStreamInfo:function(){return ge},selectMediaInfo:zn,clearMediaInfoArray:function(){K=[]},addMediaInfo:function(Ft){-1===K.indexOf(Ft)&&K.push(Ft)},prepareTrackSwitch:function(){return new Promise(function(Ft){R.debug("Preparing track switch for type ".concat(Pe));var dt=Pe===_.Z.TEXT||ke.get().streaming.trackSwitchMode[Pe]===_.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&me.getTimeToStreamEnd(ge)>ke.get().streaming.buffer.stallThreshold;if(U.getIsBufferingCompleted()&&!dt)return U.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Ge.trigger(w.Z.BUFFERING_COMPLETED,{},{streamId:ge.id,mediaType:Pe})}).catch(function(){Ge.trigger(w.Z.BUFFERING_COMPLETED,{},{streamId:ge.id,mediaType:Pe})}),void Ft();z.clearScheduleTimer(),z.setSwitchTrack(!0),dt?(Ge.trigger(w.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Pe,streamId:ge.id},{mediaType:Pe,streamId:ge.id}),Q.abortRequests(),U.prepareForReplacementTrackSwitch(W.codec).then(function(){var Gt=er();return U.updateBufferTimestampOffset(Gt)}).then(function(){Un(),Ft()}).catch(function(){Un(),Ft()})):U.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Gn(),Ft()}).catch(function(){Gn(),Ft()})})},prepareQualityChange:function(Ft){Oe&&R.warning("Canceling queued representation switch to ".concat(Oe.quality," for ").concat(Pe)),R.debug("Preparing quality switch for type ".concat(Pe));var dt=Ft.newQuality;J=!0,z.clearScheduleTimer(),le.prepareQualityChange(dt);var Re,Gt=er(dt);Ft.reason&&Ft.reason.forceReplace?(Re=Gt,Q.abortRequests(),Ge.trigger(w.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Pe,streamId:ge.id},{mediaType:Pe,streamId:ge.id}),z.setCheckPlaybackQuality(!1),U.prepareForForceReplacementQualitySwitch(Re).then(function(){Un(),Oe=null,J=!1}).catch(function(){Un(),Oe=null,J=!1})):Ft&&Ft.reason&&Ft.reason.forceAbandon?function(Re){U.updateBufferTimestampOffset(Re).then(function(){Q.abortRequests(),fe=!0,z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),J=!1,Oe=null}).catch(function(){Oe=null,J=!1})}(Gt):ke.get().streaming.buffer.fastSwitchEnabled?function(Re){var at=me.getTime(),Xt=1.5*(isNaN(Re.fragmentDuration)?1:Re.fragmentDuration),dn=Q.getRequests({state:be.FRAGMENT_MODEL_EXECUTED,time:at+Xt,threshold:0})[0];if(dn&&!lt()){var Ln=U.getBufferLevel(),pr=Ae.getAbandonmentStateFor(ge.id,Pe);dn.quality<Re.quality&&Ln>=Xt&&pr!==k.Z.ABANDON_LOAD?U.updateBufferTimestampOffset(Re).then(function(){Q.abortRequests(),Bn(at+Xt),z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),J=!1}).catch(function(){J=!1}):on(Re)}else on(Re)}(Gt):on(Gt),ae.pushPlayListTraceMetrics(new Date,rt.REPRESENTATION_SWITCH_STOP_REASON),ae.createPlaylistTraceMetrics(Gt.id,1e3*me.getTime(),me.getPlaybackRate())},getMediaInfo:function(){return W},getMediaSource:function(){return U.getMediaSource()},setMediaSource:function(Ft){return U.setMediaSource(Ft,W)},getBuffer:Kn,setExplicitBufferingTime:Bn,finalisePlayList:function(Ft,dt){ae.pushPlayListTraceMetrics(Ft,dt)},probeNextRequest:function(){var Ft=er(),dt=le&&Ft?le.getRepresentationForQuality(Ft.quality):null;return pe.getNextSegmentRequestIdempotent(W,dt)},prepareInnerPeriodPlaybackSeeking:function(Ft){return new Promise(function(dt){if(U.hasBufferAtTime(Ft.seekTime))return U.pruneBuffer(),Kt(U.getContinuousBufferTimeForTargetTime(Ft.seekTime))&&U.setIsBufferingCompleted(!0),void dt();z.clearScheduleTimer(),Q.abortRequests(),U.prepareForPlaybackSeek().then(function(){var Gt=U.getAllRangesWithSafetyFactor(Ft.seekTime);return U.clearBuffers(Gt)}).then(function(){var Gt=U.getContinuousBufferTimeForTargetTime(Ft.seekTime);if(Kt(Gt))U.setIsBufferingCompleted(!0),dt();else{var Re=isNaN(Gt)?Ft.seekTime:Gt;Bn(Re),U.setSeekTarget(Re);var at=[];at.push(U.updateAppendWindow());var Xt=er();at.push(U.updateBufferTimestampOffset(Xt)),Promise.all(at).then(function(){z.setInitSegmentRequired(!0),z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),dt()})}}).catch(function(Gt){R.error(Gt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Ft,dt){try{z.clearScheduleTimer(),Q.abortRequests(),U.prepareForPlaybackSeek().then(function(){return U.pruneAllSafely()}).then(function(){Ft()})}catch(Gt){dt(Gt)}})},reset:function(Ft,dt){pe&&pe.reset(),U&&(U.reset(Ft,dt),U=null),z&&(z.reset(),z=null),le&&(le.reset(),le=null),de&&(de=null),Ae&&Ae.unRegisterStreamType(ht(),Pe),Ge.off(w.Z.DATA_UPDATE_COMPLETED,Ve,b),Ge.off(w.Z.INIT_FRAGMENT_NEEDED,_t,b),Ge.off(w.Z.MEDIA_FRAGMENT_NEEDED,Bt,b),Ge.off(w.Z.INIT_FRAGMENT_LOADED,Ar,b),Ge.off(w.Z.MEDIA_FRAGMENT_LOADED,an,b),Ge.off(w.Z.BUFFER_LEVEL_STATE_CHANGED,ut,b),Ge.off(w.Z.BUFFER_CLEARED,ct,b),Ge.off(w.Z.SEEK_TARGET,Pn,b),Ge.off(w.Z.FRAGMENT_LOADING_ABANDONED,Sn,b),Ge.off(w.Z.FRAGMENT_LOADING_COMPLETED,Mt,b),Ge.off(w.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Dn,b),Ge.off(w.Z.SET_NON_FRAGMENTED_TEXT,qn,b),Ge.off(w.Z.QUOTA_EXCEEDED,kn,b),Ge.off(w.Z.SOURCE_BUFFER_ERROR,pt,b),Ge.off(w.Z.BYTES_APPENDED_END_FRAGMENT,Qt,b),qt(),Pe=null,ge=null}},R=(0,G.Z)(je).getInstance().getLogger(b),qt(),Ge.on(w.Z.DATA_UPDATE_COMPLETED,Ve,b,{priority:V.Z.EVENT_PRIORITY_HIGH}),Ge.on(w.Z.INIT_FRAGMENT_NEEDED,_t,b),Ge.on(w.Z.MEDIA_FRAGMENT_NEEDED,Bt,b),Ge.on(w.Z.INIT_FRAGMENT_LOADED,Ar,b),Ge.on(w.Z.MEDIA_FRAGMENT_LOADED,an,b),Ge.on(w.Z.BUFFER_LEVEL_STATE_CHANGED,ut,b),Ge.on(w.Z.BUFFER_CLEARED,ct,b),Ge.on(w.Z.SEEK_TARGET,Pn,b),Ge.on(w.Z.FRAGMENT_LOADING_ABANDONED,Sn,b),Ge.on(w.Z.FRAGMENT_LOADING_COMPLETED,Mt,b),Ge.on(w.Z.QUOTA_EXCEEDED,kn,b),Ge.on(w.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Dn,b),Ge.on(w.Z.SET_NON_FRAGMENTED_TEXT,qn,b),Ge.on(w.Z.SOURCE_BUFFER_ERROR,pt,b),Ge.on(w.Z.BYTES_APPENDED_END_FRAGMENT,Qt,b),b}Zt.__dashjs_factory_name="StreamProcessor";var xn=F.Z.getClassFactory(Zt),Rn=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},Mn=ne(9032);function Xn(C,b){if(C){if("string"==typeof C)return Ir(C,b);var R=Object.prototype.toString.call(C).slice(8,-1);return"Object"===R&&C.constructor&&(R=C.constructor.name),"Map"===R||"Set"===R?Array.from(C):"Arguments"===R||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R)?Ir(C,b):void 0}}function Ir(C,b){(null==b||b>C.length)&&(b=C.length);for(var R=0,j=new Array(b);R<b;R++)j[R]=C[R];return j}function Yr(C){var R,W=(C=C||{}).requestModifier,K=C.lowLatencyThroughputModel,U=C.boxParser,z=(0,ot.Z)(this.context).getInstance();function le(J){var pe,de=new Date,Ke=J.request,Oe=new Headers;if(Ke.range&&Oe.append("Range","bytes="+Ke.range),J.headers)for(var je in J.headers){var Ge=J.headers[je];Ge&&Oe.append(je,Ge)}Ke.requestStartDate||(Ke.requestStartDate=de),W&&W.modifyRequestHeader&&W.modifyRequestHeader({setRequestHeader:function(P,ie){Oe.append(P,ie)}},{url:J.url}),"function"==typeof window.AbortController&&(pe=new AbortController,J.abortController=pe,pe.signal.onabort=J.onabort);var ge={method:J.method,headers:Oe,credentials:J.withCredentials?"include":void 0,signal:pe?pe.signal:void 0},Pe=z.get().streaming.abr.fetchThroughputCalculationMode,Te=Date.now(),Be=0;new Promise(function(P){if(Pe===_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&K&&(Be=K.getThroughputCapacityDelayMS(Ke,1e3*R.getCurrentBufferLevel(Ke.mediaType))))return setTimeout(P,Be);P()}).then(function(){var P=Date.now();fetch(J.url,ge).then(function(ie){J.response||(J.response={}),J.response.status=ie.status,J.response.statusText=ie.statusText,J.response.responseURL=ie.url,ie.ok||J.onerror();var oe,X="",Q=function(Ve,ut){var ct;if(typeof Symbol>"u"||null==Ve[Symbol.iterator]){if(Array.isArray(Ve)||(ct=Xn(Ve))){ct&&(Ve=ct);var pt=0,Qt=function(){};return{s:Qt,n:function(){return pt>=Ve.length?{done:!0}:{done:!1,value:Ve[pt++]}},e:function(Dn){throw Dn},f:Qt}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var on,Sn=!0,Mt=!1;return{s:function(){ct=Ve[Symbol.iterator]()},n:function(){var Dn=ct.next();return Sn=Dn.done,Dn},e:function(Dn){Mt=!0,on=Dn},f:function(){try{Sn||null==ct.return||ct.return()}finally{if(Mt)throw on}}}}(ie.headers.keys());try{for(Q.s();!(oe=Q.n()).done;){var Ae=oe.value;X+=Ae+": "+ie.headers.get(Ae)+"\r\n"}}catch(Ve){Q.e(Ve)}finally{Q.f()}if(J.response.responseHeaders=X,!ie.body)return ie.arrayBuffer().then(function(Ve){J.response.response=Ve,J.progress({loaded:Ve.byteLength,total:Ve.byteLength,stream:!1}),J.onload(),J.onend()});var me,Fe,Ie,ke=parseInt(ie.headers.get("Content-Length"),10),We=0,gt=!1,ht=new Uint8Array,ft=0;if(Pe===_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&K){var lt=P,qt=0,Kt=(2,function(Ve){if(Array.isArray(Ve))return Ve}(Ie=ie.body.tee())||function(Ve,ut){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ve)){var ct=[],pt=!0,Qt=!1,on=void 0;try{for(var Sn,Mt=Ve[Symbol.iterator]();!(pt=(Sn=Mt.next()).done)&&(ct.push(Sn.value),2!==ct.length);pt=!0);}catch(Dn){Qt=!0,on=Dn}finally{try{pt||null==Mt.return||Mt.return()}finally{if(Qt)throw on}}return ct}}(Ie)||Xn(Ie,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Bt=Kt[1];me=Kt[0].getReader(),Fe=[],me.read().then(function Ve(ut){var ct=ut.value,pt=ut.done;if(qt=Date.now(),ct&&ct.length){var Qt=qt-lt,on=ct.length;Fe.push({chunkDownloadTimeRelativeMS:qt-P,chunkDownloadDurationMS:Qt,chunkBytes:on,kbps:Math.round(8*on/(Qt/1e3)),bufferLevel:R.getCurrentBufferLevel(Ke.mediaType)})}if(pt){var Sn=qt-P,Mt=Fe.reduce(function(Dn,qn){return Dn+qn.chunkBytes},0);return K.addMeasurement(Ke,Sn,Fe,Te,Be,X),void J.progress({loaded:Mt,total:Mt,lengthComputable:!0,time:K.getEstimatedDownloadDurationMS(Ke),stream:!0})}return lt=Date.now(),me.read().then(Ve)}),J.reader=Bt.getReader()}else J.reader=ie.body.getReader();var wn=[],tt=[],St=[],Jt=!0;ve(J,function Ve(ut){var ct=ut.value;if(ut.done){if(ht){if(Pe!==_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var pt=null,Qt=null;Pe===_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(pt=function(Dn,qn){try{var kn,Kn;kn=Dn.filter(function(Un,Gn){return Gn<Dn.length-1}),Kn=qn.filter(function(Un,Gn){return Gn<qn.length-1});var zn=[];if(kn.length>1){for(var ar=0,er=0,rr=0;rr<kn.length;rr++)if(kn[rr]&&Kn[rr]){var Ar=Kn[rr].ts-kn[rr].ts;if(Ar>1)zn.push(8*Kn[rr].bytes/Ar),er=0;else{0===er&&(er=kn[rr].ts,ar=0);var an=Kn[rr].ts-er;an>1?(zn.push(8*(ar+=Kn[rr].bytes)/an),er=0):ar+=Kn[rr].bytes}}if(zn.length>0)return zn.reduce(function(Un,Gn){return Un+Gn},0)/zn.length}return null}catch{return null}}(tt,St))&&(Qt=8*We/pt):Pe===_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Qt=fe(wn,We)),J.progress({loaded:We,total:isNaN(ke)?We:ke,lengthComputable:!0,time:Qt,stream:!0})}J.response.response=ht.buffer}return J.onload(),void J.onend()}if(ct&&ct.length>0){ht=function(Dn,qn){if(0===Dn.length)return qn;var kn=new Uint8Array(Dn.length+qn.length);return kn.set(Dn),kn.set(qn,Dn.length),kn}(ht,ct),We+=ct.length,wn.push({ts:Date.now(),bytes:ct.length}),Pe===_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Jt&&U.findLastTopIsoBoxCompleted(["moof"],ht,ft).found&&(Jt=!1,tt.push({ts:performance.now(),bytes:ct.length}));var on=U.findLastTopIsoBoxCompleted(["moov","mdat"],ht,ft);if(on.found){var Sn,Mt=on.lastCompletedOffset+on.size;Pe!==_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Jt||(Jt=!0,St.push({ts:performance.now(),bytes:ht.length})),Mt===ht.length?(Sn=ht,ht=new Uint8Array):(Sn=new Uint8Array(ht.subarray(0,Mt)),ht=ht.subarray(Mt)),J.progress({data:Sn.buffer,lengthComputable:!1,noTrace:!0}),ft=0}else ft=on.lastCompletedOffset,gt||(J.progress({lengthComputable:!1,noTrace:!0}),gt=!0)}ve(J,Ve)})}).catch(function(ie){J.onerror&&J.onerror(ie)})})}function ve(J,pe){J.reader.read().then(pe).catch(function(de){J.onerror&&200===J.response.status&&J.onerror(de)})}function fe(J,pe){try{if((J=J.filter(function(Oe){return Oe.bytes>pe/4/J.length})).length>1){var de=0,Ke=(J[J.length-1].ts-J[0].ts)/J.length;return J.forEach(function(Oe,je){var Ge=J[je+1];if(Ge){var ge=Ge.ts-Oe.ts;de+=ge<Ke?ge:0}}),de}return null}catch{return null}}return{load:function(J){W&&W.modifyRequest?(0,nt.k)(J,W).then(function(){return le(J)}):le(J)},abort:function(J){if(J.abortController)J.abortController.abort();else if(J.reader)try{J.reader.cancel(),J.onabort()}catch{}},calculateDownloadedTime:fe,setup:function(J){R=J.dashMetrics}}}Yr.__dashjs_factory_name="FetchLoader";var Li=F.Z.getClassFactory(Yr),ei=ne(1180);var Xi=function(){function C(){(function(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")})(this,C),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var R;return(R=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==E.Z.BASE_URL&&this.segmentInfoType!==E.Z.SEGMENT_BASE&&!this.indexRange}}])&&function gi(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C.prototype,R),C}(),ti=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.period=null,this.index=-1,this.type=null},Mo=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};Mo.DEFAULT_ID="defaultId";var Bi=Mo,Eo=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},Zo=ne(2610),_o=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},ea=function C(b,R,j,W){(function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")})(this,C),this.url=b||"",this.serviceLocation=R||b||"",this.dvb_priority=j||1,this.dvb_weight=W||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};ea.DEFAULT_DVB_PRIORITY=1,ea.DEFAULT_DVB_WEIGHT=1;var ha=ea,Io=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},cn=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},un=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};var Ct=function(){function C(){(function(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")})(this,C),this.schemeIdUri=null,this.value=null,this.id=null}var R;return(R=[{key:"init",value:function(j){return j&&(this.schemeIdUri=j.schemeIdUri?j.schemeIdUri:null,this.value=j.value?j.value:null,this.id=j.id?j.id:null),this}}])&&function rn(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C.prototype,R),C}(),$t=ne(3101),xt=ne.n($t);function kt(){return{areEqual:function(C,b){return xt()(C,b)}}}kt.__dashjs_factory_name="ObjectUtils";var bn=F.Z.getSingletonFactory(kt),zt=ne(7803),On=function C(b,R){(function(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")})(this,C),this.url=b||"",this.serviceLocation=R||null,this.queryParams={}},Wn=function C(b,R,j){(function(W,K){if(!(W instanceof K))throw new TypeError("Cannot call a class as a function")})(this,C),this.url=b||"",this.serviceLocation=R||null,this.ttl=j||NaN,this.queryParams={}};function In(C,b){var R;if(typeof Symbol>"u"||null==C[Symbol.iterator]){if(Array.isArray(C)||(R=ln(C))||b&&C&&"number"==typeof C.length){R&&(C=R);var j=0,W=function(){};return{s:W,n:function(){return j>=C.length?{done:!0}:{done:!1,value:C[j++]}},e:function(le){throw le},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K,U=!0,z=!1;return{s:function(){R=C[Symbol.iterator]()},n:function(){var le=R.next();return U=le.done,le},e:function(le){z=!0,K=le},f:function(){try{U||null==R.return||R.return()}finally{if(z)throw K}}}}function ln(C,b){if(C){if("string"==typeof C)return gn(C,b);var R=Object.prototype.toString.call(C).slice(8,-1);return"Object"===R&&C.constructor&&(R=C.constructor.name),"Map"===R||"Set"===R?Array.from(C):"Arguments"===R||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R)?gn(C,b):void 0}}function gn(C,b){(null==b||b>C.length)&&(b=C.length);for(var R=0,j=new Array(b);R<b;R++)j[R]=C[R];return j}function Vn(){var C,b,R,j,W=this.context,K=(0,At.Z)(W).getInstance(),U=Number.isInteger||function(P){return"number"==typeof P&&isFinite(P)&&Math.floor(P)===P};function z(P,ie){if(!P)throw new Error("adaptation is not defined");if(!ie)throw new Error("type is not defined");if(P.Representation_asArray&&P.Representation_asArray.length){var oe=je(P.Representation_asArray[0]);if(oe&&oe.length>0&&zt.Y.indexOf(oe[0].schemeIdUri)>=0)return ie===_.Z.IMAGE}if(P.ContentComponent_asArray&&P.ContentComponent_asArray.length>0){if(P.ContentComponent_asArray.length>1)return ie===_.Z.MUXED;if(P.ContentComponent_asArray[0].contentType===ie)return!0}var X=ie===_.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(ie);if(P.Representation_asArray&&P.Representation_asArray.length&&X.test(P.Representation_asArray[0].codecs))return!0;if(P.hasOwnProperty(E.Z.MIME_TYPE))return X.test(P.mimeType);if(P.Representation_asArray)for(var Ae,me=0;me<P.Representation_asArray.length;me++)if((Ae=P.Representation_asArray[me]).hasOwnProperty(E.Z.MIME_TYPE))return X.test(Ae.mimeType);return!1}function le(P){if(!P)throw new Error("adaptation is not defined");if(P.hasOwnProperty(E.Z.SEGMENT_TEMPLATE)||P.hasOwnProperty(E.Z.SEGMENT_TIMELINE)||P.hasOwnProperty(E.Z.SEGMENT_LIST)||P.hasOwnProperty(E.Z.SEGMENT_BASE))return!0;if(P.Representation_asArray&&P.Representation_asArray.length>0){var ie=P.Representation_asArray[0];if(ie.hasOwnProperty(E.Z.SEGMENT_TEMPLATE)||ie.hasOwnProperty(E.Z.SEGMENT_TIMELINE)||ie.hasOwnProperty(E.Z.SEGMENT_LIST)||ie.hasOwnProperty(E.Z.SEGMENT_BASE))return!0}return!1}function ve(P){return z(P,_.Z.VIDEO)}function fe(P){return z(P,_.Z.TEXT)}function J(P){return z(P,_.Z.IMAGE)}function pe(P){return P&&Array.isArray(P.Representation_asArray)&&P.Representation_asArray.sort(function(ie,oe){return ie.bandwidth-oe.bandwidth}),P}function de(P,ie){return P&&P.Period_asArray&&U(ie)&&P.Period_asArray[ie]?P.Period_asArray[ie].AdaptationSet_asArray:[]}function Ke(P){return P&&P.Period_asArray?P.Period_asArray:[]}function Oe(P){var ie=!1;return P&&P.hasOwnProperty("type")&&(ie=P.type===E.Z.DYNAMIC),ie}function je(P){return P&&P.EssentialProperty_asArray&&P.EssentialProperty_asArray.length?P.EssentialProperty_asArray.map(function(ie){return{schemeIdUri:ie.schemeIdUri,value:ie.value}}):null}function Ge(P){if(!P||!P.S_asArray)return NaN;var ie=P.S_asArray[0],oe=P.S_asArray[1];return ie.hasOwnProperty("d")?ie.d:oe.t-ie.t}function ge(P,ie){if(!P)throw new Error("Period cannot be null or undefined");var oe=Bi.DEFAULT_ID+"_"+ie;return P.hasOwnProperty(E.Z.ID)&&P.id.length>0&&"__proto__"!==P.id&&(oe=P.id),oe}function Pe(P,ie,oe){var X,Q=[];if(!P)return Q;for(X=0;X<P.length;X++){var Ae=new Io;if(Ae.timescale=1,Ae.representation=ie,!P[X].hasOwnProperty(_.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Ae.schemeIdUri=P[X].schemeIdUri,P[X].hasOwnProperty(E.Z.TIMESCALE)&&(Ae.timescale=P[X].timescale),P[X].hasOwnProperty(E.Z.VALUE)&&(Ae.value=P[X].value),Q.push(Ae),Ae.period=oe}return Q}function Te(P){var ie=[],X=!1;return(P.BaseURL_asArray||[P.baseUri]).some(function(Q){if(Q){var Ae=new ha,me=Q.__text||Q;return K.isRelative(me)&&(X=!0,P.baseUri&&(me=K.resolve(me,P.baseUri))),Ae.url=me,Ae.serviceLocation=Q.hasOwnProperty(E.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Q.serviceLocation:me,Q.hasOwnProperty(E.Z.DVB_PRIORITY)&&(Ae.dvb_priority=Q[E.Z.DVB_PRIORITY]),Q.hasOwnProperty(E.Z.DVB_WEIGHT)&&(Ae.dvb_weight=Q[E.Z.DVB_WEIGHT]),Q.hasOwnProperty(E.Z.AVAILABILITY_TIME_OFFSET)&&(Ae.availabilityTimeOffset=Q[E.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(E.Z.AVAILABILITY_TIME_COMPLETE)&&(Ae.availabilityTimeComplete="false"!==Q[E.Z.AVAILABILITY_TIME_COMPLETE]),ie.push(Ae),X}}),ie}function Be(P){var ie=new un;return ie.serverUrl=P.__text,P.hasOwnProperty(E.Z.DEFAULT_SERVICE_LOCATION)&&(ie.defaultServiceLocation=P[E.Z.DEFAULT_SERVICE_LOCATION],ie.defaultServiceLocationArray=ie.defaultServiceLocation.split(" ")),P.hasOwnProperty(E.Z.QUERY_BEFORE_START)&&(ie.queryBeforeStart="true"===P[E.Z.QUERY_BEFORE_START].toLowerCase()),P.hasOwnProperty(E.Z.CLIENT_REQUIREMENT)&&(ie.clientRequirement="false"!==P[E.Z.CLIENT_REQUIREMENT].toLowerCase()),ie}return C={getIsTypeOf:z,getIsText:fe,getIsFragmented:le,getProducerReferenceTimesForAdaptation:function(P){var ie=P&&P.hasOwnProperty(E.Z.PRODUCERREFERENCETIME_ASARRAY)?P[E.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(P&&P.hasOwnProperty(E.Z.REPRESENTATION_ASARRAY)?P[E.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(X){var Q;X.hasOwnProperty(E.Z.PRODUCERREFERENCETIME_ASARRAY)&&ie.push.apply(ie,function(Ae){if(Array.isArray(Ae))return gn(Ae)}(Q=X[E.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Ae){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ae))return Array.from(Ae)}(Q)||ln(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var oe=[];return ie.forEach(function(X){var Q=new cn;X.hasOwnProperty(E.Z.ID)&&(Q[E.Z.ID]=X[E.Z.ID],X.hasOwnProperty(E.Z.WALL_CLOCK_TIME)&&(Q[E.Z.WALL_CLOCK_TIME]=X[E.Z.WALL_CLOCK_TIME],X.hasOwnProperty(E.Z.PRESENTATION_TIME)&&(Q[E.Z.PRESENTATION_TIME]=X[E.Z.PRESENTATION_TIME],X.hasOwnProperty(E.Z.INBAND)&&(Q[E.Z.INBAND]="false"!==X[E.Z.INBAND]),X.hasOwnProperty(E.Z.TYPE)&&(Q[E.Z.TYPE]=X[E.Z.TYPE]),oe.push(Q))))}),oe},getLanguageForAdaptation:function(P){var ie="";return P&&P.hasOwnProperty(E.Z.LANG)&&(ie=P.lang),ie},getViewpointForAdaptation:function(P){return P&&P.hasOwnProperty(E.Z.VIEWPOINT_ASARRAY)&&P[E.Z.VIEWPOINT_ASARRAY].length?P[E.Z.VIEWPOINT_ASARRAY].map(function(ie){return(new Ct).init(ie)}):[]},getRolesForAdaptation:function(P){return P&&P.hasOwnProperty(E.Z.ROLE_ASARRAY)&&P[E.Z.ROLE_ASARRAY].length?P[E.Z.ROLE_ASARRAY].map(function(ie){return(new Ct).init(ie)}):[]},getAccessibilityForAdaptation:function(P){return P&&P.hasOwnProperty(E.Z.ACCESSIBILITY_ASARRAY)&&P[E.Z.ACCESSIBILITY_ASARRAY].length?P[E.Z.ACCESSIBILITY_ASARRAY].map(function(ie){return(new Ct).init(ie)}):[]},getAudioChannelConfigurationForAdaptation:function(P){return P&&P.hasOwnProperty(E.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&P[E.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?P[E.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ie){return(new Ct).init(ie)}):[]},getAudioChannelConfigurationForRepresentation:function(P){return P&&P.hasOwnProperty(E.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&P[E.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?P[E.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ie){return(new Ct).init(ie)}):[]},getAdaptationForIndex:function(P,ie,oe){var X=de(ie,oe);return X.length>0&&U(P)?X[P]:null},getIndexForAdaptation:function(P,ie,oe){if(!P)return-1;for(var X=de(ie,oe),Q=0;Q<X.length;Q++)if(bn(W).getInstance().areEqual(X[Q],P))return Q;return-1},getAdaptationForId:function(P,ie,oe){var X,Q,Ae=de(ie,oe);for(X=0,Q=Ae.length;X<Q;X++)if(Ae[X].hasOwnProperty(E.Z.ID)&&Ae[X].id===P)return Ae[X];return null},getAdaptationsForType:function(P,ie,oe){var X,Q,Ae=de(P,ie),me=[];for(X=0,Q=Ae.length;X<Q;X++)z(Ae[X],oe)&&me.push(pe(Ae[X]));return me},getRealPeriods:Ke,getRealPeriodForIndex:function(P,ie){var oe=Ke(ie);return oe.length>0&&U(P)?oe[P]:null},getCodec:function(P,ie,oe){var X=null;if(P&&P.Representation_asArray&&P.Representation_asArray.length>0){var Q=U(ie)&&ie>=0&&ie<P.Representation_asArray.length?P.Representation_asArray[ie]:P.Representation_asArray[0];Q&&(X=Q.mimeType+';codecs="'+Q.codecs+'"',oe&&void 0!==Q.width&&(X+=';width="'+Q.width+'";height="'+Q.height+'"'))}return X&&(X=X.replace(/\sprofiles=[^;]*/g,"")),X},getSelectionPriority:function(P){try{var ie=P&&void 0!==P.selectionPriority?parseInt(P.selectionPriority):1;return isNaN(ie)?1:ie}catch{return 1}},getMimeType:function(P){return P&&P.Representation_asArray&&P.Representation_asArray.length>0?P.Representation_asArray[0].mimeType:null},getKID:function(P){return P&&P.hasOwnProperty(E.Z.CENC_DEFAULT_KID)?P[E.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(P){if(!P||!Array.isArray(P.Label_asArray))return[];for(var ie=[],oe=0;oe<P.Label_asArray.length;oe++)ie.push({lang:P.Label_asArray[oe].lang,text:P.Label_asArray[oe].__text||P.Label_asArray[oe]});return ie},getContentProtectionData:function(P){return P&&P.hasOwnProperty(E.Z.CONTENTPROTECTION_ASARRAY)&&0!==P.ContentProtection_asArray.length?P.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function(P){return P&&P[E.Z.ID]||null},hasProfile:function(P,ie){var oe=!1;return P&&P.profiles&&P.profiles.length>0&&(oe=-1!==P.profiles.indexOf(ie)),oe},getDuration:function(P){return P&&P.hasOwnProperty(E.Z.MEDIA_PRESENTATION_DURATION)?P.mediaPresentationDuration:P&&"dynamic"==P.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(P){return P&&P.bandwidth?P.bandwidth:NaN},getManifestUpdatePeriod:function(P){var ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,oe=NaN;return P&&P.hasOwnProperty(E.Z.MINIMUM_UPDATE_PERIOD)&&(oe=P.minimumUpdatePeriod),isNaN(oe)?oe:Math.max(oe-ie,1)},getPublishTime:function(P){return P&&P.hasOwnProperty(E.Z.PUBLISH_TIME)?new Date(P[E.Z.PUBLISH_TIME]):null},getRepresentationCount:function(P){return P&&Array.isArray(P.Representation_asArray)?P.Representation_asArray.length:0},getBitrateListForAdaptation:function(P){var ie=pe(P);return(ie&&Array.isArray(ie.Representation_asArray)?ie.Representation_asArray:[]).map(function(oe){return{bandwidth:oe.bandwidth,width:oe.width||0,height:oe.height||0,scanType:oe.scanType||null,id:oe.id||null}})},getRepresentationFor:function(P,ie){return ie&&ie.Representation_asArray&&ie.Representation_asArray.length>0&&U(P)?ie.Representation_asArray[P]:null},getRepresentationsForAdaptation:function(P){var ie,oe,X,Q,Ae=[],me=function(ht){if(ht&&ht.period&&U(ht.period.index)){var ft=ht.period.mpd.manifest.Period_asArray[ht.period.index];if(ft&&ft.AdaptationSet_asArray&&U(ht.index))return pe(ft.AdaptationSet_asArray[ht.index])}}(P);if(me&&me.Representation_asArray){if(P&&P.period&&U(P.period.index)){var Fe=Te(P.period.mpd.manifest);Fe&&(oe=Fe[0])}for(var Ie=0,ae=me.Representation_asArray.length;Ie<ae;++Ie){var ke=me.Representation_asArray[Ie],We=new Xi;if(We.index=Ie,We.adaptation=P,ke.hasOwnProperty(E.Z.ID)&&(We.id=ke.id),ke.hasOwnProperty(E.Z.CODECS)&&(We.codecs=ke.codecs),ke.hasOwnProperty(E.Z.MIME_TYPE)&&(We.mimeType=ke[E.Z.MIME_TYPE]),ke.hasOwnProperty(E.Z.CODEC_PRIVATE_DATA)&&(We.codecPrivateData=ke.codecPrivateData),ke.hasOwnProperty(E.Z.BANDWITH)&&(We.bandwidth=ke.bandwidth),ke.hasOwnProperty(E.Z.WIDTH)&&(We.width=ke.width),ke.hasOwnProperty(E.Z.HEIGHT)&&(We.height=ke.height),ke.hasOwnProperty(E.Z.SCAN_TYPE)&&(We.scanType=ke.scanType),ke.hasOwnProperty(E.Z.MAX_PLAYOUT_RATE)&&(We.maxPlayoutRate=ke.maxPlayoutRate),ke.hasOwnProperty(E.Z.SEGMENT_BASE)?(ie=ke.SegmentBase,We.segmentInfoType=E.Z.SEGMENT_BASE):ke.hasOwnProperty(E.Z.SEGMENT_LIST)?We.segmentInfoType=(ie=ke.SegmentList).hasOwnProperty(E.Z.SEGMENT_TIMELINE)?E.Z.SEGMENT_TIMELINE:E.Z.SEGMENT_LIST:ke.hasOwnProperty(E.Z.SEGMENT_TEMPLATE)?(We.segmentInfoType=(ie=ke.SegmentTemplate).hasOwnProperty(E.Z.SEGMENT_TIMELINE)?E.Z.SEGMENT_TIMELINE:E.Z.SEGMENT_TEMPLATE,ie.hasOwnProperty(E.Z.INITIALIZATION_MINUS)&&(We.initialization=ie.initialization.split("$Bandwidth$").join(ke.bandwidth).split("$RepresentationID$").join(ke.id))):We.segmentInfoType=E.Z.BASE_URL,We.essentialProperties=je(ke),ie){if(ie.hasOwnProperty(E.Z.INITIALIZATION)){var gt=ie.Initialization;gt.hasOwnProperty(E.Z.SOURCE_URL)&&(We.initialization=gt.sourceURL),gt.hasOwnProperty(E.Z.RANGE)&&(We.range=gt.range)}else fe(me)&&le(me)&&me.mimeType&&-1===me.mimeType.indexOf("application/mp4")&&(We.range=0);ie.hasOwnProperty(E.Z.TIMESCALE)&&(We.timescale=ie.timescale),ie.hasOwnProperty(E.Z.DURATION)?We.segmentDuration=ie.duration/We.timescale:ke.hasOwnProperty(E.Z.SEGMENT_TEMPLATE)&&(ie=ke.SegmentTemplate).hasOwnProperty(E.Z.SEGMENT_TIMELINE)&&(We.segmentDuration=Ge(ie.SegmentTimeline)/We.timescale),ie.hasOwnProperty(E.Z.MEDIA)&&(We.media=ie.media),ie.hasOwnProperty(E.Z.START_NUMBER)&&(We.startNumber=ie.startNumber),ie.hasOwnProperty(E.Z.INDEX_RANGE)&&(We.indexRange=ie.indexRange),ie.hasOwnProperty(E.Z.PRESENTATION_TIME_OFFSET)&&(We.presentationTimeOffset=ie.presentationTimeOffset/We.timescale),ie.hasOwnProperty(E.Z.AVAILABILITY_TIME_OFFSET)?We.availabilityTimeOffset=ie.availabilityTimeOffset:oe&&void 0!==oe.availabilityTimeOffset&&(We.availabilityTimeOffset=oe.availabilityTimeOffset),ie.hasOwnProperty(E.Z.AVAILABILITY_TIME_COMPLETE)?We.availabilityTimeComplete="false"!==ie.availabilityTimeComplete:oe&&void 0!==oe.availabilityTimeComplete&&(We.availabilityTimeComplete=oe.availabilityTimeComplete)}We.MSETimeOffset=(Q=(X=We).presentationTimeOffset,X.adaptation.period.start-Q),We.path=[P.period.index,P.index,Ie],Ae.push(We)}}return Ae},getAdaptationsForPeriod:function(P){var ie,oe,X,Q=P&&U(P.index)?P.mpd.manifest.Period_asArray[P.index]:null,Ae=[];if(Q&&Q.AdaptationSet_asArray)for(X=0;X<Q.AdaptationSet_asArray.length;X++)oe=Q.AdaptationSet_asArray[X],ie=new ti,oe.hasOwnProperty(E.Z.ID)&&(ie.id=oe.id),ie.index=X,ie.period=P,z(oe,_.Z.MUXED)?ie.type=_.Z.MUXED:z(oe,_.Z.AUDIO)?ie.type=_.Z.AUDIO:ve(oe)?ie.type=_.Z.VIDEO:fe(oe)?ie.type=_.Z.TEXT:J(oe)?ie.type=_.Z.IMAGE:b.warn("Unknown Adaptation stream type"),Ae.push(ie);return Ae},getRegularPeriods:function(P){var ie,oe,X=!!P&&Oe(P.manifest),Q=[],Ae=null,me=null,Fe=null,Ie=null;for(oe=0,ie=P&&P.manifest&&P.manifest.Period_asArray?P.manifest.Period_asArray.length:0;oe<ie;oe++)(me=P.manifest.Period_asArray[oe]).hasOwnProperty(E.Z.START)?(Ie=new Bi).start=me.start:null!==Ae&&Ae.hasOwnProperty(E.Z.DURATION)&&null!==Fe?(Ie=new Bi).start=parseFloat((Fe.start+Fe.duration).toFixed(5)):0!==oe||X||((Ie=new Bi).start=0),null!==Fe&&isNaN(Fe.duration)&&(null!==Ie?Fe.duration=parseFloat((Ie.start-Fe.start).toFixed(5)):b.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==Ie&&(Ie.id=ge(me,oe),Ie.index=oe,Ie.mpd=P,me.hasOwnProperty(E.Z.DURATION)&&(Ie.duration=me.duration),Fe&&(Fe.nextPeriodId=Ie.id),Q.push(Ie),Ae=me,Fe=Ie),me=null,Ie=null;return 0===Q.length||null!==Fe&&isNaN(Fe.duration)&&(Fe.duration=parseFloat((function(ae){!function(){if(!R||!R.hasOwnProperty("error"))throw new Error(_.Z.MISSING_CONFIG_ERROR)}();var ke,We=Oe(ae.mpd.manifest);return ae.mpd.manifest.mediaPresentationDuration?ke=ae.mpd.manifest.mediaPresentationDuration:ae.duration?ke=ae.duration:We?ke=Number.POSITIVE_INFINITY:R.error(new xe.Z(Me.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",ae)),ke}(Fe)-Fe.start).toFixed(5))),Q},getMpd:function(P){var ie=new Eo;return P&&(ie.manifest=P,P.hasOwnProperty(E.Z.AVAILABILITY_START_TIME)?ie.availabilityStartTime=new Date(P.availabilityStartTime.getTime()):P.loadedTime&&(ie.availabilityStartTime=new Date(P.loadedTime.getTime())),P.hasOwnProperty(E.Z.AVAILABILITY_END_TIME)&&(ie.availabilityEndTime=new Date(P.availabilityEndTime.getTime())),P.hasOwnProperty(E.Z.MINIMUM_UPDATE_PERIOD)&&(ie.minimumUpdatePeriod=P.minimumUpdatePeriod),P.hasOwnProperty(E.Z.MEDIA_PRESENTATION_DURATION)&&(ie.mediaPresentationDuration=P.mediaPresentationDuration),P.hasOwnProperty(E.Z.SUGGESTED_PRESENTATION_DELAY)&&(ie.suggestedPresentationDelay=P.suggestedPresentationDelay),P.hasOwnProperty(E.Z.TIMESHIFT_BUFFER_DEPTH)&&(ie.timeShiftBufferDepth=P.timeShiftBufferDepth),P.hasOwnProperty(E.Z.MAX_SEGMENT_DURATION)&&(ie.maxSegmentDuration=P.maxSegmentDuration),P.hasOwnProperty(E.Z.PUBLISH_TIME)&&(ie.publishTime=new Date(P.publishTime))),ie},getEventsForPeriod:function(P){var ie,oe,X=P&&P.mpd&&P.mpd.manifest?P.mpd.manifest:null,Q=X?X.Period_asArray:null,Ae=Q&&P&&U(P.index)?Q[P.index].EventStream_asArray:null,me=[];if(Ae)for(ie=0;ie<Ae.length;ie++){var Fe=new Io;if(Fe.period=P,Fe.timescale=1,!Ae[ie].hasOwnProperty(_.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(Fe.schemeIdUri=Ae[ie][_.Z.SCHEME_ID_URI],Ae[ie].hasOwnProperty(E.Z.TIMESCALE)&&(Fe.timescale=Ae[ie][E.Z.TIMESCALE]),Ae[ie].hasOwnProperty(E.Z.VALUE)&&(Fe.value=Ae[ie][E.Z.VALUE]),Ae[ie].hasOwnProperty(E.Z.PRESENTATION_TIME_OFFSET)&&(Fe.presentationTimeOffset=Ae[ie][E.Z.PRESENTATION_TIME_OFFSET]),oe=0;Ae[ie].Event_asArray&&oe<Ae[ie].Event_asArray.length;oe++){var Ie=Ae[ie].Event_asArray[oe],ae=new _o;ae.presentationTime=0,ae.eventStream=Fe,Ie.hasOwnProperty(E.Z.PRESENTATION_TIME)&&(ae.presentationTime=Ie.presentationTime),ae.calculatedPresentationTime=ae.presentationTime/Fe.timescale+P.start-(Fe.presentationTimeOffset?Fe.presentationTimeOffset/Fe.timescale:0),Ie.hasOwnProperty(E.Z.DURATION)&&(ae.duration=Ie.duration/Fe.timescale),ae.id=Ie.hasOwnProperty(E.Z.ID)?Ie.id:null,ae.messageData=Ie.Signal&&Ie.Signal.Binary?j.decodeArray(Ie.Signal.Binary.toString()):Ie.messageData||Ie.__cdata||Ie.__text,me.push(ae)}}return me},getEssentialPropertiesForRepresentation:je,getEventStreamForAdaptationSet:function(P,ie,oe){var X,Q,Ae;return P&&P.Period_asArray&&ie&&ie.period&&U(ie.period.index)&&(Q=P.Period_asArray[ie.period.index])&&Q.AdaptationSet_asArray&&U(ie.index)&&(Ae=Q.AdaptationSet_asArray[ie.index])&&(X=Ae.InbandEventStream_asArray),Pe(X,null,oe)},getEventStreamForRepresentation:function(P,ie,oe){var X,Q,Ae,me;return P&&P.Period_asArray&&ie&&ie.adaptation&&ie.adaptation.period&&U(ie.adaptation.period.index)&&(Q=P.Period_asArray[ie.adaptation.period.index])&&Q.AdaptationSet_asArray&&U(ie.adaptation.index)&&(Ae=Q.AdaptationSet_asArray[ie.adaptation.index])&&Ae.Representation_asArray&&U(ie.index)&&(me=Ae.Representation_asArray[ie.index])&&(X=me.InbandEventStream_asArray),Pe(X,ie,oe)},getUTCTimingSources:function(P){var ie=Oe(P),oe=!!P&&P.hasOwnProperty(E.Z.AVAILABILITY_START_TIME),X=P?P.UTCTiming_asArray:null,Q=[];return(ie||oe)&&X&&X.forEach(function(Ae){var me=new Zo.Z;Ae.hasOwnProperty(_.Z.SCHEME_ID_URI)&&(me.schemeIdUri=Ae.schemeIdUri,Ae.hasOwnProperty(E.Z.VALUE)&&(me.value=Ae.value.toString(),Q.push(me)))}),Q},getBaseURLsFromElement:Te,getRepresentationSortFunction:function(){return function(P,ie){return P.bandwidth-ie.bandwidth}},getContentSteering:function(P){if(P&&P.hasOwnProperty(E.Z.CONTENT_STEERING_AS_ARRAY))return Be(P[E.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(P){return P&&P.hasOwnProperty(E.Z.LOCATION_AS_ARRAY)?P[E.Z.LOCATION_AS_ARRAY].map(function(ie){var oe=ie.__text||ie,X=ie.hasOwnProperty(E.Z.SERVICE_LOCATION)?ie[E.Z.SERVICE_LOCATION]:null;return new On(oe,X)}):[]},getPatchLocation:function(P){return P&&P.hasOwnProperty(E.Z.PATCH_LOCATION_AS_ARRAY)?P[E.Z.PATCH_LOCATION_AS_ARRAY].map(function(ie){var oe=ie.__text||ie,X=ie.hasOwnProperty(E.Z.SERVICE_LOCATION)?ie[E.Z.SERVICE_LOCATION]:null,Q=ie.hasOwnProperty(E.Z.TTL)?1e3*parseFloat(ie[E.Z.TTL]):NaN;return new Wn(oe,X,Q)}):[]},getSuggestedPresentationDelay:function(P){return P&&P.hasOwnProperty(E.Z.SUGGESTED_PRESENTATION_DELAY)?P.suggestedPresentationDelay:null},getAvailabilityStartTime:function(P){return P&&P.hasOwnProperty(E.Z.AVAILABILITY_START_TIME)&&null!==P.availabilityStartTime?P.availabilityStartTime.getTime():null},getServiceDescriptions:function(P){var ie=[];if(P&&P.hasOwnProperty(E.Z.SERVICE_DESCRIPTION)){var oe,X=In(P.ServiceDescription_asArray);try{for(X.s();!(oe=X.n()).done;){var Q=oe.value,Ae=null,me=null,Fe=null,Ie=null,ae=null,ke=null,We=null;for(var gt in Q)Q.hasOwnProperty(gt)&&(gt===E.Z.ID?Ae=Q[gt]:gt===E.Z.SERVICE_DESCRIPTION_SCOPE?me=Q[gt].schemeIdUri:gt===E.Z.SERVICE_DESCRIPTION_LATENCY?Fe={target:parseInt(Q[gt].target),max:parseInt(Q[gt].max),min:parseInt(Q[gt].min),referenceId:parseInt(Q[gt].referenceId)}:gt===E.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Ie={max:parseFloat(Q[gt].max),min:parseFloat(Q[gt].min)}:gt===E.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?ae={mediaType:Q[gt].mediaType,max:parseInt(Q[gt].max),min:parseInt(Q[gt].min),target:parseInt(Q[gt].target),type:Q[gt].type,maxQualityDifference:parseInt(Q[gt].maxQualityDifference)}:gt===E.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?ke={mediaType:Q[gt].mediaType,max:parseInt(Q[gt].max),min:parseInt(Q[gt].min),target:parseInt(Q[gt].target)}:gt===E.Z.CONTENT_STEERING&&(We=Be(Q[gt])));ie.push({id:Ae,schemeIdUri:me,latency:Fe,playbackRate:Ie,operatingQuality:ae,operatingBandwidth:ke,contentSteering:We})}}catch(ht){X.e(ht)}finally{X.f()}}return ie},getSegmentAlignment:function(P){return!(!P||!P.hasOwnProperty(E.Z.SEGMENT_ALIGNMENT))&&"true"===P[E.Z.SEGMENT_ALIGNMENT]},getSubSegmentAlignment:function(P){return!(!P||!P.hasOwnProperty(E.Z.SUB_SEGMENT_ALIGNMENT))&&"true"===P[E.Z.SUB_SEGMENT_ALIGNMENT]},getSupplementalPropertiesForAdaptation:function(P){var ie={};if(P&&P.hasOwnProperty(E.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var oe,X=In(P.SupplementalProperty_asArray);try{for(X.s();!(oe=X.n()).done;){var Q=oe.value;Q.hasOwnProperty(_.Z.SCHEME_ID_URI)&&Q.hasOwnProperty(E.Z.VALUE)&&(ie[Q[_.Z.SCHEME_ID_URI]]=Q[E.Z.VALUE])}}catch(Ae){X.e(Ae)}finally{X.f()}}return ie},getSupplementalPropertiesAsArrayForAdaptation:function(P){return P&&P.hasOwnProperty(E.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&P.SupplementalProperty_asArray.length?P.SupplementalProperty_asArray.map(function(ie){return(new Ct).init(ie)}):[]},getSupplementalPropertiesForRepresentation:function(P){var ie={};if(P&&P.hasOwnProperty(E.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var oe,X=In(P.SupplementalProperty_asArray);try{for(X.s();!(oe=X.n()).done;){var Q=oe.value;Q.hasOwnProperty(_.Z.SCHEME_ID_URI)&&Q.hasOwnProperty(E.Z.VALUE)&&(ie[Q[_.Z.SCHEME_ID_URI]]=Q[E.Z.VALUE])}}catch(Ae){X.e(Ae)}finally{X.f()}}return ie},getSupplementalPropertiesAsArrayForRepresentation:function(P){return P&&P.hasOwnProperty(E.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&P.SupplementalProperty_asArray.length?P.SupplementalProperty_asArray.map(function(ie){return(new Ct).init(ie)}):[]},setConfig:function(P){P&&(P.errHandler&&(R=P.errHandler),P.BASE64&&(j=P.BASE64))}},b=(0,G.Z)(W).getInstance().getLogger(C),C}Vn.__dashjs_factory_name="DashManifestModel";var sr=F.Z.getSingletonFactory(Vn),Dr=ne(703);function Vr(C,b){var R;if(typeof Symbol>"u"||null==C[Symbol.iterator]){if(Array.isArray(C)||(R=function(le,ve){if(le){if("string"==typeof le)return tr(le,undefined);var fe=Object.prototype.toString.call(le).slice(8,-1);return"Object"===fe&&le.constructor&&(fe=le.constructor.name),"Map"===fe||"Set"===fe?Array.from(le):"Arguments"===fe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe)?tr(le,undefined):void 0}}(C))||b&&C&&"number"==typeof C.length){R&&(C=R);var j=0,W=function(){};return{s:W,n:function(){return j>=C.length?{done:!0}:{done:!1,value:C[j++]}},e:function(le){throw le},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K,U=!0,z=!1;return{s:function(){R=C[Symbol.iterator]()},n:function(){var le=R.next();return U=le.done,le},e:function(le){z=!0,K=le},f:function(){try{U||null==R.return||R.return()}finally{if(z)throw K}}}}function tr(C,b){(null==b||b>C.length)&&(b=C.length);for(var R=0,j=new Array(b);R<b;R++)j[R]=C[R];return j}function nn(){var C,b,R,j,W,K,U,z,le,ve,fe=this.context,J=(0,V.Z)(fe).getInstance(),pe=(0,ot.Z)(fe).getInstance();function de(){R={pr:1,nor:null,st:null,sf:null,sid:"".concat(Dr.Z.generateUuid()),cid:null},le={},z={},ve={},Oe()}function Ke(){Oe()}function Oe(){if(K){var Q=K.getStreamController();if(Q&&"function"==typeof Q.getActiveStream){var Ae=Q.getActiveStream();Ae&&(U=Ae.getProcessors())}}}function je(Q,Ae){var me,Fe={},Ie=Vr(Ae);try{for(Ie.s();!(me=Ie.n()).done;){var ae=me.value;Q[ae]&&(Fe[ae]=Q[ae])}}catch(ke){Ie.e(ke)}finally{Ie.f()}return Fe}function Ge(Q){var Ae=pe.get().streaming.cmcd.enabledKeys;return Q.filter(function(me){return Ae.includes(me)})}function ge(Q){try{return Q.type===yt.w.MPD_TYPE?((me=Pe()).ot="m",me):Q.type===yt.w.MEDIA_SEGMENT_TYPE?(ve.hasOwnProperty(Ae=Q.mediaType)||(ve[Ae]=!1),z.hasOwnProperty(Ae)||(z[Ae]=!1),le.hasOwnProperty(Ae)||(le[Ae]=!1),function(Fe){var Ie,ae=Pe(),ke=function(Bt){try{return parseInt(Bt.mediaInfo.bitrateList[Bt.quality].bandwidth/1e3)}catch{return null}}(Fe),We=function(Bt){try{return isNaN(Bt.duration)?NaN:Math.round(1e3*Bt.duration)}catch{return null}}(Fe),gt=function(Bt){try{return 100*parseInt(j.getThroughputHistory().getSafeAverageThroughput(Bt)/100)}catch{return null}}(Fe.mediaType),ht=function(Bt){try{var wn=R.pr,tt=W.getCurrentBufferLevel(Bt);return isNaN(wn)||isNaN(tt)?null:100*parseInt(tt/wn*10)}catch{return null}}(Fe.mediaType),ft=Te(Fe.mediaType),lt=function(Bt){try{var wn=j.getTopBitrateInfoFor(Bt);return Math.round(wn.bitrate/1e3)}catch{return null}}(Fe.mediaType),qt=R.pr,Kt=function(Bt){if(U&&0!==U.length){var wn,tt=Vr(U);try{for(tt.s();!(wn=tt.n()).done;){var St=wn.value;if(St.getType()===Bt)return St.probeNextRequest()}}catch(Jt){tt.e(Jt)}finally{tt.f()}}}(Fe.mediaType);Fe.mediaType===_.Z.VIDEO&&(Ie="v"),Fe.mediaType===_.Z.AUDIO&&(Ie="a"),Fe.mediaType===_.Z.TEXT&&(Ie="application/mp4"===Fe.mediaInfo.mimeType?"tt":"c");var _t=pe.get().streaming.cmcd.rtp;return _t||(_t=function(Bt){try{var wn=K.getPlaybackRate();wn||(wn=1);var tt=Bt.quality,Jt=Bt.mediaInfo,Ve=Bt.duration;if(!Jt)return NaN;var ut=Te(Bt.mediaType);0===ut&&(ut=500);var ct=Jt.bitrateList[tt].bandwidth*Ve/1e3/(ut/wn/1e3),pt=pe.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(pe.get().streaming.cmcd.rtpSafetyFactor)?pe.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(ct*pt/100)+1)}catch{return NaN}}(Fe)),isNaN(_t)||(ae.rtp=_t),Kt&&(Fe.url!==Kt.url?ae.nor=encodeURIComponent(Dr.Z.getRelativeUrl(Fe.url,Kt.url)):Kt.range&&(ae.nrr=Kt.range)),ke&&(ae.br=ke),Ie&&(ae.ot=Ie),isNaN(We)||(ae.d=We),isNaN(gt)||(ae.mtp=gt),isNaN(ht)||(ae.dl=ht),isNaN(ft)||(ae.bl=ft),isNaN(lt)||(ae.tb=lt),isNaN(qt)||1===qt||(ae.pr=qt),le[Fe.mediaType]&&(ae.bs=!0,le[Fe.mediaType]=!1),!z[Fe.mediaType]&&ve[Fe.mediaType]||(ae.su=!0,z[Fe.mediaType]=!1,ve[Fe.mediaType]=!0),ae}(Q)):Q.type===yt.w.INIT_SEGMENT_TYPE?((Fe=Pe()).ot="i",Fe.su=!0,Fe):Q.type===yt.w.OTHER_TYPE||Q.type===yt.w.XLINK_EXPANSION_TYPE?function(){var Fe=Pe();return Fe.ot="o",Fe}():Q.type===yt.w.LICENSE?((Ie=Pe()).ot="k",Ie):null}catch{return null}var Ie,Fe,Ae,me}function Pe(){var Q={},Ae=pe.get().streaming.cmcd.cid?pe.get().streaming.cmcd.cid:R.cid;return Q.v=1,Q.sid=pe.get().streaming.cmcd.sid?pe.get().streaming.cmcd.sid:R.sid,Q.sid="".concat(Q.sid),Ae&&(Q.cid="".concat(Ae)),isNaN(R.pr)||1===R.pr||null===R.pr||(Q.pr=R.pr),R.st&&(Q.st=R.st),R.sf&&(Q.sf=R.sf),Q}function Te(Q){try{var Ae=W.getCurrentBufferLevel(Q);return isNaN(Ae)?null:100*parseInt(10*Ae)}catch{return null}}function Be(Q){try{R.pr=Q.playbackRate}catch{}}function P(Q){try{var Ae=C.getIsDynamic(Q.data)?"l":"v",me=Q.protocol&&"MSS"===Q.protocol?"s":"d";R.st="".concat(Ae),R.sf="".concat(me)}catch{}}function ie(Q){try{Q.state&&Q.mediaType&&Q.state===T.Z.BUFFER_EMPTY&&(le[Q.mediaType]||(le[Q.mediaType]=!0),z[Q.mediaType]||(z[Q.mediaType]=!0))}catch{}}function oe(){for(var Q in le)le.hasOwnProperty(Q)&&(le[Q]=!0);for(var Ae in z)z.hasOwnProperty(Ae)&&(z[Ae]=!0)}function X(Q){try{if(!Q)return null;var Ae=Object.keys(Q).sort(function(Ie,ae){return Ie.localeCompare(ae)}),me=Ae.length,Fe=Ae.reduce(function(Ie,ae,ke){return"v"===ae&&1===Q[ae]||(Ie+="string"==typeof Q[ae]&&"ot"!==ae&&"sf"!==ae&&"st"!==ae?"".concat(ae,"=").concat(JSON.stringify(Q[ae])):"".concat(ae,"=").concat(Q[ae]),ke<me-1&&(Ie+=",")),Ie},"");return(Fe=Fe.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return b={getQueryParameter:function(Q){try{if(pe.get().streaming.cmcd&&pe.get().streaming.cmcd.enabled){var Ae=ge(Q),Fe=X(function(Ie){try{var ae=pe.get().streaming.cmcd.enabledKeys;return Object.keys(Ie).filter(function(ke){return ae.includes(ke)}).reduce(function(ke,We){return ke[We]=Ie[We],ke},{})}catch{return Ie}}(Ae));return J.trigger(ei.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Ae,cmcdString:Fe}),{key:"CMCD",value:Fe}}return null}catch{return null}},getHeaderParameters:function(Q){try{if(pe.get().streaming.cmcd&&pe.get().streaming.cmcd.enabled){var Ae=ge(Q),me=je(Ae,Ge(["br","d","ot","tb"])),Fe=je(Ae,Ge(["bl","dl","mtp","nor","nrr","su"])),Ie=je(Ae,Ge(["bs","rtp"])),ae=je(Ae,Ge(["cid","pr","sf","sid","st","v"])),ke={"CMCD-Object":X(me),"CMCD-Request":X(Fe),"CMCD-Status":X(Ie),"CMCD-Session":X(ae)};return J.trigger(ei.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Ae,headers:ke}),ke}return null}catch{return null}},setConfig:function(Q){Q&&(Q.abrController&&(j=Q.abrController),Q.dashMetrics&&(W=Q.dashMetrics),Q.playbackController&&(K=Q.playbackController))},reset:function(){J.off(T.Z.PLAYBACK_RATE_CHANGED,Be,this),J.off(T.Z.MANIFEST_LOADED,P,this),J.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,ie,b),J.off(T.Z.PLAYBACK_SEEKED,oe,b),de()},initialize:function(){J.on(T.Z.PLAYBACK_RATE_CHANGED,Be,b),J.on(T.Z.MANIFEST_LOADED,P,b),J.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,ie,b),J.on(T.Z.PLAYBACK_SEEKED,oe,b),J.on(T.Z.PERIOD_SWITCH_COMPLETED,Ke,b)}},C=sr(fe).getInstance(),de(),b}nn.__dashjs_factory_name="CmcdModel";var hn=F.Z.getSingletonFactory(nn);function Cn(C){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function cr(C,b){cr=function(z,le){return new K(z,void 0,le)};var R=jr(RegExp),j=RegExp.prototype,W=new WeakMap;function K(z,le,ve){var fe=R.call(this,z,le);return W.set(fe,ve||W.get(z)),fe}function U(z,le){var ve=W.get(le);return Object.keys(ve).reduce(function(fe,J){return fe[J]=z[ve[J]],fe},Object.create(null))}return function gr(C,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(b&&b.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),b&&ci(C,b)}(K,R),K.prototype.exec=function(z){var le=j.exec.call(this,z);return le&&(le.groups=U(le,this)),le},K.prototype[Symbol.replace]=function(z,le){if("string"==typeof le){var ve=W.get(this);return j[Symbol.replace].call(this,z,le.replace(/\$<([^>]+)>/g,function(J,pe){return"$"+ve[pe]}))}if("function"==typeof le){var fe=this;return j[Symbol.replace].call(this,z,function(){var J=[];return J.push.apply(J,arguments),"object"!==Cn(J[J.length-1])&&J.push(U(J,fe)),le.apply(this,J)})}return j[Symbol.replace].call(this,z,le)},cr.apply(this,arguments)}function jr(C){var b="function"==typeof Map?new Map:void 0;return jr=function(R){if(null===R||-1===Function.toString.call(R).indexOf("[native code]"))return R;if("function"!=typeof R)throw new TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(R))return b.get(R);b.set(R,W)}function W(){return zr(R,arguments,pi(this).constructor)}return W.prototype=Object.create(R.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),ci(W,R)},jr(C)}function zr(C,b,R){return(zr=function so(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(j,W,K){var U=[null];U.push.apply(U,W);var z=new(Function.bind.apply(j,U));return K&&ci(z,K.prototype),z}).apply(null,arguments)}function ci(C,b){return(ci=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function pi(C){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var Ii="dynamic",Ja="cmsd-"+Ii,ta="stream",To=["mb","st","sf","v"],Kl={video:"v",audio:"a",text:"tt",stream:ta},vs=/^[-0-9]/;function Ma(){var C,b,R,j,W=this.context,K=(0,V.Z)(W).getInstance();function U(){R={},j={}}function z(de){de&&Object.keys(de).forEach(function(Ke){To.includes(Ke)||delete de[Ke]})}function le(de){return!de||"false"!==de.toLowerCase()&&(vs.test(de)?parseInt(de,10):de.replace(/["]+/g,""))}function ve(de){try{for(var Ke={},Oe=de.split(","),je=0;je<Oe.length;je++){var Ge=Oe[je].split("="),ge=Ge[0],Pe=le(Ge[1]);Ke[ge]=Pe}return Ke}catch(Te){b.error("Failed to parse CMSD-Static response header value:",Te)}}function fe(de){try{for(var Ke={},Oe=de.split(","),je=Oe[Oe.length-1].split(";"),Ge=1;Ge<je.length;Ge++){var ge=je[Ge].split("="),Pe=ge[0],Te=le(ge[1]);Ke[Pe]=Te}return Ke}catch(Be){return b.error("Failed to parse CMSD-Dynamic response header value:",Be),[]}}function J(de){return Kl[de]||"o"}function pe(de,Ke,Oe){var je="static"===de?R:j;return(je[Ke]||{})[Oe]||(je[ta]||{})[Oe]}return C={setConfig:function(){},initialize:function(){},reset:function(){U()},parseResponseHeaders:function(de,Ke){for(var Oe=null,je=null,Ge=de.split("\r\n"),ge=Ge.length-1;ge>=0;ge--){var Pe=Ge[ge].match(cr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Pe&&Pe.groups){var Te=Pe.groups.key.toLowerCase(),Be=Pe.groups.value;switch(Te){case"cmsd-static":Oe=ve(Be),K.trigger(w.Z.CMSD_STATIC_HEADER,Oe);break;case Ja:je||(je=fe(Be))}}}var P=ta;return Oe&&Oe.ot?P=Oe.ot:Ke&&(P=J(Ke)),z(R[P]),z(j[P]),Oe&&(R[P]=Object.assign(R[P]||{},Oe)),je&&(j[P]=Object.assign(j[P]||{},je)),{static:Oe,dynamic:je}},getMaxBitrate:function(de){var Ke=J(de);return pe(Ii,Ke,"mb")||-1},getEstimatedThroughput:function(de){var Ke=J(de);return pe(Ii,Ke,"etp")||null},getResponseDelay:function(de){var Ke=J(de);return pe(Ii,Ke,"rd")||null},getRoundTripTime:function(de){var Ke=J(de);return pe(Ii,Ke,"rtt")||null}},b=(0,G.Z)(W).getInstance().getLogger(C),U(),C}Ma.__dashjs_factory_name="CmsdModel";var ml=F.Z.getSingletonFactory(Ma);function Us(){var C,b,R=this.context,j={};function W(){b=(0,G.Z)(R).getInstance().getLogger(C)}function K(z){for(var le={},ve=0,fe=0,J=0,pe=0,de=z.length,Ke=0;Ke<de;++Ke)ve+=z[Ke].chunkDownloadTimeRelativeMS,fe+=z[Ke].bufferLevel,J+=z[Ke].chunkDownloadTimeRelativeMS*z[Ke].bufferLevel,pe+=z[Ke].chunkDownloadTimeRelativeMS*z[Ke].chunkDownloadTimeRelativeMS;return le.m=(J-ve*fe/de)/(pe-ve*ve/de),le.b=fe/de-le.m*ve/de,function(Oe){return le.m*Oe+le.b}}function U(z){var le,ve=!0,fe=z.reduce(function(J,pe){return J+pe.bufferLevelAtSegmentEnd},0)/z.length;return z.forEach(function(J){Math.abs(J.bufferLevelAtSegmentEnd/J.bufferLevelAtSegmentStart)<.95&&(ve=!1),J.bufferLevelAtSegmentEnd/fe<.8&&(ve=!1),le?le>J.bitrate&&(ve=!1):le=J.bitrate}),ve}return C={setup:W,addMeasurement:function(z,le,ve,fe,J){z&&z.mediaType&&!j[z.mediaType]&&(j[z.mediaType]=[]);var pe=z.mediaInfo.bitrateList.find(function(de){return de.id===z.representationId});j[z.mediaType].push({index:z.index,repId:z.representationId,mediaType:z.mediaType,requestTimeMS:fe,adjustedAvailabilityStartTimeMS:z.availabilityStartTime.getTime(),segDurationMS:1e3*z.duration,chunksDurationMS:ve.reduce(function(de,Ke){return de+Ke.chunkDownloadDurationMS},0),segmentBytes:ve.reduce(function(de,Ke){return de+Ke.chunkBytes},0),bitrate:pe&&pe.bandwidth,bitrateList:z.mediaInfo.bitrateList,chunkMeasurements:ve,fetchDownloadDurationMS:le,throughputCapacityDelayMS:J,getEstimatedBufferLevel:K(ve.slice(1))}),j[z.mediaType].length>10&&j[z.mediaType].shift()},getThroughputCapacityDelayMS:function(z,le){var ve=j[z.mediaType]&&j[z.mediaType].slice(-3);return!ve||ve.length<3?0:U(ve)?le/4>250?250:le/4:0},getEstimatedDownloadDurationMS:function(z){var le=j[z.mediaType].slice(-1).pop(),ve=j[z.mediaType].slice(-3),fe=le.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;le.bufferLevelAtSegmentStart=le.getEstimatedBufferLevel(fe/2),le.bufferLevelAtSegmentEnd=le.getEstimatedBufferLevel(fe);var J=U(ve),pe=J?.6:.8;if(le.isBufferStable&&1.05*le.segDurationMS<le.fetchDownloadDurationMS)return le.fetchDownloadDurationMS;if(!J||le.segDurationMS<le.fetchDownloadDurationMS||le.adjustedAvailabilityStartTimeMS<=le.requestTimeMS+le.throughputCapacityDelayMS-le.segDurationMS)return.8*le.fetchDownloadDurationMS;for(var de=le.requestTimeMS+le.throughputCapacityDelayMS-le.adjustedAvailabilityStartTimeMS,Ke=0,Oe=0,je=0,Ge=0;Ge<le.chunkMeasurements.length;Ge++){var ge=le.chunkMeasurements[Ge];if(de<Oe+ge.chunkDownloadDurationMS)break;Oe+=ge.chunkDownloadDurationMS,Ke+=ge.chunkBytes,je++}if(de<0&&b.warn("request time was before adjusted availibitly start time"),Ke&&Oe&&je>.2*le.chunkMeasurements.length){var Te=le.segmentBytes/(Ke/Oe);return le.fetchDownloadDurationMS<Te?le.fetchDownloadDurationMS*pe:Te*pe}var Be=le.bitrate;return le.bitrateList.some(function(P){if(P.bandwidth>le.bitrate)return Be=P.bandwidth,!0}),Be===le.bitrate?le.fetchDownloadDurationMS*pe:pe*le.segmentBytes*8*1e3/Be}},W(),C}Us.__dashjs_factory_name="LowLatencyThroughputModel";var es=F.Z.getSingletonFactory(Us),pn=ne(5717);function Qn(C,b,R){return b in C?Object.defineProperty(C,b,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[b]=R,C}function Sr(C){var b,R,j,W,K,U,z,le,ve,fe,J,pe=this.context,de=(C=C||{}).errHandler,Ke=C.dashMetrics,Oe=C.mediaPlayerModel,je=C.requestModifier,Ge=C.boxParser,ge=C.errors,Pe=C.requestTimeout||0,Te=(0,V.Z)(pe).getInstance(),Be=(0,ot.Z)(pe).getInstance();function P(ie,oe){var X,Q=ie.request,Ae=[],me=!0,Fe=!0,Ie=new Date,ae=Ie,ke=0,We=null,gt=null;if(!je||!Ke||!de)throw new Error("config object is not correct or missing");var ht,ft=function(ut){Q.requestStartDate=Ie,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||Ie,Q.fileLoaderType=gt;var ct=X.response?X.response.responseURL:null,pt=X.response?X.response.status:null,Qt=X.response&&X.response.getAllResponseHeaders?X.response.getAllResponseHeaders():X.response?X.response.responseHeaders:null,on=Qt&&Be.get().streaming.cmsd&&Be.get().streaming.cmsd.enabled?z.parseResponseHeaders(Qt,Q.mediaType):null;Ke.addHttpRequest(Q,ct,pt,Qt,ut?Ae:null,on)},lt=function(ut){Fe=!1,ft(ut),Q.type===yt.w.MPD_TYPE&&(Ke.addManifestUpdate(Q),Te.trigger(w.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},qt=function(){if(We&&(clearTimeout(We),We=null),-1!==R.indexOf(X)&&(R.splice(R.indexOf(X),1),Fe))if(lt(!1),oe>0){try{Be.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===yt.w.MEDIA_SEGMENT_TYPE&&Oe.getRetryAttemptsForType(yt.w.MEDIA_SEGMENT_TYPE)===oe&&Te.trigger(w.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}oe--;var ut={config:ie};W.push(ut),ut.timeout=setTimeout(function(){-1!==W.indexOf(ut)&&(W.splice(W.indexOf(ut),1),P(ie,oe))},Oe.getRetryIntervalsForType(Q.type))}else{if(Q.type===yt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;de.error(new xe.Z(K[Q.type],Q.url+" is not available",{request:Q,response:X.response})),ie.error&&ie.error(Q,"error",X.response.statusText,X.response),ie.complete&&ie.complete(Q,X.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&!1===Q.availabilityTimeComplete&&window.fetch&&"arraybuffer"===Q.responseType&&Q.type===yt.w.MEDIA_SEGMENT_TYPE?((ht=Li(pe).create({requestModifier:je,lowLatencyThroughputModel:ve,boxParser:Ge})).setup({dashMetrics:Ke}),gt=_.Z.FILE_LOADER_TYPES.FETCH):(ht=(0,Mn.Z)(pe).create({requestModifier:je}),gt=_.Z.FILE_LOADER_TYPES.XHR);var Kt=null,_t=je.modifyRequestURL?je.modifyRequestURL(Q.url):Q.url;if(Be.get().streaming.cmcd&&Be.get().streaming.cmcd.enabled){var Bt=Be.get().streaming.cmcd.mode;if(Bt===_.Z.CMCD_MODE_QUERY){var wn=function(ut){try{var ct=[],pt=U.getQueryParameter(ut);return pt&&ct.push(pt),ct}catch{return[]}}(Q);_t=Dr.Z.addAditionalQueryParameterToUrl(_t,wn)}else Bt===_.Z.CMCD_MODE_HEADER&&(Kt=U.getHeaderParameters(Q))}var tt=le.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var St=Object.keys(Q.queryParams).map(function(ut){return{key:ut,value:Q.queryParams[ut]}});_t=Dr.Z.addAditionalQueryParameterToUrl(_t,St)}Q.url=_t,X={url:_t,method:yt.w.GET,withCredentials:tt,request:Q,onload:function(){X.response.status>=200&&X.response.status<=299&&(lt(!0),ie.success&&ie.success(X.response.response,X.response.statusText,X.response.responseURL),ie.complete&&ie.complete(Q,X.response.statusText))},onend:qt,onerror:qt,progress:function(ut){var ct=new Date;me&&(me=!1,(!ut.lengthComputable||ut.lengthComputable&&ut.total!==ut.loaded)&&(Q.firstByteDate=ct)),ut.lengthComputable&&(Q.bytesLoaded=ut.loaded,Q.bytesTotal=ut.total),ut.noTrace||(Ae.push({s:ae,d:ut.time?ut.time:ct.getTime()-ae.getTime(),b:[ut.loaded?ut.loaded-ke:0]}),ae=ct,ke=ut.loaded),We&&(clearTimeout(We),We=null),Be.get().streaming.fragmentRequestProgressTimeout>0&&(We=setTimeout(function(){fe.warn("Abort request "+X.url+" due to progress timeout"),X.response.onabort=null,X.loader.abort(X),qt()},Be.get().streaming.fragmentRequestProgressTimeout)),ie.progress&&ut&&ie.progress(ut)},onabort:function(){ft(!0),We&&(clearTimeout(We),We=null),ie.abort&&ie.abort(Q)},ontimeout:function(ut){var ct;ct=ut.lengthComputable?"Request timeout: loaded: "+ut.loaded+", out of: "+ut.total+" : "+(ut.loaded/ut.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",fe.warn(ct)},loader:ht,timeout:Pe,headers:Kt};var Jt=(new Date).getTime();if(isNaN(Q.delayLoadingTime)||Jt>=Q.delayLoadingTime)R.push(X),ht.load(X);else{var Ve={httpRequest:X};j.push(Ve),Ve.delayTimeout=setTimeout(function(){if(-1!==j.indexOf(Ve)){j.splice(j.indexOf(Ve),1);try{ae=Ie=new Date,R.push(Ve.httpRequest),ht.load(Ve.httpRequest)}catch{Ve.httpRequest.onerror()}}},Q.delayLoadingTime-Jt)}}return b={load:function(ie){ie.request?P(ie,Oe.getRetryAttemptsForType(ie.request.type)):ie.error&&ie.error(ie.request,"error")},abort:function(){W.forEach(function(ie){clearTimeout(ie.timeout),ie.config.request&&ie.config.abort&&ie.config.abort(ie.config.request)}),W=[],j.forEach(function(ie){return clearTimeout(ie.delayTimeout)}),j=[],R.forEach(function(ie){ie.request.type!==yt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(ie.onloadend=ie.onerror=ie.onprogress=void 0,ie.loader.abort(ie))}),R=[]}},fe=(0,G.Z)(pe).getInstance().getLogger(b),R=[],j=[],W=[],U=hn(pe).getInstance(),z=ml(pe).getInstance(),ve=es(pe).getInstance(),le=(0,pn.Z)(pe).getInstance(),Qn(J={},yt.w.MPD_TYPE,ge.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Qn(J,yt.w.XLINK_EXPANSION_TYPE,ge.DOWNLOAD_ERROR_ID_XLINK_CODE),Qn(J,yt.w.INIT_SEGMENT_TYPE,ge.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Qn(J,yt.w.MEDIA_SEGMENT_TYPE,ge.DOWNLOAD_ERROR_ID_CONTENT_CODE),Qn(J,yt.w.INDEX_SEGMENT_TYPE,ge.DOWNLOAD_ERROR_ID_CONTENT_CODE),Qn(J,yt.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,ge.DOWNLOAD_ERROR_ID_CONTENT_CODE),Qn(J,yt.w.OTHER_TYPE,ge.DOWNLOAD_ERROR_ID_CONTENT_CODE),K=J,b}Sr.__dashjs_factory_name="HTTPLoader";var Oi=F.Z.getClassFactory(Sr);function fi(){var C;function b(){C={}}function R(){b()}return R(),{getLoader:function(j){for(var W in C)if(C.hasOwnProperty(W)&&j.startsWith(W))return C[W];return Oi},registerLoader:function(j,W){C[j]=W},unregisterLoader:function(j){C[j]&&delete C[j]},unregisterAllLoader:b,reset:R}}fi.__dashjs_factory_name="SchemeLoaderFactory";var _r=F.Z.getSingletonFactory(fi);function si(C){C=C||{};var b,R,j=this.context;return b=_r(j).getInstance(),{load:function(W){if(!R){var K=b.getLoader(W&&W.request?W.request.url:null);R=K(j).create({errHandler:C.errHandler,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,dashMetrics:C.dashMetrics,boxParser:C.boxParser?C.boxParser:null,constants:C.constants?C.constants:null,dashConstants:C.dashConstants?C.dashConstants:null,urlUtils:C.urlUtils?C.urlUtils:null,requestTimeout:isNaN(C.requestTimeout)?0:C.requestTimeout,errors:C.errors})}R.load(W)},abort:function(){R&&R.abort()}}}si.__dashjs_factory_name="URLLoader";var qr=F.Z.getClassFactory(si);function Di(C){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function li(C,b){return(li=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function or(C){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var jo=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&li(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=or(b);if(R){var z=or(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function Kr(C,b){return!b||"object"!==Di(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(K){var U;return function(z,le){if(!(z instanceof le))throw new TypeError("Cannot call a class as a function")}(this,W),(U=j.call(this,K)).checkForExistenceOnly=!0,U}return W}(te.Z);function No(C){var b,R,W=(C=C||{}).eventBus,K=C.events,U=C.urlUtils,z=C.errors,le=C.streamId;return b={checkForExistence:function(ve){var fe=function(pe){W.trigger(K.CHECK_FOR_EXISTENCE_COMPLETED,{request:ve,exists:pe})};if(ve){var J=new jo(ve.url);R.load({request:J,success:function(){fe(!0)},error:function(){fe(!1)}})}else fe(!1)},load:function(ve){var fe=function(J,pe){W.trigger(K.LOADING_COMPLETED,{request:ve,response:J||null,error:pe||null,sender:b})};ve?R.load({request:ve,progress:function(J){W.trigger(K.LOADING_PROGRESS,{request:ve,stream:J.stream,streamId:le}),J.data&&W.trigger(K.LOADING_DATA_PROGRESS,{request:ve,response:J.data||null,error:null,sender:b})},success:function(J){fe(J)},error:function(J,pe,de){fe(void 0,new xe.Z(z.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,de,pe))},abort:function(J){J&&W.trigger(K.LOADING_ABANDONED,{mediaType:J.mediaType,request:J,sender:b})}}):fe(void 0,new xe.Z(z.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,z.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){R&&R.abort()},reset:function(){R&&(R.abort(),R=null)}},R=qr(this.context).create({errHandler:C.errHandler,errors:z,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,urlUtils:U,constants:_.Z,boxParser:C.boxParser,dashConstants:C.dashConstants,requestTimeout:C.settings.get().streaming.fragmentRequestTimeout}),b}No.__dashjs_factory_name="FragmentLoader";var ys=F.Z.getClassFactory(No);function qo(){return{modifyResponseAsync:function(C){return Promise.resolve(C)}}}qo.__dashjs_factory_name="SegmentResponseModifier";var Zn=F.Z.getSingletonFactory(qo);function Na(C){C=C||{};var b,R,j,W=this.context,K=(0,V.Z)(W).getInstance(),U=C.errHandler,z=C.mediaPlayerModel,le=C.dashMetrics,ve=(0,G.Z)(W).getInstance(),fe=Zn(W).getInstance(),J=C.streamInfo;function pe(){return J.id}function de(){for(var Oe in j)j[Oe].reset();j={}}function Ke(Oe){if(Oe.sender){var je=Oe.request,Ge=Oe.response,ge=je.isInitializationRequest(),Pe=je.mediaInfo.streamInfo;if(Oe.error&&(je.mediaType===_.Z.AUDIO||je.mediaType===_.Z.VIDEO||je.mediaType===_.Z.TEXT&&je.mediaInfo.isFragmented)&&K.trigger(w.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Oe.request.serviceLocation}),Ge&&Pe){var Te=(Be=Ge,P=je,ie=J.id,oe=Oe.type!==w.Z.FRAGMENT_LOADING_PROGRESS,(X=new Rn).streamId=ie,X.mediaInfo=P.mediaInfo,X.segmentType=P.type,X.start=P.startTime,X.duration=P.duration,X.end=X.start+X.duration,X.bytes=Be,X.index=P.index,X.quality=P.quality,X.representationId=P.representationId,X.endFragment=oe,X);fe.modifyResponseAsync(Te).then(function(Be){K.trigger(ge?w.Z.INIT_FRAGMENT_LOADED:w.Z.MEDIA_FRAGMENT_LOADED,{chunk:Be,request:je},{streamId:Pe.id,mediaType:je.mediaType})}).catch(function(Be){R.error(Be),K.trigger(ge?w.Z.INIT_FRAGMENT_LOADED:w.Z.MEDIA_FRAGMENT_LOADED,{chunk:Te,request:je},{streamId:Pe.id,mediaType:je.mediaType})})}else R.warn("No "+je.mediaType+" bytes to push or stream is inactive.")}var Be,P,ie,oe,X}return R=ve.getLogger(b={getStreamId:pe,getModel:function(Oe){var je=j[Oe];return je||(je=be(W).create({streamInfo:J,type:Oe,dashMetrics:le,fragmentLoader:ys(W).create({dashMetrics:le,mediaPlayerModel:z,errHandler:U,requestModifier:(0,nt.Z)(W).getInstance(),settings:C.settings,boxParser:C.boxParser,eventBus:K,events:w.Z,errors:Me,dashConstants:C.dashConstants,urlUtils:C.urlUtils,streamId:pe()}),debug:ve,eventBus:K,events:w.Z}),j[Oe]=je),je},reset:function(){K.off(T.Z.FRAGMENT_LOADING_COMPLETED,Ke,this),K.off(T.Z.FRAGMENT_LOADING_PROGRESS,Ke,this),de()}}),de(),K.on(T.Z.FRAGMENT_LOADING_COMPLETED,Ke,b),K.on(T.Z.FRAGMENT_LOADING_PROGRESS,Ke,b),b}Na.__dashjs_factory_name="FragmentController";var br=F.Z.getClassFactory(Na),ii=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Yl=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function zl(C){var b,R,j=this.context,W=C.streamInfo;function K(z){R.setTrackByIndex(z)}function U(){R&&R.reset()}return b={getStreamId:function(){return W.id},initialize:function(){R.addTracks();var z=R.getTracks();z&&z.length>0&&K(0)},provide:function(z,le){if("function"==typeof le){var fe,J=R.getCurrentTrack();if(!J||J.segmentDuration<=0||null==z)le(null);else{(fe=R.getThumbnailRequestForTime(z))&&(J.segmentDuration=fe.duration);var pe=Math.floor(z%J.segmentDuration*J.tilesHor*J.tilesVert/J.segmentDuration),de=new ii;if(de.width=Math.floor(J.widthPerTile),de.height=Math.floor(J.heightPerTile),de.x=Math.floor(pe%J.tilesHor)*J.widthPerTile,de.y=Math.floor(pe/J.tilesHor)*J.heightPerTile,"readThumbnail"in J)return J.readThumbnail(z,function(Oe){de.url=Oe,le(de)});if(fe)de.url=fe.url,J.segmentDuration=NaN;else{var Ke=Math.floor(z/J.segmentDuration);de.url=(ge=(0,I.vi)((Oe=J).templateUrl,"Number",Ge=Ke+Oe.startNumber),ge=(0,I.vi)(ge,"Time",(Ge-1)*Oe.segmentDuration*Oe.timescale),ge=(0,I.vi)(ge,"Bandwidth",Oe.bandwidth),(0,I.eR)(ge))}le(de)}}var Oe,Ge,ge},setTrackByIndex:K,getCurrentTrackIndex:function(){return R.getCurrentTrackIndex()},getBitrateList:function(){var z=R.getTracks(),le=0;return z.map(function(ve){var fe=new Yl;return fe.mediaType=_.Z.IMAGE,fe.qualityIndex=le++,fe.bitrate=ve.bitrate,fe.width=ve.width,fe.height=ve.height,fe})},reset:U},U(),R=(0,zt.Z)(j).create({streamInfo:W,adapter:C.adapter,baseURLController:C.baseURLController,timelineConverter:C.timelineConverter,debug:C.debug,eventBus:C.eventBus,events:C.events,dashConstants:C.dashConstants,dashMetrics:C.dashMetrics,segmentBaseController:C.segmentBaseController}),b}zl.__dashjs_factory_name="ThumbnailController";var Uu=F.Z.getClassFactory(zl),ga=ne(7417);function So(C){var b;C=C||{};var R=[],j=(0,V.Z)(this.context).getInstance(),W=C.updateEventName,K=C.addBlacklistEventName;function U(z){-1===R.indexOf(z)&&(R.push(z),j.trigger(W,{entry:z}))}return b={add:U,contains:function(z){return!!(R.length&&z&&z.length)&&-1!==R.indexOf(z)},reset:function(){R=[]}},K&&j.on(K,function(z){U(z.entry)},b),b}So.__dashjs_factory_name="BlackListController";var vl=F.Z.getClassFactory(So),Bu=[_.Z.VIDEO,_.Z.AUDIO,_.Z.TEXT,_.Z.MUXED,_.Z.IMAGE];function Wl(C){C=C||{};var b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je,Ge,ge,Pe=this.context,Te=(0,V.Z)(Pe).getInstance(),Be=(0,At.Z)(Pe).getInstance(),P=C.manifestModel,ie=C.mediaPlayerModel,oe=C.dashMetrics,X=C.manifestUpdater,Q=C.adapter,Ae=C.timelineConverter,me=C.capabilities,Fe=C.errHandler,Ie=C.abrController,ae=C.playbackController,ke=C.eventController,We=C.mediaController,gt=C.protectionController,ht=C.textController,ft=C.videoModel,lt=C.streamInfo,qt=C.settings;function Kt(an,Un){return new Promise(function(Gn,Pn){ct(),fe=!0,Qt();var Bn=ft.getElement(),Ft=[];Bu.forEach(function(dt){(dt!==_.Z.TEXT||an)&&(dt!==_.Z.VIDEO||!Bn||Bn&&/^VIDEO$/i.test(Bn.nodeName))&&Ft.push(_t(dt,an))}),Promise.all(Ft).then(function(){return dt=Un,new Promise(function(Gt){var Re={},at=j.map(function(Xt){return Xt.createBufferSinks(dt)});Promise.all(at).then(function(Xt){Xt.forEach(function(dn){dn&&(Re[dn.getType()]=dn)}),Gt(Re)}).catch(function(){Gt(Re)})});var dt}).then(function(dt){if(fe=!1,0===j.length){var Gt="No streams to play.";Fe.error(new xe.Z(Me.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Gt,P.getValue())),R.fatal(Gt)}else on();an&&ht.createTracks(lt),Gn(dt)}).catch(function(dt){Pn(dt)})})}function _t(an,Un){var Gn,Pn=Q.getAllMediaInfoForType(lt,an),Bn=[],Ft=null;if(!Pn||0===Pn.length)return R.info("No "+an+" data."),Promise.resolve();an===_.Z.VIDEO&&(z=!0),an===_.Z.AUDIO&&(le=!0);for(var dt=0,Gt=Pn.length;dt<Gt;dt++)Ft=Pn[dt],an===_.Z.TEXT&&Ft.isEmbedded&&(ht.addEmbeddedTrack(lt,Ft),Bn.push(Ft)),Bt(Ft)&&We.addTrack(Ft);if(Bn.length>0&&(We.setInitialMediaSettingsForType(an,lt),ht.addMediaInfosToBuffer(lt,an,Bn)),0===(Pn=Pn.filter(function(at){return!at.isEmbedded})).length)return Promise.resolve();if(an===_.Z.IMAGE)return(pe=Uu(Pe).create({streamInfo:lt,adapter:Q,baseURLController:C.baseURLController,timelineConverter:C.timelineConverter,debug:je,eventBus:Te,events:w.Z,dashConstants:E.Z,dashMetrics:C.dashMetrics,segmentBaseController:C.segmentBaseController})).initialize(),Promise.resolve();Te.trigger(w.Z.STREAM_INITIALIZING,{streamInfo:lt,mediaInfo:Ft}),We.setInitialMediaSettingsForType(an,lt);var Re=function(at,Xt){var dn=at&&at.length>0?at[0]:null,Ln=J.getModel(dn?dn.type:null),pr=dn?dn.type:null,di=dn?dn.mimeType:null,Fi=dn?dn.isFragmented:null,Si=xn(Pe).create({streamInfo:lt,type:pr,mimeType:di,timelineConverter:Ae,adapter:Q,manifestModel:P,mediaPlayerModel:ie,fragmentModel:Ln,dashMetrics:C.dashMetrics,baseURLController:C.baseURLController,segmentBaseController:C.segmentBaseController,abrController:Ie,playbackController:ae,mediaController:We,textController:ht,errHandler:Fe,settings:qt,boxParser:Oe,segmentBlacklistController:de});Si.initialize(Xt,z,Fi),j.push(Si);for(var Ni=0;Ni<at.length;Ni++)Si.addMediaInfo(at[Ni]);return pr===_.Z.TEXT&&ht.addMediaInfosToBuffer(lt,pr,at,Ln),Si}(Pn,Un);return(Gn=We.getCurrentTrackFor(an,lt.id))?(Ie.updateTopQualityIndex(Gn),Re.selectMediaInfo(an===_.Z.TEXT&&Gn.isEmbedded?Pn[0]:Gn)):Promise.resolve()}function Bt(an){var Gn=an?an.type:null;return Gn===_.Z.MUXED?(R.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),Fe.error(new xe.Z(Me.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",P.getValue())),!1):!(Gn!==_.Z.TEXT&&Gn!==_.Z.IMAGE&&an.contentProtection&&!me.supportsEncryptedMedia()&&(Fe.error(new xe.Z(Me.CAPABILITY_MEDIAKEYS_ERROR_CODE,Me.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function wn(an){for(var Un=j?j.length:0,Gn=0;Gn<Un;Gn++){var Pn=j[Gn].getFragmentModel();Pn.abortRequests(),Pn.resetInitialSettings(),j[Gn].reset(!1,an)}ht&&ht.deactivateStream(lt),j=[],K=!1,U=!1,rr(!1),St(!1),Te.trigger(w.Z.STREAM_DEACTIVATED,{streamInfo:lt})}function tt(an){wn(an),W=!1,z=!1,le=!1,ve={},fe=!1,Ge=!1,ge=[]}function St(an){Ge=an}function Jt(){return lt?lt.start:NaN}function Ve(){return lt?lt.id:null}function ut(){return lt}function ct(){if(!ft||!Ie)throw new Error(_.Z.MISSING_CONFIG_ERROR)}function pt(an){an.error&&(Fe.error(an.error),R.fatal(an.error.message))}function Qt(){if(ke){var an=Q.getEventsFor(lt);an&&an.length>0&&ke.addInlineEvents(an,lt.id)}}function on(){for(var an=j.length,Un=ve.audio||ve.video?new xe.Z(Me.DATA_UPDATE_FAILED_ERROR_CODE,Me.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Gn=0;Gn<an;Gn++)if(j[Gn].isUpdating()||fe)return;if(gt){gt.clearMediaInfoArray();for(var Pn=0;Pn<an&&j[Pn];Pn++){var Bn=j[Pn].getType(),Ft=j[Pn].getMediaInfo();if(Bn===_.Z.AUDIO||Bn===_.Z.VIDEO||Bn===_.Z.TEXT&&Ft.isFragmented){var dt=j[Pn].getMediaInfo();dt&&gt.initializeForMedia(dt)}}gt.handleKeySystemFromManifest()}Un?Fe.error(Un):W||(W=!0,ft.waitForReadyState(_.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Te.trigger(w.Z.STREAM_INITIALIZED,{streamInfo:lt})}))}function Sn(){var an=Kn(),Un=an.length;if(0!==Un){for(var Gn=0;Gn<Un;Gn++)if(!an[Gn].isBufferingCompleted()&&(an[Gn].getType()===_.Z.AUDIO||an[Gn].getType()===_.Z.VIDEO))return void R.debug("onBufferingCompleted - One streamProcessor has finished but",an[Gn].getType(),"one is not buffering completed");R.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),U=!0,Te.trigger(w.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:lt},{streamInfo:lt})}else R.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function Mt(an){ve[an.mediaType]=an.error,on()}function Dn(an){ke&&ke.addInbandEvents(an.events,lt.id)}function qn(an){return an&&an.type?kn(an.type):null}function kn(an){return an?Kn().filter(function(Un){return Un.getType()===an})[0]:null}function Kn(){for(var an,Un,Gn=[],Pn=0;Pn<j.length;Pn++)(an=(Un=j[Pn]).getType())!==_.Z.AUDIO&&an!==_.Z.VIDEO&&an!==_.Z.TEXT||Gn.push(Un);return Gn}function zn(an,Un){var Gn=ut(),Pn=Un.getStreamInfo();if(!Pn||!Gn)return!0;var Bn=Q.getAdaptationForType(Pn.index,an,Pn),Ft=Q.getAdaptationForType(Gn.index,an,Gn);return Bn&&Ft?!(!ar(Ft)&&ar(Bn)):!Bn&&!Ft}function ar(an){return!!an&&!!(an.ContentProtection||an.Representation_asArray&&an.Representation_asArray.length>0&&an.Representation_asArray[0].ContentProtection)}function er(an,Un){var Gn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!an||!an.hasOwnProperty("getStreamInfo"))return!1;var Pn=an.getStreamInfo(),Bn=Gn?Gn.getStreamInfo():ut();if(!Pn||!Bn)return!1;var Ft=Q.getAdaptationForType(Pn.index,Un,Pn),dt=Q.getAdaptationForType(Bn.index,Un,Bn);if(!Ft||!dt)return!Ft&&!dt;var Gt=Ft&&dt&&Ft.mimeType===dt.mimeType,Re=dt.Representation_asArray.map(function(Ln){return Ln.codecs}),at=Ft.Representation_asArray.map(function(Ln){return Ln.codecs}),Xt=at.some(function(Ln){return Re.indexOf(Ln)>-1}),dn=at.some(function(Ln){return Re.some(function(pr){return me.codecRootCompatibleWithCodec(pr,Ln)})});return Xt||dn&&Gt}function rr(an){Ke=an}function Ar(){return Ke}return b={initialize:function(){Te.on(w.Z.BUFFERING_COMPLETED,Sn,b),Te.on(w.Z.DATA_UPDATE_COMPLETED,Mt,b),Te.on(w.Z.INBAND_EVENTS,Dn,b),gt&&(Te.on(w.Z.KEY_ERROR,pt,b),Te.on(w.Z.SERVER_CERTIFICATE_UPDATED,pt,b),Te.on(w.Z.LICENSE_REQUEST_COMPLETE,pt,b),Te.on(w.Z.KEY_SYSTEM_SELECTED,pt,b),Te.on(w.Z.KEY_SESSION_CREATED,pt,b),Te.on(w.Z.KEY_STATUSES_CHANGED,pt,b)),ht.initializeForStream(lt),Te.trigger(w.Z.STREAM_UPDATED,{streamInfo:lt})},getStreamId:function(){return lt?lt.id:null},activate:function(an,Un){return new Promise(function(Gn,Pn){if(!K)return Ar()?(K=!0,Te.trigger(w.Z.STREAM_ACTIVATED,{streamInfo:lt}),void Gn(Un)):void(Bn=an,Ft=Un,Kt(Bn,Ft)).then(function(Bn){K=!0,Te.trigger(w.Z.STREAM_ACTIVATED,{streamInfo:lt}),Gn(Bn)}).catch(function(Bn){Pn(Bn)});var Bn,Ft;Gn(Un)})},deactivate:wn,getIsActive:function(){return K},getDuration:function(){return lt?lt.duration:NaN},getStartTime:Jt,getId:Ve,getStreamInfo:ut,getHasAudioTrack:function(){return le},getHasVideoTrack:function(){return z},startPreloading:function(an,Un){return new Promise(function(Gn,Pn){Ar()?Pn():(R.info("[startPreloading] Preloading next stream with id ".concat(Ve())),rr(!0),Kt(an,Un).then(function(){for(var Bn=0;Bn<j.length&&j[Bn];Bn++)j[Bn].setExplicitBufferingTime(Jt()),j[Bn].getScheduleController().startScheduleTimer();Gn()}).catch(function(){rr(!1),Pn()}))})},initializeForTextWithMediaSource:function(an){return new Promise(function(Un,Gn){_t(_.Z.TEXT,an).then(function(){return(Pn=kn(_.Z.TEXT))?Pn.createBufferSinks():Promise.resolve();var Pn}).then(function(){ht.createTracks(lt),Un()}).catch(function(Pn){Gn(Pn)})})},getThumbnailController:function(){return pe},getBitrateListFor:function(an){if(ct(),an===_.Z.IMAGE)return pe?pe.getBitrateList():[];var Un=function(Gn){for(var Pn=null,Bn=0;Bn<j.length;Bn++)if((Pn=j[Bn]).getType()===Gn)return Pn.getMediaInfo();return null}(an);return Ie.getBitrateList(Un)},updateData:function(an){return new Promise(function(Un){fe=!0,lt=an,ke&&Qt();for(var Gn=[],Pn=0,Bn=j.length;Pn<Bn;Pn++){var Ft=j[Pn],dt=Ft.getMediaInfo();Gn.push(Ft.updateStreamInfo(lt));var Gt=Q.getAllMediaInfoForType(lt,Ft.getType());if(Gt=Gt.filter(function(Xt){return!Xt.isEmbedded})){Ft.clearMediaInfoArray();for(var Re=0;Re<Gt.length;Re++){var at=Gt[Re];Ft.addMediaInfo(Gt[Re]),Q.areMediaInfosEqual(dt,at)&&(Ie.updateTopQualityIndex(at),Gn.push(Ft.selectMediaInfo(at)))}}}Promise.all(Gn).then(function(){for(Gn=[];ge.length>0;){var Xt=ge.pop(),dn=Xt.newMediaInfo,Ln=qn(Xt.oldMediaInfo);if(!Ln)return;Gn.push(Ln.prepareTrackSwitch()),Gn.push(Ln.selectMediaInfo(dn))}return Promise.all(Gn)}).then(function(){fe=!1,on(),Te.trigger(w.Z.STREAM_UPDATED,{streamInfo:lt}),Un()})})},reset:function(an){J&&(J.reset(),J=null),Ie&&lt&&Ie.clearDataForStream(lt.id),de&&(de.reset(),de=null),tt(an),lt=null,Te.off(w.Z.DATA_UPDATE_COMPLETED,Mt,b),Te.off(w.Z.BUFFERING_COMPLETED,Sn,b),Te.off(w.Z.INBAND_EVENTS,Dn,b),gt&&(Te.off(w.Z.KEY_ERROR,pt,b),Te.off(w.Z.SERVER_CERTIFICATE_UPDATED,pt,b),Te.off(w.Z.LICENSE_REQUEST_COMPLETE,pt,b),Te.off(w.Z.KEY_SYSTEM_SELECTED,pt,b),Te.off(w.Z.KEY_SESSION_CREATED,pt,b),Te.off(w.Z.KEY_STATUSES_CHANGED,pt,b))},getProcessors:Kn,setMediaSource:function(an){return new Promise(function(Un,Gn){for(var Pn=[],Bn=0;Bn<j.length;)Bt(j[Bn].getMediaInfo())?(Pn.push(j[Bn].setMediaSource(an)),Bn++):(j[Bn].reset(),j.splice(Bn,1));Promise.all(Pn).then(function(){for(var Ft=0;Ft<j.length;Ft++)j[Ft].dischargePreBuffer();if(0===j.length){var dt="No streams to play.";Fe.error(new xe.Z(Me.MANIFEST_ERROR_ID_NOSTREAMS_CODE,dt+"nostreams",P.getValue())),R.fatal(dt)}Un()}).catch(function(Ft){R.error(Ft),Gn(Ft)})})},isMediaCodecCompatible:function(an){var Un=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return er(an,_.Z.VIDEO,Un)&&er(an,_.Z.AUDIO,Un)},isProtectionCompatible:function(an){return!an||zn(_.Z.VIDEO,an)&&zn(_.Z.AUDIO,an)},getPreloaded:Ar,getIsEndedEventSignaled:function(){return Ge},setIsEndedEventSignaled:St,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return U},setPreloaded:rr,startScheduleControllers:function(){for(var an=j.length,Un=0;Un<an&&j[Un];Un++)j[Un].getScheduleController().startScheduleTimer()},prepareTrackChange:function(an){if(K&&lt){U=!1;var Un=an.newMediaInfo,Gn=P.getValue();Q.setCurrentMediaInfo(lt.id,Un.type,Un);var Pn=qn(Un);if(Pn){var Bn=ae.getTime();R.info("Stream -  Process track changed at current time "+Bn),Gn.refreshManifestOnSwitchTrack?(ge.push(an),X.getIsUpdating()||(R.debug("Stream -  Refreshing manifest for switch track"),X.refreshManifest())):Pn.selectMediaInfo(Un).then(function(){Un.type!==_.Z.VIDEO&&Un.type!==_.Z.AUDIO||Ie.updateTopQualityIndex(Un),Pn.prepareTrackSwitch()})}}},prepareQualityChange:function(an){var Un=kn(an.mediaType);Un&&Un.prepareQualityChange(an)}},function(){try{je=(0,G.Z)(Pe).getInstance(),R=je.getLogger(b),tt(),Oe=(0,ga.Z)(Pe).getInstance(),de=vl(Pe).create({updateEventName:w.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:w.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),J=br(Pe).create({streamInfo:lt,mediaPlayerModel:ie,dashMetrics:oe,errHandler:Fe,settings:qt,boxParser:Oe,dashConstants:E.Z,urlUtils:Be})}catch(an){throw an}}(),b}Wl.__dashjs_factory_name="Stream";var xa=F.Z.getClassFactory(Wl),Vu=function C(b){(function(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")})(this,C),this.url=b||null,this.type=yt.w.CONTENT_STEERING_TYPE,this.responseType="json"},yi=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function ts(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe=this.context,je=(0,At.Z)(Oe).getInstance();function Ge(Ie){P(Ie,"baseUrl")}function ge(Ie){P(Ie,"location")}function Pe(Ie){if(Ie&&Ie.request&&Ie.request.serviceLocation&&Ie.request.requestStartDate&&Ie.request.requestEndDate&&!isNaN(Ie.request.bytesTotal)){var ae=Ie.request.serviceLocation,ke=Ie.request.requestEndDate.getTime()-Ie.request.requestStartDate.getTime();Be(ae,parseInt(8*Ie.request.bytesTotal/ke*1e3))}}function Te(Ie){Ie&&Ie.httpRequest&&Ie.httpRequest._serviceLocation&&!isNaN(Ie.throughput)&&Be(Ie.httpRequest._serviceLocation,1e3*Ie.throughput)}function Be(Ie,ae){W[Ie]||(W[Ie]=[]),W[Ie].push(ae),W[Ie].length>4&&W[Ie].shift()}function P(Ie,ae){if(Ie&&Ie.request&&Ie.request.serviceLocation){var ke=Ie.request.serviceLocation;-1===j[ae].all.indexOf(ke)&&j[ae].all.push(ke),j[ae].current=ke}}function ie(){var Ie=fe.getValue(),ae=Ke.getContentSteering(Ie);return ae||(ae=pe.getServiceDescriptionSettings().contentSteering),ae}function oe(){return new Promise(function(Ie){try{var ae=ie();if(!ae||!ae.serverUrl)return void Ie();var ke=function(gt){var ht=gt.serverUrl;R&&R.reloadUri&&(ht=je.isRelative(R.reloadUri)?je.resolve(R.reloadUri,gt.serverUrl):R.reloadUri);var ft=[],lt=j.baseUrl.all.concat(j.location.all);if(lt.length>0){var qt=lt.map(function(Bt){return{serviceLocation:Bt,throughput:function(tt){if(!tt||!W[tt]||0===W[tt].length)return-1;var St=W[tt].reduce(function(Jt,Ve){return Jt+Ve})/W[tt].length;return parseInt(St)}(Bt)}});qt.sort(function(Bt,wn){return wn.throughput-Bt.throughput});var Kt="",_t="";qt.forEach(function(Bt,wn){0!==wn&&(Kt="".concat(Kt,","),Bt.throughput>-1&&(_t="".concat(_t,","))),Kt="".concat(Kt).concat(Bt.serviceLocation),Bt.throughput>-1&&(_t="".concat(_t).concat(Bt.throughput))}),ft.push({key:"_DASH_pathway",value:'"'.concat(Kt,'"')}),ft.push({key:"_DASH_throughput",value:_t})}return Dr.Z.addAditionalQueryParameterToUrl(ht,ft)}(ae),We=new Vu(ke);U.load({request:We,success:function(gt){var ht;(ht=gt)&&ht[E.Z.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(ht[E.Z.CONTENT_STEERING_RESPONSE.VERSION])&&((R=new yi).version=ht[E.Z.CONTENT_STEERING_RESPONSE.VERSION],ht[E.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ht[E.Z.CONTENT_STEERING_RESPONSE.TTL])&&(R.ttl=ht[E.Z.CONTENT_STEERING_RESPONSE.TTL]),ht[E.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(R.reloadUri=ht[E.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ht[E.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(R.pathwayPriority=ht[E.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ht[E.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(R.pathwayClones=ht[E.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],R.pathwayClones=R.pathwayClones.filter(function(ft){return(lt=ft)[E.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&lt[E.Z.CONTENT_STEERING_RESPONSE.ID]&&lt[E.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&lt[E.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][E.Z.CONTENT_STEERING_RESPONSE.HOST];var lt})),Ae()),de.trigger(T.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:R,url:ke}),Ie()},error:function(gt,ht,ft,lt){(function(qt,Kt){try{switch(b.warn("Error fetching data from content steering server",qt),Kt.status){case 410:break;case 429:var _t=Kt&&Kt.getResponseHeader?Kt.getResponseHeader("retry-after"):null;null!==_t&&(R||(R={}),R.ttl=parseInt(_t)),Ae();break;default:Ae()}}catch(Bt){b.error(Bt)}})(gt,lt),Ie(gt)},complete:function(){j.baseUrl.all=X(j.baseUrl),j.location.all=X(j.location)}})}catch(gt){Ie(gt)}})}function X(Ie){return Ie.all&&0!==Ie.all.length&&Ie.current?Ie.all.filter(function(ae){return ae===Ie.current}):[]}function Q(Ie){try{var ae=[];return Ie&&0!==Ie.length&&R&&R.pathwayClones&&0!==R.pathwayClones.length&&R.pathwayClones.forEach(function(ke){var We=Ie.filter(function(qt){return ke[E.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===qt.serviceLocation}),gt=null;if(We&&We.length>0&&(gt=We[0]),gt){var ht=new URL(gt.url),ft=ke[E.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][E.Z.CONTENT_STEERING_RESPONSE.HOST];ft=Dr.Z.stringHasProtocol(ft)?ft:"".concat(ht.protocol,"//").concat(ft);var lt={synthesizedUrl:"".concat(ft).concat(ht.pathname),serviceLocation:ke[E.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:ke[E.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][E.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:gt};ae.push(lt)}}),ae}catch(ke){return b.error(ke),[]}}function Ae(){R&&R.ttl&&!isNaN(R.ttl)&&(K&&clearTimeout(K),K=setTimeout(function(){oe()},1e3*R.ttl))}function me(){K&&clearTimeout(K),K=null}function Fe(){R=null,W={},j={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},me()}return C={reset:function(){Fe(),de.off(T.Z.FRAGMENT_LOADING_STARTED,Ge,C),de.off(T.Z.MANIFEST_LOADING_STARTED,ge,C),de.off(T.Z.MANIFEST_LOADING_FINISHED,Pe,C),de.off(T.Z.THROUGHPUT_MEASUREMENT_STORED,Te,C)},setConfig:function(Ie){Ie&&(Ie.adapter&&(Ke=Ie.adapter),Ie.errHandler&&(z=Ie.errHandler),Ie.dashMetrics&&(le=Ie.dashMetrics),Ie.mediaPlayerModel&&(ve=Ie.mediaPlayerModel),Ie.requestModifier&&(J=Ie.requestModifier),Ie.manifestModel&&(fe=Ie.manifestModel),Ie.serviceDescriptionController&&(pe=Ie.serviceDescriptionController),Ie.eventBus&&(de=Ie.eventBus))},loadSteeringData:oe,getCurrentSteeringResponseData:function(){return R},shouldQueryBeforeStart:function(){var Ie=ie();return!!Ie&&Ie.queryBeforeStart},getSteeringDataFromManifest:ie,stopSteeringRequestTimer:me,getSynthesizedBaseUrlElements:function(Ie){try{return Q(Ie).map(function(ae){var ke=new ha(ae.synthesizedUrl,ae.serviceLocation);return ke.queryParams=ae.queryParams,ke.dvb_priority=ae.reference.dvb_priority,ke.dvb_weight=ae.reference.dvb_weight,ke.availabilityTimeOffset=ae.reference.availabilityTimeOffset,ke.availabilityTimeComplete=ae.reference.availabilityTimeComplete,ke})}catch(ae){return b.error(ae),[]}},getSynthesizedLocationElements:function(Ie){try{return Q(Ie).map(function(ae){var ke=new On(ae.synthesizedUrl,ae.serviceLocation);return ke.queryParams=ae.queryParams,ke})}catch(ae){return b.error(ae),[]}},initialize:function(){U=qr(Oe).create({errHandler:z,dashMetrics:le,mediaPlayerModel:ve,requestModifier:J,errors:Me}),de.on(T.Z.FRAGMENT_LOADING_STARTED,Ge,C),de.on(T.Z.MANIFEST_LOADING_STARTED,ge,C),de.on(T.Z.MANIFEST_LOADING_FINISHED,Pe,C),de.on(T.Z.THROUGHPUT_MEASUREMENT_STORED,Te,C)}},b=(0,G.Z)(Oe).getInstance().getLogger(C),Fe(),C}ts.__dashjs_factory_name="ContentSteeringController";var Gr=F.Z.getSingletonFactory(ts);function mr(){var C,b,R,j=this.context,W=(0,ot.Z)(j).getInstance();return C={select:function(K){if(!K||0===K.length)return null;var z,le,U=null;return W.get().streaming.applyContentSteering&&(z=K,U=(le=R.getCurrentSteeringResponseData())&&le.pathwayPriority&&le.pathwayPriority.length>0?function(){for(var ve=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],J=0,pe=null,de=function(){var Ke=ve[J],Oe=fe.findIndex(function(je){return je.serviceLocation&&je.serviceLocation===Ke});if(-1!==Oe&&!b.contains(fe[Oe].serviceLocation))return pe=fe[Oe],"break";J+=1};J<ve.length&&"break"!==de(););return pe}(le.pathwayPriority,z):null),U||(U=function(z){return z[0]}(K)),U},setConfig:function(K){K.blacklistController&&(b=K.blacklistController),K.contentSteeringController&&(R=K.contentSteeringController)},reset:function(){b.reset()}},b=vl(j).create({updateEventName:w.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:w.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),R=Gr(j).getInstance(),C}mr.__dashjs_factory_name="LocationSelector";var Hu=F.Z.getClassFactory(mr);function Ko(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke=this.context,Oe=(0,V.Z)(Ke).getInstance(),je=(0,At.Z)(Ke).getInstance();function Ge(){R=NaN,U=!1,W=!0,K=!1,ge()}function ge(){null!==j&&(clearTimeout(j),j=null)}function Pe(me){ge(),K||(isNaN(me)&&!isNaN(R)&&(me=1e3*R),isNaN(me)||(b.debug("Refresh manifest in "+me+" milliseconds."),j=setTimeout(ie,me)))}function Te(){var me=arguments.length>0&&void 0!==arguments[0]&&arguments[0];U=!0;var Fe=le.getValue(),Ie=Fe.url,ae=null,ke=fe.getPatchLocation(Fe),We=ve.select(ke),gt=null;if(We&&!me)Ie=We.url,ae=We.serviceLocation,gt=We.queryParams;else{var ht=function Be(me){var Fe=fe.getLocation(me),Ie=pe.getSynthesizedLocationElements(Fe);return Fe.concat(Ie)}(Fe),ft=ve.select(ht);ft&&(Ie=ft.url,ae=ft.serviceLocation,gt=ft.queryParams)}je.isRelative(Ie)&&(Ie=je.resolve(Ie,Fe.url)),z.load(Ie,ae,gt)}function P(me){if(me){if(fe.getIsPatch(me)){var Fe=me;me=le.getValue();var Ie=fe.isPatchValid(me,Fe),ae=Ie;if(Ie){var ke=fe.getPublishTime(me);ae=fe.applyPatchToManifest(me,Fe);var We=fe.getPublishTime(me);ae=ke.getTime()!=We.getTime()}if(!ae)return b.debug("Patch provided is invalid, performing full manifest refresh"),void Te(!0);me.loadedTime=new Date}}else(me=le.getValue()).loadedTime=new Date;if(le.getValue()&&le.getValue().type===E.Z.DYNAMIC&&me.type===E.Z.STATIC)return Oe.trigger(w.Z.DYNAMIC_TO_STATIC),U=!1,void(K=!0);le.setValue(me);var gt=new Date,ht=(gt.getTime()-me.loadedTime.getTime())/1e3;1e3*(R=fe.getManifestUpdatePeriod(me,ht))>2147483647&&(R=2147483.647),Oe.trigger(w.Z.MANIFEST_UPDATED,{manifest:me}),b.info("Manifest has been refreshed at "+gt+"["+gt.getTime()/1e3+"] "),W||Pe()}function ie(){W||(U?Pe(de.get().streaming.manifestUpdateRetryInterval):Te())}function oe(me){me.error?me.error.code===Me.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&J.error(me.error):P(me.manifest)}function X(){W=!1,Pe()}function Q(){(W=!de.get().streaming.scheduling.scheduleWhilePaused)&&ge()}function Ae(){U=!1}return C={initialize:function(){Ge(),Oe.on(w.Z.STREAMS_COMPOSED,Ae,this),Oe.on(T.Z.PLAYBACK_STARTED,X,this),Oe.on(T.Z.PLAYBACK_PAUSED,Q,this),Oe.on(w.Z.INTERNAL_MANIFEST_LOADED,oe,this)},setManifest:function(me){P(me)},refreshManifest:Te,getIsUpdating:function(){return U},setConfig:function(me){me&&(me.manifestModel&&(le=me.manifestModel),me.adapter&&(fe=me.adapter),me.manifestLoader&&(z=me.manifestLoader),me.errHandler&&(J=me.errHandler),me.locationSelector&&(ve=me.locationSelector),me.settings&&(de=me.settings),me.contentSteeringController&&(pe=me.contentSteeringController))},reset:function(){Oe.off(T.Z.PLAYBACK_STARTED,X,this),Oe.off(T.Z.PLAYBACK_PAUSED,Q,this),Oe.off(w.Z.STREAMS_COMPOSED,Ae,this),Oe.off(w.Z.INTERNAL_MANIFEST_LOADED,oe,this),Ge()}},b=(0,G.Z)(Ke).getInstance().getLogger(C),ve=Hu(Ke).create(),C}Ko.__dashjs_factory_name="ManifestUpdater";var Gu=F.Z.getClassFactory(Ko);function Yi(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je=this.context,Ge=(0,V.Z)(je).getInstance(),ge=(0,At.Z)(je).getInstance();function Pe(){z=[],le=[],ve=null,fe=null,pe=null,J=NaN,R=!1,j=!1,de=W.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Te(){W.get().streaming.utcSynchronization.enabled&&!R&&!j&&pe&&pe.value&&pe.schemeIdUri&&!isNaN(J)&&!isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)&&(fe&&(Date.now()-fe)/1e3<30||(z=[],j=!0,Be(isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)?2:W.get().streaming.utcSynchronization.backgroundAttempts)))}function Be(ft){try{if(ft<=0)return void gt();var lt=Date.now();K[pe.schemeIdUri](pe.value,function(qt){var Kt=Date.now(),_t=ie(lt,Kt,qt);z.push(_t),Be(ft-1)},function(){gt()})}catch{gt()}}function P(){var lt=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!le||0===le.length||lt>=le.length)oe();else{var qt=le[lt];if(qt)if(K.hasOwnProperty(qt.schemeIdUri)){var Kt=(new Date).getTime();K[qt.schemeIdUri](qt.value,function(_t){var Bt=(new Date).getTime(),wn=ie(Kt,Bt,_t);pe=qt,oe(wn)},function(){P(lt+1)})}else P(lt+1);else oe()}}function ie(ft,lt,qt){return qt-(lt-(lt-ft)/2)}function oe(){var ft=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,lt=isNaN(ft);lt&&W.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function ke(){var ft=U.getLatestMPDRequestHeaderValueByID("Date"),lt=null!==ft?new Date(ft).getTime():Number.NaN;isNaN(lt)?We(!0):We(!1,lt-Date.now())}():We(lt,ft)}function X(ft){var Kt,_t,Bt,lt=Date.parse(ft);return isNaN(lt)&&(Bt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(ft),Kt=Date.UTC(parseInt(Bt[1],10),parseInt(Bt[2],10)-1,parseInt(Bt[3],10),parseInt(Bt[4],10),parseInt(Bt[5],10),Bt[6]&&(parseInt(Bt[6],10)||0),Bt[7]&&1e3*parseFloat(Bt[7])||0),Bt[9]&&Bt[10]&&(_t=60*parseInt(Bt[9],10)+parseInt(Bt[10],10),Kt+=("+"===Bt[8]?-1:1)*_t*60*1e3),lt=new Date(Kt).getTime()),lt}function Q(ft){return Date.parse(ft)}function Ae(ft){return Date.parse(ft)}function me(ft,lt,qt){qt()}function Fe(ft,lt,qt){var Kt=X(ft);isNaN(Kt)?qt():lt(Kt)}function Ie(ft,lt,qt,Kt,_t){var Bt,wn,tt=!1,St=new XMLHttpRequest,Jt=_t?yt.w.HEAD:yt.w.GET,Ve=lt.match(/\S+/g);if(lt=Ve.shift(),Bt=function(){tt||(tt=!0,Ve.length?Ie(ft,Ve.join(" "),qt,Kt,_t):Kt())},wn=function(){var ct,pt;200===St.status&&(ct=_t?St.getResponseHeader("Date"):St.response,pt=ft(ct),isNaN(pt)||(qt(pt),tt=!0))},ge.isRelative(lt)){var ut=Oe.resolve();ut&&(lt=ge.resolve(lt,ut.url))}St.open(Jt,lt),St.timeout=5e3,St.onload=wn,St.onloadend=Bt,St.send()}function ae(ft,lt,qt){Ie(Ae,ft,lt,qt,!0)}function We(ft,lt){if(isNaN(J)||isNaN(lt)||ft||function(Kt){try{var _t,Bt=ht(Kt),wn=isNaN(de)?30:de,tt=isNaN(W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,St=isNaN(W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Jt=isNaN(W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Bt?(_t=Math.min(wn*tt,St),b.debug("Increasing timeBetweenSyncAttempts to ".concat(_t))):(_t=Math.max(wn/tt,Jt),b.debug("Decreasing timeBetweenSyncAttempts to ".concat(_t))),de=_t}catch{}}(lt),!ft&&!isNaN(lt)){ve=Date.now(),R=!1;var qt=isNaN(J);J=lt,qt&&Te(),b.debug("Completed UTC sync. Setting client - server offset to ".concat(lt))}ft&&(pe=null,R=!1,Ke.error(new xe.Z(Me.TIME_SYNC_FAILED_ERROR_CODE,Me.TIME_SYNC_FAILED_ERROR_MESSAGE))),Ge.trigger(w.Z.UPDATE_TIME_SYNC_OFFSET,{offset:lt}),Ge.trigger(w.Z.TIME_SYNCHRONIZATION_COMPLETED)}function gt(){if(z&&0!==z.length){var ft=z.reduce(function(lt,qt){return lt+qt},0)/z.length;ht(ft)?b.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(b.debug("Completed background UTC sync. Setting client - server offset to ".concat(ft)),Ge.trigger(w.Z.UPDATE_TIME_SYNC_OFFSET,{offset:J=ft})),j=!1,fe=Date.now()}}function ht(ft){try{if(isNaN(J))return!0;var lt=W.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(W.get().streaming.utcSynchronization.maximumAllowedDrift)?W.get().streaming.utcSynchronization.maximumAllowedDrift:100;return ft>=J-lt&&ft<=J+lt}catch{return!0}}return C={initialize:function(){Pe(),K={"urn:mpeg:dash:utc:http-head:2014":ae,"urn:mpeg:dash:utc:http-xsdate:2014":Ie.bind(null,X),"urn:mpeg:dash:utc:http-iso:2014":Ie.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":Fe,"urn:mpeg:dash:utc:http-head:2012":ae,"urn:mpeg:dash:utc:http-xsdate:2012":Ie.bind(null,X),"urn:mpeg:dash:utc:http-iso:2012":Ie.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":Fe,"urn:mpeg:dash:utc:http-ntp:2014":me,"urn:mpeg:dash:utc:ntp:2014":me,"urn:mpeg:dash:utc:sntp:2014":me}},attemptSync:function(ft,lt){le=ft,R||(function(qt){try{if(!qt||!W.get().streaming.utcSynchronization.enabled)return!1;var Kt=isNaN(de)?30:de;return!(ve&&Kt&&!isNaN(Kt))||(Date.now()-ve)/1e3>=Kt}catch{return!0}}(lt)?(R=!0,P()):Ge.trigger(w.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(ft){ft&&(ft.dashMetrics&&(U=ft.dashMetrics),ft.baseURLController&&(Oe=ft.baseURLController),ft.errHandler&&(Ke=ft.errHandler),ft.settings&&(W=ft.settings))},reset:function(){Pe(),Ge.off(w.Z.ATTEMPT_BACKGROUND_SYNC,Te,C)}},b=(0,G.Z)(je).getInstance().getLogger(C),Ge.on(w.Z.ATTEMPT_BACKGROUND_SYNC,Te,C),C}Yi.__dashjs_factory_name="TimeSyncController";var yr=F.Z.getSingletonFactory(Yi);yr.HTTP_TIMEOUT_MS=5e3,F.Z.updateSingletonFactory(Yi.__dashjs_factory_name,yr);var yl=yr;function Zu(){var C,b,R,j,W,K=this.context,U=(0,V.Z)(K).getInstance();return C={attachMediaSource:function(z){var le=window.URL.createObjectURL(b);return z.setSource(le),"managedMediaSource"===j&&(z.setDisableRemotePlayback(!0),b.addEventListener("startstreaming",function(){U.trigger(T.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),b.addEventListener("endstreaming",function(){U.trigger(T.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),le},createMediaSource:function(){var z="WebKitMediaSource"in window,le="MediaSource"in window;return"ManagedMediaSource"in window?(b=new ManagedMediaSource,j="managedMediaSource",W.info("Created ManagedMediaSource")):le?(b=new MediaSource,j="mediaSource",W.info("Created MediaSource")):z&&(b=new WebKitMediaSource,W.info("Created WebkitMediaSource")),b},detachMediaSource:function(z){z.setSource(null)},setConfig:function(z){z&&z.settings&&(R=z.settings)},setDuration:function z(le){b&&"open"===b.readyState&&(null===le&&isNaN(le)||b.duration!==le&&(le!==1/0||R.get().streaming.buffer.mediaSourceDurationInfinity||(le=Math.pow(2,32)),function(ve){for(var fe=ve.sourceBuffers,J=0;J<fe.length;J++)if(fe[J].updating)return!0;return!1}(b)?setTimeout(z.bind(null,le),50):(W.info("Set MediaSource duration:"+le),b.duration=le)))},setSeekable:function(z,le){b&&"function"==typeof b.setLiveSeekableRange&&"function"==typeof b.clearLiveSeekableRange&&"open"===b.readyState&&z>=0&&z<le&&(b.clearLiveSeekableRange(),b.setLiveSeekableRange(z,le))},signalEndOfStream:function(z){if(z&&"open"===z.readyState){for(var le=z.sourceBuffers,ve=0;ve<le.length;ve++)if(le[ve].updating||0===le[ve].buffered.length)return;W.info("call to mediaSource endOfStream"),z.endOfStream()}}},W=(0,G.Z)(K).getInstance().getLogger(C),C}Zu.__dashjs_factory_name="MediaSourceController";var lh=F.Z.getSingletonFactory(Zu);function Wr(){var C,b,R,j,W,K,U,z,le,ve,fe,J="urn:mpeg:dash:event:2012",de="updated",Ke="added",Oe=this.context,je=(0,V.Z)(Oe).getInstance();function Ge(){if(!U||!z)throw new Error("setConfig function has to be called previously")}function ge(){fe=!1,R={},j={},W=null,ve=!1,K=Date.now()/1e3}function Pe(){try{if(!ve){ve=!0;var me=z.getTime(),Fe=me-K;Fe=K>0?Math.max(0,Fe):0,Te(j,Fe,me),Te(R,Fe,me),Be(j),Be(R),K=me,ve=!1}}catch(Ie){ve=!1,b.error(Ie)}}function Te(me,Fe,Ie){try{X(me,function(ae){if(void 0!==ae){var ke=isNaN(ae.duration)?0:ae.duration;ae.calculatedPresentationTime<=Ie&&ae.calculatedPresentationTime+Fe+ke>=Ie?Ae(ae,T.Z.EVENT_MODE_ON_START):(Q(Ie,ke+Fe,ae.calculatedPresentationTime)||function(We){try{return We.calculatedPresentationTime>We.eventStream.period.start+We.eventStream.period.duration}catch(ht){return b.error(ht),!1}}(ae))&&(b.debug("Removing event ".concat(ae.id," from period ").concat(ae.eventStream.period.id," as it is expired or invalid")),function(We,gt){try{var ht=gt.eventStream.schemeIdUri,ft=gt.eventStream.period.id,lt=gt.eventStream.value,qt=gt.id;We[ft][ht]=We[ft][ht].filter(function(Kt){return lt&&Kt.eventStream.value&&Kt.eventStream.value!==lt||Kt.id!==qt}),0===We[ft][ht].length&&delete We[ft][ht]}catch(Kt){b.error(Kt)}}(me,ae))}})}catch(ae){b.error(ae)}}function Be(me){try{for(var Fe in me)me.hasOwnProperty(Fe)&&0===Object.keys(me[Fe]).length&&delete me[Fe]}catch(Ie){b.error(Ie)}}function P(me,Fe){var Ie=arguments.length>2&&void 0!==arguments[2]&&arguments[2],ae=me.eventStream.schemeIdUri,ke=me.eventStream.value,We=me.id,gt="discarded";Fe[ae]||(Fe[ae]=[]);var ht=Fe[ae].findIndex(function(lt){return(!ke||lt.eventStream.value&&lt.eventStream.value===ke)&&lt.id===We});if(-1===ht)Fe[ae].push(me),me.triggeredReceivedEvent=!1,me.triggeredStartEvent=!1,gt=Ke;else if(Ie){var ft=Fe[ae][ht];me.triggeredReceivedEvent=ft.triggeredReceivedEvent,me.triggeredStartEvent=ft.triggeredStartEvent,Fe[ae][ht]=me,gt=de}return gt}function ie(me){try{1==me.eventStream.value&&je.trigger(T.Z.MANIFEST_VALIDITY_CHANGED,{id:me.id,validUntil:me.calculatedPresentationTime,newDuration:4294967295==me.calculatedPresentationTime?NaN:me.calculatedPresentationTime+me.duration,newManifestValidAfter:NaN},{mode:T.Z.EVENT_MODE_ON_START})}catch(ae){b.error(ae)}}function oe(me){try{var Fe=z.getTime();X(me,function(Ie){var ae=Ie.eventStream&&Ie.eventStream.period&&!isNaN(Ie.eventStream.period.duration)?Ie.eventStream.period.duration:NaN,ke=Ie.eventStream&&Ie.eventStream.period&&!isNaN(Ie.eventStream.period.start)?Ie.eventStream.period.start:NaN;isNaN(ae)||isNaN(ke)||Math.abs(Ie.calculatedPresentationTime-Fe)<300&&Ae(Ie,T.Z.EVENT_MODE_ON_START)})}catch(Ie){b.error(Ie)}}function X(me,Fe){try{if(me)for(var Ie=Object.keys(me),ae=0;ae<Ie.length;ae++)for(var ke=me[Ie[ae]],We=Object.keys(ke),gt=0;gt<We.length;gt++)ke[We[gt]].forEach(function(ht){void 0!==ht&&Fe(ht)})}catch(ht){b.error(ht)}}function Q(me,Fe,Ie){try{return me-Fe>Ie}catch(ae){return b.error(ae),!1}}function Ae(me,Fe){try{var Ie=z.getTime(),ae=me.id;if(Fe===T.Z.EVENT_MODE_ON_RECEIVE&&!me.triggeredReceivedEvent)return b.debug("Received event ".concat(ae)),me.triggeredReceivedEvent=!0,void je.trigger(me.eventStream.schemeIdUri,{event:me},{mode:Fe});me.triggeredStartEvent||(me.eventStream.schemeIdUri===J&&1==me.eventStream.value?0===me.duration&&0===me.presentationTimeDelta||(b.debug("Starting manifest refresh event ".concat(ae," at ").concat(Ie)),function(){try{Ge(),U.refreshManifest()}catch(ke){b.error(ke)}}()):"urn:mpeg:dash:event:callback:2015"===me.eventStream.schemeIdUri&&1==me.eventStream.value?(b.debug("Starting callback event ".concat(ae," at ").concat(Ie)),function(ke){try{(0,Mn.Z)(Oe).create({}).load({method:"get",url:ke,request:{responseType:"arraybuffer"}})}catch(We){b.error(We)}}(me.messageData)):(b.debug("Starting event ".concat(ae," from period ").concat(me.eventStream.period.id," at ").concat(Ie)),je.trigger(me.eventStream.schemeIdUri,{event:me},{mode:Fe})),me.triggeredStartEvent=!0)}catch(ke){b.error(ke)}}return C={addInlineEvents:function(me,Fe){try{if(Ge(),R[Fe]||(R[Fe]={}),me)for(var Ie=0;Ie<me.length;Ie++){var ae=me[Ie];if(!Q(z.getTime(),isNaN(ae.duration)?0:ae.duration,ae.calculatedPresentationTime)){var ke=P(ae,R[Fe],!0);ke===Ke?(b.debug("Added inline event with id ".concat(ae.id," from period ").concat(Fe)),Ae(ae,T.Z.EVENT_MODE_ON_RECEIVE)):ke===de&&b.debug("Updated inline event with id ".concat(ae.id," from period ").concat(Fe))}}}catch(We){throw We}},addInbandEvents:function(me,Fe){try{Ge(),j[Fe]||(j[Fe]={});for(var Ie=0;Ie<me.length;Ie++){var ae=me[Ie];Q(z.getTime(),isNaN(ae.duration)?0:ae.duration,ae.calculatedPresentationTime)||(P(ae,j[Fe],!1)===Ke?(ae.eventStream.schemeIdUri===J&&ie(ae),b.debug("Added inband event with id ".concat(ae.id," from period ").concat(Fe)),Ae(ae,T.Z.EVENT_MODE_ON_RECEIVE)):b.debug("Inband event with scheme_id_uri ".concat(ae.eventStream.schemeIdUri,", value ").concat(ae.eventStream.value,", period id ").concat(Fe," and event id ").concat(ae.id," was ignored because it has been added before.")))}Pe()}catch(ke){throw ke}},getInbandEvents:function(){return j},getInlineEvents:function(){return R},start:function(){try{Ge(),b.debug("Start Event Controller");var me=le.get().streaming.eventControllerRefreshDelay;fe||isNaN(me)||(fe=!0,W=setInterval(Pe,me))}catch(Fe){throw Fe}},setConfig:function(me){try{if(!me)return;me.manifestUpdater&&(U=me.manifestUpdater),me.playbackController&&(z=me.playbackController),me.settings&&(le=me.settings)}catch(Fe){throw Fe}},reset:function(){(function(){try{null!==W&&fe&&(clearInterval(W),W=null,fe=!1,function(){try{oe(j),oe(R)}catch(me){b.error(me)}}())}catch(me){throw me}})(),ge()}},b=(0,G.Z)(Oe).getInstance().getLogger(C),ge(),C}Wr.__dashjs_factory_name="EventController";var ju=F.Z.getSingletonFactory(Wr),Ri={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Bs(C,b){(null==b||b>C.length)&&(b=C.length);for(var R=0,j=new Array(b);R<b;R++)j[R]=C[R];return j}function qu(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je,Ge,ge,Pe,Te,Be,P,ie,oe,X,Q,Ae,me,Fe,Ie,ae,ke,We,gt,ht,ft,lt,qt,Kt,_t,Bt,wn,tt,St,Jt,Ve,ut,ct=this.context,pt=(0,V.Z)(ct).getInstance();function Qt(){if(!(K&&K.hasOwnProperty("load")&&Te&&Te.hasOwnProperty("initialize")&&Te.hasOwnProperty("reset")&&Te.hasOwnProperty("getClientTimeOffset")&&U&&Pe&&le&&ke))throw new Error(_.Z.MISSING_CONFIG_ERROR)}function Sn(){!function(){try{var Pt=z.getStreamsInfo();if(!P&&0===Pt.length)throw new Error("There are no periods in the MPD");P&&Pt.length>0&&le.updateManifestUpdateInfo({currentTime:ke.getTime(),buffered:ae.getBufferRange(),presentationStartTime:Pt[0].start,clientTimeOffset:Te.getClientTimeOffset()}),Be.length>0&&(0!==(Ur=Pt).length?Be=Be.filter(function(dr){var hi=Ur.filter(function(ai){return ai.id===dr.getId()}).length>0||dr.getId()===P.getId();return hi||(b.debug("Removing stream ".concat(dr.getId())),dr.reset(!0)),hi}):b.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."));for(var vn=[],Yn=0,hr=Pt.length;Yn<hr;Yn++){var Lr=Pt[Yn];vn.push(Dn(Lr)),le.addManifestUpdateStreamInfo(Lr)}Promise.all(vn).then(function(){return new Promise(function(Ur,dr){P?Ur():qn(Pt,Ur,dr)})}).then(function(){pt.trigger(w.Z.STREAMS_COMPOSED),Ln()}).catch(function(Ur){throw Ur})}catch(Ur){Pe.error(new xe.Z(Me.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ur.message+" nostreamscomposed",U.getValue())),Fe=!0,ka()}var Ur}()}function Mt(){St=!0}function Dn(Pt){var vn=Ei(Pt.id);return vn?vn.updateData(Pt):(vn=xa(ct).create({manifestModel:U,mediaPlayerModel:gt,dashMetrics:le,manifestUpdater:W,adapter:z,timelineConverter:Te,capabilities:R,capabilitiesFilter:j,errHandler:Pe,baseURLController:pe,segmentBaseController:de,textController:oe,abrController:Oe,playbackController:ke,eventController:Ge,mediaController:je,protectionController:ie,videoModel:ae,streamInfo:Pt,settings:tt}),Be.push(vn),vn.initialize(),Promise.resolve())}function qn(Pt,vn,Yn){try{Bn();var hr=le.getCurrentDVRInfo().range;if(hr.end<hr.start){Jt&&clearTimeout(Jt);var Lr=Math.min(1e3*(-1*(hr.end-hr.start)+2),2147483647);return b.debug("Waiting for ".concat(Lr," ms before playback can start")),pt.trigger(w.Z.AST_IN_FUTURE,{delay:Lr}),void(Jt=setTimeout(function(){qn(Pt,vn,Yn)},Lr))}tt.get().streaming.applyProducerReferenceTime&&We.calculateProducerReferenceTimeOffsets(Pt);var Ur=Pt[0].manifestInfo;if(tt.get().streaming.applyServiceDescription&&We.applyServiceDescription(Ur),z.getIsDynamic()){var dr=us(Pt,Ur);ke.computeAndSetLiveDelay(dr,Ur)}(tt.get().streaming.applyContentSteering&&J.shouldQueryBeforeStart()?J.loadSteeringData():Promise.resolve()).then(function(){var hi=U.getValue();hi&&pe.update(hi),kn(),vn()}).catch(function(hi){b.error(hi),kn(),vn()})}catch(hi){Yn(hi)}}function kn(){var Pt=function(){var hr;if(z.getIsDynamic()){var Lr=le.getCurrentDVRInfo();hr=(Lr&&Lr.range?Lr.range.end:0)-ke.getOriginalLiveDelay();var Ur=Lr?Lr.range:null;if(Ur){if(isNaN(Ve)&&-1===Ve.toString().indexOf("posix:")){var dr=Ni(!0);isNaN(dr)||(b.info("Start time from URI parameters: ".concat(dr)),hr=Math.min(hr,dr))}else{b.info("Start time provided by the app: ".concat(Ve));var hi=zi(!0,Ve);isNaN(hi)||(hr=Math.min(hr,hi))}var ai=tt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;hr=Math.max(hr,Ur.start+ai)}}else if(hr=fs()[0].getStreamInfo().start,isNaN(Ve)){var Ua=Ni(!1);isNaN(Ua)||(b.info("Start time from URI parameters: ".concat(Ua)),hr=Math.max(hr,Ua))}else{b.info("Start time provided by the app: ".concat(Ve));var il=zi(!1,Ve);isNaN(il)||(hr=Math.max(hr,il))}return hr}(),vn=Pn(Pt),Yn=null!==vn?vn:Be[0];pt.trigger(w.Z.INITIAL_STREAM_SWITCH,{startTime:Pt}),Kn(Yn,null,Pt),Kt||(Kt=setInterval(function(){!Ae&&ke.getTimeToStreamEnd()<=0&&!ke.isSeeking()&&pt.trigger(w.Z.PLAYBACK_ENDED,{isLast:po().isLast})},200))}function Kn(Pt,vn,Yn){try{if(Ae||!Pt||vn===Pt&&Pt.getIsActive())return;Ae=!0,pt.trigger(w.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:vn?vn.getStreamInfo():null,toStreamInfo:Pt.getStreamInfo()});var hr=!1;P=Pt,vn&&(hr=Un(Pt,vn),vn.deactivate(hr)),Yn=isNaN(Yn)?!hr&&vn?Pt.getStreamInfo().start:NaN:Yn,b.info("Switch to stream ".concat(Pt.getId(),". Seektime is ").concat(Yn,", current playback time is ").concat(ke.getTime(),". Seamless period switch is set to ").concat(hr)),Bt=Bt.filter(function(Lr){return Lr.getId()!==P.getId()}),ke.initialize(po(),!!vn),ae.getElement()?zn(Yn,hr,!1):ar(Yn,hr)}catch{Ae=!1}}function zn(Pt,vn){var Yn,hr=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function Lr(){if(Ie&&"open"===Ie.readyState){b.debug("MediaSource is open!"),window.URL.revokeObjectURL(Yn),Ie.removeEventListener("sourceopen",Lr),Ie.removeEventListener("webkitsourceopen",Lr),Si();var dr=le.getCurrentDVRInfo();ve.setSeekable(dr.range.start,dr.range.end),hr?(isNaN(Pt)||ke.seek(Pt,!0,!0),P.setMediaSource(Ie).then(function(){P.initializeForTextWithMediaSource(Ie)})):ar(Pt,vn)}}function Ur(){Ie.addEventListener("sourceopen",Lr,!1),Ie.addEventListener("webkitsourceopen",Lr,!1),Yn=ve.attachMediaSource(ae),b.debug("MediaSource attached to element.  Waiting on open...")}Ie?vn?ar(Pt,vn):(ve.detachMediaSource(ae),Ur()):(Ie=ve.createMediaSource(),Ur())}function ar(Pt,vn){P.activate(Ie,vn?_t:void 0,Pt).then(function(Yn){if(Yn){var hr=Object.keys(Yn);hr.length>0&&Yn[hr[0]].getBuffer().changeType&&(wn=!0),_t=Yn}isNaN(Pt)||(pt.trigger(w.Z.SEEK_TARGET,{time:Pt},{streamId:P.getId()}),ke.seek(Pt,!1,!0),P.startScheduleControllers()),Ae=!1,pt.trigger(w.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:po()})})}function er(Pt){var Yn,hr,Lr,Ur,vn=Pn(Pt.seekTime);vn&&vn!==P?vn&&vn!==P&&(rr(),hr=vn,Lr=(Yn=Pt)&&!isNaN(Yn.seekTime)?Yn.seekTime:NaN,Ur=P.getProcessors().map(function(dr){return dr.prepareOuterPeriodPlaybackSeeking(Yn)}),Promise.all(Ur).then(function(){Kn(hr,P,Lr)}).catch(function(dr){Pe.error(dr)})):(rr(),function(Yn){P.getProcessors().forEach(function(hr){return hr.prepareInnerPeriodPlaybackSeeking(Yn)}),Po(rt.USER_REQUEST_STOP_REASON)}(Pt)),cs(et.SEEK_START_REASON)}function rr(){Ar()}function Ar(){Bt&&Bt.length>0&&(Bt.forEach(function(Pt){Pt.deactivate(!0)}),Bt=[])}function an(Pt){if(Pt.newMediaInfo.streamInfo.id===P.getId()){if(Ar(),tt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Pt.oldMediaInfo&&Pt.oldMediaInfo.codec!==Pt.newMediaInfo.codec){var vn=ke.getTime();return P.deactivate(!1),void zn(vn,!1,!1)}P.prepareTrackChange(Pt)}}function Un(Pt,vn){try{return tt.get().streaming.buffer.reuseExistingSourceBuffers&&(vn.isProtectionCompatible(Pt)||St)&&(wn&&tt.get().streaming.buffer.useChangeTypeForTrackSwitch||vn.isMediaCodecCompatible(Pt,vn))}catch{return!1}}function Gn(Pt){var vn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ie&&!Pt.getPreloaded()&&Un(Pt,vn)&&Pt.startPreloading(Ie,_t).then(function(){Bt.push(Pt)})}function Pn(Pt){if(isNaN(Pt))return null;for(var vn=Be.length,Yn=0;Yn<vn;Yn++){var hr=Be[Yn];if(Pt<parseFloat((hr.getStartTime()+hr.getDuration()).toFixed(5)))return hr}return null}function Bn(){try{var Pt=z.getIsDynamic(),vn=z.getStreamsInfo()[0].manifestInfo,Yn=ke.getTime(),hr=Te.calcTimeShiftBufferWindow(Be,Pt),Lr=di();if(void 0===hr.start||void 0===hr.end)return;Lr&&0!==Lr.length?Lr.forEach(function(Ur){le.addDVRInfo(Ur.getType(),Yn,vn,hr)}):le.addDVRInfo(_.Z.VIDEO,Yn,vn,hr)}catch{}}function Ft(Pt){if(lt&&Q){var vn=gt.getInitialBufferLevel(),Yn=[_.Z.TEXT];(isNaN(vn)||vn<=ke.getBufferLevel(Yn)||z.getIsDynamic()&&vn>ke.getLiveDelay())&&(lt=!1,cs(et.INITIAL_PLAYOUT_START_REASON),ke.play())}Pt&&Pt.mediaType&&le.addBufferLevel(Pt.mediaType,new Date,1e3*Pt.bufferLevel)}function dt(Pt){Pt.streamInfo.id===P.getId()&&Pt.reason&&Pt.reason.forceReplace&&Ar(),Ei(Pt.streamInfo.id).prepareQualityChange(Pt)}function Gt(){if(z.getIsDynamic()&&0!==ke.getOriginalLiveDelay()&&P){var Pt=z.getStreamsInfo();if(Pt.length>0){var vn=Pt[0].manifestInfo,Yn=us(Pt,vn);ke.computeAndSetLiveDelay(Yn,vn)}}}function Re(){if(aa()){var Pt=ae.getPlaybackQuality();Pt&&le.addDroppedFrames(Pt)}}function at(){b.debug("[onPlaybackStarted]"),!lt&&ft&&cs(et.RESUME_FROM_PAUSE_START_REASON),lt&&(lt=!1),qt&&(qt=!1,tt.get().streaming.applyContentSteering&&!J.shouldQueryBeforeStart()&&J.loadSteeringData()),ft=!1}function Xt(Pt){b.debug("[onPlaybackPaused]"),Pt.ended||(ft=!0,Po(rt.USER_REQUEST_STOP_REASON))}function dn(Pt){b.debug("Stream with id ".concat(Pt.streamInfo.id," finished buffering")),Ie&&Pt.streamInfo.isLast?(b.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),ve.signalEndOfStream(Ie)):Ln()}function Ln(){if(P&&P.getHasFinishedBuffering())for(var Pt=function(){var Lr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var Ur=Lr||P||null;if(Ur){var dr=Ur.getStreamInfo();return Be.filter(function(hi){var ai=hi.getStreamInfo();return ai.start>dr.start&&dr.id!==ai.id})}}catch{return[]}}(P),vn=0;vn<Pt.length;){var Yn=Pt[vn],hr=0===vn?P:Pt[vn-1];!Yn.getPreloaded()&&hr.getHasFinishedBuffering()&&Ie&&Gn(Yn,hr),vn+=1}}function pr(){Kt&&(clearInterval(Kt),Kt=null)}function di(){return P?P.getProcessors():[]}function Fi(Pt){if(P&&!P.getIsEndedEventSignaled()){P.setIsEndedEventSignaled(!0);var vn=function(){var hr=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||P||null;if(!hr)return null;for(var Lr=hr.getStreamInfo(),Ur=Lr.start,dr=0,hi=-1,ai=NaN;dr<Be.length;){var Ua=Be[dr].getStreamInfo(),il=Ua.start-Ur;il>0&&(isNaN(ai)||il<ai)&&Lr.id!==Ua.id&&(ai=il,hi=dr),dr+=1}return hi>=0?Be[hi]:null}();vn?(b.debug("StreamController onEnded, found next stream with id ".concat(vn.getStreamInfo().id,". Switching from ").concat(P.getStreamInfo().id," to ").concat(vn.getStreamInfo().id)),Kn(vn,P,NaN)):(b.debug("StreamController no next stream found"),P.setIsEndedEventSignaled(!1)),Po(vn?rt.END_OF_PERIOD_STOP_REASON:rt.END_OF_CONTENT_STOP_REASON)}Pt&&Pt.isLast&&(pr(),J.stopSteeringRequestTimer())}function Si(Pt){var vn=Pt||po().manifestInfo.duration;ve.setDuration(vn)}function Ni(Pt){var vn=Ke.getURIFragmentData();if(!vn||!vn.t)return NaN;var Yn=fs()[0].getStreamInfo().start;return vn.t=vn.t.split(",")[0],za(Pt,vn.t,Yn)}function zi(Pt,vn){var Yn=0;return Pt||(Yn=fs()[0].getStreamInfo().start),za(Pt,vn,Yn)}function za(Pt,vn,Yn){var hr=z.getRegularPeriods()[0],Lr=vn.toString(),Ur=-1!==Lr.indexOf("posix:")?"now"===Lr.substring(6)?Date.now()/1e3:parseFloat(Lr.substring(6)):NaN;return Pt&&!isNaN(Ur)?Te.calcPresentationTimeFromWallTime(new Date(1e3*Ur),hr):parseFloat(Lr)+Yn}function us(Pt,vn){try{var Yn=NaN;if(vn&&!isNaN(vn.maxFragmentDuration)&&isFinite(vn.maxFragmentDuration))return vn.maxFragmentDuration;if(Pt&&1===Pt.length){var hr=Pt[0],Lr=[_.Z.VIDEO,_.Z.AUDIO,_.Z.TEXT].reduce(function(dr,hi){var ai=z.getMediaInfoForType(hr,hi);return ai&&!1!==ai.isFragmented&&dr.push(ai),dr},[]).reduce(function(dr,hi){var ai=z.getVoRepresentations(hi);return ai&&ai.length>0&&ai.forEach(function(Ua){Ua&&dr.push(Ua)}),dr},[]).reduce(function(dr,hi){var ai=z.convertRepresentationToRepresentationInfo(hi);return ai&&ai.fragmentDuration&&!isNaN(ai.fragmentDuration)&&dr.push(ai.fragmentDuration),dr},[]);Yn=Math.max.apply(Math,function(dr){if(Array.isArray(dr))return Bs(dr)}(Ur=Lr)||function(dr){if(typeof Symbol<"u"&&Symbol.iterator in Object(dr))return Array.from(dr)}(Ur)||function(dr,hi){if(dr){if("string"==typeof dr)return Bs(dr,undefined);var ai=Object.prototype.toString.call(dr).slice(8,-1);return"Object"===ai&&dr.constructor&&(ai=dr.constructor.name),"Map"===ai||"Set"===ai?Array.from(dr):"Arguments"===ai||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ai)?Bs(dr,undefined):void 0}}(Ur)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Yn)?Yn:NaN}catch{return NaN}var Ur}function Wa(Pt){if(Pt.error)Fe=!0,ka();else{b.info("Manifest updated... updating data system wide.");var vn=Pt.manifest;z.updatePeriods(vn);var Yn=z.getUTCTimingSources();!z.getIsDynamic()||Yn&&0!==Yn.length||pt.trigger(T.Z.CONFORMANCE_VIOLATION,{level:Ri.LEVELS.WARNING,event:Ri.EVENTS.NO_UTC_TIMING_ELEMENT});var hr=z.getIsDynamic()?Yn.concat(ht.getUTCTimingSources()):Yn;j.filterUnsupportedFeatures(vn).then(function(){pe.initialize(vn),fe.attemptSync(hr,z.getIsDynamic())})}}function aa(){return!!P&&P.getHasVideoTrack()}function sa(){return!!P&&P.getHasAudioTrack()}function Po(Pt,vn){vn=vn||new Date,di().forEach(function(Yn){Yn.finalisePlayList(vn,Pt)}),le.addPlayList()}function cs(Pt){le.createPlaylistMetrics(1e3*ke.getTime(),Pt)}function eo(Pt){if(Pt.error){var vn="";switch(Pt.error.code){case 1:vn="MEDIA_ERR_ABORTED";break;case 2:vn="MEDIA_ERR_NETWORK";break;case 3:vn="MEDIA_ERR_DECODE",ut.counts.mediaErrorDecode+=1;break;case 4:vn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:vn="MEDIA_ERR_ENCRYPTED";break;default:vn="UNKNOWN"}"MEDIA_ERR_DECODE"===vn&&tt.get().errors.recoverAttempts.mediaErrorDecode>=ut.counts.mediaErrorDecode?function(){b.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Yn=ke.getTime();P.deactivate(!1),b.warn("MediaSource has been resetted. Resuming playback from time ".concat(Yn)),zn(Yn,!1,!1)}():(me=!0,Pt.error.message&&(vn+=" ("+Pt.error.message+")"),Pt.error.msExtendedCode&&(vn+=" (0x"+(Pt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),b.fatal("Video Element Error: "+vn),Pt.error&&b.fatal(Pt.error),Pe.error(new xe.Z(Pt.error.code,vn)),ka())}}function po(){return P?P.getStreamInfo():null}function Ei(Pt){for(var vn=0,Yn=Be.length;vn<Yn;vn++)if(Be[vn].getId()===Pt)return Be[vn];return null}function nl(Pt){isNaN(Pt.newDuration)||Si(Pt.newDuration)}function rl(){Be=[],Ve=NaN,ie=null,Ae=!1,P=null,me=!1,Fe=!1,lt=!0,qt=!0,ft=!1,Q=!0,Kt=null,St=!1,wn=!1,Bt=[],Jt=null,ut={counts:{mediaErrorDecode:0}}}function ka(){Qt(),fe.reset(),Po(me||Fe?rt.FAILURE_STOP_REASON:rt.USER_REQUEST_STOP_REASON);for(var Pt=0,vn=Be?Be.length:0;Pt<vn;Pt++)Be[Pt].reset(me);pt.off(T.Z.PLAYBACK_TIME_UPDATED,Re,C),pt.off(T.Z.PLAYBACK_SEEKING,er,C),pt.off(T.Z.PLAYBACK_ERROR,eo,C),pt.off(T.Z.PLAYBACK_STARTED,at,C),pt.off(T.Z.PLAYBACK_PAUSED,Xt,C),pt.off(T.Z.PLAYBACK_ENDED,Fi,C),pt.off(T.Z.METRIC_ADDED,Pl,C),pt.off(T.Z.MANIFEST_VALIDITY_CHANGED,nl,C),pt.off(T.Z.BUFFER_LEVEL_UPDATED,Ft,C),pt.off(T.Z.QUALITY_CHANGE_REQUESTED,dt,C),w.Z.KEY_SESSION_UPDATED&&pt.off(w.Z.KEY_SESSION_UPDATED,Mt,C),pt.off(w.Z.MANIFEST_UPDATED,Wa,C),pt.off(w.Z.STREAM_BUFFERING_COMPLETED,dn,C),pt.off(w.Z.TIME_SYNCHRONIZATION_COMPLETED,Sn,C),pt.off(w.Z.CURRENT_TRACK_CHANGED,an,C),pt.off(w.Z.SETTING_UPDATED_LIVE_DELAY,Gt,C),pt.off(w.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Gt,C),pe.reset(),W.reset(),Ge.reset(),le.clearAllCurrentMetrics(),U.setValue(null),K.reset(),Te.reset(),ge.reset(),Ie&&(ve.detachMediaSource(ae),Ie=null),ae=null,ie&&(ie=null,X=null,U.getValue()&&pt.trigger(w.Z.PROTECTION_DESTROYED,{data:U.getValue().url})),pr(),pt.trigger(w.Z.STREAM_TEARDOWN_COMPLETE),rl()}function Pl(Pt){if(Pt.metric===k.Z.DVR_INFO){var vn=sa()?_.Z.AUDIO:_.Z.VIDEO;Pt.mediaType===vn&&ve.setSeekable(Pt.value.range.start,Pt.value.range.end)}}function fs(){return Be}return C={initialize:function(Pt,vn){Qt(),Q=Pt,X=vn,Te.initialize(),(W=Gu(ct).create()).setConfig({manifestModel:U,adapter:z,manifestLoader:K,errHandler:Pe,settings:tt,contentSteeringController:J}),W.initialize(),(Ge=ju(ct).getInstance()).setConfig({manifestUpdater:W,playbackController:ke,settings:tt}),Ge.start(),fe.setConfig({dashMetrics:le,baseURLController:pe,errHandler:Pe,settings:tt}),fe.initialize(),ve.setConfig({settings:tt}),ie&&(pt.trigger(w.Z.PROTECTION_CREATED,{controller:ie}),ie.setMediaElement(ae.getElement()),X&&ie.setProtectionData(X)),pt.on(T.Z.PLAYBACK_TIME_UPDATED,Re,C),pt.on(T.Z.PLAYBACK_SEEKING,er,C),pt.on(T.Z.PLAYBACK_ERROR,eo,C),pt.on(T.Z.PLAYBACK_STARTED,at,C),pt.on(T.Z.PLAYBACK_PAUSED,Xt,C),pt.on(T.Z.PLAYBACK_ENDED,Fi,C),pt.on(T.Z.METRIC_ADDED,Pl,C),pt.on(T.Z.MANIFEST_VALIDITY_CHANGED,nl,C),pt.on(T.Z.BUFFER_LEVEL_UPDATED,Ft,C),pt.on(T.Z.QUALITY_CHANGE_REQUESTED,dt,C),w.Z.KEY_SESSION_UPDATED&&pt.on(w.Z.KEY_SESSION_UPDATED,Mt,C),pt.on(w.Z.MANIFEST_UPDATED,Wa,C),pt.on(w.Z.STREAM_BUFFERING_COMPLETED,dn,C),pt.on(w.Z.TIME_SYNCHRONIZATION_COMPLETED,Sn,C),pt.on(w.Z.CURRENT_TRACK_CHANGED,an,C),pt.on(w.Z.SETTING_UPDATED_LIVE_DELAY,Gt,C),pt.on(w.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Gt,C)},getActiveStreamInfo:po,addDVRMetric:Bn,hasVideoTrack:aa,hasAudioTrack:sa,getStreamById:Ei,getStreamForTime:Pn,getTimeRelativeToStreamId:function(Pt,vn){for(var Yn=null,hr=0,Lr=0,Ur=null,dr=0;dr<Be.length;dr++){if(Lr=(Yn=Be[dr]).getStartTime(),Ur=Yn.getDuration(),Number.isFinite(Lr)&&(hr=Lr),Yn.getId()===vn)return Pt-hr;Number.isFinite(Ur)&&(hr+=Ur)}return null},load:function(Pt){var vn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;Qt(),Ve=vn,K.load(Pt)},loadWithManifest:function(Pt){var vn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;(function on(){if(!W||!W.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),Ve=vn,W.setManifest(Pt)},getActiveStreamProcessors:di,setConfig:function(Pt){Pt&&(Pt.capabilities&&(R=Pt.capabilities),Pt.capabilitiesFilter&&(j=Pt.capabilitiesFilter),Pt.manifestLoader&&(K=Pt.manifestLoader),Pt.manifestModel&&(U=Pt.manifestModel),Pt.mediaPlayerModel&&(gt=Pt.mediaPlayerModel),Pt.customParametersModel&&(ht=Pt.customParametersModel),Pt.protectionController&&(ie=Pt.protectionController),Pt.adapter&&(z=Pt.adapter),Pt.dashMetrics&&(le=Pt.dashMetrics),Pt.errHandler&&(Pe=Pt.errHandler),Pt.timelineConverter&&(Te=Pt.timelineConverter),Pt.videoModel&&(ae=Pt.videoModel),Pt.playbackController&&(ke=Pt.playbackController),Pt.serviceDescriptionController&&(We=Pt.serviceDescriptionController),Pt.contentSteeringController&&(J=Pt.contentSteeringController),Pt.textController&&(oe=Pt.textController),Pt.abrController&&(Oe=Pt.abrController),Pt.mediaController&&(je=Pt.mediaController),Pt.settings&&(tt=Pt.settings),Pt.baseURLController&&(pe=Pt.baseURLController),Pt.uriFragmentModel&&(Ke=Pt.uriFragmentModel),Pt.segmentBaseController&&(de=Pt.segmentBaseController))},setProtectionData:function(Pt){X=Pt,ie&&ie.setProtectionData(X)},getIsStreamSwitchInProgress:function(){return Ae},switchToVideoElement:function(Pt){P&&(ke.initialize(po()),zn(Pt,!1,!0))},getHasMediaOrInitialisationError:function(){return me||Fe},getStreams:fs,getActiveStream:function(){return P},getInitialPlayback:function(){return lt},getAutoPlay:function(){return Q},reset:ka},b=(0,G.Z)(ct).getInstance().getLogger(C),fe=yl(ct).getInstance(),ve=lh(ct).getInstance(),ge=ze(ct).getInstance(),rl(),C}qu.__dashjs_factory_name="StreamController";var $l=F.Z.getSingletonFactory(qu);function El(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe=this.context,de=(0,V.Z)(pe).getInstance();function Ke(){J.debug("Stopping the gap controller"),W&&(clearInterval(W),W=null),function(){de.off(w.Z.WALLCLOCK_TIME_UPDATED,Pe,this),de.off(w.Z.INITIAL_STREAM_SWITCH,ge,this),de.off(w.Z.PLAYBACK_SEEKING,Oe,this),de.off(w.Z.BUFFER_REPLACEMENT_STARTED,je,C),de.off(w.Z.TRACK_CHANGE_RENDERED,Ge,C)}(),W=null,K=NaN,j=0,ve=null,fe={}}function Oe(){ve&&(clearTimeout(ve),ve=null)}function je(X){try{if(X.streamId!==z.getActiveStreamInfo().id||X.mediaType!==_.Z.VIDEO&&X.mediaType!==_.Z.AUDIO)return;X.streamId===z.getActiveStreamInfo().id&&(fe[X.mediaType]=!0)}catch(Q){J.error(Q)}}function Ge(X){X&&X.mediaType&&(fe[X.mediaType]=!1)}function ge(){W||function(){try{W||(J.debug("Starting the gap controller"),W=setInterval(function(){Te()&&oe(U.getTime())},100))}catch{}}()}function Pe(){if(Te(R.get().streaming.gaps.enableSeekFix)&&++j>=10){var X=U.getTime();b===X?oe(X,!0):(b=X,K=NaN),j=0}}function Te(){var X=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!z.getActiveStream())return!1;var Q=Object.keys(fe).some(function(me){return fe[me]}),Ae=!!X&&function Be(){var X=z.getActiveStream(),Q=parseFloat((X.getStartTime()+X.getDuration()).toFixed(5));return U.getTime()+R.get().streaming.gaps.threshold>=Q}();return!Q&&R.get().streaming.gaps.jumpGaps&&z.getActiveStreamProcessors().length>0&&(!U.isSeeking()||Ae)&&!U.isPaused()&&!z.getIsStreamSwitchInProgress()&&!z.getHasMediaOrInitialisationError()}function oe(X){var Q,Ae=arguments.length>1&&void 0!==arguments[1]&&arguments[1],me=R.get().streaming.gaps.enableStallFix,Fe=R.get().streaming.gaps.stallSeek,Ie=R.get().streaming.gaps.smallGapLimit,ae=R.get().streaming.gaps.jumpLargeGaps,ke=le.getBufferRange(),We=NaN,gt=!1;if(Q=function P(X,Q){try{if(!X||X.length<=1&&Q>0)return NaN;for(var Ae=NaN,me=0;isNaN(Ae)&&me<X.length;){var Fe=me>0?X.end(me-1):0;Q<X.start(me)&&Fe-Q<R.get().streaming.gaps.threshold&&(Ae=me),me+=1}return Ae}catch{return null}}(ke,X),!isNaN(Q)){var ht=ke.start(Q),ft=ht-X;ft>0&&(ft<=Ie||ae)&&(We=ht)}var lt=U.getTimeToStreamEnd();if(isNaN(We)&&Ae&&isFinite(lt)&&!isNaN(lt)&&lt<Ie&&(We=parseFloat(U.getStreamEndTime().toFixed(5)),gt=!0),me&&isNaN(We)&&Ae&&isNaN(Q)&&function ie(X,Q){for(var Ae=0,me=X.length;Ae<me;Ae++)if(Q>=X.start(Ae)&&Q<=X.end(Ae))return!0;return!1}(ke,X)&&(0===Fe?(J.warn("Toggle play pause to break stall"),le.pause(),le.play()):(J.warn("Jumping ".concat(Fe,"s to break stall")),We=X+Fe)),We>0&&K!==We&&We>X&&!ve){var qt=We-X;if(gt){var Kt=z.getStreamForTime(We),_t=Kt&&!!Kt.getPreloaded();J.warn("Jumping to end of stream because of gap from ".concat(X," to ").concat(We,". Gap duration: ").concat(qt)),U.seek(We,!0,_t)}else{var Bt=U.getIsDynamic(),wn=Q>0?ke.end(Q-1):X,tt=Bt?1e3*Math.max(0,qt-.1):0;ve=window.setTimeout(function(){U.seek(We,!0,!0),J.warn("Jumping gap occuring in period ".concat(z.getActiveStream().getStreamId()," starting at ").concat(wn," and ending at ").concat(We,". Jumping by: ").concat(We-wn)),ve=null},tt)}K=We}}return C={reset:Ke,setConfig:function(X){X&&(X.settings&&(R=X.settings),X.playbackController&&(U=X.playbackController),X.streamController&&(z=X.streamController),X.videoModel&&(le=X.videoModel))},initialize:function(){!function(){de.on(w.Z.WALLCLOCK_TIME_UPDATED,Pe,this),de.on(w.Z.INITIAL_STREAM_SWITCH,ge,this),de.on(w.Z.PLAYBACK_SEEKING,Oe,this),de.on(w.Z.BUFFER_REPLACEMENT_STARTED,je,C),de.on(w.Z.TRACK_CHANGE_RENDERED,Ge,C)}()}},J=(0,G.Z)(pe).getInstance().getLogger(C),Ke(),C}El.__dashjs_factory_name="GapController";var Vs=F.Z.getSingletonFactory(El);function _l(){var C,b,R,j,W,K,U,z,le,ve,fe=this.context,J=(0,V.Z)(fe).getInstance();function pe(){b=!1;var Be=Dr.Z.parseUserAgent();R=Be&&Be.browser&&Be.browser.name&&"safari"===Be.browser.name.toLowerCase()}function de(){b=!1}function Ke(Be){if(Be.streamId===K.getActiveStreamInfo().id&&le){var P=U.getLiveDelay();U.getBufferLevel()>P/2&&(le=!1)}}function Oe(Be){Be.streamId===K.getActiveStreamInfo().id&&(le=Be.state===k.Z.BUFFER_EMPTY)}function je(){z.getCatchupModeEnabled()||j.setPlaybackRate(1)}function Ge(){U.getIsDynamic()&&z.getCatchupModeEnabled()&&(z.getCatchupPlaybackRates().max>0||z.getCatchupPlaybackRates().min<0)&&!U.isPaused()&&!U.isSeeking()&&function(){try{return!(!U.getTime()>0||b)&&(Pe()===_.Z.LIVE_CATCHUP_MODE_LOLP?function(Be,P){try{return Math.abs(ge())>0||Be<P}catch{return!1}}(U.getBufferLevel(),W.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(ge())>0}catch{return!1}}())}catch{return!1}}()&&function(){if(!b&&j){var Be,P=j.getPlaybackRate(),ie=z.getCatchupPlaybackRates(),oe=U.getBufferLevel(),X=ge(),Q=z.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&X>Q)ve.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),b=!0,U.seekToCurrentLive(!0,!1);else{var Ae=U.getCurrentLiveLatency(),me=U.getLiveDelay();Be=Pe()===_.Z.LIVE_CATCHUP_MODE_LOLP?function(Ie,ae,ke,We,gt){var ht;if(gt<We){var ft=Math.abs(Ie.min);ht=1-ft+2*ft/(1+Math.pow(Math.E,-5*(gt-We))),ve.debug("[LoL+ playback control_buffer-based] bufferLevel: "+gt+", newRate: "+ht)}else{if(Math.abs(ae-ke)<=.02*ke)ht=1;else{var qt=ae-ke,Kt=qt<0?Math.abs(Ie.min):Ie.max;ht=1-Kt+2*Kt/(1+Math.pow(Math.E,-5*qt))}ve.debug("[LoL+ playback control_latency-based] latency: "+ae+", newRate: "+ht)}return ht}(ie,Ae,me,W.get().streaming.liveCatchup.playbackBufferMin,oe):function(Ie,ae,ke,We){if(le)return 1;var gt=ae-ke,ht=gt<0?Math.abs(Ie.min):Ie.max,lt=1-ht+2*ht/(1+Math.pow(Math.E,-5*gt));return U.getPlaybackStalled()&&We<=ke/2&&gt>0&&(lt=1),lt}(ie,Ae,me,oe);var Fe=R?.25:.02/(.5/ie.max);Be&&Math.abs(P-Be)>=Fe&&(ve.debug("[CatchupController]: Setting playback rate to ".concat(Be)),j.setPlaybackRate(Be))}}}()}function ge(){return U.getCurrentLiveLatency()-U.getLiveDelay()}function Pe(){var Be=W.get().streaming.liveCatchup.playbackBufferMin;return W.get().streaming.liveCatchup.mode!==_.Z.LIVE_CATCHUP_MODE_LOLP||null===Be||isNaN(Be)?_.Z.LIVE_CATCHUP_MODE_DEFAULT:_.Z.LIVE_CATCHUP_MODE_LOLP}function Te(){z.getCatchupPlaybackRates(!0)}return C={reset:function(){J.off(T.Z.BUFFER_LEVEL_UPDATED,Ke,C),J.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,C),J.off(T.Z.PLAYBACK_PROGRESS,Ge,C),J.off(T.Z.PLAYBACK_TIME_UPDATED,Ge,C),J.off(T.Z.PLAYBACK_SEEKED,de,C),J.off(w.Z.SETTING_UPDATED_CATCHUP_ENABLED,je,C),J.off(w.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Te,C),J.off(w.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Te,C),J.off(T.Z.STREAM_INITIALIZED,Te,C),pe(),j.setPlaybackRate(1,!0)},setConfig:function(Be){Be&&(Be.settings&&(W=Be.settings),Be.videoModel&&(j=Be.videoModel),Be.streamController&&(K=Be.streamController),Be.playbackController&&(U=Be.playbackController),Be.mediaPlayerModel&&(z=Be.mediaPlayerModel))},initialize:function(){J.on(T.Z.BUFFER_LEVEL_UPDATED,Ke,C),J.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,C),J.on(T.Z.PLAYBACK_PROGRESS,Ge,C),J.on(T.Z.PLAYBACK_TIME_UPDATED,Ge,C),J.on(T.Z.PLAYBACK_SEEKED,de,C),J.on(w.Z.SETTING_UPDATED_CATCHUP_ENABLED,je,C),J.on(w.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Te,C),J.on(w.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Te,C),J.on(T.Z.STREAM_INITIALIZED,Te,C),Te()}},ve=(0,G.Z)(fe).getInstance().getLogger(C),pe(),C}_l.__dashjs_factory_name="CatchupController";var Ku=F.Z.getSingletonFactory(_l),wc=[_.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME];function Es(){var C,b,R,j,W;function U(){b={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},R=[]}function z(le,ve,fe){try{b[le][ve]=fe/1e3}catch(J){j.error(J)}}return C={getServiceDescriptionSettings:function(){return b},getProducerReferenceTimeOffsets:function(){return R},calculateProducerReferenceTimeOffsets:function(le){try{var ve=[];if(le&&le.length>0){var fe=[_.Z.VIDEO,_.Z.AUDIO,_.Z.TEXT],J=W.getAvailabilityStartTime()/1e3;le.forEach(function(pe){var de=fe.reduce(function(Ke,Oe){return Ke.concat(W.getAllMediaInfoForType(pe,Oe))},[]).reduce(function(Ke,Oe){return W.getProducerReferenceTimes(pe,Oe).forEach(function(je){var Ge=W.getVoRepresentations(Oe);if(Ge&&Ge.length>0&&Ge[0].adaptation&&Ge[0].segmentInfoType===E.Z.SEGMENT_TEMPLATE){var ge=Ge[0],Pe=new Date(je[E.Z.WALL_CLOCK_TIME]).getTime()/1e3-(je[E.Z.PRESENTATION_TIME]/ge[E.Z.TIMESCALE]-ge[E.Z.PRESENTATION_TIME_OFFSET]+pe.start);Ke.push({id:je[E.Z.ID],to:J-Pe})}}),Ke},[]);ve=ve.concat(de)})}R=ve}catch(pe){j.error(pe),R=[]}},applyServiceDescription:function(le){if(le&&le.serviceDescriptions){var ve=le.serviceDescriptions.filter(function(pe){return wc.includes(pe.schemeIdUri)}),fe=le.serviceDescriptions.filter(function(pe){return null==pe.schemeIdUri}),J=ve.length>0?ve[ve.length-1]:fe[fe.length-1];J&&(J.latency&&J.latency.target>0&&function(pe){var de,Ge;if(de={liveDelay:(Ge=pe).latency.target/1e3,maxDrift:!isNaN(Ge.latency.max)&&Ge.latency.max>Ge.latency.target?(Ge.latency.max-Ge.latency.target+500)/1e3:NaN,referenceId:Ge.latency.referenceId||NaN},R.length>0){var Ke=function(Ge){var ge,Pe=0,Te=R.filter(function(Be){return Be.id===Ge.referenceId});return 0===Te.length?(Pe=R.length>0?R[0].to:0,ge=R[0].id||NaN):(Pe=Te[0].to||0,ge=Te[0].id||NaN),{to:Pe,id:ge}}(de),Oe=Ke.to,je=Ke.id;b.liveDelay=de.liveDelay-Oe,b.liveCatchup.maxDrift=de.maxDrift,j.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Oe," from ProducerReferenceTime element with id ").concat(je,".\n                Live Delay: ").concat(de.liveDelay-Oe,", Live catchup max drift: ").concat(de.maxDrift,"\n            "))}else b.liveDelay=de.liveDelay,b.liveCatchup.maxDrift=de.maxDrift,j.debug("Found latency properties coming from service description: Live Delay: ".concat(de.liveDelay,", Live catchup max drift: ").concat(de.maxDrift))}(J),J.playbackRate&&(de=(pe=J).playbackRate.min?Math.round(1e3*(pe.playbackRate.min-1))/1e3:NaN,Ke=pe.playbackRate.max?Math.round(1e3*(pe.playbackRate.max-1))/1e3:NaN,b.liveCatchup.playbackRate.min=de,b.liveCatchup.playbackRate.max=Ke,j.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(de)),j.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(Ke))),J.operatingBandwidth&&function(pe){if(pe&&pe.operatingBandwidth&&pe.operatingBandwidth.mediaType&&"all"!==pe.operatingBandwidth.mediaType){var de={};de.minBandwidth=pe.operatingBandwidth.min,de.maxBandwidth=pe.operatingBandwidth.max,de.targetBandwidth=pe.operatingBandwidth.target;var Ke=[];"video"===pe.operatingBandwidth.mediaType||"audio"===pe.operatingBandwidth.mediaType?Ke.push(pe.operatingBandwidth.mediaType):"any"===pe.operatingBandwidth.mediaType&&(Ke.push("audio"),Ke.push("video")),Ke.forEach(function(Oe){isNaN(de.minBandwidth)||z("minBitrate",Oe,de.minBandwidth),isNaN(de.maxBandwidth)||z("maxBitrate",Oe,de.maxBandwidth),isNaN(de.targetBandwidth)||z("initialBitrate",Oe,de.targetBandwidth)})}}(J),J.contentSteering&&function(pe){b.contentSteering=pe.contentSteering}(J))}var pe,de,Ke},reset:function(){U()},setConfig:function(le){le&&le.adapter&&(W=le.adapter)}},j=(0,G.Z)(this.context).getInstance().getLogger(C),U(),C}Es.__dashjs_factory_name="ServiceDescriptionController";var Rc=F.Z.getSingletonFactory(Es),uo=ne(3973),Tl=ne.n(uo),Mc=ne(3039);function ui(){var C,b,R,j,W,K,U,z,le=this.context,ve=(0,V.Z)(le).getInstance();function fe(ae,ke){return ae&&R[ke]&&R[ke][ae]?R[ke][ae].list:[]}function J(ae,ke){return ae&&R[ke]&&R[ke][ae]?R[ke][ae].current:null}function pe(ae){var ke=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ae&&ae.streamInfo){var We=ae.type,ht=ae.streamInfo.id,ft=J(We,ht);if(R[ht]&&R[ht][We]&&(R[ht][We].current=ae,R[ht][We].current&&(We!==_.Z.TEXT&&!Oe(ae,ft)||We===_.Z.TEXT&&ae.isFragmented)&&ve.trigger(w.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:ft,newMediaInfo:ae,switchMode:j.get().streaming.trackSwitchMode[We]},{streamId:ht}),!ke)){var lt=function Ge(ae){var ke={lang:ae.lang,viewpoint:ae.viewpoint,roles:ae.roles,accessibility:ae.accessibility,audioChannelConfiguration:ae.audioChannelConfiguration,codec:ae.codec};return ke.lang||ke.viewpoint||ke.role&&ke.role.length>0||ke.accessibility&&ke.accessibility.length>0||ke.audioChannelConfiguration&&ke.audioChannelConfiguration.length>0?ke:null}(ae);if(!lt||!R[ht][We].storeLastSettings)return;lt.roles&&(lt.role=lt.roles[0],delete lt.roles),lt.accessibility&&(lt.accessibility=lt.accessibility[0]),lt.audioChannelConfiguration&&(lt.audioChannelConfiguration=lt.audioChannelConfiguration[0]),K[We]=lt,z.setSavedMediaSettings(We,lt)}}}function de(ae,ke){ae&&ke&&(W[ae]=ke)}function Ke(ae){return ae?W[ae]:null}function Oe(ae,ke){if(!ae&&!ke)return!0;if(!ae||!ke)return!1;var We=ae.id===ke.id,gt=ae.viewpoint===ke.viewpoint,ht=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(ke.viewpointsWithSchemeIdUri),ft=ae.lang===ke.lang,lt=ae.codec===ke.codec,qt=ae.roles.toString()===ke.roles.toString(),Kt=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(ke.rolesWithSchemeIdUri),_t=ae.accessibility.toString()===ke.accessibility.toString(),Bt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(ke.accessibilitiesWithSchemeIdUri),wn=ae.audioChannelConfiguration.toString()===ke.audioChannelConfiguration.toString(),tt=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(ke.audioChannelConfigurationsWithSchemeIdUri);return We&&lt&&gt&&ht&&ft&&qt&&Kt&&_t&&Bt&&wn&&tt}function je(){R={},K={},W={audio:null,video:null,text:null}}function ge(ae,ke,We){var gt=[];return ae.forEach(function(ht){ke(We,ht)&&gt.push(ht)}),0!==gt.length?gt:ae}function Pe(ae,ke){return!ae.lang||ae.lang instanceof RegExp?ke.lang.match(ae.lang):""!==ke.lang&&(0,Mc.extendedFilter)(ke.lang,Tl()(ae.lang)).length>0}function Te(ae,ke){return null==ae.index||ke.index===ae.index}function Be(ae,ke){return!ae.viewpoint||ae.viewpoint===ke.viewpoint}function P(ae,ke){var We=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!ae.role||!!ke.roles.filter(function(ht){return ht===ae.role})[0]||ke.type===_.Z.AUDIO&&We}function ie(ae,ke){return ae.accessibility?!!ke.accessibility.filter(function(We){return We===ae.accessibility})[0]:!ke.accessibility.length}function oe(ae,ke){return!ae.audioChannelConfiguration||!!ke.audioChannelConfiguration.filter(function(We){return We===ae.audioChannelConfiguration})[0]}function X(ae,ke){return!ae.codec||ae.codec===ke.codec}function Q(ae){var ke,We=0,gt=[];return ae.forEach(function(ht){(ke=Math.max.apply(Math,ht.bitrateList.map(function(ft){return ft.bandwidth})))>We?(We=ke,gt=[ht]):ke===We&&gt.push(ht)}),gt}function Ae(ae){var ke,We=1/0,gt=[];return ae.forEach(function(ht){var ft=ht.bitrateList.reduce(function(lt,qt){var Kt=Math.max(1,qt.width*qt.height);return lt+qt.bandwidth/Kt},0);(ke=ft/ht.bitrateList.length)<We?(We=ke,gt=[ht]):ke===We&&gt.push(ht)}),gt}function me(ae){var ke,We=0,gt=[];return ae.forEach(function(ht){(ke=ht.representationCount)>We?(We=ke,gt=[ht]):ke===We&&gt.push(ht)}),gt}function Fe(ae,ke){if(ae===_.Z.TEXT)return ke[0];var We,lt,qt,Kt,gt=j.get().streaming.selectionModeForInitialTrack,ht=U.getCustomInitialTrackSelectionFunction();if(ht&&"function"==typeof ht)We=ht(ke);else switch(gt){case _.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:lt=0,qt=[],ke.forEach(function(_t){isNaN(_t.selectionPriority)||(_t.selectionPriority>lt?(lt=_t.selectionPriority,qt=[_t]):_t.selectionPriority===lt&&qt.push(_t))}),(Kt=qt).length>1&&(Kt=Q(Kt)),Kt.length>1&&(Kt=me(Kt)),We=Kt;break;case _.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:We=function(ft){var lt=Q(ft);return lt.length>1&&(lt=me(lt)),lt}(ke);break;case _.Z.TRACK_SELECTION_MODE_FIRST_TRACK:We=Ie(ke);break;case _.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:We=function(ft){var lt=Ae(ft);return lt.length>1&&(lt=Q(lt)),lt}(ke);break;case _.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:We=function(ft){var lt=me(ft);return lt.length>1&&(lt=Q(ft)),lt}(ke);break;default:b.warn("Track selection mode ".concat(gt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),We=Ie(ke)}return We.length>0?We[0]:ke[0]}function Ie(ae){return ae[0]}return C={setInitialMediaSettingsForType:function(ae,ke){var We=K[ae]||Ke(ae),gt=fe(ae,ke.id),ht=[];We||((We=z.getSavedMediaSettings(ae))&&delete We.codec,de(ae,We)),gt&&0!==gt.length&&(We&&(ht=ge(ht=Array.from(gt),Pe,We),ht=ge(ht,Te,We),ht=ge(ht,Be,We),ae===_.Z.AUDIO&&K[ae]||(ht=ge(ht,P,We)),ht=ge(ht,ie,We),ht=ge(ht,oe,We),ht=ge(ht,X,We)),0===ht.length?pe(Fe(ae,gt),!0):pe(ht.length>1?Fe(ae,ht):ht[0]))},addTrack:function(ae){if(ae){var ke=ae.type;if((We=ke)===_.Z.AUDIO||We===_.Z.VIDEO||We===_.Z.TEXT||We===_.Z.IMAGE){var We,gt,ht=ae.streamInfo.id;R[ht]||(R[ht]={audio:{list:[],storeLastSettings:gt=j.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:gt,current:null},text:{list:[],storeLastSettings:gt,current:null},image:{list:[],storeLastSettings:gt,current:null}});for(var ft=R[ht][ke].list,lt=0,qt=ft.length;lt<qt;++lt)if(Oe(ft[lt],ae))return;ft.push(ae)}}},getTracksFor:fe,getCurrentTrackFor:J,isCurrentTrack:function(ae){if(!ae)return!1;var ke=ae.type,We=ae.streamInfo.id;return R[We]&&R[We][ke]&&Oe(R[We][ke].current,ae)},setTrack:pe,selectInitialTrack:Fe,setInitialSettings:de,getInitialSettings:Ke,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Ae,getTracksWithWidestRange:me,isTracksEqual:Oe,matchSettings:function(ae,ke){var We=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var gt=!1;if(ae.lang){if(ae.lang instanceof RegExp)gt=ke.lang.match(ae.lang);else if(""!==ke.lang){var ht=Tl()(ae.lang);ht&&(gt=(0,Mc.extendedFilter)(ke.lang,ht).length>0)}}else gt=!0;var ft=null==ae.index||ke.index===ae.index,lt=!ae.viewpoint||ae.viewpoint===ke.viewpoint,qt=!ae.role||!!ke.roles.filter(function(Bt){return Bt===ae.role})[0],Kt=!ae.accessibility||!!ke.accessibility.filter(function(Bt){return Bt===ae.accessibility})[0],_t=!ae.audioChannelConfiguration||!!ke.audioChannelConfiguration.filter(function(Bt){return Bt===ae.audioChannelConfiguration})[0];return gt&&ft&&lt&&(qt||ke.type===_.Z.AUDIO&&We)&&Kt&&_t}catch{return!1}},matchSettingsLang:Pe,matchSettingsIndex:Te,matchSettingsViewPoint:Be,matchSettingsRole:P,matchSettingsAccessibility:ie,matchSettingsAudioChannelConfig:oe,saveTextSettingsDisabled:function(){z.setSavedMediaSettings(_.Z.TEXT,null)},setConfig:function(ae){ae&&(ae.domStorage&&(z=ae.domStorage),ae.settings&&(j=ae.settings),ae.customParametersModel&&(U=ae.customParametersModel))},reset:je},b=(0,G.Z)(le).getInstance().getLogger(C),je(),C}ui.__dashjs_factory_name="MediaController";var Nc=F.Z.getSingletonFactory(ui);F.Z.updateSingletonFactory(ui.__dashjs_factory_name,Nc);var xc=Nc,Ql=function C(b,R){(function(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")})(this,C),this.data={baseUrls:b||null,selectedIdx:R||NaN},this.children=[]};function Jl(){var C,b,R,j,K=bn(this.context).getInstance();function U(fe,J,pe){var de=z(pe);fe[J]?K.areEqual(de,fe[J].data.baseUrls)||(fe[J].data.baseUrls=de,fe[J].data.selectedIdx=NaN):fe[J]=new Ql(de)}function z(fe){var J=R.getBaseURLsFromElement(fe),pe=j.getSynthesizedBaseUrlElements(J);return pe&&pe.length>0&&(J=J.concat(pe)),J}function le(fe,J){var pe=J||b;fe(pe.data),pe.children&&pe.children.forEach(function(de){return le(fe,de)})}function ve(){b=new Ql}return C={reset:ve,update:function(fe){!function(J){!function(){if(!R||!R.hasOwnProperty("getBaseURLsFromElement")||!R.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var pe=z(J);K.areEqual(pe,b.data.baseUrls)||(b.data.baseUrls=pe,b.data.selectedIdx=NaN),J&&J.Period_asArray&&J.Period_asArray.forEach(function(de,Ke){U(b.children,Ke,de),de.AdaptationSet_asArray&&de.AdaptationSet_asArray.forEach(function(Oe,je){U(b.children[Ke].children,je,Oe),Oe.Representation_asArray&&Oe.Representation_asArray.sort(R.getRepresentationSortFunction()).forEach(function(Ge,ge){U(b.children[Ke].children[je].children,ge,Ge)})})})}(fe)},getForPath:function(fe){var J=b,pe=[J.data];return fe&&fe.forEach(function(de){(J=J.children[de])&&pe.push(J.data)}),pe.filter(function(de){return de.baseUrls.length})},invalidateSelectedIndexes:function(fe){le(function(J){isNaN(J.selectedIdx)||fe===J.baseUrls[J.selectedIdx].serviceLocation&&(J.selectedIdx=NaN)})},setConfig:function(fe){fe.adapter&&(R=fe.adapter),fe.contentSteeringController&&(j=fe.contentSteeringController)},getBaseUrls:function(fe){return z(fe)}},ve(),C}Jl.__dashjs_factory_name="BaseURLTreeModel";var Lc=F.Z.getClassFactory(Jl);function eu(C){var b=(C=C||{}).blacklistController;return{select:function(R){return R&&function(W){var K,U,z=0,le=[],ve=0;if((U=W.sort(function(fe,J){var pe=fe.dvb_priority-J.dvb_priority;return isNaN(pe)?0:pe}).filter(function(fe,J,pe){return!J||pe[0].dvb_priority&&fe.dvb_priority&&pe[0].dvb_priority===fe.dvb_priority})).length)return U.length>1&&(U.forEach(function(fe){le.push(z+=fe.dvb_weight)}),K=Math.floor(Math.random()*(z-1)),le.every(function(fe,J){return ve=J,!(K<fe)})),U[ve]}((j=[],R.filter(function(W){return!b.contains(W.serviceLocation)||(W.dvb_priority&&j.push(W.dvb_priority),!1)}).filter(function(W){return!j.length||!W.dvb_priority||-1===j.indexOf(W.dvb_priority)})));var j}}}eu.__dashjs_factory_name="DVBSelector";var Oc=F.Z.getClassFactory(eu);function Hs(C){var b=(C=C||{}).blacklistController;return{select:function(R){var j,W=0;return R&&R.some(function(K,U){return W=U,!b.contains(K.serviceLocation)})&&(j=R[W]),j}}}Hs.__dashjs_factory_name="BasicSelector";var uh=F.Z.getClassFactory(Hs);function Hf(){var C,b,R;function W(){for(var K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],z=0,le=NaN,ve=function(){var J=K[z],pe=U.findIndex(function(de){return de.serviceLocation&&de.serviceLocation===J});if(-1!==pe&&!R.contains(U[pe].serviceLocation))return le=pe,"break";z+=1};z<K.length&&"break"!==ve(););return le}return C={selectBaseUrlIndex:function(K){var U=NaN;if(isNaN(K.selectedIdx)){var z=b.getSteeringDataFromManifest();z&&z.defaultServiceLocationArray.length>0&&(U=W(z.defaultServiceLocationArray,K.baseUrls))}var le=b.getCurrentSteeringResponseData();return K.baseUrls&&K.baseUrls.length&&le&&le.pathwayPriority&&le.pathwayPriority.length&&(U=W(le.pathwayPriority,K.baseUrls)),U},setConfig:function(K){K.blacklistController&&(R=K.blacklistController),K.contentSteeringController&&(b=K.contentSteeringController)}},b=Gr(this.context).getInstance(),C}Hf.__dashjs_factory_name="ContentSteeringSelector";var Gf=F.Z.getClassFactory(Hf);function Pc(){var C,b,R,j,W,K,U=this.context,z=(0,V.Z)(U).getInstance(),le=(0,ot.Z)(U).getInstance();function ve(){b.reset()}return C={chooseSelector:function(fe){(0,Ce.PS)(fe,"boolean"),K=fe?j:R},select:function(fe){if(fe){if(le.get().streaming.applyContentSteering){var J=W.selectBaseUrlIndex(fe);isNaN(J)||-1===J||(fe.selectedIdx=J)}if(!isNaN(fe.selectedIdx))return fe.baseUrls[fe.selectedIdx];var pe=K.select(fe.baseUrls);return pe?(fe.selectedIdx=fe.baseUrls.indexOf(pe),pe):(z.trigger(w.Z.URL_RESOLUTION_FAILED,{error:new xe.Z(Me.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Me.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(K===R&&ve()))}},reset:ve,setConfig:function(fe){fe.selector&&(K=fe.selector),fe.contentSteeringSelector&&(W=fe.contentSteeringSelector)}},b=vl(U).create({updateEventName:w.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:w.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),R=uh(U).create({blacklistController:b}),j=Oc(U).create({blacklistController:b}),(W=Gf(U).create()).setConfig({blacklistController:b}),K=R,C}Pc.__dashjs_factory_name="BaseURLSelector";var Zf=F.Z.getClassFactory(Pc);function ja(){var C,b,R,j,W,K=this.context,U=(0,V.Z)(K).getInstance(),z=(0,At.Z)(K).getInstance();function le(fe){R.update(fe),j.chooseSelector(b.getIsDVB(fe)),U.trigger(T.Z.BASE_URLS_UPDATED,{baseUrls:ve(fe)})}function ve(fe){return R.getBaseUrls(fe)}return C={reset:function(){R.reset(),j.reset()},initialize:function(fe){R.setConfig({adapter:b,contentSteeringController:W}),le(fe)},resolve:function(fe){var J=R.getForPath(fe).reduce(function(pe,de){var Ke=j.select(de);return Ke?(z.isRelative(Ke.url)?pe.url=z.resolve(Ke.url,pe.url):(pe.url=Ke.url,pe.serviceLocation=Ke.serviceLocation),pe.availabilityTimeOffset=Ke.availabilityTimeOffset,pe.availabilityTimeComplete=Ke.availabilityTimeComplete,pe.queryParams=Ke.queryParams,pe):new ha},new ha);if(!z.isRelative(J.url))return J},setConfig:function(fe){fe.baseURLTreeModel&&(R=fe.baseURLTreeModel),fe.baseURLSelector&&(j=fe.baseURLSelector),fe.adapter&&(b=fe.adapter),fe.contentSteeringController&&(W=fe.contentSteeringController)},getBaseUrls:ve,update:le},R=Lc(K).create(),j=Zf(K).create(),U.on(w.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(fe){R.invalidateSelectedIndexes(fe.entry)},C),C}ja.__dashjs_factory_name="BaseURLController";var tu=F.Z.getClassFactory(ja);function ns(C){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function nu(C,b){return(nu=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function iu(C){return(iu=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var ou=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&nu(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=iu(b);if(R){var z=iu(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function ru(C,b){return!b||"object"!==ns(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(K,U){var z;return function(le,ve){if(!(le instanceof ve))throw new TypeError("Cannot call a class as a function")}(this,W),(z=j.call(this)).url=K||null,z.type=U||null,z.mediaType=_.Z.STREAM,z.responseType="",z}return W}(te.Z);function _s(C){C=C||{};var b=this.context,R=(0,V.Z)(b).getInstance(),j=qr(b).create({errHandler:C.errHandler,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,errors:Me});return{load:function(W,K,U){var z=function(ve,fe){K.resolved=!0,K.resolvedContent=ve||null,R.trigger(w.Z.XLINK_ELEMENT_LOADED,{element:K,resolveObject:U,error:ve||fe?null:new xe.Z(Me.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Me.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+W)})};if("urn:mpeg:dash:resolve-to-zero:2013"===W)z(null,!0);else{var le=new ou(W,yt.w.XLINK_EXPANSION_TYPE);j.load({request:le,success:function(ve){z(ve)},error:function(){z(null)}})}},reset:function(){j&&(j.abort(),j=null)}}}_s.__dashjs_factory_name="XlinkLoader";var au=F.Z.getClassFactory(_s),pa=function(C){function b(ge){var Pe=ge.localName;return null==Pe&&(Pe=ge.baseName),null!=Pe&&""!=Pe||(Pe=ge.nodeName),Pe}function R(ge){return"string"==typeof ge?ge.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):ge}function j(ge,Pe,Te,Be){for(var P=0;P<ge.length;P++){var ie=ge[P];if("string"==typeof ie){if(ie==Be)break}else if(ie instanceof RegExp){if(ie.test(Be))break}else if("function"==typeof ie&&ie(Pe,Te,Be))break}return P!=ge.length}function W(ge,Pe,Te){"property"===C.arrayAccessForm&&(ge[Pe+"_asArray"]=ge[Pe]instanceof Array?ge[Pe]:[ge[Pe]]),!(ge[Pe]instanceof Array)&&C.arrayAccessFormPaths.length>0&&j(C.arrayAccessFormPaths,ge,Pe,Te)&&(ge[Pe]=[ge[Pe]])}function K(ge){var Pe=ge.split(/[-T:+Z]/g),Te=new Date(Pe[0],Pe[1]-1,Pe[2]),Be=Pe[5].split(".");if(Te.setHours(Pe[3],Pe[4],Be[0]),Be.length>1&&Te.setMilliseconds(Be[1]),Pe[6]&&Pe[7]){var P=60*Pe[6]+Number(Pe[7]);P=0+("-"==(/\d\d-\d\d:\d\d$/.test(ge)?"-":"+")?-1*P:P),Te.setMinutes(Te.getMinutes()-P-Te.getTimezoneOffset())}else-1!==ge.indexOf("Z",ge.length-1)&&(Te=new Date(Date.UTC(Te.getFullYear(),Te.getMonth(),Te.getDate(),Te.getHours(),Te.getMinutes(),Te.getSeconds(),Te.getMilliseconds())));return Te}function U(ge,Pe,Te,Be){return!(1==Pe&&C.xmlElementsFilter.length>0)||j(C.xmlElementsFilter,ge,Te,Be)}function z(ge,Pe){if(9==ge.nodeType){for(var Te=new Object,Be=ge.childNodes,P=0;P<Be.length;P++)1==(oe=Be[P]).nodeType&&(C.ignoreRoot?Te=z(oe):(Te={})[X=b(oe)]=z(oe));return Te}if(1==ge.nodeType){(Te=new Object).__cnt=0;var ie=[];for(Be=ge.childNodes,P=0;P<Be.length;P++){var oe,X=b(oe=Be[P]);if(8!=oe.nodeType){var Q=Pe+"."+X;if(U(Te,oe.nodeType,X,Q))if(Te.__cnt++,null==Te[X]){var Ae=z(oe,Q);("#text"!=X||/[^\s]/.test(Ae))&&((me={})[X]=Ae,ie.push(me)),Te[X]=Ae,W(Te,X,Q)}else{var me;null!=Te[X]&&(Te[X]instanceof Array||(Te[X]=[Te[X]],W(Te,X,Q))),Ae=z(oe,Q),("#text"!=X||/[^\s]/.test(Ae))&&((me={})[X]=Ae,ie.push(me)),Te[X][Te[X].length]=Ae}}}Te.__children=ie;for(var Fe=b(ge),Ie=0;Ie<ge.attributes.length;Ie++){var ae=ge.attributes[Ie];Te.__cnt++;for(var ke=ae.value,We=0,gt=C.matchers.length;We<gt;We++){var ht=C.matchers[We];ht.test(ae,Fe)&&(ke=ht.converter(ae.value))}Te[C.attributePrefix+ae.name]=ke}var ft=ge.prefix;return null!=ft&&""!=ft&&(Te.__cnt++,Te.__prefix=ft),null!=Te["#text"]&&(Te.__text=Te["#text"],Te.__text instanceof Array&&(Te.__text=Te.__text.join("\n")),C.stripWhitespaces&&(Te.__text=Te.__text.trim()),delete Te["#text"],"property"==C.arrayAccessForm&&delete Te["#text_asArray"],Te.__text=function(lt,qt,Kt){if(C.datetimeAccessFormPaths.length>0){var _t=Kt.split(".#")[0];return j(C.datetimeAccessFormPaths,lt,qt,_t)?K(lt):lt}return lt}(Te.__text,X,Pe+"."+X)),null!=Te["#cdata-section"]&&(Te.__cdata=Te["#cdata-section"],delete Te["#cdata-section"],"property"==C.arrayAccessForm&&delete Te["#cdata-section_asArray"]),0==Te.__cnt&&"text"==C.emptyNodeForm?Te="":1==Te.__cnt&&null!=Te.__text?Te=Te.__text:1!=Te.__cnt||null==Te.__cdata||C.keepCData?Te.__cnt>1&&null!=Te.__text&&C.skipEmptyTextNodesForObj&&(C.stripWhitespaces&&""==Te.__text||""==Te.__text.trim())&&delete Te.__text:Te=Te.__cdata,delete Te.__cnt,!C.enableToStringFunc||null==Te.__text&&null==Te.__cdata||(Te.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),Te}if(3==ge.nodeType||4==ge.nodeType)return ge.nodeValue}function le(ge,Pe,Te,Be){var P="<"+(null!=ge&&null!=ge.__prefix?ge.__prefix+":":"")+Pe;if(null!=Te)for(var ie=0;ie<Te.length;ie++){var oe=Te[ie],X=ge[oe];C.escapeMode&&(X=R(X)),P+=" "+oe.substr(C.attributePrefix.length)+"=",P+=C.useDoubleQuotes?'"'+X+'"':"'"+X+"'"}return P+(Be?"/>":">")}function ve(ge,Pe){return"</"+(null!=ge.__prefix?ge.__prefix+":":"")+Pe+">"}function fe(ge,Pe){return"property"==C.arrayAccessForm&&(Be="_asArray",-1!==(Te=Pe.toString()).indexOf(Be,Te.length-8))||0==Pe.toString().indexOf(C.attributePrefix)||0==Pe.toString().indexOf("__")||ge[Pe]instanceof Function;var Te,Be}function J(ge){var Pe=0;if(ge instanceof Object)for(var Te in ge)fe(ge,Te)||Pe++;return Pe}function pe(ge,Pe,Te){return 0==C.jsonPropertiesFilter.length||""==Te||j(C.jsonPropertiesFilter,ge,Pe,Te)}function de(ge){var Pe=[];if(ge instanceof Object)for(var Te in ge)-1==Te.toString().indexOf("__")&&0==Te.toString().indexOf(C.attributePrefix)&&Pe.push(Te);return Pe}function Ke(ge){var Te,Be,Pe="";return ge instanceof Object?Pe+=(Be="",null!=(Te=ge).__cdata&&(Be+="<![CDATA["+Te.__cdata+"]]>"),null!=Te.__text&&(Be+=C.escapeMode?R(Te.__text):Te.__text),Be):null!=ge&&(Pe+=C.escapeMode?R(ge):ge),Pe}function Oe(ge,Pe){return""===ge?Pe:ge+"."+Pe}function je(ge,Pe,Te,Be){var P="";if(0==ge.length)P+=le(ge,Pe,Te,!0);else for(var ie=0;ie<ge.length;ie++)P+=le(ge[ie],Pe,de(ge[ie]),!1),P+=Ge(ge[ie],Oe(Be,Pe)),P+=ve(ge[ie],Pe);return P}function Ge(ge,Pe){var Te="";if(J(ge)>0)for(var Be in ge)if(!fe(ge,Be)&&(""==Pe||pe(ge,Be,Oe(Pe,Be)))){var P=ge[Be],ie=de(P);null==P||null==P?Te+=le(P,Be,ie,!0):P instanceof Object?P instanceof Array?Te+=je(P,Be,ie,Pe):P instanceof Date?(Te+=le(P,Be,ie,!1),Te+=P.toISOString(),Te+=ve(P,Be)):J(P)>0||null!=P.__text||null!=P.__cdata?(Te+=le(P,Be,ie,!1),Te+=Ge(P,Oe(Pe,Be)),Te+=ve(P,Be)):Te+=le(P,Be,ie,!0):(Te+=le(P,Be,ie,!1),Te+=Ke(P),Te+=ve(P,Be))}return Te+Ke(ge)}void 0===(C=C||{}).escapeMode&&(C.escapeMode=!0),void 0===C.attributePrefix&&(C.attributePrefix="_"),C.arrayAccessForm=C.arrayAccessForm||"none",C.emptyNodeForm=C.emptyNodeForm||"text",void 0===C.enableToStringFunc&&(C.enableToStringFunc=!0),C.arrayAccessFormPaths=C.arrayAccessFormPaths||[],void 0===C.skipEmptyTextNodesForObj&&(C.skipEmptyTextNodesForObj=!0),void 0===C.stripWhitespaces&&(C.stripWhitespaces=!0),C.datetimeAccessFormPaths=C.datetimeAccessFormPaths||[],void 0===C.useDoubleQuotes&&(C.useDoubleQuotes=!1),C.xmlElementsFilter=C.xmlElementsFilter||[],C.jsonPropertiesFilter=C.jsonPropertiesFilter||[],void 0===C.keepCData&&(C.keepCData=!1),void 0===C.ignoreRoot&&(C.ignoreRoot=!1),this.parseXmlString=function(ge){var Pe;if(window,void 0===ge)return null;if(window.DOMParser){var Te=new window.DOMParser;try{(Pe=Te.parseFromString(ge,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Pe=null)}catch{Pe=null}}else 0==ge.indexOf("<?")&&(ge=ge.substr(ge.indexOf("?>")+2)),(Pe=new ActiveXObject("Microsoft.XMLDOM")).async="false",Pe.loadXML(ge);return Pe},this.asArray=function(ge){return void 0===ge||null==ge?[]:ge instanceof Array?ge:[ge]},this.toXmlDateTime=function(ge){return ge instanceof Date?ge.toISOString():"number"==typeof ge?new Date(ge).toISOString():null},this.asDateTime=function(ge){return"string"==typeof ge?K(ge):ge},this.xml2json=function(ge){return z(ge)},this.xml_str2json=function(ge){var Pe=this.parseXmlString(ge);return null!=Pe?this.xml2json(Pe):null},this.json2xml_str=function(ge){return Ge(ge,"")},this.json2xml=function(ge){var Pe=this.json2xml_str(ge);return this.parseXmlString(Pe)},this.getVersion=function(){return"1.2.0"}},Gs="onLoad";function Fr(C){C=C||{};var b,R,j,W,K,U,z=this.context,le=(0,V.Z)(z).getInstance(),ve=(0,At.Z)(z).getInstance();function fe(Oe,je,Ge){var ge,Pe,Te={};Te.elements=Oe,Te.type=je,Te.resolveType=Ge,0===Te.elements.length&&pe(Te);for(var Be=0;Be<Te.elements.length;Be++)Pe=ve.isHTTPURL((ge=Te.elements[Be]).url)?ge.url:ge.originalContent.BaseURL+ge.url,U.load(Pe,ge,Te)}function J(Oe){var je,Ge,ge="";if(Ge=Oe.resolveObject,(je=Oe.element).resolvedContent){var Pe=0;0===je.resolvedContent.indexOf("<?xml")&&(Pe=je.resolvedContent.indexOf("?>")+2),ge=je.resolvedContent.substr(0,Pe)+"<response>"+je.resolvedContent.substr(Pe)+"</response>",je.resolvedContent=K.xml_str2json(ge)}(function(Te){var Be;for(Be=0;Be<Te.elements.length;Be++)if(!1===Te.elements[Be].resolved)return!1;return!0})(Ge)&&pe(Ge)}function pe(Oe){var je,Ge,ge=[];if(function(Pe){var Te,Be,ie,oe,X,Q=[];for(ie=Pe.elements.length-1;ie>=0;ie--){if(Be=(Te=Pe.elements[ie]).type+"_asArray",Te.resolvedContent){if(Te.resolvedContent)for(oe=0;oe<Te.resolvedContent[Be].length;oe++)Q.push(Te.resolvedContent[Be][oe])}else delete Te.originalContent["xlink:actuate"],delete Te.originalContent["xlink:href"],Q.push(Te.originalContent);for(Te.parentElement[Be].splice(Te.index,1),X=0;X<Q.length;X++)Te.parentElement[Be].splice(Te.index+X,0,Q[X]);Q=[]}Pe.elements.length>0&&j.run(W)}(Oe),"onActuate"===Oe.resolveType&&le.trigger(w.Z.XLINK_READY,{manifest:W}),Oe.resolveType===Gs)switch(Oe.type){case E.Z.PERIOD:for(je=0;je<W[E.Z.PERIOD+"_asArray"].length;je++)(Ge=W[E.Z.PERIOD+"_asArray"][je]).hasOwnProperty(E.Z.ADAPTATION_SET+"_asArray")&&(ge=ge.concat(de(Ge[E.Z.ADAPTATION_SET+"_asArray"],Ge,E.Z.ADAPTATION_SET,Gs))),Ge.hasOwnProperty(E.Z.EVENT_STREAM+"_asArray")&&(ge=ge.concat(de(Ge[E.Z.EVENT_STREAM+"_asArray"],Ge,E.Z.EVENT_STREAM,Gs)));fe(ge,E.Z.ADAPTATION_SET,Gs);break;case E.Z.ADAPTATION_SET:le.trigger(w.Z.XLINK_READY,{manifest:W})}}function de(Oe,je,Ge,ge){var Pe,Te,Be,P=[];for(Te=Oe.length-1;Te>=0;Te--)(Pe=Oe[Te]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===Pe["xlink:href"]&&Oe.splice(Te,1);for(Te=0;Te<Oe.length;Te++)(Pe=Oe[Te]).hasOwnProperty("xlink:href")&&Pe.hasOwnProperty("xlink:actuate")&&Pe["xlink:actuate"]===ge&&(Be=Ke(Pe["xlink:href"],je,Ge,Te,ge,Pe),P.push(Be));return P}function Ke(Oe,je,Ge,ge,Pe,Te){return{url:Oe,parentElement:je,type:Ge,index:ge,resolveType:Pe,originalContent:Te,resolvedContent:null,resolved:!1}}return b={resolveManifestOnLoad:function(Oe){K=new pa({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:R}),(W=Oe).Period_asArray?fe(de(W.Period_asArray,W,E.Z.PERIOD,Gs),E.Z.PERIOD,Gs):le.trigger(w.Z.XLINK_READY,{manifest:W})},setMatchers:function(Oe){Oe&&(R=Oe)},setIron:function(Oe){Oe&&(j=Oe)},reset:function(){le.off(w.Z.XLINK_ELEMENT_LOADED,J,b),U&&(U.reset(),U=null)}},le.on(w.Z.XLINK_ELEMENT_LOADED,J,b),U=au(z).create({errHandler:C.errHandler,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,settings:C.settings}),b}Fr.__dashjs_factory_name="XlinkController";var co=F.Z.getClassFactory(Fr);function Mr(C){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function Sl(C){function b(W,K){for(var U in W)K.hasOwnProperty(U)||(K[U]=W[U])}function R(W,K,U){for(var z=0,le=W.length;z<le;++z){var ve=W[z];if(K[ve.name])if(U[ve.name]){if(ve.merge){var fe=K[ve.name],J=U[ve.name];"object"===Mr(fe)&&"object"===Mr(J)?b(fe,J):U[ve.name]=fe+J}}else U[ve.name]=K[ve.name]}}function j(W,K){for(var U=0,z=W.children.length;U<z;++U){var le=W.children[U],ve=K[le.name+"_asArray"];if(ve)for(var fe=0,J=ve.length;fe<J;++fe){var pe=ve[fe];R(W.properties,K,pe),j(le,pe)}}}return{run:function(W){if(null===W||"object"!==Mr(W))return W;if(W.Period_asArray&&"period"in C)for(var K=C.period,U=W.Period_asArray,z=0,le=U.length;z<le;++z){var ve=U[z];if(j(K,ve),"adaptationset"in C){var fe=ve.AdaptationSet_asArray;if(fe)for(var J=C.adaptationset,pe=0,de=fe.length;pe<de;++pe)j(J,fe[pe])}}return W}}}Sl.__dashjs_factory_name="ObjectIron";var bl=F.Z.getClassFactory(Sl);var Al=function(){function C(j,W){(function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")})(this,C),this._test=j,this._converter=W}var R;return(R=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&function La(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C.prototype,R),C}();function su(C){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function mi(C,b,R){return b in C?Object.defineProperty(C,b,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[b]=R,C}function ma(C,b){return(ma=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function Bo(C){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var Oa=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&ma(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=Bo(b);if(R){var z=Bo(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function lu(C,b){return!b||"object"!==su(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){return function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")}(this,W),j.call(this,function(K,U){var z,le=(mi(z={},E.Z.MPD,[E.Z.ID,E.Z.PROFILES]),mi(z,E.Z.PERIOD,[E.Z.ID]),mi(z,E.Z.BASE_URL,[E.Z.SERVICE_LOCATION,E.Z.BYTE_RANGE]),mi(z,E.Z.SEGMENT_BASE,[E.Z.INDEX_RANGE]),mi(z,E.Z.INITIALIZATION,[E.Z.RANGE]),mi(z,E.Z.REPRESENTATION_INDEX,[E.Z.RANGE]),mi(z,E.Z.SEGMENT_LIST,[E.Z.INDEX_RANGE]),mi(z,E.Z.BITSTREAM_SWITCHING,[E.Z.RANGE]),mi(z,E.Z.SEGMENT_URL,[E.Z.MEDIA_RANGE,E.Z.INDEX_RANGE]),mi(z,E.Z.SEGMENT_TEMPLATE,[E.Z.INDEX_RANGE,E.Z.MEDIA,E.Z.INDEX,E.Z.INITIALIZATION_MINUS,E.Z.BITSTREAM_SWITCHING_MINUS]),mi(z,E.Z.ASSET_IDENTIFIER,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.EVENT_STREAM,[E.Z.VALUE]),mi(z,E.Z.ADAPTATION_SET,[E.Z.PROFILES,E.Z.MIME_TYPE,E.Z.SEGMENT_PROFILES,E.Z.CODECS,E.Z.CONTENT_TYPE]),mi(z,E.Z.FRAME_PACKING,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.AUDIO_CHANNEL_CONFIGURATION,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.CONTENT_PROTECTION,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.ESSENTIAL_PROPERTY,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.SUPPLEMENTAL_PROPERTY,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.INBAND_EVENT_STREAM,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.ACCESSIBILITY,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.ROLE,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.RATING,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.VIEWPOINT,[E.Z.VALUE,E.Z.ID]),mi(z,E.Z.CONTENT_COMPONENT,[E.Z.CONTENT_TYPE]),mi(z,E.Z.REPRESENTATION,[E.Z.ID,E.Z.DEPENDENCY_ID,E.Z.MEDIA_STREAM_STRUCTURE_ID]),mi(z,E.Z.SUBSET,[E.Z.ID]),mi(z,E.Z.METRICS,[E.Z.METRICS_MINUS]),mi(z,E.Z.REPORTING,[E.Z.VALUE,E.Z.ID]),z);if(le.hasOwnProperty(U)){var ve=le[U];return void 0!==ve&&ve.indexOf(K.name)>=0}return!1},function(K){return String(K)})}return W}(Al);function oi(C){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function Zs(C,b){return(Zs=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function js(C){return(js=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var Yu=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,fo=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&Zs(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=js(b);if(R){var z=js(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function va(C,b){return!b||"object"!==oi(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){return function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")}(this,W),j.call(this,function(K){for(var U=[E.Z.MIN_BUFFER_TIME,E.Z.MEDIA_PRESENTATION_DURATION,E.Z.MINIMUM_UPDATE_PERIOD,E.Z.TIMESHIFT_BUFFER_DEPTH,E.Z.MAX_SEGMENT_DURATION,E.Z.MAX_SUBSEGMENT_DURATION,E.Z.SUGGESTED_PRESENTATION_DELAY,E.Z.START,_.Z.START_TIME,E.Z.DURATION],z=U.length,le=0;le<z;le++)if(K.nodeName===U[le])return Yu.test(K.value);return!1},function(K){var U=Yu.exec(K),z=31536e3*parseFloat(U[3]||0)+2592e3*parseFloat(U[5]||0)+86400*parseFloat(U[7]||0)+3600*parseFloat(U[9]||0)+60*parseFloat(U[11]||0)+parseFloat(U[13]||0);return void 0!==U[1]&&(z=-z),z})}return W}(Al);function na(C){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function uu(C,b){return(uu=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function qs(C){return(qs=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var cu=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Fc=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&uu(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=qs(b);if(R){var z=qs(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function Ts(C,b){return!b||"object"!==na(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){return function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")}(this,W),j.call(this,function(K){return cu.test(K.value)},function(K){var U,z=cu.exec(K);if(U=Date.UTC(parseInt(z[1],10),parseInt(z[2],10)-1,parseInt(z[3],10),parseInt(z[4],10),parseInt(z[5],10),z[6]&&parseInt(z[6],10)||0,z[7]&&1e3*parseFloat(z[7])||0),z[9]&&z[10]){var le=60*parseInt(z[9],10)+parseInt(z[10],10);U+=("+"===z[8]?-1:1)*le*60*1e3}return new Date(U)})}return W}(Al);function Ss(C){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function Qi(C,b){return(Qi=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function bs(C){return(bs=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var As=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,jf=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&Qi(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=bs(b);if(R){var z=bs(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function kc(C,b){return!b||"object"!==Ss(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){return function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")}(this,W),j.call(this,function(K){return As.test(K.value)},function(K){return parseFloat(K)})}return W}(Al);function Mi(C){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function bo(C,b,R){return b in C?Object.defineProperty(C,b,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[b]=R,C}function Ks(C,b){return(Ks=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function fu(C){return(fu=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var qf=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&Ks(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=fu(b);if(R){var z=fu(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function Cl(C,b){return!b||"object"!==Mi(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){return function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")}(this,W),j.call(this,function(K,U){var z,le=(bo(z={},E.Z.ADAPTATION_SET,[E.Z.LANG]),bo(z,E.Z.REPRESENTATION,[E.Z.LANG]),bo(z,E.Z.CONTENT_COMPONENT,[E.Z.LANG]),bo(z,E.Z.LABEL,[E.Z.LANG]),bo(z,E.Z.GROUP_LABEL,[E.Z.LANG]),z);if(le.hasOwnProperty(U)){var ve=le[U];return void 0!==ve&&ve.indexOf(K.name)>=0}return!1},function(K){return Tl()(K)||String(K)})}return W}(Al);var Bc=function(){function C(j){var W;(function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")})(this,C),this._name=j,this._merge=(W=j)&&W.length&&W.charAt(0)===W.charAt(0).toUpperCase()}var R;return(R=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&function Uc(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C.prototype,R),C}();var Ys=function(){function C(j,W,K){var U=this;(function(z,le){if(!(z instanceof le))throw new TypeError("Cannot call a class as a function")})(this,C),this._name=j||"",this._properties=[],this._children=K||[],Array.isArray(W)&&W.forEach(function(z){U._properties.push(new Bc(z))})}var R;return(R=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&function Vc(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C.prototype,R),C}();function zs(C){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function du(C,b){return(du=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function Il(C){return(Il=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var Hc=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&du(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=Il(b);if(R){var z=Il(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function Cs(C,b){return!b||"object"!==zs(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){!function(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}(this,W);var K=[E.Z.PROFILES,E.Z.WIDTH,E.Z.HEIGHT,E.Z.SAR,E.Z.FRAMERATE,E.Z.AUDIO_SAMPLING_RATE,E.Z.MIME_TYPE,E.Z.SEGMENT_PROFILES,E.Z.CODECS,E.Z.MAXIMUM_SAP_PERIOD,E.Z.START_WITH_SAP,E.Z.MAX_PLAYOUT_RATE,E.Z.CODING_DEPENDENCY,E.Z.SCAN_TYPE,E.Z.FRAME_PACKING,E.Z.AUDIO_CHANNEL_CONFIGURATION,E.Z.CONTENT_PROTECTION,E.Z.ESSENTIAL_PROPERTY,E.Z.ESSENTIAL_PROPERTY+"_asArray",E.Z.SUPPLEMENTAL_PROPERTY,E.Z.INBAND_EVENT_STREAM];return j.call(this,E.Z.ADAPTATION_SET,K,[new Ys(E.Z.REPRESENTATION,K,[new Ys(E.Z.SUB_REPRESENTATION,K)])])}return W}(Ys);function ya(C){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function Ea(C,b){return(Ea=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function Dl(C){return(Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var Pr=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&Ea(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=Dl(b);if(R){var z=Dl(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function Kf(C,b){return!b||"object"!==ya(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){!function(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}(this,W);var K=[E.Z.SEGMENT_BASE,E.Z.SEGMENT_TEMPLATE,E.Z.SEGMENT_LIST];return j.call(this,E.Z.PERIOD,K,[new Ys(E.Z.ADAPTATION_SET,K,[new Ys(E.Z.REPRESENTATION,K)])])}return W}(Ys);function xo(C){var b,R,j,W,K,U=this.context;return b={parse:function(le){var ve,fe=window.performance.now();if(!(ve=W.xml_str2json(le)))throw new Error("parsing the manifest failed");var J=window.performance.now();ve.Patch?((ve=ve.Patch).add_asArray&&ve.add_asArray.forEach(function(de){return K.run(de)}),ve.replace_asArray&&ve.replace_asArray.forEach(function(de){return K.run(de)})):K.run(ve=ve.MPD);var pe=window.performance.now();return R.info("Parsing complete: ( xml2json: "+(J-fe).toPrecision(3)+"ms, objectiron: "+(pe-J).toPrecision(3)+"ms, total: "+((pe-fe)/1e3).toPrecision(3)+"s)"),ve.protocol="DASH",ve},getMatchers:function(){return j},getIron:function(){return K}},R=(C=C||{}).debug.getLogger(b),j=[new fo,new Fc,new jf,new qf,new Oa],W=new pa({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:j}),K=bl(U).create({adaptationset:new Hc,period:new Pr}),b}xo.__dashjs_factory_name="DashParser";var Xr=F.Z.getClassFactory(xo);function ho(C){var b,R,j,W,K,U=this.context,z=(C=C||{}).debug,le=C.settings,ve=(0,V.Z)(U).getInstance(),fe=(0,At.Z)(U).getInstance(),J=C.mssHandler,pe=C.errHandler;function de(Oe){ve.trigger(w.Z.INTERNAL_MANIFEST_LOADED,{manifest:Oe.manifest})}return b={load:function(Oe){var je=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Ge=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,ge=new Date,Pe=new ou(Oe,yt.w.MPD_TYPE);je&&(Pe.serviceLocation=je),Ge&&(Pe.queryParams=Ge),Pe.requestStartDate||(Pe.requestStartDate=ge),ve.trigger(w.Z.MANIFEST_LOADING_STARTED,{request:Pe}),j.load({request:Pe,success:function(Te,Be,P){var ie,oe,X;if(W)if(P&&P!==Oe?(oe=fe.parseBaseUrl(P),ie=P):(fe.isRelative(Oe)&&(Oe=fe.resolve(Oe,window.location.href)),oe=fe.parseBaseUrl(Oe)),"No Content"!=Be)if(null===K&&(K=function Ke(Oe){var je=null;return Oe.indexOf("SmoothStreamingMedia")>-1?(J&&(je=J.createMssParser(),J.createMssFragmentProcessor(),J.registerEvents()),je):Oe.indexOf("MPD")>-1||Oe.indexOf("Patch")>-1?Xr(U).create({debug:z}):je}(Te)),null!==K){W.setMatchers(K.getMatchers()),W.setIron(K.getIron());try{X=K.parse(Te)}catch{return void ve.trigger(w.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new xe.Z(Me.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Me.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}if(X){if(X.url=ie||Oe,X.originalUrl||(X.originalUrl=X.url),le&&le.get().streaming.enableManifestDurationMismatchFix&&X.mediaPresentationDuration&&X.Period_asArray.length>1){var Q=X.Period_asArray.reduce(function(Ae,me){return Ae+me.duration},0);!isNaN(Q)&&X.mediaPresentationDuration>Q&&(R.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),X.mediaPresentationDuration=Q)}X.baseUri=oe,X.loadedTime=new Date,W.resolveManifestOnLoad(X),ve.trigger(w.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Te})}else ve.trigger(w.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new xe.Z(Me.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Me.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}else ve.trigger(w.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new xe.Z(Me.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Me.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))});else ve.trigger(w.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Te,Be,P){ve.trigger(w.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new xe.Z(Me.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Me.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Oe,", ").concat(P))})}})},reset:function(){ve.off(w.Z.XLINK_READY,de,b),J&&J.reset(),W&&(W.reset(),W=null),j&&(j.abort(),j=null)}},R=z.getLogger(b),ve.on(w.Z.XLINK_READY,de,b),j=qr(U).create({errHandler:C.errHandler,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,urlUtils:fe,constants:_.Z,dashConstants:E.Z,errors:Me,requestTimeout:C.settings.get().streaming.manifestRequestTimeout}),W=co(U).create({errHandler:pe,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,settings:C.settings}),K=null,b}ho.__dashjs_factory_name="ManifestLoader";var En=F.Z.getClassFactory(ho);function rs(){var b=(0,V.Z)(this.context).getInstance();return{error:function(R){b.trigger(w.Z.ERROR,{error:R})}}}rs.__dashjs_factory_name="ErrorHandler";var Vo=F.Z.getSingletonFactory(rs),zu=ne(1715);function ra(){var C,b,R,j,W,K,U=this.context,z=(0,V.Z)(U).getInstance();function le(ve,fe){if(!fe||!fe.Period_asArray||0===fe.Period_asArray.length)return Promise.resolve();var J=[];return fe.Period_asArray.forEach(function(pe){var de,Ke;J.push((de=pe,Ke=ve,new Promise(function(Oe){if(de&&de.AdaptationSet_asArray&&0!==de.AdaptationSet_asArray.length){var je=[];de.AdaptationSet_asArray.forEach(function(Ge){var ge,Pe;b.getIsTypeOf(Ge,Ke)&&je.push((ge=Ge,Pe=Ke,new Promise(function(Te){if(ge.Representation_asArray&&0!==ge.Representation_asArray.length){var Be=[],P=[];ge.Representation_asArray.forEach(function(ie,oe){var X=b.getCodec(ge,oe,!1),Q=function(Ae,me,Fe){switch(Ae){case _.Z.VIDEO:return{codec:Fe,width:(Ie=me).width||null,height:Ie.height||null,framerate:Ie.frameRate||null,bitrate:Ie.bandwidth||null};case _.Z.AUDIO:return function(Ie,ae){return{codec:ae,bitrate:Ie.bandwidth||null,samplerate:Ie.audioSamplingRate||null}}(me,Fe);default:return null}var Ie}(Pe,ie,X);P.push(Q),Be.push(R.supportsCodec(Q,Pe))}),Promise.all(Be).then(function(ie){ge.Representation_asArray=ge.Representation_asArray.filter(function(oe,X){return ie[X]||K.debug("[Stream] Codec ".concat(P[X].codec," not supported ")),ie[X]}),Te()}).catch(function(){Te()})}else Te()})))}),Promise.all(je).then(function(){de.AdaptationSet_asArray=de.AdaptationSet_asArray.filter(function(Ge){var ge=Ge.Representation_asArray&&Ge.Representation_asArray.length>0;return ge||(z.trigger(w.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:Ge}),K.warn("AdaptationSet has been removed because of no supported Representation")),ge}),Oe()}).catch(function(){Oe()})}else Oe()})))}),Promise.all(J)}return C={setConfig:function(ve){ve&&(ve.adapter&&(b=ve.adapter),ve.capabilities&&(R=ve.capabilities),ve.settings&&(j=ve.settings),ve.customParametersModel&&(W=ve.customParametersModel))},filterUnsupportedFeatures:function(ve){return new Promise(function(fe){var J=[];J.push(le(_.Z.VIDEO,ve)),J.push(le(_.Z.AUDIO,ve)),Promise.all(J).then(function(){var pe;j.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(pe=ve)&&pe.Period_asArray&&0!==pe.Period_asArray.length&&pe.Period_asArray.forEach(function(de){de.AdaptationSet_asArray=de.AdaptationSet_asArray.filter(function(Ke){return!Ke.Representation_asArray||0===Ke.Representation_asArray.length||(Ke.Representation_asArray=Ke.Representation_asArray.filter(function(Oe){var je=b.getEssentialPropertiesForRepresentation(Oe);if(je&&je.length>0)for(var Ge=0;Ge<je.length;){if(!R.supportsEssentialProperty(je[Ge]))return K.debug("[Stream] EssentialProperty not supported: "+je[Ge].schemeIdUri),!1;Ge+=1}return!0}),Ke.Representation_asArray&&Ke.Representation_asArray.length>0)})}),function(pe){var de=W.getCustomCapabilitiesFilters();de&&0!==de.length&&pe&&pe.Period_asArray&&0!==pe.Period_asArray.length&&pe.Period_asArray.forEach(function(Ke){Ke.AdaptationSet_asArray=Ke.AdaptationSet_asArray.filter(function(Oe){return!Oe.Representation_asArray||0===Oe.Representation_asArray.length||(Oe.Representation_asArray=Oe.Representation_asArray.filter(function(je){return!de.some(function(Ge){return!Ge(je)})}),Oe.Representation_asArray&&Oe.Representation_asArray.length>0)})})}(ve),fe()}).catch(function(){fe()})})}},K=(0,G.Z)(U).getInstance().getLogger(C),C}ra.__dashjs_factory_name="CapabilitiesFilter";var Ws=F.Z.getSingletonFactory(ra),Yf=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Gc(){var C;return{initialize:function(b){if(C=new Yf,!b)return null;var R=b.indexOf("#");if(-1!==R)for(var j=b.substr(R+1).split("&"),W=0,K=j.length;W<K;++W){var U=j[W],z=U.indexOf("=");if(-1!==z){var le=U.substring(0,z);C.hasOwnProperty(le)&&(C[le]=U.substr(z+1))}}},getURIFragmentData:function(){return C}}}Gc.__dashjs_factory_name="URIFragmentModel";var Hi=F.Z.getSingletonFactory(Gc);function Jn(){var C,R=(0,V.Z)(this.context).getInstance();return{getValue:function(){return C},setValue:function(j){C=j,j&&R.trigger(w.Z.MANIFEST_LOADED,{data:j})}}}Jn.__dashjs_factory_name="ManifestModel";var xr=F.Z.getSingletonFactory(Jn);function Lo(){var C,b,R,j,W=this.context,K=(0,ot.Z)(W).getInstance();function U(ve,fe){return isNaN(ve)?0:ve>0?(fe&&b.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):ve<-.5?(fe&&b.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):ve}function z(ve,fe){return isNaN(ve)?0:ve<0?(fe&&b.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):ve>1?(fe&&b.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):ve}function le(){var ve=K.get().streaming.buffer.stableBufferTime>0?K.get().streaming.buffer.stableBufferTime:K.get().streaming.buffer.fastSwitchEnabled?20:12,fe=R.getLiveDelay();return!isNaN(fe)&&fe>0?Math.min(ve,fe):ve}return C={getCatchupMaxDrift:function(){if(!isNaN(K.get().streaming.liveCatchup.maxDrift)&&K.get().streaming.liveCatchup.maxDrift>0)return K.get().streaming.liveCatchup.maxDrift;var ve=j.getServiceDescriptionSettings();return ve&&ve.liveCatchup&&!isNaN(ve.liveCatchup.maxDrift)&&ve.liveCatchup.maxDrift>0?ve.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==K.get().streaming.liveCatchup.enabled?K.get().streaming.liveCatchup.enabled:R.getInitialCatchupModeActivated()},getStableBufferTime:le,getInitialBufferLevel:function(){var ve=K.get().streaming.buffer.initialBufferLevel;return isNaN(ve)||ve<0?0:Math.min(le(),ve)},getRetryAttemptsForType:function(ve){var fe=isNaN(K.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:K.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return R.getLowLatencyModeEnabled()?K.get().streaming.retryAttempts[ve]*fe:K.get().streaming.retryAttempts[ve]},getRetryIntervalsForType:function(ve){var fe=isNaN(K.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:K.get().streaming.retryIntervals.lowLatencyReductionFactor;return R.getLowLatencyModeEnabled()?K.get().streaming.retryIntervals[ve]/fe:K.get().streaming.retryIntervals[ve]},getCatchupPlaybackRates:function(ve){var fe=K.get().streaming.liveCatchup.playbackRate;if(!isNaN(fe.min)||!isNaN(fe.max))return{min:U(fe.min,ve),max:z(fe.max,ve)};var J=j.getServiceDescriptionSettings();if(J&&J.liveCatchup&&(!isNaN(J.liveCatchup.playbackRate.min)||!isNaN(J.liveCatchup.playbackRate.max))){var pe=J.liveCatchup.playbackRate;return{min:U(pe.min,ve),max:z(pe.max,ve)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(ve,fe){try{var J=K.get().streaming.abr[ve][fe];if(!isNaN(J)&&-1!==J)return J;var pe=j.getServiceDescriptionSettings();return pe&&pe[ve]&&!isNaN(pe[ve][fe])?pe[ve][fe]:-1}catch{return-1}},setConfig:function(ve){ve.playbackController&&(R=ve.playbackController),ve.serviceDescriptionController&&(j=ve.serviceDescriptionController)},reset:function(){}},b=(0,G.Z)(W).getInstance().getLogger(C),C}Lo.__dashjs_factory_name="MediaPlayerModel";var wl=F.Z.getSingletonFactory(Lo),Do=ne(1767);function is(C){var b=(C=C||{}).abrController,R=C.switchHistory,j=C.droppedFramesHistory,W=C.currentRequest,K=C.useBufferOccupancyABR,U=C.useL2AABR,z=C.useLoLPABR,le=C.streamProcessor?C.streamProcessor.getScheduleController():null,ve=C.streamProcessor?C.streamProcessor.getRepresentationInfo():null,fe=C.videoModel?C.videoModel:null;function J(){return ve?ve.mediaInfo:null}return{getMediaType:function(){var pe=J();return pe?pe.type:null},getMediaInfo:J,getDroppedFramesHistory:function(){return j},getCurrentRequest:function(){return W},getSwitchHistory:function(){return R},getStreamInfo:function(){var pe=J();return pe?pe.streamInfo:null},getScheduleController:function(){return le},getAbrController:function(){return b},getRepresentationInfo:function(){return ve},useBufferOccupancyABR:function(){return K},useL2AABR:function(){return U},useLoLPABR:function(){return z},getVideoModel:function(){return fe}}}is.__dashjs_factory_name="RulesContext";var Gi=F.Z.getClassFactory(is),_a=ne(2068);function os(){var C=[],b=[];return{push:function(R){R.newValue===_a.Z.NO_CHANGE&&(R.newValue=R.oldValue),C[R.oldValue]||(C[R.oldValue]={noDrops:0,drops:0,dropSize:0});var j=R.newValue-R.oldValue,W=j<0?1:0,K=W?-j:0,U=W?0:1;if(C[R.oldValue].drops+=W,C[R.oldValue].dropSize+=K,C[R.oldValue].noDrops+=U,b.push({idx:R.oldValue,noDrop:U,drop:W,dropSize:K}),b.length>8){var z=b.shift();C[z.idx].drops-=z.drop,C[z.idx].dropSize-=z.dropSize,C[z.idx].noDrops-=z.noDrop}},getSwitchRequests:function(){return C},reset:function(){C=[],b=[]}}}os.__dashjs_factory_name="SwitchRequestHistory";var Rr=F.Z.getClassFactory(os);function $s(){var C={},b={},R={};return{push:function(j,W,K){if(W){C[j]||(C[j]=[],b[j]=0,R[j]=0);var U=K&&K.droppedVideoFrames?K.droppedVideoFrames:0,z=K&&K.totalVideoFrames?K.totalVideoFrames:0,le=U-b[j];b[j]=U;var ve=z-R[j];R[j]=z;var fe=C[j];isNaN(W)||(fe[W]?(fe[W].droppedVideoFrames+=le,fe[W].totalVideoFrames+=ve):fe[W]={droppedVideoFrames:le,totalVideoFrames:ve})}},getFrameHistory:function(j){return C[j]},clearForStream:function(j){try{delete C[j],delete b[j],delete R[j]}catch{}},reset:function(){C={},b={},R={}}}}$s.__dashjs_factory_name="DroppedFramesHistory";var Zc=F.Z.getClassFactory($s);function Is(C){var b,R,j,W,K,z=(C=C||{}).settings,le=(0,V.Z)(this.context).getInstance();function ve(Oe,je,Ge,ge){var Pe=Math.pow(.5,Ge/ge.fast);Oe.fastEstimate=(1-Pe)*je+Pe*Oe.fastEstimate;var Te=Math.pow(.5,Ge/ge.slow);Oe.slowEstimate=(1-Te)*je+Te*Oe.slowEstimate,Oe.totalWeight+=Ge}function fe(Oe,je,Ge){return z.get().streaming.abr.movingAverageMethod!==_.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(ge,Pe){var Te=ge?K.throughputHalfLife:K.latencyHalfLife,Be=ge?j[Pe]:W[Pe];if(!Be||Be.totalWeight<=0)return NaN;var P=Be.fastEstimate/(1-Math.pow(.5,Be.totalWeight/Te.fast)),ie=Be.slowEstimate/(1-Math.pow(.5,Be.totalWeight/Te.slow));return ge?Math.min(P,ie):Math.max(P,ie)}(Oe,je):(Be=function(ie,oe,X){var Q,Ae;if(ie?(Q=b[oe],Ae=X?3:4):(Q=R[oe],Ae=4),Q){if(Ae>=Q.length)Ae=Q.length;else if(ie)for(var me=1;me<Ae;++me){var Fe=Q[Q.length-me]/Q[Q.length-me-1];if((Fe>=1.3||Fe<=.7692307692307692)&&(Ae+=1)===Q.length)break}}else Ae=0;return Ae}(ge=Oe,Pe=je,Ge),P=(ge?b:R)[Pe],0!==Be&&P&&0!==P.length?(P=P.slice(-Be)).reduce(function(ie,oe){return ie+oe})/P.length:NaN);var ge,Pe,Be,P}function J(Oe,je){return fe(!0,Oe,je)}function pe(Oe){b[Oe]=b[Oe]||[],R[Oe]=R[Oe]||[],j[Oe]=j[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},W[Oe]=W[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function de(){b={},R={},j={},W={}}var Ke={push:function(Oe,je,Ge){if(je.trace&&je.trace.length){var ge,Pe=je.tresponse.getTime()-je.trequest.getTime()||1,Te=je._tfinish.getTime()-je.tresponse.getTime()||1,Be=je.trace.reduce(function(X,Q){return X+Q.b[0]},0),P=0;if(0!==(ge=je._fileLoaderType&&je._fileLoaderType===_.Z.FILE_LOADER_TYPES.FETCH?je.trace.reduce(function(X,Q){return X+Q.d},0):Ge?Te:Pe+Te)&&(P=Math.round(8*Be/ge)),je.cmsd){var ie=je.cmsd.dynamic&&je.cmsd.dynamic.etp?je.cmsd.dynamic.etp:null;if(ie){var oe=z.get().streaming.cmsd.abr.etpWeightRatio;oe>0&&oe<=1&&(P=P*(1-oe)+ie*oe)}}if(pe(Oe),Ae=Te,(X=Oe)===_.Z.VIDEO?Ae<z.get().streaming.cacheLoadThresholds[_.Z.VIDEO]:X===_.Z.AUDIO?Ae<z.get().streaming.cacheLoadThresholds[_.Z.AUDIO]:void 0){if(b[Oe].length>0&&!b[Oe].hasCachedEntries)return;b[Oe].hasCachedEntries=!0}else b[Oe]&&b[Oe].hasCachedEntries&&function(X){delete b[X],delete R[X],delete j[X],delete W[X],pe(X)}(Oe);b[Oe].push(P),le.trigger(T.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:P,mediaType:Oe,httpRequest:je}),b[Oe].length>20&&b[Oe].shift(),R[Oe].push(Pe),R[Oe].length>20&&R[Oe].shift(),ve(j[Oe],P,.001*Te,K.throughputHalfLife),ve(W[Oe],Pe,1,K.latencyHalfLife)}var X,Ae},getAverageThroughput:J,getSafeAverageThroughput:function(Oe,je){var Ge=J(Oe,je);return isNaN(Ge)||(Ge*=z.get().streaming.abr.bandwidthSafetyFactor),Ge},getAverageLatency:function(Oe){return fe(!1,Oe)},reset:de};return K={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},de(),Ke}Is.__dashjs_factory_name="ThroughputHistory";var Ji=F.Z.getClassFactory(Is);function as(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je,Ge,ge,Pe,Te,Be,P,ie,oe,X,Q,Ae=this.context,me=(0,G.Z)(Ae).getInstance(),Fe=(0,V.Z)(Ae).getInstance();function Ie(){W={},K={},z={},U={},Pe={},P={},ie={},oe={},void 0===ve&&(ve=!1),Te&&Te.reset(),ge=void 0,Te=void 0,Be=void 0,clearTimeout(le),le=null}function ae(tt){var St=tt.request.mediaType,Jt=tt.streamId;if(St&&Jt&&U[Jt]&&Q.get().streaming.abr.autoSwitchBitrate[St]){var Ve=U[Jt][St];if(Ve){var ut=Gi(Ae).create({abrController:C,streamProcessor:Ve,currentRequest:tt.request,useBufferOccupancyABR:P[St],useL2AABR:ie[St],useLoLPABR:oe[St],videoModel:de}),ct=R.shouldAbandonFragment(ut,Jt);ct.quality>_a.Z.NO_CHANGE&&Ve.getFragmentModel().getRequests({state:be.FRAGMENT_MODEL_LOADING,index:tt.request.index})[0]&&(z[Jt][St].state=k.Z.ABANDON_LOAD,Pe[Jt][St].reset(),Pe[Jt][St].push({oldValue:ft(St,Jt),newValue:ct.quality,confidence:1,reason:ct.reason}),lt(St,j.getActiveStreamInfo(),ct.quality,ct.reason),clearTimeout(le),le=setTimeout(function(){z[Jt][St].state=k.Z.ALLOW_LOAD,le=null},Q.get().streaming.abandonLoadTimeout))}}}function ke(tt){tt.mediaType===_.Z.VIDEO&&(void 0!==ge&&Te.push(tt.streamId,ge,de.getPlaybackQuality()),ge=tt.newQuality)}function We(tt){var St,Jt;tt.metric!==k.Z.HTTP_REQUEST||!tt.value||tt.value.type!==yt.w.MEDIA_SEGMENT_TYPE||tt.mediaType!==_.Z.AUDIO&&tt.mediaType!==_.Z.VIDEO||Be.push(tt.mediaType,tt.value,Q.get().streaming.abr.useDeadTimeLatency),tt.metric!==k.Z.BUFFER_LEVEL||tt.mediaType!==_.Z.AUDIO&&tt.mediaType!==_.Z.VIDEO||(St=tt.mediaType,Jt=.001*tt.value.level,Q.get().streaming.abr.ABRStrategy===_.Z.ABR_STRATEGY_DYNAMIC&&function(Ve,ut){try{var ct=Ke.getStableBufferTime(),on=P[Ve],Sn=ut>(on?.5*ct:ct);P[Ve]=Sn,Sn!==on&&b.info(Sn?"["+Ve+"] switching from throughput to buffer occupancy ABR rule (buffer: "+ut.toFixed(3)+").":"["+Ve+"] switching from buffer occupancy to throughput ABR rule (buffer: "+ut.toFixed(3)+").")}catch(Mt){b.error(Mt)}}(St,Jt))}function gt(tt,St){try{var Jt;return W[St]=W[St]||{},W[St].hasOwnProperty(tt)||(W[St][tt]=0),Jt=function(Ve,ut){var ct=W[ut][Ve],pt=ct;if(!U[ut]||!U[ut][Ve])return pt;var Qt=ht(Ve,ut);void 0!==Qt&&(pt=Math.max(ct,Qt));var on=function(Sn,Mt){try{var Dn=Ke.getAbrBitrateParameter("maxBitrate",Sn);return Dn>-1?_t(U[Mt][Sn].getMediaInfo(),Dn,Mt):void 0}catch{return}}(Ve,ut);return void 0!==on&&(pt=Math.min(pt,on)),pt}(tt,St),Ve=Jt,pt=W[St][ut=tt],Qt=Q.get().streaming.abr.maxRepresentationRatio[ut],Jt=function(Ve,ut,ct){if(ut!==_.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!U[ct]||!U[ct][ut])return Ve;ve||wn();var pt=U[ct][ut].getStreamInfo(),Qt=pe.getAdaptationForType(pt.index,ut,pt).Representation_asArray,on=Ve;if(fe>0&&J>0){for(;on>0&&Qt[on]&&fe<Qt[on].width&&fe-Qt[on-1].width<Qt[on].width-fe;)on-=1;for(;on<Qt.length-1&&Qt[on].width===Qt[on+1].width;)on+=1}return on}(Jt=isNaN(Qt)||Qt>=1||Qt<0?Ve:Math.min(Ve,Math.round(pt*Qt)),tt,St),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&(Jt=function(Ve,ut,ct){if("video"!==ut)return Ve;var pt=je.getMaxBitrate(ut);if(pt<0)return Ve;var Qt=Kt(ct,"audio",ft("audio",ct));pt-=Qt?Qt.bitrate/1e3:0;var on=_t(U[ct][ut].getMediaInfo(),pt,ct);return b.debug("Stream ID: "+ct+" ["+ut+"] Apply max bit rate from CMSD: "+pt),Math.min(Ve,on)}(Jt,tt,St)),Jt}catch{return}var Ve,ut,pt,Qt}function ht(tt,St){try{return function(Jt,Ve){try{var ut=Ke.getAbrBitrateParameter("minBitrate",Jt);if(ut>-1){var ct=U[Ve][Jt].getMediaInfo(),pt=Bt(ct),Qt=_t(ct,ut,Ve);return pt[Qt]&&Qt<pt.length-1&&pt[Qt].bitrate<1e3*ut&&Qt++,Qt}return}catch{return}}(tt,St)}catch{return}}function ft(tt){var St=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return St||(St=j.getActiveStreamInfo().id),tt&&U[St]&&U[St][tt]&&St?(K[St]=K[St]||{},K[St].hasOwnProperty(tt)||(K[St][tt]=0),K[St][tt]):0}catch{return 0}}function lt(tt,St,Jt){var Ve=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(St&&St.id&&tt){var ut=St.id,ct=ft(tt,ut);(0,Ce.SE)(Jt);var pt=gt(tt,ut);Jt!==ct&&Jt>=0&&Jt<=pt&&qt(tt,ct,Jt,pt,Ve,ut)}}function qt(tt,St,Jt,Ve,ut,ct){if(tt&&U[ct]&&U[ct][tt]){var pt=U[ct][tt].getStreamInfo(),Qt=pt&&pt.manifestInfo&&pt.manifestInfo.isDynamic,on=X.getCurrentBufferLevel(tt);b.info("Stream ID: "+ct+" ["+tt+"] switch from "+St+" to "+Jt+"/"+Ve+" (buffer: "+on+") "+(ut?JSON.stringify(ut):".")),K[ct]=K[ct]||{},K[ct][tt]=Jt;var Sn=Kt(ct,tt,Jt);Fe.trigger(w.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:St,newQuality:Jt,reason:ut,streamInfo:pt,bitrateInfo:Sn,maxIdx:Ve,mediaType:tt},{streamId:pt.id,mediaType:tt});var Mt=Be.getAverageThroughput(tt,Qt);isNaN(Mt)||Ge.setSavedBitrateSettings(tt,Mt)}}function Kt(tt,St,Jt){if(St&&U&&U[tt]&&U[tt][St]){var Ve=Bt(U[tt][St].getMediaInfo());return Ve[Jt]?Ve[Jt]:null}return null}function _t(tt,St,Jt){var Ve=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,ut=tt&&tt.type?U[Jt][tt.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&Ve&&ut&&ut.fragmentDuration){var ct=ut.fragmentDuration;if((Ve/=1e3)>ct)return 0;St*=1-Ve/ct}for(var Qt=Bt(tt),on=Qt.length-1;on>=0;on--)if(1e3*St>=Qt[on].bitrate)return on;return 0}function Bt(tt){var St=[];if(!tt||!tt.bitrateList)return St;for(var Jt,Ve=tt.bitrateList,ut=tt.type,ct=0,pt=Ve.length;ct<pt;ct++)(Jt=new Yl).mediaType=ut,Jt.qualityIndex=ct,Jt.bitrate=Ve[ct].bandwidth,Jt.width=Ve[ct].width,Jt.height=Ve[ct].height,Jt.scanType=Ve[ct].scanType,St.push(Jt);return St}function wn(){if(de){var tt=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;fe=de.getClientWidth()*tt,J=de.getClientHeight()*tt}}return C={initialize:function(){Te=Zc(Ae).create(),Be=Ji(Ae).create({settings:Q}),(R=(0,Do.Z)(Ae).create({dashMetrics:X,customParametersModel:Oe,mediaPlayerModel:Ke,settings:Q})).initialize(),Fe.on(T.Z.QUALITY_CHANGE_RENDERED,ke,C),Fe.on(T.Z.METRIC_ADDED,We,C),Fe.on(w.Z.LOADING_PROGRESS,ae,C)},isPlayingAtTopQuality:function(tt){var St=tt?tt.id:null,Jt=ft(_.Z.AUDIO,St),Ve=ft(_.Z.VIDEO,St);return Jt===gt(_.Z.AUDIO,St)&&Ve===gt(_.Z.VIDEO,St)},updateTopQualityIndex:function(tt){var St=tt.type,Jt=tt.streamInfo.id,Ve=tt.representationCount-1;return W[Jt]=W[Jt]||{},W[Jt][St]=Ve,Ve},clearDataForStream:function(tt){Te&&Te.clearForStream(tt),U[tt]&&delete U[tt],Pe[tt]&&delete Pe[tt],z[tt]&&delete z[tt]},getThroughputHistory:function(){return Be},getBitrateList:Bt,getQualityForBitrate:_t,getTopBitrateInfoFor:function(tt){var St=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(St||(St=j.getActiveStreamInfo().id),tt&&U&&U[St]&&U[St][tt]){var Jt=gt(tt,St),Ve=Bt(U[St][tt].getMediaInfo());return Ve[Jt]?Ve[Jt]:null}return null},getMinAllowedIndexFor:ht,getMaxAllowedIndexFor:gt,getInitialBitrateFor:function(tt,St){if(function(){if(!Ge||!Ge.hasOwnProperty("getSavedBitrateSettings"))throw new Error(_.Z.MISSING_CONFIG_ERROR)}(),tt===_.Z.TEXT)return NaN;var Jt=Ge.getSavedBitrateSettings(tt),Ve=Ke.getAbrBitrateParameter("initialBitrate",tt),ut=Q.get().streaming.abr.initialRepresentationRatio[tt];if(-1===Ve)if(ut>-1){var ct=U[St][tt].getStreamInfo(),pt=pe.getAdaptationForType(ct.index,tt,ct).Representation_asArray;Ve=Array.isArray(pt)?pt[Math.max(Math.round(pt.length*ut)-1,0)].bandwidth/1e3:0}else Ve=isNaN(Jt)?tt===_.Z.VIDEO?1e3:100:Jt;return Ve},getQualityFor:ft,getAbandonmentStateFor:function(tt,St){return z[tt]&&z[tt][St]?z[tt][St].state:null},setPlaybackQuality:lt,checkPlaybackQuality:function(tt,St){try{if(!(tt&&U&&U[St]&&U[St][tt]))return!1;if(Te){var Jt=de.getPlaybackQuality();Jt&&Te.push(St,ge,Jt)}if(!Q.get().streaming.abr.autoSwitchBitrate[tt])return!1;var Ve=ft(tt,St),ut=Gi(Ae).create({abrController:C,switchHistory:Pe[St][tt],droppedFramesHistory:Te,streamProcessor:U[St][tt],currentValue:Ve,useBufferOccupancyABR:P[tt],useL2AABR:ie[tt],useLoLPABR:oe[tt],videoModel:de}),ct=ht(tt,St),pt=gt(tt,St),Qt=R.getMaxQuality(ut),on=Qt.quality;return void 0!==ct&&(on>_a.Z.NO_CHANGE?on:Ve)<ct&&(on=ct),on>pt&&(on=pt),Pe[St][tt].push({oldValue:Ve,newValue:on}),on>_a.Z.NO_CHANGE&&on!==Ve&&(z[St][tt].state===k.Z.ALLOW_LOAD||on<Ve)&&(qt(tt,Ve,on,pt,Qt.reason,St),!0)}catch{return!1}},setElementSize:wn,setWindowResizeEventCalled:function(tt){ve=tt},registerStreamType:function(tt,St){var Ve,ut,Jt=St.getStreamInfo().id;U[Jt]||(U[Jt]={}),Pe[Jt]||(Pe[Jt]={}),z[Jt]||(z[Jt]={}),Pe[Jt][tt]=Rr(Ae).create(),U[Jt][tt]=St,z[Jt][tt]={},z[Jt][tt].state=k.Z.ALLOW_LOAD,Ve=tt,(ut=Q.get().streaming.abr.ABRStrategy)===_.Z.ABR_STRATEGY_L2A?(P[Ve]=!1,oe[Ve]=!1,ie[Ve]=!0):ut===_.Z.ABR_STRATEGY_LoLP?(P[Ve]=!1,oe[Ve]=!0,ie[Ve]=!1):ut===_.Z.ABR_STRATEGY_BOLA?(P[Ve]=!0,oe[Ve]=!1,ie[Ve]=!1):ut===_.Z.ABR_STRATEGY_THROUGHPUT?(P[Ve]=!1,oe[Ve]=!1,ie[Ve]=!1):ut===_.Z.ABR_STRATEGY_DYNAMIC&&(P[Ve]=!(!P||!P[Ve])&&P[Ve],oe[Ve]=!1,ie[Ve]=!1),tt===_.Z.VIDEO&&wn()},unRegisterStreamType:function(tt,St){try{U[tt]&&U[tt][St]&&delete U[tt][St],Pe[tt]&&Pe[tt][St]&&delete Pe[tt][St],z[tt]&&z[tt][St]&&delete z[tt][St]}catch{}},setConfig:function(tt){tt&&(tt.streamController&&(j=tt.streamController),tt.domStorage&&(Ge=tt.domStorage),tt.mediaPlayerModel&&(Ke=tt.mediaPlayerModel),tt.customParametersModel&&(Oe=tt.customParametersModel),tt.cmsdModel&&(je=tt.cmsdModel),tt.dashMetrics&&(X=tt.dashMetrics),tt.adapter&&(pe=tt.adapter),tt.videoModel&&(de=tt.videoModel),tt.settings&&(Q=tt.settings))},reset:function(){Ie(),Fe.off(w.Z.LOADING_PROGRESS,ae,C),Fe.off(T.Z.QUALITY_CHANGE_RENDERED,ke,C),Fe.off(T.Z.METRIC_ADDED,We,C),R&&R.reset()}},b=me.getLogger(C),Ie(),C}as.__dashjs_factory_name="AbrController";var qa=F.Z.getSingletonFactory(as);qa.QUALITY_DEFAULT=0,F.Z.updateSingletonFactory(as.__dashjs_factory_name,qa);var ia=qa,Xs=new Map([[_.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[_.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[_.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[_.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Wu(){var C,b,R,j,W,K,U,z,le=this.context,ve=(0,V.Z)(le).getInstance(),fe=[];function J(){R&&(R.playbackRate=1,R.removeEventListener("canplay",J))}function pe(){return fe.length>0}function de(){if(R&&pe()&&0===R.playbackRate){var Te=document.createEvent("Event");Te.initEvent("waiting",!0,!1),R.dispatchEvent(Te)}}function Ke(Te,Be){R&&R.addEventListener(Te,Be)}function Oe(Te,Be){R&&R.removeEventListener(Te,Be)}function je(){return R?R.readyState:NaN}function Ge(){return R?R.buffered:null}function ge(Te,Be,P,ie,oe){if(R)for(var X=0;X<R.textTracks.length;X++)if(R.textTracks[X].kind===Te&&(!Be||R.textTracks[X].label==Be)&&R.textTracks[X].language===P&&R.textTracks[X].isTTML===ie&&R.textTracks[X].isEmbedded===oe)return R.textTracks[X];return null}function Pe(Te,Be){return Te===_.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||je()>=Te?(Be(),null):(P=Xs.get(Te),ie=Be,Ke(P,oe=function X(){Oe(P,X),ie(P)}),{func:oe,event:P});var P,ie,oe}return C={addEventListener:Ke,addTextTrack:function(Te,Be,P,ie,oe){if(!R)return null;var X=ge(Te,Be,P,ie,oe);return X||((X=R.addTextTrack(Te,Be,P)).isEmbedded=oe,X.isTTML=ie),X},appendChild:function(Te){R&&(R.appendChild(Te),void 0!==Te.isTTML&&(R.textTracks[R.textTracks.length-1].isTTML=Te.isTTML,R.textTracks[R.textTracks.length-1].isEmbedded=Te.isEmbedded))},getBufferRange:Ge,getClientHeight:function(){return R?R.clientHeight:NaN},getClientWidth:function(){return R?R.clientWidth:NaN},getElement:function(){return R},getEnded:function(){return R?R.ended:null},getPlaybackQuality:function(){if(!R)return null;var Te="webkitDroppedFrameCount"in R&&"webkitDecodedFrameCount"in R,Be=null;return"getVideoPlaybackQuality"in R?Be=R.getVideoPlaybackQuality():Te&&(Be={droppedVideoFrames:R.webkitDroppedFrameCount,totalVideoFrames:R.webkitDroppedFrameCount+R.webkitDecodedFrameCount,creationTime:new Date}),Be},getPlaybackRate:function(){return R?R.playbackRate:null},getPlayedRanges:function(){return R?R.played:null},getReadyState:je,getSource:function(){return R?R.src:null},getTTMLRenderingDiv:function(){return K},getTextTrack:ge,getTextTracks:function(){return R?R.textTracks:[]},getTime:function(){return R?isNaN(j)?R.currentTime:j:null},getVideoHeight:function(){return R?R.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(R){var Te=R.parentNode.host||R.parentNode;return Te?R.getBoundingClientRect().left-Te.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(R){var Te=R.parentNode.host||R.parentNode;return Te?R.getBoundingClientRect().top-Te.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return R?R.videoWidth:NaN},getVttRenderingDiv:function(){return U},initialize:function(){ve.on(w.Z.PLAYBACK_PLAYING,de,this)},isPaused:function(){return R?R.paused:null},isSeeking:function(){return R?R.seeking||!isNaN(j):null},isStalled:pe,pause:function(){R&&(R.pause(),R.autoplay=!1)},play:function(){if(R){R.autoplay=!0;var Te=R.play();Te&&Te.catch&&typeof Promise<"u"&&Te.catch(function(Be){"NotAllowedError"===Be.name&&ve.trigger(w.Z.PLAYBACK_NOT_ALLOWED),b.warn("Caught pending play exception - continuing (".concat(Be,")"))})}},removeChild:function(Te){R&&R.removeChild(Te)},removeEventListener:Oe,reset:function(){clearTimeout(z),ve.off(w.Z.PLAYBACK_PLAYING,de,this)},setCurrentTime:function(Te,Be){R&&(W&&W.func&&W.event&&Oe(W.event,W.func),j=Te,W=Pe(_.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(R)if(R.currentTime!==j)try{j=Be?function(P){var ie=Ge(),oe=P,X=9999999999;if(ie)for(var Q=0;Q<ie.length;Q++){var Ae=ie.start(Q),me=ie.end(Q),Fe=Math.abs(Ae-P),Ie=Math.abs(me-P);if(P>=Ae&&P<=me)return P;Fe<X&&(X=Fe,oe=Ae),Ie<X&&(X=Ie,oe=me)}return oe}(j):j,isNaN(j)||(R.currentTime=j),j=NaN}catch(P){0===R.readyState&&P.code===P.INVALID_STATE_ERR&&(z=setTimeout(function(){R.currentTime=j,j=NaN},400))}else j=NaN}))},setElement:function(Te){if(!(null==Te||Te&&/^(VIDEO|AUDIO)$/i.test(Te.nodeName)))throw"element is not video or audio DOM type!";(R=Te)&&(R.preload="auto")},setPlaybackRate:function(Te){R&&(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&R.readyState<=2&&Te>0?R.addEventListener("canplay",J):R.playbackRate=Te)},setSource:function(Te){R&&(Te?R.src=Te:(R.removeAttribute("src"),R.load()))},setStallState:function(Te,Be){var P,oe;P=Te,Be?null!==(oe=P)&&R&&!R.seeking&&-1===fe.indexOf(oe)&&fe.push(oe):function(oe){var X=fe.indexOf(oe);null!==oe&&-1!==X&&fe.splice(X,1)}(P)},setTTMLRenderingDiv:function(Te){(K=Te).style.position="absolute",K.style.display="flex",K.style.overflow="hidden",K.style.pointerEvents="none",K.style.top=0,K.style.left=0},setVttRenderingDiv:function(Te){U=Te},waitForReadyState:Pe,setDisableRemotePlayback:function(Te){R&&(R.disableRemotePlayback=Te)}},b=(0,G.Z)(le).getInstance().getLogger(C),j=NaN,C}Wu.__dashjs_factory_name="VideoModel";var Ka=F.Z.getSingletonFactory(Wu),Ya=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Qs="dashjs_?_bitrate",Js="dashjs_?_settings",kr="localStorage",zf="lastBitrate",Rl="lastMediaSettings";function $u(C){var b,R,j,K=(C=C||{}).settings;function U(fe){if(void 0!==j)return j;var J;j=!1;try{typeof window<"u"&&(J=window[fe])}catch(pe){return R.warn("DOMStorage access denied: "+pe.message),j}if(!J||fe!==kr&&"sessionStorage"!==fe)return j;try{J.setItem("1","1"),J.removeItem("1"),j=!0}catch(pe){R.warn("DOMStorage is supported, but cannot be used: "+pe.message)}return j}function z(){return 6e5*Math.round((new Date).getTime()/6e5)}function le(fe,J){return U(fe)&&K.get().streaming[J+"CachingInfo"].enabled}function ve(){if(!K)throw new Error(_.Z.MISSING_CONFIG_ERROR)}return b={getSavedBitrateSettings:function(fe){if(ve(),!K.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var J=NaN;if(le(kr,zf)){var pe=Qs.replace(/\?/,fe);try{var de=JSON.parse(localStorage.getItem(pe))||{},Ke=(new Date).getTime()-parseInt(de.timestamp,10)>=K.get().streaming.lastBitrateCachingInfo.ttl||!1,Oe=parseFloat(de.bitrate);isNaN(Oe)||Ke?Ke&&localStorage.removeItem(pe):(J=Oe,R.debug("Last saved bitrate for "+fe+" was "+Oe))}catch{return null}}return J},setSavedBitrateSettings:function(fe,J){if(le(kr,zf)&&J){var pe=Qs.replace(/\?/,fe);try{localStorage.setItem(pe,JSON.stringify({bitrate:J.toFixed(3),timestamp:z()}))}catch(de){R.error(de.message)}}},getSavedMediaSettings:function(fe){if(ve(),!K.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var J=null;if(le(kr,Rl)){var pe=Js.replace(/\?/,fe);try{var de=JSON.parse(localStorage.getItem(pe))||{},Ke=(new Date).getTime()-parseInt(de.timestamp,10)>=K.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;J=de.settings,Ke&&(localStorage.removeItem(pe),J=null)}catch{return null}}return J},setSavedMediaSettings:function(fe,J){if(le(kr,Rl)){var pe=Js.replace(/\?/,fe);try{localStorage.setItem(pe,JSON.stringify({settings:J,timestamp:z()}))}catch(de){R.error(de.message)}}}},R=(0,G.Z)(this.context).getInstance().getLogger(b),U(kr)&&Ya.forEach(function(fe){var J=localStorage.getItem(fe.oldKey);if(J){localStorage.removeItem(fe.oldKey);try{localStorage.setItem(fe.newKey,J)}catch(pe){R.error(pe.message)}}}),b}$u.__dashjs_factory_name="DOMStorage";var Ta=F.Z.getSingletonFactory($u),hu=ne(2032),Ds=ne(2011);function Zi(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de=this.context;function Ke(ge,Pe,Te,Be){var P=null,ie=ge?pe.resolve(ge.path):null,oe=Be||{init:!0,url:ie?ie.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Pe};b.debug("Start searching for initialization.");var X=Ge(oe);z.load({request:X,success:function(Q){if(oe.bytesLoaded=oe.range.end,!(P=j.findInitRange(Q)))return oe.range.end=oe.bytesLoaded+oe.bytesToLoad,Ke(ge,Pe,Te,oe);ge.range=P,Te(ge)},error:function(){Te(ge)}}),b.debug("Perform init search: "+oe.url)}function Oe(ge,Pe,Te,Be,P,ie){if(Te&&(void 0===Te.start||void 0===Te.end)){var oe=Te?Te.toString().split("-"):null;Te=oe?{start:parseFloat(oe[0]),end:parseFloat(oe[1])}:null}P=P||je;var X=null,Q=null,Ae=!!Te,me=ge?pe.resolve(ge.path):null,Fe={init:!1,url:me?me.url:void 0,range:Ae?Te:{start:0,end:1500},searching:!Ae,bytesLoaded:ie?ie.bytesLoaded:0,bytesToLoad:1500,mediaType:Pe},Ie=Ge(Fe);z.load({request:Ie,success:function(ae){var ke=Fe.bytesToLoad,We=ae.byteLength;if(Fe.bytesLoaded=Fe.range.end-Fe.range.start,X=j.parse(ae),(Q=X.getBox("sidx"))&&Q.isComplete){var gt,ht,ft=Q.references;if(null!=ft&&ft.length>0&&(gt=1===ft[0].reference_type),gt){var lt,qt,Kt,_t;b.debug("Initiate multiple SIDX load."),Fe.range.end=Fe.range.start+Q.size;var Bt=[],wn=0,tt=(Q.offset||Fe.range.start)+Q.size,St=function(Ve){Ve?(Bt=Bt.concat(Ve),++wn>=qt&&(Bt.sort(function(ut,ct){return ut.startTime-ct.startTime<0?-1:0}),P(Bt,ge,Be))):P(null,ge,Be)};for(lt=0,qt=ft.length;lt<qt;lt++)Kt=tt,_t=tt+ft[lt].referenced_size-1,tt+=ft[lt].referenced_size,Oe(ge,Pe,{start:Kt,end:_t},Be,St,Fe)}else b.debug("Parsing segments from SIDX. representation "+Pe+" - id: "+ge.id+" for range : "+Fe.range.start+" - "+Fe.range.end),ht=function(Ve,ut){for(var ct,Qt,on,Sn=Ve.references,Mt=Sn.length,Dn=Ve.timescale,qn=Ve.earliest_presentation_time,kn=ut.range.start+Ve.offset+Ve.first_offset+Ve.size,Kn=[],zn=0;zn<Mt;zn++)Qt=Sn[zn].subsegment_duration,on=Sn[zn].referenced_size,(ct=new Ds.Z).duration=Qt,ct.startTime=qn,ct.timescale=Dn,ct.mediaRange=kn+"-"+(kn+on-1),Kn.push(ct),qn+=Qt,kn+=on;return Kn}(Q,Fe),P(ht,ge,Be)}else{if(Q)Fe.range.start=Q.offset||Fe.range.start,Fe.range.end=Fe.range.start+(Q.size||ke);else{if(We<Fe.bytesLoaded)return void P(null,ge,Be);var Jt=X.getLastBox();Jt&&Jt.size?(Fe.range.start=Jt.offset+Jt.size,Fe.range.end=Fe.range.start+ke):Fe.range.end+=ke}Oe(ge,Pe,Fe.range,Be,null,Fe)}},error:function(){P(null,ge,Be)}}),b.debug("Perform SIDX load for type ".concat(Pe," : ").concat(Fe.url," with range ").concat(Fe.range.start," - ").concat(Fe.range.end))}function je(ge,Pe,Te){Te({segments:ge,representation:Pe,error:ge?void 0:new xe.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function Ge(ge){if(ge.url){var Pe=new te.Z;return Pe.setInfo(ge),Pe}}return C={setConfig:function(ge){ge.baseURLController&&(pe=ge.baseURLController),ge.dashMetrics&&(K=ge.dashMetrics),ge.mediaPlayerModel&&(U=ge.mediaPlayerModel),ge.errHandler&&(R=ge.errHandler),ge.boxParser&&(j=ge.boxParser),ge.debug&&(b=ge.debug.getLogger(C)),ge.requestModifier&&(W=ge.requestModifier),ge.errors&&(le=ge.errors),ge.urlUtils&&(J=ge.urlUtils),ge.constants&&(ve=ge.constants),ge.dashConstants&&(fe=ge.dashConstants)},initialize:function(){z=qr(de).create({errHandler:R,dashMetrics:K,mediaPlayerModel:U,requestModifier:W,boxParser:j,errors:le,urlUtils:J,constants:ve,dashConstants:fe})},loadInitialization:function(ge,Pe){return new Promise(function(Te){Ke(ge,Pe,Te)})},loadSegments:function(ge,Pe,Te){return new Promise(function(Be){Oe(ge,Pe,Te,Be)})},reset:function(){z&&(z.abort(),z=null)}}}Zi.__dashjs_factory_name="SegmentBaseLoader";var Ao=F.Z.getSingletonFactory(Zi);function Xu(C){var b;C=C||{};var R=new DataView(C.data),j=0;function W(U,z){var le=!0,ve=0;if(void 0===z&&(z=!1),U.tag>16777215?(R.getUint32(j)!==U.tag&&(le=!1),ve=4):U.tag>65535?(256*R.getUint16(j)+R.getUint8(j+2)!==U.tag&&(le=!1),ve=3):U.tag>255?(R.getUint16(j)!==U.tag&&(le=!1),ve=2):(R.getUint8(j)!==U.tag&&(le=!1),ve=1),!le&&U.required&&!z)throw new Error("required tag not found");return le&&(j+=ve),le}function K(U){var z=1,le=128,ve=-1,fe=0,J=R.getUint8(j),pe=0;for(pe=0;pe<8;pe+=1){if((J&le)===le){fe=void 0===U?J&~le:J,ve=pe;break}le>>=1}for(pe=0;pe<ve;pe+=1,z+=1)fe=fe<<8|255&R.getUint8(j+z);return j+=z,fe}return b={getPos:function(){return j},setPos:function(U){j=U},consumeTag:W,consumeTagAndSize:function(U,z){var le=W(U,z);return le&&K(),le},parseTag:function(U){var z;return W(U),z=K(),b[U.parse](z)},skipOverElement:function(U,z){var le,ve=W(U,z);return ve&&(le=K(),j+=le),ve},getMatroskaCodedNum:K,getMatroskaFloat:function(U){var z;switch(U){case 4:z=R.getFloat32(j),j+=4;break;case 8:z=R.getFloat64(j),j+=8}return z},getMatroskaUint:function(U){if(U>4)return function(ve){for(var fe=Math.floor(Number.MAX_SAFE_INTEGER/256),J=0,pe=0;pe<ve;pe+=1){if(J>fe)throw new Error("Value exceeds safe integer limit");J*=256;var de=R.getUint8(j+pe);if(J>Number.MAX_SAFE_INTEGER-de)throw new Error("Value exceeds safe integer limit");J+=de}return j+=ve,J}(U);for(var z=0,le=0;le<U;le+=1)z<<=8,z|=255&R.getUint8(j+le);return j+=U,z>>>0},moreData:function(){return j<R.byteLength}}}Xu.__dashjs_factory_name="EBMLParser";var Oo=F.Z.getClassFactory(Xu);function wo(){var C,b,R,j,W,K,U,z,le,ve,fe=this.context;function J(pe){var de=new te.Z;return de.setInfo(pe),de}return C={setConfig:function(pe){if(!(pe.baseURLController&&pe.dashMetrics&&pe.mediaPlayerModel&&pe.errHandler))throw new Error(_.Z.MISSING_CONFIG_ERROR);ve=pe.baseURLController,K=pe.dashMetrics,U=pe.mediaPlayerModel,j=pe.errHandler,le=pe.errors,b=pe.debug.getLogger(C),W=pe.requestModifier},initialize:function(){z=qr(fe).create({errHandler:j,dashMetrics:K,mediaPlayerModel:U,requestModifier:W,errors:le})},loadInitialization:function(pe,de){return new Promise(function(Ke){var Oe=null,je=pe?ve.resolve(pe.path):null,Ge=pe?pe.range.split("-"):null,ge={range:{start:Ge?parseFloat(Ge[0]):null,end:Ge?parseFloat(Ge[1]):null},request:Oe,url:je?je.url:void 0,init:!0,mediaType:de};b.info("Start loading initialization."),Oe=J(ge),z.load({request:Oe,success:function(){Ke(pe)},error:function(){Ke(pe)}}),b.debug("Perform init load: "+ge.url)})},loadSegments:function(pe,de,Ke){return new Promise(function(Oe){var je=null,Ge=pe?ve.resolve(pe.path):null,ge=Ge?Ge.url:void 0;je=J({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:je,url:ge,init:!1,mediaType:de}),b.debug("Parsing ebml header"),z.load({request:je,success:function(Pe){!function(Te,Be,P,ie){if(Te&&0!==Te.byteLength){var oe,X,Q,Ae,me=Oo(fe).create({data:Te}),Fe=P?P.split("-"):null,Ie=null,ae={url:Be,range:{start:Fe?parseFloat(Fe[0]):null,end:Fe?parseFloat(Fe[1]):null},request:Ie};for(b.debug("Parse EBML header: "+ae.url),me.skipOverElement(R.EBML),me.consumeTag(R.Segment),Q=me.getMatroskaCodedNum(),Q+=me.getPos(),Ae=me.getPos();me.moreData()&&!me.consumeTagAndSize(R.Segment.Info,!0);)if(!(me.skipOverElement(R.Segment.SeekHead,!0)||me.skipOverElement(R.Segment.Tracks,!0)||me.skipOverElement(R.Segment.Cues,!0)||me.skipOverElement(R.Void,!0)))throw new Error("no valid top level element found");for(;void 0===oe;){var ke=me.getMatroskaCodedNum(!0),We=me.getMatroskaCodedNum();ke===R.Segment.Info.Duration.tag?oe=me[R.Segment.Info.Duration.parse](We):me.setPos(me.getPos()+We)}Ie=J(ae),z.load({request:Ie,success:function(gt){X=function(ht,ft,lt,qt){var _t,Bt,wn,tt,St;for(Bt=[],tt=0,St=(_t=function(ut){var ct,pt,Qt=[],on=Oo(fe).create({data:ut});for(on.consumeTagAndSize(R.Segment.Cues);on.moreData()&&on.consumeTagAndSize(R.Segment.Cues.CuePoint,!0);){for((ct={}).CueTime=on.parseTag(R.Segment.Cues.CuePoint.CueTime),ct.CueTracks=[];on.moreData()&&on.consumeTag(R.Segment.Cues.CuePoint.CueTrackPositions,!0);){var Sn=on.getMatroskaCodedNum(),Mt=on.getPos();if((pt={}).Track=on.parseTag(R.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===pt.Track)throw new Error("Cue track cannot be 0");pt.ClusterPosition=on.parseTag(R.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),ct.CueTracks.push(pt),on.setPos(Mt+Sn)}if(0===ct.CueTracks.length)throw new Error("Mandatory cuetrack not found");Qt.push(ct)}if(0===Qt.length)throw new Error("mandatory cuepoint not found");return Qt}(ht)).length;tt<St;tt+=1)(wn=new Ds.Z).duration=tt<_t.length-1?_t[tt+1].CueTime-_t[tt].CueTime:qt-_t[tt].CueTime,wn.startTime=_t[tt].CueTime,wn.timescale=1e3,wn.mediaRange=_t[tt].CueTracks[0].ClusterPosition+ft+"-"+(tt<_t.length-1?_t[tt+1].CueTracks[0].ClusterPosition+ft-1:lt-1),Bt.push(wn);return b.debug("Parsed cues: "+Bt.length+" cues."),Bt}(gt,Ae,Q,oe),ie(X)},error:function(){b.error("Download Error: Cues "+ae.url),ie(null)}}),b.debug("Perform cues load: "+ae.url+" bytes="+ae.range.start+"-"+ae.range.end)}else ie(null)}(Pe,ge,Ke,function(Te){Oe({segments:Te,representation:pe,error:Te?void 0:new xe.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Oe({representation:pe,error:new xe.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){z&&(z.abort(),z=null)}},R={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},C}wo.__dashjs_factory_name="WebmSegmentBaseLoader";var Ml=F.Z.getSingletonFactory(wo);function Yo(C){var b,R,j,W=this.context,K=(C=C||{}).eventBus,U=C.events,z=C.dashMetrics,le=C.mediaPlayerModel,ve=C.errHandler,fe=C.baseURLController,J=C.debug,pe=C.boxParser,de=C.requestModifier,Ke=C.errors;function Oe(je){return"webm"===(je?je.split("/")[1]:"").toLowerCase()}return b={initialize:function(){R.initialize(),j.initialize()},getSegmentBaseInitSegment:function(je){return Oe(je.representation.mimeType)?j.loadInitialization(je.representation,je.mediaType):R.loadInitialization(je.representation,je.mediaType)},getSegmentList:function(je){return Oe(je.mimeType)?j.loadSegments(je.representation,je.mediaType,je.representation?je.representation.indexRange:null):R.loadSegments(je.representation,je.mediaType,je.representation?je.representation.indexRange:null)},reset:function(){R.reset(),j.reset()}},R=Ao(W).getInstance(),j=Ml(W).getInstance(),R.setConfig({baseURLController:fe,dashMetrics:z,mediaPlayerModel:le,errHandler:ve,eventBus:K,events:U,errors:Ke,debug:J,boxParser:pe,requestModifier:de}),j.setConfig({baseURLController:fe,dashMetrics:z,mediaPlayerModel:le,errHandler:ve,eventBus:K,events:U,errors:Ke,debug:J,requestModifier:de}),b}Yo.__dashjs_factory_name="SegmentBaseController";var gu=F.Z.getSingletonFactory(Yo),zo=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},oa=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},go=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},jc=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};var Wf=function(){function C(j){var W=this;(function(K,U){if(!(K instanceof U))throw new TypeError("Cannot call a class as a function")})(this,C),this.valid="/"==j[0],this.path=j.split("/").filter(function(K){return 0!==K.length}).map(function(K){var U={name:K},z=K.indexOf("[");if(-1!=z){U.name=K.substring(0,z);var le=K.substring(z+1,K.length-1);W.valid=W.valid&&-1==le.indexOf("[");var ve=le.indexOf("=");-1!=ve?(U.attribute={name:le.substring(1,ve),value:le.substring(ve+1)},-1!=["'",'"'].indexOf(U.attribute.value[0])&&(U.attribute.value=U.attribute.value.substring(1,U.attribute.value.length-1))):U.position=parseInt(le,10)-1}return U})}var R;return(R=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return"text()"===this.path[this.path.length-1].name}},{key:"getMpdTarget",value:function(j,W){for(var K=null,U=j,z=1,le="MPD";z<this.path.length&&null!==U;){K=U;var ve=this.path[z];if(le=ve.name,z!==this.path.length-1||!le.startsWith("@")&&"text()"!==le){var fe=K[le+"_asArray"]||[];0===fe.length&&K[le]&&fe.push(K[le]),ve.position?U=fe[ve.position]||null:ve.attribute?function(){var J=ve.attribute;U=fe.filter(function(pe){return pe[J.name]==J.value})[0]||null}():U=fe[0]||null}z++}return null===U?null:le.startsWith("@")?{name:le.substring(1),leaf:U,target:U}:"text()"===le?{name:"__text",leaf:U,target:U}:{name:le,leaf:U,target:W?K:U}}}])&&function qc(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C.prototype,R),C}();var ch=function(){function C(j,W,K){(function(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")})(this,C),this.action=j,this.xpath=W,this.value=K,this.position=null}var R;return(R=[{key:"getMpdTarget",value:function(j){return this.xpath.getMpdTarget(j,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}])&&function Nl(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C.prototype,R),C}();function $f(){var C,b;return C={getIsPatch:function(j){return j&&j.hasOwnProperty(E.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(j){return j&&j.hasOwnProperty(E.Z.PUBLISH_TIME)?new Date(j[E.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(j){return j&&j.hasOwnProperty(E.Z.ORIGINAL_PUBLISH_TIME)?new Date(j[E.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(j){return j&&j[E.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(j){return j?(j.__children||[]).map(function(W){var K=Object.keys(W)[0];if("add"!==K&&"remove"!==K&&"replace"!==K)return b.warn("Ignoring node of invalid action: ".concat(K)),null;var U=W[K],z=U.sel;if("add"===K&&U.type){if(!U.type.startsWith("@"))return b.warn("Ignoring add action for prefixed namespace declaration: ".concat(U.type,"=").concat(U.__text)),null;z="".concat(z,"/").concat(U.type)}var le=new Wf(z);if(!le.isValid())return b.warn("Ignoring action with invalid selector: ".concat(K," - ").concat(z)),null;var ve=null;le.findsAttribute()||le.findsTextReplace()?ve=U.__text||"":"remove"!==K&&(ve=U.__children.reduce(function(J,pe){var de=Object.keys(pe)[0];return"#text"!==de&&(J[de]=J[de]||[],J[de].push(pe[de])),J},{}));var fe=new ch(K,le,ve);return"add"===K&&(fe.position=U.pos),fe}).filter(function(W){return!!W}):[]}},b=(0,G.Z)(this.context).getInstance().getLogger(C),C}$f.__dashjs_factory_name="PatchManifestModel";var Xf=F.Z.getSingletonFactory($f);function Qf(){var C,b,R,j,W,K,U,z=this.context;function le(oe,X,Q){var me=b.getAdaptationsForType(j[0].mpd.manifest,oe,X);if(!me||0===me.length)return null;if(me.length>1&&Q){var Fe=J(Q,X);if(W[Q.id]&&W[Q.id][X])for(var Ie=0,ae=me.length;Ie<ae;Ie++)if(ve(W[Q.id][X],Fe[Ie]))return me[Ie];for(var ke=0,We=me.length;ke<We;ke++)if(b.getRolesForAdaptation(me[ke]).filter(function(gt){return gt.value===E.Z.MAIN})[0])return me[ke]}return me[0]}function ve(oe,X){if(!oe||!X)return!1;var Q=oe.id===X.id,Ae=oe.codec===X.codec,me=oe.viewpoint===X.viewpoint,Fe=JSON.stringify(oe.viewpointsWithSchemeIdUri)===JSON.stringify(X.viewpointsWithSchemeIdUri),Ie=oe.lang===X.lang,ae=oe.roles.toString()===X.roles.toString(),ke=JSON.stringify(oe.rolesWithSchemeIdUri)===JSON.stringify(X.rolesWithSchemeIdUri),We=oe.accessibility.toString()===X.accessibility.toString(),gt=JSON.stringify(oe.accessibilitiesWithSchemeIdUri)===JSON.stringify(X.accessibilitiesWithSchemeIdUri),ht=oe.audioChannelConfiguration.toString()===X.audioChannelConfiguration.toString(),ft=JSON.stringify(oe.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(X.audioChannelConfigurationsWithSchemeIdUri);return Q&&Ae&&me&&Fe&&Ie&&ae&&ke&&We&&gt&&ht&&ft}function fe(oe,X,Q,Ae,me,Fe){var ae,ke,We,gt,ht,ft=[];if(!Ae||0===Ae.length)return[];var lt=b.getAdaptationsForPeriod(X);for(We=0,ht=Ae.length;We<ht;We++)if(ae=ge(lt[ke=b.getIndexForAdaptation(Ae[We],oe,Q.index)]),Fe){var qt=ae.accessibility.length;for(gt=0;gt<qt;gt++)if(ae){var Kt=ae.accessibility[gt];if(0===Kt.indexOf("cea-608:")){var _t=Kt.substring(8).split(";");if("CC"===_t[0].substring(0,2))for(gt=0;gt<_t.length;gt++)ae||(ae=ge.call(this,lt[ke])),Pe(ae,_t[gt].substring(0,3),_t[gt].substring(4)),ft.push(ae),ae=null;else for(gt=0;gt<_t.length;gt++)ae||(ae=ge.call(this,lt[ke])),Pe(ae,"CC"+(gt+1),_t[gt]),ft.push(ae),ae=null}else 0===Kt.indexOf("cea-608")&&(Pe(ae,K.CC1,"eng"),ft.push(ae),ae=null)}}else me===K.IMAGE?(ae.type=K.IMAGE,ft.push(ae),ae=null):ae&&ft.push(ae);return ft}function J(oe,X,Q){var Ae=j,me=Q,Fe=[];if(me)Be(),Ae=pe(me);else{if(!(j.length>0))return Fe;me=j[0].mpd.manifest}var Ie=Ge(oe,Ae),ae=b.getAdaptationsForType(me,oe?oe.index:null,X);return Fe=fe(me,Ie,oe,ae,X),X===K.TEXT&&(ae=b.getAdaptationsForType(me,oe?oe.index:null,K.VIDEO),Fe=Fe.concat(fe(me,Ie,oe,ae,X,!0))),Fe}function pe(oe){var X=de(oe);return b.getRegularPeriods(X)}function de(oe){var X=Oe(oe);return b.getMpd(X)}function Ke(){j=[],W={}}function Oe(oe){return oe||(j.length>0?j[0].mpd.manifest:null)}function je(oe){try{var X=Ge(oe.streamInfo,j),Q=b.getAdaptationsForPeriod(X);return oe&&oe.streamInfo&&void 0!==oe.streamInfo.id&&Q?Q[oe.index]:null}catch{return null}}function Ge(oe,X){for(var Q=X.length,Ae=0;Ae<Q;Ae++){var me=X[Ae];if(oe&&oe.id===me.id)return me}return null}function ge(oe){if(!oe)return null;var X,Q,Ae,me,Fe,Ie=new oa,ae=oe.period.mpd.manifest.Period_asArray[oe.period.index].AdaptationSet_asArray[oe.index];if(Ie.id=oe.id,Ie.index=oe.index,Ie.type=oe.type,Ie.streamInfo=Te(oe.period),Ie.representationCount=b.getRepresentationCount(ae),Ie.labels=b.getLabelsForAdaptation(ae),Ie.lang=b.getLanguageForAdaptation(ae),Ie.segmentAlignment=b.getSegmentAlignment(ae),Ie.subSegmentAlignment=b.getSubSegmentAlignment(ae),X=b.getViewpointForAdaptation(ae),Ie.viewpoint=X.length?X[0].value:void 0,Ie.viewpointsWithSchemeIdUri=X,Fe=b.getAccessibilityForAdaptation(ae),Ie.accessibility=Fe.map(function(ft){var lt=ft.value,qt=lt;return ft.schemeIdUri&&ft.schemeIdUri.search("cea-608")>=0&&void 0!==U&&(qt=lt?"cea-608:"+lt:"cea-608",Ie.embeddedCaptions=!0),qt}),Ie.accessibilitiesWithSchemeIdUri=Fe,Q=b.getAudioChannelConfigurationForAdaptation(ae),Ie.audioChannelConfiguration=Q.map(function(ft){return ft.value}),Ie.audioChannelConfigurationsWithSchemeIdUri=Q,0===Ie.audioChannelConfiguration.length&&Array.isArray(ae.Representation_asArray)&&ae.Representation_asArray.length>0&&(Ae=b.getAudioChannelConfigurationForRepresentation(ae.Representation_asArray[0]),Ie.audioChannelConfiguration=Ae.map(function(ft){return ft.value}),Ie.audioChannelConfigurationsWithSchemeIdUri=Ae),me=b.getRolesForAdaptation(ae),Ie.roles=me.map(function(ft){return ft.value}),Ie.rolesWithSchemeIdUri=me,Ie.codec=b.getCodec(ae),Ie.mimeType=b.getMimeType(ae),Ie.contentProtection=b.getContentProtectionData(ae),Ie.bitrateList=b.getBitrateListForAdaptation(ae),Ie.selectionPriority=b.getSelectionPriority(ae),Ie.contentProtection){var ke=Ie.contentProtection.map(function(ft){return b.getKID(ft)}).filter(function(ft){return null!==ft});if(ke.length){var We=ke[0];Ie.contentProtection.forEach(function(ft){ft.keyId=We})}}if(Ie.isText=b.getIsText(ae),Ie.supplementalProperties=b.getSupplementalPropertiesForAdaptation(ae),(!Ie.supplementalProperties||0===Object.keys(Ie.supplementalProperties).length)&&Array.isArray(ae.Representation_asArray)&&ae.Representation_asArray.length>0){var gt=ae.Representation_asArray.map(function(ft){return b.getSupplementalPropertiesForRepresentation(ft)});gt.every(function(ft){return JSON.stringify(ft)===JSON.stringify(gt[0])})&&(Ie.supplementalProperties=gt[0])}if(Ie.supplementalPropertiesAsArray=b.getSupplementalPropertiesAsArrayForAdaptation(ae),(!Ie.supplementalPropertiesAsArray||0===Ie.supplementalPropertiesAsArray.length)&&Array.isArray(ae.Representation_asArray)&&ae.Representation_asArray.length>0){var ht=ae.Representation_asArray.map(function(ft){return b.getSupplementalPropertiesAsArrayForRepresentation(ft)});ht.every(function(ft){return JSON.stringify(ft)===JSON.stringify(ht[0])})&&(Ie.supplementalPropertiesAsArray=ht[0])}return Ie.isFragmented=b.getIsFragmented(ae),Ie.isEmbedded=!1,Ie}function Pe(oe,X,Q){oe.id=X,oe.index=100+parseInt(X.substring(2,3)),oe.type=K.TEXT,oe.codec="cea-608-in-SEI",oe.isEmbedded=!0,oe.isFragmented=!1;var Ae=Tl()(Q);oe.lang=Ae||Q,oe.roles=["caption"],oe.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Te(oe){var X,Q,Ae=new go;return Ae.id=oe.id,Ae.index=oe.index,Ae.start=oe.start,Ae.duration=oe.duration,Ae.manifestInfo=(X=oe.mpd,(Q=new jc).dvrWindowSize=X.timeShiftBufferDepth,Q.loadedTime=X.manifest.loadedTime,Q.availableFrom=X.availabilityStartTime,Q.minBufferTime=X.manifest.minBufferTime,Q.maxFragmentDuration=X.maxSegmentDuration,Q.duration=b.getDuration(X.manifest),Q.isDynamic=b.getIsDynamic(X.manifest),Q.serviceDescriptions=b.getServiceDescriptions(X.manifest),Q.protocol=X.manifest.protocol,Q),Ae.isLast=1===oe.mpd.manifest.Period_asArray.length||Math.abs(Ae.start+Ae.duration-Ae.manifestInfo.duration)<1,Ae}function Be(){if(!K)throw new Error("setConfig function has to be called previously")}function P(oe){return j.length>0?j[0].mpd.manifest.Period_asArray[oe]:null}function ie(oe,X,Q){var Ae,me,Fe,Ie,ae;if(oe)for(Ae=oe.AdaptationSet_asArray,Ie=0;Ie<Ae.length;Ie+=1)for(Fe=Ae[Ie].Representation_asArray,ae=0;ae<Fe.length;ae+=1)if(X===(me=Fe[ae]).id)return Q?ae:me;return null}return C={getBandwidthForRepresentation:function(oe,X){var Q;return(Q=ie(P(X),oe))?Q.bandwidth:null},getIndexForRepresentation:function(oe,X){return null!==(me=ie(P(X),oe,!0))?me:-1;var me},getMaxIndexForBufferType:function(oe,X){return function(Q,Ae){var me,Fe,Ie,ae;if(!Q||!Ae)return-1;for(Fe=Q.AdaptationSet_asArray,ae=0;ae<Fe.length;ae+=1)if(Ie=(me=Fe[ae]).Representation_asArray,b.getIsTypeOf(me,Ae))return Ie.length;return-1}(P(X),oe)},convertRepresentationToRepresentationInfo:function(oe){if(oe){var X=new zo,Ae=b.getRepresentationFor(oe.index,oe.adaptation.period.mpd.manifest.Period_asArray[oe.adaptation.period.index].AdaptationSet_asArray[oe.adaptation.index]);return X.id=oe.id,X.quality=oe.index,X.bandwidth=b.getBandwidth(Ae),X.fragmentDuration=oe.segmentDuration||(oe.segments&&oe.segments.length>0?oe.segments[0].duration:NaN),X.MSETimeOffset=oe.MSETimeOffset,X.mediaInfo=ge(oe.adaptation),X}return null},getStreamsInfo:function(oe,X){var Q=[],Ae=j;if(oe&&(Be(),Ae=pe(oe)),Ae.length>0){(!X||X>Ae.length)&&(X=Ae.length);for(var me=0;me<X;me++)Q.push(Te(Ae[me]))}return Q},getMediaInfoForType:function(oe,X){if(0===j.length||!oe)return null;var Q=Ge(oe,j);if(!Q)return null;var Ae=b.getAdaptationsForPeriod(Q),me=le(oe.index,X,oe);return me?ge(Ae[b.getIndexForAdaptation(me,j[0].mpd.manifest,oe.index)]):null},getAllMediaInfoForType:J,getAdaptationForType:le,getRealAdaptation:function(oe,X){var Q,Ae,me=Ge(oe,j);return Q=X?X.id:null,j.length>0&&me&&(Ae=Q?b.getAdaptationForId(Q,j[0].mpd.manifest,me.index):b.getAdaptationForIndex(X?X.index:null,j[0].mpd.manifest,me.index)),Ae},getProducerReferenceTimes:function(oe,X){var Q,Ae,me=Ge(oe,j);return Q=X?X.id:null,j.length>0&&me&&(Ae=Q?b.getAdaptationForId(Q,j[0].mpd.manifest,me.index):b.getAdaptationForIndex(X?X.index:null,j[0].mpd.manifest,me.index)),Ae?b.getProducerReferenceTimesForAdaptation(Ae):[]},getRealPeriodByIndex:function(oe){return b.getRealPeriodForIndex(oe,j[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(oe){try{return b.getEssentialPropertiesForRepresentation(oe)}catch{return[]}},getVoRepresentations:function(oe){var X=je(oe);return b.getRepresentationsForAdaptation(X)},getEventsFor:function(oe,X,Q){var Ae=[];if(j.length>0){var me=j[0].mpd.manifest;if(oe instanceof go){var Fe=Ge(oe,j);Ae=b.getEventsForPeriod(Fe)}else if(oe instanceof oa){var Ie=Ge(Q,j);Ae=b.getEventStreamForAdaptationSet(me,je(oe),Ie)}else if(oe instanceof zo){var ae=Ge(Q,j);Ae=b.getEventStreamForRepresentation(me,X,ae)}}return Ae},getEvent:function(oe,X,Q,Ae){try{if(!oe||!X||isNaN(Q)||!Ae)return null;var me=oe.scheme_id_uri,Fe=oe.value;if(!X[me+"/"+Fe])return null;var Ie,ae=new _o,ke=oe.timescale||1,We=Ae.adaptation.period.start,gt=X[me+"/"+Fe],ht=isNaN(Ae.presentationTimeOffset)?isNaN(gt.presentationTimeOffset)?0:gt.presentationTimeOffset:Ae.presentationTimeOffset,ft=oe.presentation_time_delta/ke;Ie=0===oe.version?We+Q-ht+ft:We-ht+ft;var lt=oe.event_duration/ke,qt=oe.id,Kt=oe.message_data;return ae.eventStream=gt,ae.eventStream.value=Fe,ae.eventStream.timescale=ke,ae.duration=lt,ae.id=qt,ae.calculatedPresentationTime=Ie,ae.messageData=Kt,ae.presentationTimeDelta=ft,ae}catch{return null}},getMpd:de,setConfig:function(oe){oe&&(oe.constants&&(K=oe.constants),oe.cea608parser&&(U=oe.cea608parser),oe.errHandler&&b.setConfig({errHandler:oe.errHandler}),oe.BASE64&&b.setConfig({BASE64:oe.BASE64}))},updatePeriods:function(oe){if(!oe)return null;Be(),j=pe(oe)},getIsTextTrack:function(oe){return b.getIsText(oe)},getUTCTimingSources:function(){var oe=Oe();return b.getUTCTimingSources(oe)},getSuggestedPresentationDelay:function(){return b.getSuggestedPresentationDelay(j.length>0?j[0].mpd:null)},getAvailabilityStartTime:function(oe){var X=de(oe);return b.getAvailabilityStartTime(X)},getIsTypeOf:function(oe,X){return b.getIsTypeOf(oe,X)},getIsDynamic:function(oe){var X=Oe(oe);return b.getIsDynamic(X)},getDuration:function(oe){var X=Oe(oe);return b.getDuration(X)},getRegularPeriods:pe,getContentSteering:function(oe){return b.getContentSteering(oe)},getLocation:function(oe){return b.getLocation(oe)},getPatchLocation:function(oe){var X=b.getPatchLocation(oe),Q=b.getPublishTime(oe);return X&&0!==X.length&&Q?X.filter(function(Ae){return isNaN(Ae.ttl)||Q.getTime()+Ae.ttl>(new Date).getTime()}):[]},getManifestUpdatePeriod:function(oe){return b.getManifestUpdatePeriod(oe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function(oe){return b.getPublishTime(oe)},getIsDVB:function(oe){return b.hasProfile(oe,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(oe){return R.getIsPatch(oe)},getBaseURLsFromElement:function(oe){return b.getBaseURLsFromElement(oe)},getRepresentationSortFunction:function(){return b.getRepresentationSortFunction()},getCodec:function(oe,X,Q){return b.getCodec(oe,X,Q)},getPeriodById:function(oe){if(!oe||0===j.length)return null;var X=j.filter(function(Q){return Q.id===oe});return X&&X.length>0?X[0]:null},setCurrentMediaInfo:function(oe,X,Q){W[oe]=W[oe]||{},W[oe][X]=W[oe][X]||{},W[oe][X]=Q},isPatchValid:function(oe,X){var Q=b.getId(oe),Ae=R.getMpdId(X),me=b.getPublishTime(oe),Fe=R.getPublishTime(X),Ie=R.getOriginalPublishTime(X);return!!(Q&&Ae&&Q==Ae&&me&&Ie&&me.getTime()==Ie.getTime()&&Fe&&me.getTime()<Fe.getTime())},applyPatchToManifest:function(oe,X){R.getPatchOperations(X).forEach(function(Q){var Ae=Q.getMpdTarget(oe);if(null!==Ae){var me=Ae.name,Fe=Ae.target,Ie=Ae.leaf;if(Q.xpath.findsAttribute()||"__text"===me)switch(Q.action){case"add":case"replace":Fe[me]=Q.value;break;case"remove":delete Fe[me]}else{var ae=(Fe[me+"_asArray"]||[]).indexOf(Ie),ke="prepend"===Q.position||"before"===Q.position;if(("remove"===Q.action||"replace"===Q.action)&&(delete Fe[me],-1!=ae)){var We=Fe[me+"_asArray"];We.splice(ae,1),We.length>1?Fe[me]=We:1==We.length?Fe[me]=We[0]:delete Fe[me+"_asArray"]}"add"!==Q.action&&"replace"!==Q.action||Object.keys(Q.value).forEach(function(gt){var ht=Q.value[gt],ft=Fe[gt+"_asArray"]||[];0===ft.length&&Fe[gt]&&ft.push(Fe[gt]),0===ft.length?ft=ht:ft.splice.apply(ft,[gt==me&&-1!=ae?ae+(ke?0:1)+("replace"==Q.action?-1:0):ke?0:ft.length,0].concat(ht)),Fe[gt+"_asArray"]=ft,Fe[gt]=1==ft.length?ft[0]:ft})}}})},areMediaInfosEqual:ve,reset:Ke},b=sr(z).getInstance(),R=Xf(z).getInstance(),Ke(),C}Qf.__dashjs_factory_name="DashAdapter";var fh=F.Z.getSingletonFactory(Qf);var Kc=function(){function C(){!function(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}(this,C)}var R;return(R=[{key:"round10",value:function(j,W){return K="round",U=j,void 0===(z=W)||0==+z?Math[K](U):(z=+z,null===(U=+U)||isNaN(U)||"number"!=typeof z||z%1!=0?NaN:(U=U.toString().split("e"),+((U=(U=Math[K](+(U[0]+"e"+(U[1]?+U[1]-z:-z)))).toString().split("e"))[0]+"e"+(U[1]?+U[1]+z:z))));var K,U,z}}])&&function xl(C,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}(C,R),C}(),Qu=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Sa=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.t=null,this.mt=null,this.to=null,this.lto=null},dh=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.t=null,this.level=null},Jf=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.target=null,this.state=k.Z.BUFFER_EMPTY},ed=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.time=null,this.range=null,this.manifestInfo=null},Ju=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.time=null,this.droppedFrames=null};function pu(C,b){if(!(C instanceof b))throw new TypeError("Cannot call a class as a function")}var hh=function C(){pu(this,C),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},td=function C(){pu(this,C),this.id=null,this.index=null,this.start=null,this.duration=null},ss=function C(){pu(this,C),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Pa=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Fa=function C(){(function(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")})(this,C),this.loadingRequests=[],this.executedRequests=[]};function nd(C){var b,R,j=(C=C||{}).settings,K=(0,V.Z)(this.context).getInstance();function U(){K.trigger(w.Z.METRICS_CHANGED)}function z(de){K.trigger(w.Z.METRIC_CHANGED,{mediaType:de}),U()}function le(de,Ke,Oe){K.trigger(w.Z.METRIC_UPDATED,{mediaType:de,metric:Ke,value:Oe}),z(de)}function ve(de,Ke,Oe){K.trigger(w.Z.METRIC_ADDED,{mediaType:de,metric:Ke,value:Oe}),z(de)}function fe(de,Ke){var Oe=null;return de&&(R.hasOwnProperty(de)?Oe=R[de]:Ke||(Oe=new Qu,R[de]=Oe)),Oe}function J(de,Ke,Oe){var je=fe(de);null!==je&&(je[Ke].push(Oe),je[Ke].length>j.get().streaming.metrics.maxListDepth&&je[Ke].shift())}function pe(de,Ke,Oe){J(de,Ke,Oe),ve(de,Ke,Oe)}return b={clearCurrentMetricsForType:function(de){delete R[de],z(de)},clearAllCurrentMetrics:function(){R={},U()},getMetricsFor:fe,addHttpRequest:function de(Ke,Oe,je,Ge,ge,Pe,Te,Be,P,ie,oe,X,Q,Ae,me,Fe,Ie){var ae=new yt.w;Pe&&Pe!==Ge&&(de(Ke,null,je,Ge,ge,null,null,Be,P,null,null,null,Q,null,null,Fe,Ie),ae.actualurl=Pe),ae.tcpid=Oe,ae.type=je,ae.url=Ge,ae.range=Be,ae.trequest=P,ae.tresponse=ie,ae.responsecode=X,ae.cmsd=Ie,ae._tfinish=oe,ae._stream=Ke,ae._mediaduration=Q,ae._quality=ge,ae._responseHeaders=Ae,ae._serviceLocation=Te,ae._fileLoaderType=Fe,me?me.forEach(function(ke){var We,gt,ht,ft,lt;We=ae,gt=ke.s,ht=ke.d,ft=ke.b,(lt=new yt.O).s=gt,lt.d=ht,lt.b=ft,We.trace.push(lt),We.interval||(We.interval=0),We.interval+=ht}):(delete ae.interval,delete ae.trace),pe(Ke,k.Z.HTTP_REQUEST,ae)},addRepresentationSwitch:function(de,Ke,Oe,je,Ge){var ge=new Sa;ge.t=Ke,ge.mt=Oe,ge.to=je,Ge?ge.lto=Ge:delete ge.lto,pe(de,k.Z.TRACK_SWITCH,ge)},addBufferLevel:function(de,Ke,Oe){var je=new dh;je.t=Ke,je.level=Oe,pe(de,k.Z.BUFFER_LEVEL,je)},addBufferState:function(de,Ke,Oe){var je=new Jf;je.target=Oe,je.state=Ke,pe(de,k.Z.BUFFER_STATE,je)},addDVRInfo:function(de,Ke,Oe,je){var Ge=new ed;Ge.time=Ke,Ge.range=je,Ge.manifestInfo=Oe,pe(de,k.Z.DVR_INFO,Ge)},addDroppedFrames:function(de,Ke){var Oe=new Ju,je=fe(de).DroppedFrames;Ke&&(Oe.time=Ke.creationTime,Oe.droppedFrames=Ke.droppedVideoFrames,je.length>0&&je[je.length-1]==Oe||pe(de,k.Z.DROPPED_FRAMES,Oe))},addSchedulingInfo:function(de,Ke,Oe,je,Ge,ge,Pe,Te,Be){var P=new Pa;P.mediaType=de,P.t=Ke,P.type=Oe,P.startTime=je,P.availabilityStartTime=Ge,P.duration=ge,P.quality=Pe,P.range=Te,P.state=Be,pe(de,k.Z.SCHEDULING_INFO,P)},addRequestsQueue:function(de,Ke,Oe){var je=new Fa;je.loadingRequests=Ke,je.executedRequests=Oe,fe(de).RequestsQueue=je,ve(de,k.Z.REQUESTS_QUEUE,je)},addManifestUpdate:function(de,Ke,Oe,je,Ge,ge,Pe,Te,Be,P){var ie=new hh;ie.mediaType=de,ie.type=Ke,ie.requestTime=Oe,ie.fetchTime=je,ie.availabilityStartTime=Ge,ie.presentationStartTime=ge,ie.clientTimeOffset=Pe,ie.currentTime=Te,ie.buffered=Be,ie.latency=P,J(_.Z.STREAM,k.Z.MANIFEST_UPDATE,ie),ve(de,k.Z.MANIFEST_UPDATE,ie)},updateManifestUpdateInfo:function(de,Ke){if(de){for(var Oe in Ke)de[Oe]=Ke[Oe];le(de.mediaType,k.Z.MANIFEST_UPDATE,de)}},addManifestUpdateStreamInfo:function(de,Ke,Oe,je,Ge){if(de){var ge=new td;ge.id=Ke,ge.index=Oe,ge.start=je,ge.duration=Ge,de.streamInfo.push(ge),le(de.mediaType,k.Z.MANIFEST_UPDATE_STREAM_INFO,de)}},addManifestUpdateRepresentationInfo:function(de,Ke,Oe,je,Ge,ge,Pe,Te){if(de&&de.representationInfo){var Be=new ss;Be.id=Ke,Be.index=Oe,Be.streamIndex=je,Be.mediaType=Ge,Be.startNumber=Pe,Be.fragmentInfoType=Te,Be.presentationTimeOffset=ge,de.representationInfo.push(Be),le(de.mediaType,k.Z.MANIFEST_UPDATE_TRACK_INFO,de)}},addPlayList:function(de){de.trace&&Array.isArray(de.trace)?de.trace.forEach(function(Ke){Ke.hasOwnProperty("subreplevel")&&!Ke.subreplevel&&delete Ke.subreplevel}):delete de.trace,pe(_.Z.STREAM,k.Z.PLAY_LIST,de)},addDVBErrors:function(de){pe(_.Z.STREAM,k.Z.DVB_ERRORS,de)}},R={},b}nd.__dashjs_factory_name="MetricsModel";var Yc=F.Z.getSingletonFactory(nd);function Pi(C){var b,R,j,W,U=(C=C||{}).metricsModel;function z(fe){var J=U.getMetricsFor(fe,!0);if(!J)return null;var pe,de=J.HttpList,Ke=null;if(!de||de.length<=0)return null;for(pe=de.length-1;pe>=0;){if(de[pe].responsecode){Ke=de[pe];break}pe--}return Ke}function le(fe){var J=U.getMetricsFor(fe,!0);return J&&J.HttpList?J.HttpList:[]}function ve(fe,J){if(!fe)return null;var pe=fe[J];return pe&&0!==pe.length?pe[pe.length-1]:null}return b={getCurrentRepresentationSwitch:function(fe){return ve(U.getMetricsFor(fe,!0),k.Z.TRACK_SWITCH)},getCurrentBufferState:function(fe){return ve(U.getMetricsFor(fe,!0),k.Z.BUFFER_STATE)},getCurrentBufferLevel:function(fe){var J=ve(U.getMetricsFor(fe,!0),k.Z.BUFFER_LEVEL);return J?Kc.round10(J.level/1e3,-3):0},getCurrentHttpRequest:z,getHttpRequests:le,getCurrentDroppedFrames:function(){return ve(U.getMetricsFor(_.Z.VIDEO,!0),k.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(fe){return ve(U.getMetricsFor(fe,!0),k.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(fe){return ve(fe?U.getMetricsFor(fe,!0):U.getMetricsFor(_.Z.VIDEO,!0)||U.getMetricsFor(_.Z.AUDIO,!0),k.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return ve(U.getMetricsFor(_.Z.STREAM),k.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(fe,J){if(!J)return null;var pe={},de=z(fe);de&&(pe=Dr.Z.parseHttpHeaders(de._responseHeaders));var Ke=pe[J.toLowerCase()];return void 0===Ke?null:Ke},getLatestMPDRequestHeaderValueByID:function(fe){if(!fe)return null;var J,pe,de,Ke={};for(de=(J=le(_.Z.STREAM)).length-1;de>=0;de--)if((pe=J[de]).type===yt.w.MPD_TYPE){Ke=Dr.Z.parseHttpHeaders(pe._responseHeaders);break}var Oe=Ke[fe.toLowerCase()];return void 0===Oe?null:Oe},addRepresentationSwitch:function(fe,J,pe,de,Ke){U.addRepresentationSwitch(fe,J,pe,de,Ke)},addDVRInfo:function(fe,J,pe,de){U.addDVRInfo(fe,J,pe,de)},updateManifestUpdateInfo:function(fe){var J=this.getCurrentManifestUpdate();U.updateManifestUpdateInfo(J,fe)},addManifestUpdateStreamInfo:function(fe){if(fe){var J=this.getCurrentManifestUpdate();U.addManifestUpdateStreamInfo(J,fe.id,fe.index,fe.start,fe.duration)}},addManifestUpdateRepresentationInfo:function(fe,J){if(fe){var pe=this.getCurrentManifestUpdate();U.addManifestUpdateRepresentationInfo(pe,fe.id,fe.index,fe.streamIndex,J,fe.presentationTimeOffset,fe.startNumber,fe.fragmentInfoType)}},addManifestUpdate:function(fe){U.addManifestUpdate(_.Z.STREAM,fe.type,fe.requestStartDate,fe.requestEndDate)},addHttpRequest:function(fe,J,pe,de,Ke,Oe){U.addHttpRequest(fe.mediaType,null,fe.type,fe.url,fe.quality,J,fe.serviceLocation||null,fe.range||null,fe.requestStartDate,fe.firstByteDate,fe.requestEndDate,pe,fe.duration,de,Ke,fe.fileLoaderType,Oe)},addSchedulingInfo:function(fe,J){U.addSchedulingInfo(fe.mediaType,new Date,fe.type,fe.startTime,fe.availabilityStartTime,fe.duration,fe.quality,fe.range,J)},addRequestsQueue:function(fe,J,pe){U.addRequestsQueue(fe,J,pe)},addBufferLevel:function(fe,J,pe){U.addBufferLevel(fe,J,pe)},addBufferState:function(fe,J,pe){U.addBufferState(fe,J,pe)},addDroppedFrames:function(fe){U.addDroppedFrames(_.Z.VIDEO,fe)},addPlayList:function(){W&&(U.addPlayList(W),W=null)},addDVBErrors:function(fe){U.addDVBErrors(fe)},createPlaylistMetrics:function(fe,J){(W=new et).start=new Date,W.mstart=fe,W.starttype=J},createPlaylistTraceMetrics:function(fe,J,pe){!0===R&&(R=!1,(j=new rt).representationid=fe,j.start=new Date,j.mstart=J,j.playbackspeed=null!==pe?pe.toString():null)},updatePlayListTraceMetrics:function(fe){if(j)for(var J in j)j[J]=fe[J]},pushPlayListTraceMetrics:function(fe,J){if(!1===R&&W&&j&&j.start){var pe=j.start,de=fe.getTime()-pe.getTime();j.duration=de,j.stopreason=J,W.trace.push(j),R=!0}},clearAllCurrentMetrics:function(){U.clearAllCurrentMetrics()}},U=U||Yc(this.context).getInstance({settings:C.settings}),R=!0,j=null,W=null,b}Pi.__dashjs_factory_name="DashMetrics";var mu=F.Z.getSingletonFactory(Pi);function Wo(){var C,b,R,j,W=this.context,K=(0,V.Z)(W).getInstance(),U=(0,ot.Z)(W).getInstance();function z(Ge){j=Ge}function le(Ge,ge,Pe,Te){var Be,P=ge.adaptation.period.mpd,ie=P.availabilityStartTime;if(Te)Be=Pe&&P.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(ie.getTime()+1e3*(Ge+P.timeShiftBufferDepth)):P.availabilityEndTime;else if(Pe){var oe=ge.availabilityTimeOffset;Be=new Date(ie.getTime()+1e3*(Ge-oe))}else Be=ie;return Be}function ve(Ge,ge){return(Ge.getTime()-ge.mpd.availabilityStartTime.getTime()+1e3*j)/1e3}function fe(Ge,ge){return Ge+(ge.adaptation.period.start-ge.presentationTimeOffset)}function J(Ge){var ge={start:NaN,end:NaN},Pe=Ge[0].getAdapter().getRegularPeriods()[0],Te=ve(new Date,Pe);if(!Ge||0===Ge.length)return{range:ge,now:Te};Ge.forEach(function(P){var ie=P.getAdapter(),oe=ie.getMediaInfoForType(P.getStreamInfo(),_.Z.VIDEO)||ie.getMediaInfoForType(P.getStreamInfo(),_.Z.AUDIO),X=ie.getVoRepresentations(oe)[0],Q={start:NaN,end:NaN};if(X)if(X.segmentInfoType===E.Z.SEGMENT_TIMELINE)Q=function(me){var Fe,Ie,ae,ke,gt=b.getRepresentationFor(me.index,me.adaptation.period.mpd.manifest.Period_asArray[me.adaptation.period.index].AdaptationSet_asArray[me.adaptation.index]),ht=gt.SegmentTemplate||gt.SegmentList,lt=ht.timescale,qt=ht.SegmentTimeline.S_asArray,Kt={start:0,end:0},_t=qt[0].t,Bt=!isNaN(_t),wn=Bt?_t:0,tt=0;for(Bt&&(Kt.start=fe(wn/lt,me)),ae=0,ke=qt.length;ae<ke;ae++)Ie=0,(Fe=qt[ae]).hasOwnProperty("r")&&(Ie=Fe.r),tt+=Fe.d*(1+Ie);return Kt.end=fe((wn+tt)/lt,me),Kt}(X);else{var Ae=X.adaptation.period;Q.start=Ae.start,Q.end=Math.max(Te,Ae.start+Ae.duration)}!isNaN(Q.start)&&(isNaN(ge.start)||ge.start>Q.start)&&(ge.start=Q.start),!isNaN(Q.end)&&(isNaN(ge.end)||ge.end<Q.end)&&(ge.end=Q.end)}),ge.end=Math.min(Te,ge.end);var Be=de(Ge,ge.end,!0);return ge.end=isNaN(Be)?ge.end:Be,ge.start=Pe&&Pe.mpd&&Pe.mpd.timeShiftBufferDepth&&!isNaN(Pe.mpd.timeShiftBufferDepth)&&!isNaN(ge.end)?Math.max(ge.end-Pe.mpd.timeShiftBufferDepth,ge.start):ge.start,ge.start=de(Ge,ge.start),{range:ge,now:Te}}function pe(Ge,ge){R=Ge-ge.end}function de(Ge,ge){var Pe=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var Te=0,Be=!1,P=NaN;!Be&&Te<Ge.length;){var ie=Ge[Te].getStreamInfo();ie.start<=ge&&(!isFinite(ie.duration)||ie.start+ie.duration>=ge)?(P=ge,Be=!0):!Pe&&ie.start>ge&&(isNaN(P)||ie.start<P)?P=ie.start:Pe&&ie.start+ie.duration<ge&&(isNaN(P)||ie.start+ie.duration>P)&&(P=ie.start+ie.duration),Te+=1}return P}catch{return ge}}function Ke(Ge){void 0===Ge.offset||isNaN(Ge.offset)||z(Ge.offset/1e3)}function Oe(){j=0,R=0}function je(){K.off(w.Z.UPDATE_TIME_SYNC_OFFSET,Ke,this),Oe()}return C={initialize:function(){Oe(),K.on(w.Z.UPDATE_TIME_SYNC_OFFSET,Ke,this)},getClientTimeOffset:function(){return j},setClientTimeOffset:z,getClientReferenceTime:function(){return Date.now()-1e3*R+1e3*j},calcAvailabilityStartTimeFromPresentationTime:function(Ge,ge,Pe){return le(Ge,ge,Pe)},calcAvailabilityEndTimeFromPresentationTime:function(Ge,ge,Pe){return le(Ge,ge,Pe,!0)},calcPresentationTimeFromWallTime:ve,calcPresentationTimeFromMediaTime:fe,calcPeriodRelativeTimeFromMpdRelativeTime:function(Ge,ge){return ge-Ge.adaptation.period.start},calcMediaTimeFromPresentationTime:function(Ge,ge){return Ge-ge.adaptation.period.start+ge.presentationTimeOffset},calcWallTimeForSegment:function(Ge,ge){var Te,Be;return ge&&(Te=Ge.presentationStartTime+Ge.representation.adaptation.period.mpd.suggestedPresentationDelay,Be=new Date(Ge.availabilityStartTime.getTime()+1e3*Te)),Be},calcTimeShiftBufferWindow:function(Ge,ge){if(!ge)return Be={start:NaN,end:NaN},P=0,ie=NaN,Ge.forEach(function(oe){var X=oe.getStreamInfo();P+=X.duration,(isNaN(ie)||X.start<ie)&&(ie=X.start)}),Be.start=ie,Be.end=ie+P,Be;var Be,P,ie;if(U.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Pe=J(Ge);return pe(Pe.now,Pe.range),Pe.range}return function(Te){var Be={start:NaN,end:NaN};if(!Te||0===Te.length)return Be;var P=Te[0].getAdapter().getRegularPeriods()[0],ie=ve(new Date,P),oe=P.mpd.timeShiftBufferDepth,X=isNaN(oe)?0:ie-oe;if(Be.start=de(Te,X),Be.end=!isNaN(Be.start)&&ie<Be.start?ie:de(Te,ie,!0),!isNaN(oe)&&Be.end<ie-oe&&(Be.end=NaN),U.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=J(Te);if(Q.range.end<Be.start)return K.trigger(T.Z.CONFORMANCE_VIOLATION,{level:Ri.LEVELS.WARNING,event:Ri.EVENTS.INVALID_DVR_WINDOW}),pe(Q.now,Q.range),Q.range}return Be}(Ge)},reset:je},b=sr(W).getInstance(),je(),C}Wo.__dashjs_factory_name="TimelineConverter";var ec=F.Z.getSingletonFactory(Wo),vu=ne(4593),ls=ne(6934);function yu(C){return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(C)}function ws(C,b){return(ws=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R})(C,b)}function Rs(C){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(C)}var nc=function(C){!function(K,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(U&&U.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),U&&ws(K,U)}(W,C);var b,R,j=(b=W,R=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,U=Rs(b);if(R){var z=Rs(this).constructor;K=Reflect.construct(U,arguments,z)}else K=U.apply(this,arguments);return function tc(C,b){return!b||"object"!==yu(b)&&"function"!=typeof b?function(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(C):b}(this,K)});function W(){var K;return function(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}(this,W),(K=j.call(this)).captionData=null,K.label=null,K.defaultTrack=!1,K.kind=null,K.isFragmented=!1,K.isEmbedded=!1,K.isTTML=null,K}return W}(oa),zc=ne(2295);function rc(){var C=0;function b(z){for(var le="",ve=0;ve<z.length;++ve)le+=z[ve].uchar;return le.length-le.replace(/^\s+/,"").length}function R(z){return"left: "+3.125*z.x+"%; top: "+6.66*z.y1+"%; width: "+(100-3.125*z.x)+"%; height: "+6.66*Math.max(z.y2-1-z.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function j(z){return"red"===z?"rgb(255, 0, 0)":"green"===z?"rgb(0, 255, 0)":"blue"===z?"rgb(0, 0, 255)":"cyan"===z?"rgb(0, 255, 255)":"magenta"===z?"rgb(255, 0, 255)":"yellow"===z?"rgb(255, 255, 0)":"white"===z?"rgb(255, 255, 255)":"black"===z?"rgb(0, 0, 0)":z}function W(z,le){var ve=z.videoHeight/15;return le?"font-size: "+ve+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(le.foreground?j(le.foreground):"rgb(255, 255, 255)")+"; font-style: "+(le.italics?"italic":"normal")+"; text-decoration: "+(le.underline?"underline":"none")+"; white-space: pre; background-color: "+(le.background?j(le.background):"transparent")+";":"font-size: "+ve+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function K(z){return z.replace(/^\s+/g,"")}function U(z){return z.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(z,le,ve,fe){var J,pe,de=null,Ke=!1,Oe=-1,je={start:le,end:ve,spans:[]},Ge="style_cea608_white_black",ge={},Pe={},Te=[];for(J=0;J<15;++J){var Be=fe.rows[J],P="",ie=null;if(!1===Be.isEmpty()){var oe=b(Be.chars);null===de&&(de={x:oe,y1:J,y2:J+1,p:[]}),oe!==Oe&&Ke&&(de.p.push(je),je={start:le,end:ve,spans:[]},de.y2=J,de.name="region_"+de.x+"_"+de.y1+"_"+de.y2,!1===ge.hasOwnProperty(de.name)?(Te.push(de),ge[de.name]=de):ge[de.name].p.contat(de.p),de={x:oe,y1:J,y2:J+1,p:[]});for(var X=0;X<Be.chars.length;++X){var Q=Be.chars[X],Ae=Q.penState;if(null===ie||!Ae.equals(ie)){P.trim().length>0&&(je.spans.push({name:Ge,line:P,row:J}),P="");var me="style_cea608_"+Ae.foreground+"_"+Ae.background;Ae.underline&&(me+="_underline"),Ae.italics&&(me+="_italics"),Pe.hasOwnProperty(me)||(Pe[me]=JSON.parse(JSON.stringify(Ae))),ie=Ae,Ge=me}P+=Q.uchar}P.trim().length>0&&je.spans.push({name:Ge,line:P,row:J}),Ke=!0,Oe=oe}else Ke=!1,Oe=-1,de&&(de.p.push(je),je={start:le,end:ve,spans:[]},de.y2=J,de.name="region_"+de.x+"_"+de.y1+"_"+de.y2,!1===ge.hasOwnProperty(de.name)?(Te.push(de),ge[de.name]=de):ge[de.name].p.contat(de.p),de=null)}de&&(de.p.push(je),de.y2=J+1,de.name="region_"+de.x+"_"+de.y1+"_"+de.y2,!1===ge.hasOwnProperty(de.name)?(Te.push(de),ge[de.name]=de):ge[de.name].p.contat(de.p),de=null);var Fe=[];for(J=0;J<Te.length;++J){var Ie=Te[J],ae="sub_cea608_"+C++,ke=document.createElement("div");ke.id=ae;var We=R(Ie);ke.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+We;var gt=document.createElement("div");gt.className="paragraph bodyStyle",gt.style.cssText=W(z);var ht=document.createElement("div");ht.className="cueUniWrapper",ht.style.cssText="unicode-bidi: normal; direction: ltr;";for(var ft=0;ft<Ie.p.length;++ft){var lt=Ie.p[ft],qt=0;for(pe=0;pe<lt.spans.length;++pe){var Kt=lt.spans[pe];if(Kt.line.length>0){if(0!==pe&&qt!=Kt.row){var _t=document.createElement("br");_t.className="lineBreak",ht.appendChild(_t)}var Bt=!1;qt===Kt.row&&(Bt=!0),qt=Kt.row;var wn=Pe[Kt.name],tt=document.createElement("span");tt.className="spanPadding "+Kt.name+" customSpanColor",tt.style.cssText=W(z,wn),tt.textContent=0!==pe&&Bt?pe===lt.spans.length-1?U(Kt.line):Kt.line:lt.spans.length>1&&pe<lt.spans.length-1&&Kt.row===lt.spans[pe+1].row?K(Kt.line):Kt.line.trim(),ht.appendChild(tt)}}}gt.appendChild(ht),ke.appendChild(gt);var St={bodyStyle:["%",90]};for(var Jt in Pe)Pe.hasOwnProperty(Jt)&&(St[Jt]=["%",90]);Fe.push({type:"html",start:le,end:ve,cueHTMLElement:ke,cueID:ae,cellResolution:[32,15],isFromCEA608:!0,fontSize:St,lineHeight:{},linePadding:{}})}return Fe}}}rc.__dashjs_factory_name="EmbeddedTextHtmlRender";var Wc=F.Z.getSingletonFactory(rc);function el(C){var b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je,Ge,ge=C.errHandler,Pe=C.manifestModel,Te=C.mediaController,Be=C.videoModel,P=C.textTracks,ie=C.vttParser,oe=C.vttCustomRenderingParser,X=C.ttmlParser,Q=C.streamInfo,Ae=C.settings,me=this.context,Fe=(0,V.Z)(me).getInstance(),Ie=!1;function ae(){U=null,le=NaN,ve=[],fe=null,z=!1,K=[],W=null}function ke(_t){var tt,St,Bt=new nc;for(var wn in _t)Bt[wn]=_t[wn];Bt.labels=_t.labels,Bt.defaultTrack=(tt=_t,St=!1,pe.length>1&&tt.isEmbedded?St=tt.id&&tt.id===_.Z.CC1:1===pe.length?tt.id&&"string"==typeof tt.id&&"CC"===tt.id.substring(0,2)&&(St=!0):0===pe.length&&(St=tt.index===K[0].index),St),Bt.isFragmented=_t.isFragmented,Bt.isEmbedded=!!_t.isEmbedded,Bt.isTTML=function(tt){return tt.codec&&tt.codec.search(_.Z.STPP)>=0||tt.mimeType&&tt.mimeType.search(_.Z.TTML)>=0}(_t),Bt.kind=function(tt,St){var Jt=tt.roles&&tt.roles.length>0?St[tt.roles[0]]:St.caption;return Jt===St.caption||Jt===St.subtitle?Jt:St.caption}(_t,{subtitle:"subtitles",caption:"captions"}),P.addTextTrack(Bt)}function We(_t){var Bt=_t.chunk;Bt.mediaInfo.embeddedCaptions&&ht(Bt.bytes,Bt)}function gt(_t){J=_t}function ht(_t,Bt){var wn=Bt.mediaInfo,tt=wn.type,Jt=wn.codec||wn.mimeType;Jt?-1!==wn.codec.indexOf("application/mp4")?function(Ve,ut,ct){var pt;if("InitializationSegment"===ut.segmentType)z=!0,le=j.getMediaTimescaleFromMoov(Ve);else{if(!z)return;(pt=j.getSamplesInfo(Ve).sampleList).length>0&&(fe=pt[0].cts-ut.start*le),ct.search(_.Z.STPP)>=0?function(Qt,on,Sn){var Mt,Dn;for(W=null!==W?W:qt(Sn),Mt=0;Mt<on.length;Mt++){var qn=on[Mt],kn=qn.cts,Kn=lt(),zn=Kn+kn/le;b.buffered.add(zn,zn+qn.duration/le);var er=new DataView(Qt,qn.offset,qn.subSizes[0]),rr=ls.Utils.dataViewToString(er,_.Z.UTF8),Ar=[],an=qn.offset+qn.subSizes[0];for(Dn=1;Dn<qn.subSizes.length;Dn++){var Un=new Uint8Array(Qt,an,qn.subSizes[Dn]),Gn=String.fromCharCode.apply(null,Un);Ar.push(Gn),an+=qn.subSizes[Dn]}try{var Pn=Pe.getValue().ttmlTimeIsRelative?kn/le:0,Bn=W.parse(rr,Pn,kn/le,(kn+qn.duration)/le,Ar);P.addCaptions(J,Kn,Bn)}catch(Ft){U.removeExecutedRequestsBeforeTime(),this.remove(),R.error("TTML parser error: "+Ft.message)}}}(Ve,pt,ct):function(Qt,on){var Sn,Mt,Dn,qn=[];for(Sn=0;Sn<on.length;Sn++){var kn=on[Sn];kn.cts-=fe;var Kn=lt()+kn.cts/le;b.buffered.add(Kn,Kn+kn.duration/le);var ar=Qt.slice(kn.offset,kn.offset+kn.size),er=ls.parseBuffer(ar);for(Mt=0;Mt<er.boxes.length;Mt++){var rr=er.boxes[Mt];if(R.debug("VTT box1: "+rr.type),"vtte"!==rr.type&&"vttc"===rr.type){R.debug("VTT vttc boxes.length = "+rr.boxes.length);var Ar={styles:{}};for(Dn=0;Dn<rr.boxes.length;Dn++){var an=rr.boxes[Dn];if(R.debug("VTT box2: "+an.type),"payl"===an.type)Ar.start=kn.cts/le,Ar.end=(kn.cts+kn.duration)/le,Ar.data=an.cue_text;else if("sttg"===an.type&&an.settings&&""!==an.settings)try{var Un=an.settings.split(" ");Ar.styles=ie.getCaptionStyles(Un)}catch{}}Ar&&Ar.data&&(qn.push(Ar),R.debug("VTT  ".concat(Ar.start," - ").concat(Ar.end," :  ").concat(Ar.data)))}}}qn.length>0&&P.addCaptions(J,0,qn)}(Ve,pt)}}(_t,Bt,Jt):tt===_.Z.VIDEO?function(Ve,ut){var ct,pt,Kn,zn,er,rr;if(ut.segmentType===yt.w.INIT_SEGMENT_TYPE)0===de&&(de=j.getMediaTimescaleFromMoov(Ve));else if(ut.segmentType===yt.w.MEDIA_SEGMENT_TYPE){if(0===de)return void R.warn("CEA-608: No timescale for embeddedTextTrack yet");var Qt=(pt=j.getSamplesInfo(Ve)).lastSequenceNumber,on=Math.trunc(ut.start),Sn=Math.trunc(ut.end);if(je[0]||je[1]||function(){for(var Kn,zn=0;zn<pe.length;zn++){if(-1===(Kn=P.getTrackIdxForId(pe[zn].id)))return void R.warn("CEA-608: data before track is ready.");var ar=ft(Kn);je[zn]=new(H().Cea608Parser)(zn+1,{newCue:ar},null)}}(),de){if(zn=Qt,er=Oe,rr=on,null!==(Kn=Ke)&&null!==zn&&null!==er&&null!==rr&&(zn===Kn?er!==rr:zn!==Kn+pt.numSequences))for(ct=0;ct<je.length;ct++)je[ct]&&je[ct].reset();for(var Mt=function(Kn,zn){if(0===zn.length)return null;for(var ar={splits:[],fields:[[],[]]},er=new DataView(Kn),rr=0;rr<zn.length;rr++)for(var Ar=zn[rr],an=H().findCea608Nalus(er,Ar.offset,Ar.size),Un=null,Gn=0,Pn=0;Pn<an.length;Pn++)for(var Bn=H().extractCea608DataFromRange(er,an[Pn]),Ft=0;Ft<2;Ft++)if(Bn[Ft].length>0){Ar.cts!==Un?Gn=0:Gn+=1;var dt=lt();ar.fields[Ft].push([Ar.cts+dt*de,Bn[Ft],Gn]),Un=Ar.cts}return ar.fields.forEach(function(Gt){Gt.sort(function(Re,at){return Re[0]===at[0]?Re[2]-at[2]:Re[0]-at[0]})}),ar}(Ve,pt.sampleList),Dn=0;Dn<je.length;Dn++){var qn=Mt.fields[Dn],kn=je[Dn];if(kn)for(ct=0;ct<qn.length;ct++)kn.addData(qn[ct][0]/de,qn[ct][1])}Ke=Qt,Oe=Sn}}}(_t,Bt):function(Ve,ut,ct){var pt,Qt,on=new DataView(Ve,0,Ve.byteLength);Qt=ls.Utils.dataViewToString(on,_.Z.UTF8);try{pt=qt(ct).parse(Qt,0),P.addCaptions(P.getCurrentTrackIdx(),0,pt),b.buffered&&b.buffered.add(ut.start,ut.end)}catch(Sn){ge.error(new xe.Z(Me.TIMED_TEXT_ERROR_ID_PARSE_CODE,Me.TIMED_TEXT_ERROR_MESSAGE_PARSE+Sn.message,Qt))}}(_t,Bt,Jt):R.error("No text type defined")}function ft(_t){return function(Bt,wn,tt){var St;(St=Be.getTTMLRenderingDiv()?Ge.createHTMLCaptionsFromScreen(Be.getElement(),Bt,wn,tt):[{start:Bt,end:wn,data:tt.getDisplayText(),styles:{}}])&&P.addCaptions(_t,0,St)}}function lt(){return isNaN(b.timestampOffset)?0:b.timestampOffset}function qt(_t){var Bt;return _t.search(_.Z.VTT)>=0?Bt=Ae.get().streaming.text.webvtt.customRenderingEnabled&&oe?oe:ie:(_t.search(_.Z.TTML)>=0||_t.search(_.Z.STPP)>=0)&&(Bt=X),Bt}function Kt(_t){pe.forEach(function(Bt){var wn=P.getTrackIdxForId(Bt.id);wn>=0&&P.deleteCuesFromTrackIdx(wn,_t.from,_t.to)})}return b={initialize:function(){Ie||(pe=[],J=null,de=0,je=[],Ke=null,Oe=null,Ie=!0,Ge=Wc(me).getInstance(),Fe.on(w.Z.VIDEO_CHUNK_RECEIVED,We,b),Fe.on(w.Z.BUFFER_CLEARED,Kt,b))},addMediaInfos:function(_t,Bt,wn){if(K=K.concat(Bt),_t===_.Z.TEXT&&Bt[0].isFragmented&&!Bt[0].isEmbedded){U=wn,b.buffered=(0,zc.Z)(me).create(),ve=Te.getTracksFor(_.Z.TEXT,Q.id).filter(function(Ve){return Ve.isFragmented});for(var tt=Te.getCurrentTrackFor(_.Z.TEXT,Q.id),St=0;St<ve.length;St++)if(ve[St]===tt){gt(St);break}}for(var Jt=0;Jt<Bt.length;Jt++)ke(Bt[Jt])},resetMediaInfos:function(){K=[]},getStreamId:function(){return Q.id},append:ht,abort:function(){},addEmbeddedTrack:function(_t){if(Ie&&_t)if(_t.id===_.Z.CC1||_t.id===_.Z.CC3){for(var Bt=0;Bt<pe.length;Bt++)if(pe[Bt].id===_t.id)return;pe.push(_t)}else R.warn("Embedded track "+_t.id+" not supported!")},resetEmbedded:function(){Fe.off(w.Z.VIDEO_CHUNK_RECEIVED,We,b),Fe.off(w.Z.BUFFER_CLEARED,Kt,b),P&&P.deleteAllTextTracks(),Ie=!1,pe=[],je=[null,null],Ke=null,Oe=null},getConfig:function(){return{fragmentModel:U,fragmentedTracks:ve,videoModel:Be}},setCurrentFragmentedTrackIdx:gt,remove:function(_t,Bt){void 0===_t&&_t===Bt&&(_t=b.buffered.start(0),Bt=b.buffered.end(b.buffered.length-1)),b.buffered.remove(_t,Bt),P.deleteCuesFromTrackIdx(J,_t,Bt)},reset:function(){ae(),K=[],j=null}},R=(0,G.Z)(me).getInstance().getLogger(b),j=(0,ga.Z)(me).getInstance(),ae(),b}el.__dashjs_factory_name="TextSourceBuffer";var tl=F.Z.getClassFactory(el),$o=ne(4403);function Ll(C,b){(null==b||b>C.length)&&(b=C.length);for(var R=0,j=new Array(b);R<b;R++)j[R]=C[R];return j}var rd=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function id(C){var b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je,Ge,ge,Pe=this.context,Te=(0,V.Z)(Pe).getInstance(),Be=C.videoModel,P=C.streamInfo,ie=C.settings;function oe(Ve,ut,ct,pt,Qt,on){var Sn=0,Mt=0;Ve/ut>ct/pt?Sn=(Mt=ut)/pt*ct:Mt=(Sn=Ve)/ct*pt;var Dn,qn,kn=0,Kn=0;return Sn/Mt>Qt?(Kn=Mt,kn=Mt*Qt):(kn=Sn,Kn=Sn/Qt),Dn=(Ve-kn)/2,qn=(ut-Kn)/2,on?{x:Dn+.1*kn,y:qn+.1*Kn,w:.8*kn,h:.8*Kn}:{x:Dn,y:qn,w:kn,h:Kn}}function X(Ve,ut){var ct=Be.getClientWidth(),pt=Be.getClientHeight(),Qt=Be.getVideoWidth(),on=Be.getVideoHeight(),Sn=Be.getVideoRelativeOffsetTop(),Mt=Be.getVideoRelativeOffsetLeft();if(0!==Qt&&0!==on){var Dn=Qt/on,qn=!1;Ve.isFromCEA608&&(Dn=1.1666666666666667,qn=!0);var kn=oe.call(this,ct,pt,Qt,on,Dn,qn),Kn=kn.w,zn=kn.h,ar=kn.x,er=kn.y;if(Kn!=ve||zn!=fe||ar!=z||er!=le||ut){if(z=ar+Mt,le=er+Sn,ve=Kn,fe=zn,J){var rr=J.style;rr&&(rr.left=z+"px",rr.top=le+"px",rr.width=ve+"px",rr.height=fe+"px",rr.zIndex=Ke&&document[Ke]||Oe?Ge:null,Te.trigger(T.Z.CAPTION_CONTAINER_RESIZE))}var Ar=Ve.activeCues;if(Ar)for(var an=Ar.length,Un=0;Un<an;++Un){var Gn=Ar[Un];Gn.scaleCue(Gn)}}}}function Q(Ve){var ut,ct,pt,Qt,on;if(Ve.cellResolution){var Dn=[ve/Ve.cellResolution[0],fe/Ve.cellResolution[1]];if(Ve.linePadding)for(ut in Ve.linePadding)if(Ve.linePadding.hasOwnProperty(ut)){ct=(Ve.linePadding[ut]*Dn[0]).toString();for(var qn=document.getElementsByClassName("spanPadding"),kn=0;kn<qn.length;kn++)qn[kn].style.cssText=qn[kn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ct),qn[kn].style.cssText=qn[kn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ct)}if(Ve.fontSize){for(ut in Ve.fontSize)if(Ve.fontSize.hasOwnProperty(ut)){"%"===Ve.fontSize[ut][0]?pt=Ve.fontSize[ut][1]/100:"c"===Ve.fontSize[ut][0]&&(pt=Ve.fontSize[ut][1]),ct=(pt*Dn[1]).toString(),on="defaultFontSize"!==ut?document.getElementsByClassName(ut):document.getElementsByClassName("paragraph");for(var Kn=0;Kn<on.length;Kn++)on[Kn].style.cssText=on[Kn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ct)}if(Ve.lineHeight)for(ut in Ve.lineHeight)if(Ve.lineHeight.hasOwnProperty(ut)){"%"===Ve.lineHeight[ut][0]?Qt=Ve.lineHeight[ut][1]/100:"c"===Ve.fontSize[ut][0]&&(Qt=Ve.lineHeight[ut][1]),ct=(Qt*Dn[1]).toString(),on=document.getElementsByClassName(ut);for(var zn=0;zn<on.length;zn++)on[zn].style.cssText=on[zn].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ct)}}}if(Ve.isd){var ar=document.getElementById(Ve.cueID);ar&&J.removeChild(ar),me(Ve)}}function Ae(Ve,ut){var ct=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,pt=/^#(.*)$/;if(ct.test(ut)){var Qt=ct.exec(ut),on=parseInt(Qt[4],10)-1;return"data:image/png;base64,"+btoa(Ve.images[on])}if(pt.test(ut)){var Sn=pt.exec(ut)[1];return"data:image/png;base64,"+Ve.embeddedImages[Sn]}return ut}function me(Ve){if(J){var ut=document.createElement("div");J.appendChild(ut),je=(0,$o.renderHTML)(Ve.isd,ut,function(ct){return Ae(Ve,ct)},J.clientHeight,J.clientWidth,!1,function(ct){R.info("renderCaption :",ct)},je,!0),ut.id=Ve.cueID,Te.trigger(T.Z.CAPTION_RENDERED,{captionDiv:ut,currentTrackIdx:U})}}function Fe(Ve,ut){if(!ie.get().streaming.text.extendSegmentedCues||!ut.cues||0===ut.cues.length)return!1;var ct=ut.cues[ut.cues.length-1];return!(ct.endTime<Ve.startTime||!function(pt,Qt,on){for(var Sn=0;Sn<on.length;Sn++){var Mt=on[Sn];if(JSON.stringify(pt[Mt])!==JSON.stringify(Qt[Mt]))return!1}return!0}(ct,Ve,rd)||(ct.endTime=Math.max(ct.endTime,Ve.endTime),0))}function Ie(Ve,ut){ut&&ut.forEach(function(ct){ct.kind&&"image"===ct.kind&&(ct.src=Ae(Ve,ct.src)),Ie(Ve,ct.contents)})}function ae(Ve,ut,ct){var pt=ft(Ve);if(pt&&Array.isArray(ct)&&0!==ct.length)for(var Qt=0;Qt<ct.length;Qt++){var on=void 0,Sn=ct[Qt];pt.cellResolution=Sn.cellResolution,pt.isFromCEA608=Sn.isFromCEA608,isNaN(Sn.start)||isNaN(Sn.end)||(on="html"===Sn.type&&J?ke(Sn,ut,pt):Sn.data?We(Sn,ut,pt):null);try{if(on){Kt(pt,on)||(ie.get().streaming.text.webvtt.customRenderingEnabled?(pt.manualCueList||(pt.manualCueList=[]),pt.manualCueList.push(on)):Fe(on,pt)||pt.addCue(on));var Mt=ie.get().streaming.buffer.bufferToKeep;Bt(pt,0,Be.getTime()-Mt)}else R.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Dn){throw wn(pt),pt.addCue(on),Dn}}}function ke(Ve,ut,ct){var pt=this,Qt=new j(Ve.start+ut,Ve.end+ut,"");return Qt.cueHTMLElement=Ve.cueHTMLElement,Qt.isd=Ve.isd,Qt.images=Ve.images,Qt.embeddedImages=Ve.embeddedImages,Qt.cueID=Ve.cueID,Qt.scaleCue=Q.bind(pt),Qt.cellResolution=Ve.cellResolution,Qt.lineHeight=Ve.lineHeight,Qt.linePadding=Ve.linePadding,Qt.fontSize=Ve.fontSize,J.style.left=z+"px",J.style.top=le+"px",J.style.width=ve+"px",J.style.height=fe+"px",Qt.isd&&Ie(Qt,Qt.isd.contents),Qt.onenter=function(){ct.mode===_.Z.TEXT_SHOWING&&(this.isd?(me(this),R.debug("Cue enter id:"+this.cueID)):(J.appendChild(this.cueHTMLElement),Q.call(pt,this),Te.trigger(T.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:U})))},Qt.onexit=function(){if(J)for(var on=J.childNodes,Sn=0;Sn<on.length;++Sn)on[Sn].id===this.cueID&&(R.debug("Cue exit id:"+on[Sn].id),J.removeChild(on[Sn]),--Sn)},Qt}function We(Ve,ut,ct){var pt=new j(Ve.start-ut,Ve.end-ut,Ve.data);if(pt.cueID="".concat(pt.startTime,"_").concat(pt.endTime),pt.isActive=!1,Ve.styles)try{void 0!==Ve.styles.align&&"align"in pt&&(pt.align=Ve.styles.align),void 0!==Ve.styles.line&&"line"in pt&&(pt.line=Ve.styles.line),void 0!==Ve.styles.snapToLines&&"snapToLines"in pt&&(pt.snapToLines=Ve.styles.snapToLines),void 0!==Ve.styles.position&&"position"in pt&&(pt.position=Ve.styles.position),void 0!==Ve.styles.size&&"size"in pt&&(pt.size=Ve.styles.size)}catch(Qt){R.error(Qt)}return pt.onenter=function(){ct.mode===_.Z.TEXT_SHOWING&&Te.trigger(T.Z.CAPTION_RENDERED,{currentTrackIdx:U})},pt}function gt(Ve){if(pe)for(var ut=pe.childNodes,ct=0;ct<ut.length;++ct)ut[ct].id===Ve.cueID&&(pe.removeChild(ut[ct]),--ct)}function ht(){var Ve,ut=[],ct=function(Qt,on){var Sn;if(typeof Symbol>"u"||null==Qt[Symbol.iterator]){if(Array.isArray(Qt)||(Sn=function(zn,ar){if(zn){if("string"==typeof zn)return Ll(zn,undefined);var er=Object.prototype.toString.call(zn).slice(8,-1);return"Object"===er&&zn.constructor&&(er=zn.constructor.name),"Map"===er||"Set"===er?Array.from(zn):"Arguments"===er||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(er)?Ll(zn,undefined):void 0}}(Qt))){Sn&&(Qt=Sn);var Mt=0,Dn=function(){};return{s:Dn,n:function(){return Mt>=Qt.length?{done:!0}:{done:!1,value:Qt[Mt++]}},e:function(zn){throw zn},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var qn,kn=!0,Kn=!1;return{s:function(){Sn=Qt[Symbol.iterator]()},n:function(){var zn=Sn.next();return kn=zn.done,zn},e:function(zn){Kn=!0,qn=zn},f:function(){try{kn||null==Sn.return||Sn.return()}finally{if(Kn)throw qn}}}}(Be.getTextTracks());try{for(ct.s();!(Ve=ct.n()).done;){var pt=Ve.value;pt.manualMode===_.Z.TEXT_SHOWING&&ut.push(pt)}}catch(Qt){ct.e(Qt)}finally{ct.f()}return ut}function ft(Ve){return Ve>=0&&W[Ve]?Be.getTextTrack(W[Ve].kind,W[Ve].id,W[Ve].lang,W[Ve].isTTML,W[Ve].isEmbedded):null}function lt(Ve){var ut=this;if(Ve!==U){var ct=ft(U=Ve);qt.call(this,ct),de&&(clearInterval(de),de=null),ct&&"html"===ct.renderingType&&(X.call(this,ct,!0),window.ResizeObserver?(ge=new window.ResizeObserver(function(){X.call(ut,ct,!0)})).observe(Be.getElement()):de=setInterval(X.bind(this,ct),500))}}function qt(Ve){Jt.call(this),Ve&&"html"===Ve.renderingType?tt.call(this):St.call(this)}function Kt(Ve,ut){if(!Ve.cues)return!1;for(var ct=0;ct<Ve.cues.length;ct++)if(Ve.cues[ct].startTime===ut.startTime&&Ve.cues[ct].endTime===ut.endTime)return!0;return!1}function _t(Ve,ut,ct){var pt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return!!Ve&&(isNaN(ut)||(pt?Ve.startTime:Ve.endTime)>=ut)&&(isNaN(ct)||(pt?Ve.endTime:Ve.startTime)<=ct)}function Bt(Ve,ut,ct){var pt,Qt;if(!(ct<ut)&&Ve&&(Ve.cues||Ve.manualCueList)){var on=Ve.cues&&Ve.cues.length>0?"native":"custom",Sn="native"===on?Ve.cues:Ve.manualCueList;if(!Sn||0===Sn.length)return;for(var Mt=Sn.length-1;Mt>=0;Mt--)!_t(Sn[Mt],ut,ct,!0)||(pt=Sn[Mt],Qt=Be.getTime(),pt.startTime>=Qt&&pt.endTime<=Qt)||("native"===on?Ve.removeCue(Sn[Mt]):(gt(Sn[Mt]),delete Ve.manualCueList[Mt]))}}function wn(Ve,ut,ct){var pt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(Ve&&(Ve.cues||Ve.manualCueList)){var Qt=Ve.cues&&Ve.cues.length>0?"native":"custom",on="native"===Qt?Ve.cues:Ve.manualCueList;if(!on||0===on.length)return;for(var Mt=on.length-1;Mt>=0;Mt--)_t(on[Mt],ut,ct,pt)&&("native"===Qt?(on[Mt].onexit&&on[Mt].onexit(),Ve.removeCue(on[Mt])):(gt(on[Mt]),delete Ve.manualCueList[Mt]))}}function tt(){var Ve=document.getElementById("native-cue-style");if(!Ve){(Ve=document.createElement("style")).id="native-cue-style",document.head.appendChild(Ve);var ut=Ve.sheet,ct=Be.getElement();try{ct&&ut.insertRule(ct.id?"#"+ct.id+"::cue {background: transparent}":0!==ct.classList.length?"."+ct.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch(pt){R.info(""+pt.message)}}}function St(){var Ve=document.getElementById("native-cue-style");Ve&&document.head.removeChild(Ve)}function Jt(){if(J)for(;J.firstChild;)J.removeChild(J.firstChild)}return b={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(j=window.VTTCue||window.TextTrackCue,W=[],K=[],U=-1,z=0,le=0,ve=0,fe=0,J=null,pe=null,de=null,Oe=!1,Ge=2147483647,je=null,void 0!==document.fullscreenElement?Ke="fullscreenElement":void 0!==document.webkitIsFullScreen?Ke="webkitIsFullScreen":document.msFullscreenElement?Ke="msFullscreenElement":document.mozFullScreen&&(Ke="mozFullScreen"))},getStreamId:function(){return P.id},addTextTrack:function(Ve){W.push(Ve)},addCaptions:ae,createTracks:function(){W.sort(function(zn,ar){return zn.index-ar.index}),J=Be.getTTMLRenderingDiv(),pe=Be.getVttRenderingDiv();for(var Ve,ut,Sn=-1,Mt=0;Mt<W.length;Mt++){var Dn=(ut=(Ve=W[Mt]).kind,Be.addTextTrack(ut,void 0!==Ve.id?Ve.id:Ve.lang,Ve.lang,Ve.isTTML,Ve.isEmbedded));K.push(Dn),W[Mt].defaultTrack&&(Dn.default=!0,Sn=Mt);var qn=ft(Mt);qn&&(qn.mode=_.Z.TEXT_SHOWING,qn.renderingType=J&&(W[Mt].isTTML||W[Mt].isEmbedded)?"html":"default"),ae(Mt,0,W[Mt].captionData),Te.trigger(T.Z.TEXT_TRACK_ADDED)}if(lt.call(this,Sn),Sn>=0){Te.on(T.Z.PLAYBACK_METADATA_LOADED,function zn(){var ar=ft(Sn);ar&&"html"===ar.renderingType&&X.call(this,ar,!0),Te.off(T.Z.PLAYBACK_METADATA_LOADED,zn,this)},this);for(var kn=0;kn<W.length;kn++){var Kn=ft(kn);Kn&&(Kn.mode=kn===Sn?_.Z.TEXT_SHOWING:_.Z.TEXT_HIDDEN,Kn.manualMode=kn===Sn?_.Z.TEXT_SHOWING:_.Z.TEXT_HIDDEN)}}Te.trigger(w.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:U,tracks:W,streamId:P.id})},getCurrentTrackIdx:function(){return U},setCurrentTrackIdx:lt,getTrackIdxForId:function(Ve){for(var ut=-1,ct=0;ct<W.length;ct++)if(W[ct].id===Ve){ut=ct;break}return ut},getCurrentTrackInfo:function(){return W[U]},setModeForTrackIdx:function(Ve,ut){var ct=ft(Ve);ct&&ct.mode!==ut&&(ct.mode=ut),ct&&ct.manualMode!==ut&&(ct.manualMode=ut)},deleteCuesFromTrackIdx:function(Ve,ut,ct){var pt=ft(Ve);pt&&wn(pt,ut,ct)},deleteAllTextTracks:function(){for(var Ve=K?K.length:0,ut=0;ut<Ve;ut++){var ct=ft(ut);ct&&wn.call(this,ct,P.start,P.start+P.duration,!1)}K=[],W=[],de&&(clearInterval(de),de=null),ge&&Be&&(ge.unobserve(Be.getElement()),ge=null),U=-1,Jt.call(this)},deleteTextTrack:function(Ve){Be.removeChild(K[Ve]),K.splice(Ve,1)},manualCueProcessing:function(Ve){var ut=ht();if(ut&&ut.length>0){var ct=ut[0].manualCueList;ct&&ct.length>0&&ct.forEach(function(pt){pt.startTime<=Ve&&pt.endTime>=Ve&&!pt.isActive?(pt.isActive=!0,WebVTT.processCues(window,[pt],pe,pt.cueID)):pt.isActive&&(pt.startTime>Ve||pt.endTime<Ve)&&(pt.isActive=!1,gt(pt))})}},disableManualTracks:function(){var Ve=ht();if(Ve&&Ve.length>0){var ut=Ve[0].manualCueList;ut&&ut.length>0&&ut.forEach(function(ct){if(ct.isActive&&(ct.isActive=!1,pe))for(var pt=pe.childNodes,Qt=0;Qt<pt.length;++Qt)pt[Qt].id===ct.cueID&&(pe.removeChild(pt[Qt]),--Qt)})}}},R=(0,G.Z)(Pe).getInstance().getLogger(b),b}id.__dashjs_factory_name="TextTracks";var gh=F.Z.getClassFactory(id);function ic(){var C,b,R,j,W,K;function z(J){var pe=J.split(":"),de=pe.length-1;return J=60*parseInt(pe[de-1],10)+parseFloat(pe[de]),2===de&&(J+=3600*parseInt(pe[0],10)),J}function le(J){var pe=J.split(j),de=pe[1].split(K);return de.shift(),pe[1]=de[0],de.shift(),{cuePoints:pe,styles:ve(de)}}function ve(J){var pe={};return J.forEach(function(de){if(de.split(/:/).length>1){var Ke=de.split(/:/)[1],Oe=!1;Ke&&-1!=Ke.search(/%/)&&(Oe=!0,Ke=parseInt(Ke.replace(/%/,""),10)),(de.match(/align/)||de.match(/A/))&&(pe.align=Ke),(de.match(/line/)||de.match(/L/))&&(pe.line="auto"===Ke?Ke:parseInt(Ke,10),Oe&&(pe.snapToLines=!1)),(de.match(/position/)||de.match(/P/))&&(pe.position=Ke),(de.match(/size/)||de.match(/S/))&&(pe.size=Ke)}}),pe}function fe(J,pe){for(var de,Ke=pe,Oe="",je="";""!==J[Ke]&&Ke<J.length;)Ke++;if((de=Ke-pe)>1)for(var Ge=0;Ge<de;Ge++){if((je=J[pe+Ge]).match(j)){Oe="";break}Oe+=je,Ge!==de-1&&(Oe+="\n")}else(je=J[pe]).match(j)||(Oe=je);return Oe}return C={parse:function(J){var pe,de,Ke=[];if(!J)return Ke;pe=(J=J.split(R)).length,de=-1;for(var Oe=0;Oe<pe;Oe++){var je=J[Oe];if(je.length>0&&"WEBVTT"!==je&&je.match(j)){var Ge=le(je),ge=Ge.cuePoints,Pe=Ge.styles,Te=fe(J,Oe+1),Be=z(ge[0].replace(W,"")),P=z(ge[1].replace(W,""));!isNaN(Be)&&!isNaN(P)&&Be>=de&&P>Be?""!==Te?(de=Be,Ke.push({start:Be,end:P,data:Te,styles:Pe})):b.error("Skipping cue due to empty/malformed cue text"):b.error("Skipping cue due to incorrect cue timing")}}return Ke},getCaptionStyles:ve},b=(0,G.Z)(this.context).getInstance().getLogger(C),R=/(?:\r\n|\r|\n)/gm,j=/-->/,W=/(^[\s]+|[\s]+$)/g,K=/\s\b/g,C}ic.__dashjs_factory_name="VTTParser";var od=F.Z.getSingletonFactory(ic);function ad(){var C,b;return C={parse:function(R){var j=[];return b.oncue=function(W){W.start=W.startTime,W.end=W.endTime,W.data=W.text,W.styles={align:W.align,line:W.line,position:W.position,size:W.size},j.push(W)},b.parse(R),j}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(b=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),C}ad.__dashjs_factory_name="VttCustomRenderingParser";var $c=F.Z.getSingletonFactory(ad);function Eu(){var C,b,R=this.context,j=(0,V.Z)(R).getInstance(),W=0;return C={parse:function(K,U,z,le,ve){var fe,J,pe,de="",Ke=[],Oe={},je={},Ge="",ge="",Pe={onOpenTag:function(oe,X,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(j.trigger(T.Z.CONFORMANCE_VIOLATION,{level:Ri.LEVELS.ERROR,event:Ri.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),"image"===X&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===oe||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===oe)){if(!Q[" imageType"]||"PNG"!==Q[" imageType"].value)return void b.warn("smpte-tt imageType != PNG. Discarded");Ge=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){Ge&&(je[Ge]=ge.trim()),ge="",Ge=""},onText:function(oe){Ge&&(ge+=oe)}};if(!K)throw de="no ttml data to parse",new Error(de);Oe.data=K,j.trigger(w.Z.TTML_TO_PARSE,Oe);var Te=(0,$o.fromXML)(Oe.data,function(oe){de=oe},Pe);j.trigger(w.Z.TTML_PARSED,{ttmlString:Oe.data,ttmlDoc:Te});var Be,P=Te.getMediaTimeEvents();for(pe=0;pe<P.length;pe++){var ie=(0,$o.generateISD)(Te,P[pe],function(oe){de=oe});ie.contents.some(function(oe){return oe.contents.length})&&(fe=P[pe]+U)<(J=P[pe+1]+U)&&Ke.push({start:fe,end:J,type:"html",cueID:(Be="cue_TTML_"+W,W++,Be),isd:ie,images:ve,embeddedImages:je})}if(""!==de)throw b.error(de),new Error(de);return Ke}},b=(0,G.Z)(R).getInstance().getLogger(C),C}Eu.__dashjs_factory_name="TTMLParser";var Xc=F.Z.getSingletonFactory(Eu);function _u(C){var b,R,j,W,K,U,z,le,ve,fe,J,pe,de=this.context,Ke=C.adapter,Oe=C.errHandler,je=C.manifestModel,Ge=C.mediaController,ge=C.videoModel,Pe=C.settings;function Te(Ae){var me=Ae.tracks,Fe=Ae.index,Ie=Ae.streamId;if(!1===Pe.get().streaming.text.defaultEnabled&&!ie()||pe)oe(Ie,-1);else{var ae=Ge.getCurrentTrackFor(_.Z.TEXT,Ie);if(ae){var ke={lang:ae.lang,role:ae.roles[0],index:ae.index,codec:ae.codec,accessibility:ae.accessibility[0]};me.some(function(We,gt){if(Ge.matchSettings(ke,We))return oe(Ie,gt),Fe=gt,!0})}ve=!1}R[Ie].lastEnabledIndex=Fe,le.trigger(T.Z.TEXT_TRACKS_ADDED,{enabled:ie(),index:Fe,tracks:me,streamId:Ie}),J=!0}function Be(Ae){try{var me=Ae.streamId;if(!W[me]||isNaN(Ae.time))return;W[me].manualCueProcessing(Ae.time)}catch{}}function P(Ae){try{var me=Ae.streamId;if(!W[me])return;W[me].disableManualTracks()}catch{}}function ie(){var Ae=!0;return ve&&!fe&&(Ae=!1),Ae}function oe(Ae,me){(ve=-1===me)&&Ge&&Ge.saveTextSettingsDisabled();var Fe=X(Ae);if(Fe!==me&&W[Ae]){W[Ae].disableManualTracks(),W[Ae].setModeForTrackIdx(Fe,_.Z.TEXT_HIDDEN),W[Ae].setCurrentTrackIdx(me),W[Ae].setModeForTrackIdx(me,_.Z.TEXT_SHOWING);var Ie=W[Ae].getCurrentTrackInfo();Ie&&Ie.isFragmented&&!Ie.isEmbedded?function(ae,ke,We){if(j[ae])for(var gt=j[ae].getConfig().fragmentedTracks,ht=0;ht<gt.length;ht++){var ft=gt[ht];if(ke.lang===ft.lang&&(ft.id?ke.id===ft.id:ke.index===ft.index)){var lt=Ge.getCurrentTrackFor(_.Z.TEXT,ae);(ft.id?lt.id!==ft.id:lt.index!==ft.index)?(W[ae].deleteCuesFromTrackIdx(We),j[ae].setCurrentFragmentedTrackIdx(ht)):-1===We&&le.trigger(w.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:ae,mediaType:_.Z.TEXT})}}}(Ae,Ie,Fe):Ie&&!Ie.isFragmented&&le.trigger(w.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Ie},{streamId:Ae,mediaType:_.Z.TEXT}),Ge.setTrack(Ie)}}function X(Ae){return W[Ae].getCurrentTrackIdx()}function Q(){j={},W={},R={},ve=!0,J=!1,pe=!1}return b={deactivateStream:function(Ae){if(Ae){var me=Ae.id;j[me]&&j[me].resetMediaInfos(),W[me]&&W[me].deleteAllTextTracks()}},initialize:function(){le.on(w.Z.TEXT_TRACKS_QUEUE_INITIALIZED,Te,b),Pe.get().streaming.text.webvtt.customRenderingEnabled&&(le.on(w.Z.PLAYBACK_TIME_UPDATED,Be,b),le.on(w.Z.PLAYBACK_SEEKING,P,b))},initializeForStream:function(Ae){var me=Ae.id,Fe=gh(de).create({videoModel:ge,settings:Pe,streamInfo:Ae});Fe.initialize(),W[me]=Fe;var Ie=tl(de).create({errHandler:Oe,adapter:Ke,manifestModel:je,mediaController:Ge,videoModel:ge,textTracks:Fe,vttParser:K,vttCustomRenderingParser:U,ttmlParser:z,streamInfo:Ae,settings:Pe});Ie.initialize(),j[me]=Ie,R[me]={},R[me].lastEnabledIndex=-1},createTracks:function(Ae){var me=Ae.id;W[me]&&W[me].createTracks()},getTextSourceBuffer:function(Ae){var me=Ae.id;if(j&&j[me])return j[me]},getAllTracksAreDisabled:function(){return ve},addEmbeddedTrack:function(Ae,me){var Fe=Ae.id;j[Fe]&&j[Fe].addEmbeddedTrack(me)},enableText:function(Ae,me){return(0,Ce.PS)(me,"boolean"),ie()!==me&&(me&&oe(Ae,R[Ae].lastEnabledIndex),me||(R[Ae].lastEnabledIndex=X(Ae),J?oe(Ae,-1):pe=!0)),!0},isTextEnabled:ie,setTextTrack:oe,getCurrentTrackIdx:X,enableForcedTextStreaming:function(Ae){return(0,Ce.PS)(Ae,"boolean"),fe=Ae,!0},addMediaInfosToBuffer:function(Ae,me,Fe){var ae=Ae.id;j[ae]&&j[ae].addMediaInfos(me,Fe,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)},reset:function(){Q(),le.off(w.Z.TEXT_TRACKS_QUEUE_INITIALIZED,Te,b),Pe.get().streaming.text.webvtt.customRenderingEnabled&&(le.off(w.Z.PLAYBACK_TIME_UPDATED,Be,b),le.off(w.Z.PLAYBACK_SEEKING,P,b)),Object.keys(j).forEach(function(Ae){j[Ae].resetEmbedded(),j[Ae].reset()})}},fe=!1,J=!1,pe=!1,K=od(de).getInstance(),U=$c(de).getInstance(),z=Xc(de).getInstance(),le=(0,V.Z)(de).getInstance(),Q(),b}_u.__dashjs_factory_name="TextController";var sd=F.Z.getClassFactory(_u);function Qc(){var C,b,R,j,W,K,U,z,le,ve,fe,J,pe,de,Ke,Oe,je,Ge,ge,Pe,Te,Be,P,ie,oe,X,Q,Ae,me,Fe,Ie,ae,ke,We,gt,ht,ft,lt,qt,Kt="You must first call initialize() and set a source before calling this method",_t="You must first call initialize() and set a valid source and view before calling this method",Bt="You must first call attachView() to set the video element before calling this method",wn="You must first call attachSource() with a valid source before calling this method",tt="MediaPlayer not initialized!",St=this.context,Jt=(0,V.Z)(St).getInstance(),Ve=(0,ot.Z)(St).getInstance(),ut=(0,G.Z)(St).getInstance({settings:Ve});function ct(){Ar(null),er(null),j=null,de&&(de.reset(),de=null),Ke&&(Ke.reset(),Ke=null),Pe&&Pe.reset(),Ve.reset(),je&&(je.reset(),je=null)}function pt(){return!!R&&!!ht.getElement()}function Qt(){return(0,hu.e)()}function on(){if(!U)throw _t;return Ae.isPaused()}function Sn(){if(!U)throw _t;return Ae.getIsDynamic()}function Mt(Re){var at=oe&&oe.hasVideoTrack()?_.Z.VIDEO:_.Z.AUDIO,Xt=ae.getCurrentDVRInfo(at);if(!Xt)return 0;var dn=Ae.getOriginalLiveDelay(),Ln=Xt.range.start+Re;return Ln>Xt.range.end-dn&&(Ln=Xt.range.end-dn),Ln}function Dn(Re){if(!U)throw _t;var at=ar().currentTime;if(void 0!==Re)at=oe.getTimeRelativeToStreamId(at,Re);else if(Ae.getIsDynamic()){var Xt=oe&&oe.hasVideoTrack()?_.Z.VIDEO:_.Z.AUDIO,dn=ae.getCurrentDVRInfo(Xt);at=null===dn||0===at?0:Math.max(0,at-dn.range.start)}return at}function qn(){if(!U)throw _t;var Re=ar().duration;if(Ae.getIsDynamic()){var at=oe&&oe.hasVideoTrack()?_.Z.VIDEO:_.Z.AUDIO,Xt=ae.getCurrentDVRInfo(at);Re=Xt?Xt.range.end-Xt.range.start:0}return Re}function kn(Re){(0,Ce.PS)(Re,"boolean"),z=Re}function Kn(){Pe.restoreDefaultUTCTimingSources()}function zn(){return ae}function ar(){if(!ht.getElement())throw Bt;return ht.getElement()}function er(Re){if(!W)throw tt;ht.setElement(Re),Re&&(Bn(),function(){if(!Ke){var at=dashjs.MetricsReporting;if("function"==typeof at){var Xt=at(St).create();Ke=Xt.createMetricsReporting({debug:ut,eventBus:Jt,mediaElement:ar(),adapter:Ge,dashMetrics:ae,mediaPlayerModel:ge,events:w.Z,constants:_.Z,metricsConstants:k.Z})}}}(),function(){if(!Oe){var at=dashjs.MssHandler;"function"==typeof at&&(Me.extend(at.errors),Oe=at(St).create({eventBus:Jt,mediaPlayerModel:ge,dashMetrics:ae,manifestModel:ke,playbackController:Ae,streamController:oe,protectionController:de,baseURLController:Be,errHandler:Te,events:w.Z,constants:_.Z,debug:ut,initSegmentType:yt.w.INIT_SEGMENT_TYPE,BASE64:vu,ISOBoxer:ls,settings:Ve}))}}(),oe&&oe.switchToVideoElement(le)),U&&Un(),Gt(le)}function rr(Re){if(!K)throw Kt;var at=oe.getActiveStreamInfo();return at?pe.getTracksFor(Re,at.id):[]}function Ar(Re){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!W)throw tt;"string"==typeof Re&&ft.initialize(Re),null==at&&(at=NaN),isNaN(at)||(at=Math.max(0,at)),le=at,R=Re,(K||U)&&Un(),pt()&&Gt(le)}function an(){if(!K)throw Kt;var Re=oe.getActiveStreamInfo();return Re?oe.getStreamById(Re.id):null}function Un(){U=!1,K=!1,Ge.reset(),oe.reset(),Q.reset(),Ie.reset(),Ae.reset(),me.reset(),Fe.reset(),ve.reset(),pe.reset(),qt.reset(),de&&(Ve.get().streaming.protection.keepProtectionMediaKeys?de.stop():(de.reset(),de=null,Bn())),X.reset(),We.reset(),gt.reset()}function Pn(){return En(St).create({debug:ut,errHandler:Te,dashMetrics:ae,mediaPlayerModel:ge,requestModifier:(0,nt.Z)(St).getInstance(),mssHandler:Oe,settings:Ve})}function Bn(){if(de)return de;var Re=dashjs.Protection;if("function"==typeof Re){var at=Re(St).create();return w.Z.extend(Re.events),T.Z.extend(Re.events,{publicOnly:!0}),Me.extend(Re.errors),P||(P=(0,zu.Z)(St).getInstance()),de=at.createProtectionSystem({debug:ut,errHandler:Te,videoModel:ht,customParametersModel:Pe,capabilities:P,eventBus:Jt,events:w.Z,BASE64:vu,constants:_.Z,cmcdModel:We,settings:Ve})}return null}function Ft(){if(!W)throw tt;if(je)return je;var Re=dashjs.OfflineController;if("function"==typeof Re){w.Z.extend(Re.events),T.Z.extend(Re.events,{publicOnly:!0}),Me.extend(Re.errors);var at=Pn(),Xt=Gu(St).create();return Xt.setConfig({manifestModel:ke,adapter:Ge,manifestLoader:at,errHandler:Te,contentSteeringController:Fe}),je=Re(St).create({debug:ut,manifestUpdater:Xt,baseURLController:Be,manifestLoader:at,manifestModel:ke,mediaPlayerModel:ge,abrController:ve,playbackController:Ae,adapter:Ge,errHandler:Te,dashMetrics:ae,timelineConverter:J,segmentBaseController:qt,schemeLoaderFactory:fe,eventBus:Jt,events:w.Z,errors:Me,constants:_.Z,settings:Ve,dashConstants:E.Z,urlUtils:(0,At.Z)(St).getInstance()})}return null}function dt(Re){var at=oe&&oe.hasVideoTrack()?_.Z.VIDEO:_.Z.AUDIO,Xt=ae.getCurrentDVRInfo(at);return Xt?Re+(Xt.manifestInfo.availableFrom.getTime()/1e3+Xt.range.start):0}function Gt(){var Re=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;je&&je.resetRecords(),!K&&R&&(K=!0,b.info("Streaming Initialized"),function Gn(){var Re=Pn();oe||(oe=$l(St).getInstance()),X||(X=sd(St).create({errHandler:Te,manifestModel:ke,adapter:Ge,mediaController:pe,videoModel:ht,settings:Ve})),ie.setConfig({capabilities:P,customParametersModel:Pe,adapter:Ge,settings:Ve,manifestModel:ke,errHandler:Te}),oe.setConfig({capabilities:P,capabilitiesFilter:ie,manifestLoader:Re,manifestModel:ke,mediaPlayerModel:ge,customParametersModel:Pe,protectionController:de,textController:X,adapter:Ge,dashMetrics:ae,errHandler:Te,timelineConverter:J,videoModel:ht,playbackController:Ae,serviceDescriptionController:me,contentSteeringController:Fe,abrController:ve,mediaController:pe,settings:Ve,baseURLController:Be,uriFragmentModel:ft,segmentBaseController:qt}),Q.setConfig({settings:Ve,playbackController:Ae,streamController:oe,videoModel:ht,timelineConverter:J,adapter:Ge}),Ae.setConfig({streamController:oe,serviceDescriptionController:me,dashMetrics:ae,adapter:Ge,videoModel:ht,timelineConverter:J,settings:Ve}),Ie.setConfig({streamController:oe,playbackController:Ae,mediaPlayerModel:ge,videoModel:ht,settings:Ve}),ve.setConfig({streamController:oe,domStorage:lt,mediaPlayerModel:ge,customParametersModel:Pe,cmsdModel:gt,dashMetrics:ae,adapter:Ge,videoModel:ht,settings:Ve}),We.setConfig({abrController:ve,dashMetrics:ae,playbackController:Ae}),gt.setConfig({}),ve.initialize(),oe.initialize(z,j),X.initialize(),Q.initialize(),Ie.initialize(),We.initialize(),gt.initialize(),Fe.initialize(),qt.initialize()}(),"string"==typeof R?oe.load(R,Re):oe.loadWithManifest(R,Re)),!U&&pt()&&(U=!0,b.info("Playback Initialized"))}return C={initialize:function(Re,at,Xt){var dn=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;P||(P=(0,zu.Z)(St).getInstance()).setConfig({settings:Ve}),Te||(Te=Vo(St).getInstance()),P.supportsMediaSource()?(W||(W=!0,J=ec(St).getInstance(),ve||(ve=ia(St).getInstance()).setConfig({settings:Ve}),fe||(fe=_r(St).getInstance()),Ae||(Ae=O(St).getInstance()),pe||(pe=xc(St).getInstance()),oe||(oe=$l(St).getInstance()),Q||(Q=Vs(St).getInstance()),Ie||(Ie=Ku(St).getInstance()),me||(me=Rc(St).getInstance()),Fe||(Fe=Gr(St).getInstance()),ie||(ie=Ws(St).getInstance()),Ge=fh(St).getInstance(),ke=xr(St).getInstance(),We=hn(St).getInstance(),gt=ml(St).getInstance(),ae=mu(St).getInstance({settings:Ve}),lt=Ta(St).getInstance({settings:Ve}),Ge.setConfig({constants:_.Z,cea608parser:H(),errHandler:Te,BASE64:vu}),Be||(Be=tu(St).create()),Be.setConfig({adapter:Ge,contentSteeringController:Fe}),me.setConfig({adapter:Ge}),qt||(qt=gu(St).getInstance({dashMetrics:ae,mediaPlayerModel:ge,errHandler:Te,baseURLController:Be,events:w.Z,eventBus:Jt,debug:ut,boxParser:(0,ga.Z)(St).getInstance(),requestModifier:(0,nt.Z)(St).getInstance(),errors:Me})),pe.setConfig({domStorage:lt,settings:Ve,customParametersModel:Pe}),ge.setConfig({playbackController:Ae,serviceDescriptionController:me}),Fe.setConfig({adapter:Ge,errHandler:Te,dashMetrics:ae,mediaPlayerModel:ge,manifestModel:ke,serviceDescriptionController:me,eventBus:Jt,requestModifier:(0,nt.Z)(St).getInstance()}),Kn(),kn(void 0===Xt||Xt),Ft()),Re&&er(Re),at&&Ar(at,dn),b.info("[dash.js "+Qt()+"] MediaPlayer has been initialized")):Te.error(new xe.Z(Me.CAPABILITY_MEDIASOURCE_ERROR_CODE,Me.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Re){Re&&(Re.capabilities&&(P=Re.capabilities),Re.capabilitiesFilter&&(ie=Re.capabilitiesFilter),Re.streamController&&(oe=Re.streamController),Re.textController&&(X=Re.textController),Re.gapController&&(Q=Re.gapController),Re.playbackController&&(Ae=Re.playbackController),Re.serviceDescriptionController&&(me=Re.serviceDescriptionController),Re.contentSteeringController&&(Fe=Re.contentSteeringController),Re.catchupController&&(Ie=Re.catchupController),Re.mediaPlayerModel&&(ge=Re.mediaPlayerModel),Re.customParametersModel&&(Pe=Re.customParametersModel),Re.abrController&&(ve=Re.abrController),Re.schemeLoaderFactory&&(fe=Re.schemeLoaderFactory),Re.mediaController&&(pe=Re.mediaController),Re.settings&&(Ve=Re.settings))},on:function(Re,at,Xt,dn){Jt.on(Re,at,Xt,dn)},off:function(Re,at,Xt){Jt.off(Re,at,Xt)},extend:function(Re,at,Xt){F.Z.extend(Re,at,Xt,St)},attachView:er,attachSource:Ar,isReady:pt,preload:function(){if(!ht.getElement()&&!K){if(!R)throw wn;Gt(le)}},play:function(){if(!U)throw _t;(!z||on()&&U)&&Ae.play(!0)},isPaused:on,pause:function(){if(!U)throw _t;Ae.pause()},isSeeking:function(){if(!U)throw _t;return Ae.isSeeking()},isDynamic:Sn,getLowLatencyModeEnabled:function(){if(!U)throw _t;return Ae.getLowLatencyModeEnabled()},seek:function(Re){if(!U)throw _t;if((0,Ce.PS)(Re,"number"),isNaN(Re))throw _.Z.BAD_ARGUMENT_ERROR;Re<0&&(Re=0);var at=Ae.getIsDynamic()?Mt(Re):Re,Xt=ar();!Ae.getIsDynamic()&&Xt.duration&&(at=Math.min(Xt.duration,at)),Ae.seek(at,!1,!1,!0)},seekToOriginalLive:function(){U&&Sn()&&Ae.seekToOriginalLive()},setPlaybackRate:function(Re){ar().playbackRate=Re},getPlaybackRate:function(){return ar().playbackRate},setMute:function(Re){(0,Ce.PS)(Re,"boolean"),ar().muted=Re},isMuted:function(){return ar().muted},setVolume:function(Re){if("number"!=typeof Re||isNaN(Re)||Re<0||Re>1)throw _.Z.BAD_ARGUMENT_ERROR;ar().volume=Re},getVolume:function(){return ar().volume},time:Dn,duration:qn,timeAsUTC:function(){if(!U)throw _t;return Dn()<0?NaN:dt(Dn())},durationAsUTC:function(){if(!U)throw _t;return dt(qn())},getActiveStream:an,getDVRWindowSize:function(){var Re=oe&&oe.hasVideoTrack()?_.Z.VIDEO:_.Z.AUDIO,at=ae.getCurrentDVRInfo(Re);return at?at.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Mt,getAvailableBaseUrls:function(){var Re=ke.getValue();return Re?Be.getBaseUrls(Re):[]},getAvailableLocations:function(){var Re=ke.getValue();if(!Re)return[];var at=Ge.getLocation(Re),Xt=Fe.getSynthesizedLocationElements(at);return at.concat(Xt)},getTargetLiveDelay:function(){if(!U)throw _t;return Ae.getOriginalLiveDelay()},convertToTimeCode:function(Re){Re=Math.max(Re,0);var at=Math.floor(Re/3600),Xt=Math.floor(Re%3600/60),dn=Math.floor(Re%3600%60);return(0===at?"":at<10?"0"+at.toString()+":":at.toString()+":")+(Xt<10?"0"+Xt.toString():Xt.toString())+":"+(dn<10?"0"+dn.toString():dn.toString())},formatUTC:function(Re,at,Xt){var dn=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Ln=new Date(1e3*Re),pr=Ln.toLocaleDateString(at),di=Ln.toLocaleTimeString(at,{hour12:Xt});return dn?di+" "+pr:di},getVersion:Qt,getDebug:function(){return ut},getBufferLength:function(Re){var at=[_.Z.VIDEO,_.Z.AUDIO,_.Z.TEXT];if(Re)return-1!==at.indexOf(Re)?zn().getCurrentBufferLevel(Re)||NaN:(b.warn("getBufferLength requested for invalid type"),NaN);var Xt=at.map(function(dn){return rr(dn).length>0?zn().getCurrentBufferLevel(dn):Number.MAX_VALUE}).reduce(function(dn,Ln){return Math.min(dn,Ln)});return Xt===Number.MAX_VALUE?NaN:Xt},getTTMLRenderingDiv:function(){return ht?ht.getTTMLRenderingDiv():null},getVideoElement:ar,getSource:function(){if(!R)throw wn;return R},updateSource:function(Re){oe.load(R=Re)},getCurrentLiveLatency:function(){if(!W)throw tt;return U?Ae.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Re){if(!K)throw Kt;return ve.getTopBitrateInfoFor(Re)},setAutoPlay:kn,getAutoPlay:function(){return z},getDashMetrics:zn,getQualityFor:function(Re){if(!K)throw Kt;if(Re===_.Z.IMAGE){var at=an();if(!at)return-1;var Xt=at.getThumbnailController();return Xt?Xt.getCurrentTrackIndex():-1}return ve.getQualityFor(Re)},setQualityFor:function(Re,at){var Xt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!K)throw Kt;if(Re===_.Z.IMAGE){var dn=an();if(!dn)return;var Ln=dn.getThumbnailController();Ln&&Ln.setTrackByIndex(at)}ve.setPlaybackQuality(Re,oe.getActiveStreamInfo(),at,{forceReplace:Xt})},updatePortalSize:function(){ve.setElementSize(),ve.setWindowResizeEventCalled(!0)},enableText:function(Re){var at=oe.getActiveStreamInfo();return!(!at||!X)&&X.enableText(at.id,Re)},enableForcedTextStreaming:function(Re){return!(!oe.getActiveStreamInfo()||!X)&&X.enableForcedTextStreaming(Re)},isTextEnabled:function(){var Re=oe.getActiveStreamInfo();return!(!Re||!X)&&X.isTextEnabled(Re)},setTextTrack:function(Re){if(!U)throw _t;var at=oe.getActiveStreamInfo();at&&X&&X.setTextTrack(at.id,Re)},getBitrateInfoListFor:function(Re){if(!K)throw Kt;var at=an();return at?at.getBitrateListFor(Re):[]},getStreamsFromManifest:function(Re){if(!K)throw Kt;return Ge.getStreamsInfo(Re)},getTracksFor:rr,getTracksForTypeFromManifest:function(Re,at,Xt){if(!K)throw Kt;return(Xt=Xt||Ge.getStreamsInfo(at,1)[0])?Ge.getAllMediaInfoForType(Xt,Re,at):[]},getCurrentTrackFor:function(Re){if(!K)throw Kt;var at=oe.getActiveStreamInfo();return pe.getCurrentTrackFor(Re,at.id)},setInitialMediaSettingsFor:function(Re,at){if(!W)throw tt;pe.setInitialSettings(Re,at)},getInitialMediaSettingsFor:function(Re){if(!W)throw tt;return pe.getInitialSettings(Re)},setCurrentTrack:function(Re){if(!K)throw Kt;pe.setTrack(Re,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},addABRCustomRule:function(Re,at,Xt){Pe.addAbrCustomRule(Re,at,Xt)},removeABRCustomRule:function(Re){Pe.removeAbrCustomRule(Re)},removeAllABRCustomRule:function(){Pe.removeAllAbrCustomRule()},getABRCustomRules:function(){return Pe.getAbrCustomRules()},getAverageThroughput:function(Re){var at=ve.getThroughputHistory(),Xt=Ae.getIsDynamic();return at?at.getAverageThroughput(Re,Xt):0},retrieveManifest:function(Re,at){var Xt=Pn(),dn=this;Jt.on(w.Z.INTERNAL_MANIFEST_LOADED,function Ln(pr){pr.error?at(null,pr.error):at(pr.manifest),Jt.off(w.Z.INTERNAL_MANIFEST_LOADED,Ln,dn),Xt.reset()},dn),ft.initialize(Re),Xt.load(Re)},addUTCTimingSource:function(Re,at){Pe.addUTCTimingSource(Re,at)},removeUTCTimingSource:function(Re,at){Pe.removeUTCTimingSource(Re,at)},clearDefaultUTCTimingSources:function(){Pe.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Kn,setXHRWithCredentialsForType:function(Re,at){Pe.setXHRWithCredentialsForType(Re,at)},getXHRWithCredentialsForType:function(Re){return Pe.getXHRWithCredentialsForType(Re)},getProtectionController:function(){return Bn()},attachProtectionController:function(Re){de=Re},setProtectionData:function(Re){j=Re,oe&&oe.setProtectionData(j)},registerLicenseRequestFilter:function(Re){Pe.registerLicenseRequestFilter(Re)},registerLicenseResponseFilter:function(Re){Pe.registerLicenseResponseFilter(Re)},unregisterLicenseRequestFilter:function(Re){Pe.unregisterLicenseRequestFilter(Re)},unregisterLicenseResponseFilter:function(Re){Pe.unregisterLicenseResponseFilter(Re)},registerCustomCapabilitiesFilter:function(Re){Pe.registerCustomCapabilitiesFilter(Re)},unregisterCustomCapabilitiesFilter:function(Re){Pe.unregisterCustomCapabilitiesFilter(Re)},setCustomInitialTrackSelectionFunction:function(Re){Pe.setCustomInitialTrackSelectionFunction(Re)},resetCustomInitialTrackSelectionFunction:function(){Pe.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Re){if(!ht.getElement())throw Bt;ht.setTTMLRenderingDiv(Re)},attachVttRenderingDiv:function(Re){if(!ht.getElement())throw Bt;ht.setVttRenderingDiv(Re)},getCurrentTextTrackIndex:function(){var Re=oe.getActiveStreamInfo();if(Re&&X)return X.getCurrentTrackIdx(Re.id)},provideThumbnail:function(Re,at){if("function"==typeof at)if(Re<0)at(null);else{var Xt=Ae.getIsDynamic()?Mt(Re):Re,dn=oe.getStreamForTime(Xt);if(null!==dn){var Ln=dn.getThumbnailController();if(Ln)return Ln.provide(Xt,at);at(null)}else at(null)}},getDashAdapter:function(){return Ge},getOfflineController:function(){return Ft()},triggerSteeringRequest:function(){if(Fe)return Fe.loadSteeringData()},getCurrentSteeringResponseData:function(){if(Fe)return Fe.getCurrentSteeringResponseData()},getSettings:function(){return Ve.get()},updateSettings:function(Re){Ve.update(Re)},resetSettings:function(){Ve.reset()},reset:ct,destroy:function(){ct(),F.Z.deleteSingletonInstances(St)}},b=ut.getLogger(C),W=!1,U=!1,K=!1,z=!0,le=NaN,de=null,je=null,j=null,Ge=null,qt=null,w.Z.extend(T.Z),ge=wl(St).getInstance(),Pe=(0,pn.Z)(St).getInstance(),ht=Ka(St).getInstance(),ft=Hi(St).getInstance(),C}Qc.__dashjs_factory_name="MediaPlayer";var Ol=F.Z.getClassFactory(Qc);Ol.events=T.Z,Ol.errors=Me,F.Z.updateClassFactory(Qc.__dashjs_factory_name,Ol);var oc=Ol},8825:function(Ut,$e,ne){"use strict";function De(V){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(w){return typeof w}:function(w){return w&&"function"==typeof Symbol&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(V)}function H(V,w){return(H=Object.setPrototypeOf||function(F,G){return F.__proto__=G,F})(V,w)}function E(V){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(V)}var k=new(function(V){!function(M,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(O&&O.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),O&&H(M,O)}(T,V);var w,F,G=(w=T,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var M,O=E(w);if(F){var te=E(this).constructor;M=Reflect.construct(O,arguments,te)}else M=O.apply(this,arguments);return function _(V,w){return!w||"object"!==De(w)&&"function"!=typeof w?function(F){if(void 0===F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(V):w}(this,M)});function T(){var M;return function(O,te){if(!(O instanceof te))throw new TypeError("Cannot call a class as a function")}(this,T),(M=G.call(this)).AST_IN_FUTURE="astInFuture",M.BASE_URLS_UPDATED="baseUrlsUpdated",M.BUFFER_EMPTY="bufferStalled",M.BUFFER_LOADED="bufferLoaded",M.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",M.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",M.DYNAMIC_TO_STATIC="dynamicToStatic",M.ERROR="error",M.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",M.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",M.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",M.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",M.LOG="log",M.MANIFEST_LOADING_STARTED="manifestLoadingStarted",M.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",M.MANIFEST_LOADED="manifestLoaded",M.METRICS_CHANGED="metricsChanged",M.METRIC_CHANGED="metricChanged",M.METRIC_ADDED="metricAdded",M.METRIC_UPDATED="metricUpdated",M.PERIOD_SWITCH_STARTED="periodSwitchStarted",M.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",M.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",M.QUALITY_CHANGE_RENDERED="qualityChangeRendered",M.TRACK_CHANGE_RENDERED="trackChangeRendered",M.STREAM_INITIALIZING="streamInitializing",M.STREAM_UPDATED="streamUpdated",M.STREAM_ACTIVATED="streamActivated",M.STREAM_DEACTIVATED="streamDeactivated",M.STREAM_INITIALIZED="streamInitialized",M.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",M.TEXT_TRACKS_ADDED="allTextTracksAdded",M.TEXT_TRACK_ADDED="textTrackAdded",M.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",M.TTML_PARSED="ttmlParsed",M.TTML_TO_PARSE="ttmlToParse",M.CAPTION_RENDERED="captionRendered",M.CAPTION_CONTAINER_RESIZE="captionContainerResize",M.CAN_PLAY="canPlay",M.CAN_PLAY_THROUGH="canPlayThrough",M.PLAYBACK_ENDED="playbackEnded",M.PLAYBACK_ERROR="playbackError",M.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",M.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",M.PLAYBACK_LOADED_DATA="playbackLoadedData",M.PLAYBACK_PAUSED="playbackPaused",M.PLAYBACK_PLAYING="playbackPlaying",M.PLAYBACK_PROGRESS="playbackProgress",M.PLAYBACK_RATE_CHANGED="playbackRateChanged",M.PLAYBACK_SEEKED="playbackSeeked",M.PLAYBACK_SEEKING="playbackSeeking",M.PLAYBACK_STALLED="playbackStalled",M.PLAYBACK_STARTED="playbackStarted",M.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",M.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",M.PLAYBACK_WAITING="playbackWaiting",M.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",M.EVENT_MODE_ON_START="eventModeOnStart",M.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",M.CONFORMANCE_VIOLATION="conformanceViolation",M.REPRESENTATION_SWITCH="representationSwitch",M.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",M.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",M.INBAND_PRFT="inbandPrft",M.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",M.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",M}return T}(ne(8342).Z));$e.Z=k},3393:function(Ut,$e){"use strict";var De=new(function(){function H(){(function(k,V){if(!(k instanceof V))throw new TypeError("Cannot call a class as a function")})(this,H),this.init()}var E;return(E=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&function ne(H,_){for(var E=0;E<_.length;E++){var k=_[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,k.key,k)}}(H.prototype,E),H}());$e.Z=De},3860:function(Ut,$e){"use strict";var De=new(function(){function H(){(function(k,V){if(!(k instanceof V))throw new TypeError("Cannot call a class as a function")})(this,H),this.init()}var E;return(E=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&function ne(H,_){for(var E=0;E<_.length;E++){var k=_[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,k.key,k)}}(H.prototype,E),H}());$e.Z=De},8080:function(Ut,$e,ne){"use strict";ne.d($e,{default:function(){return Z}});var De=function q(){(function(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")})(this,q),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};De.SSL_CONNECTION_FAILED_PREFIX="SSL",De.DNS_RESOLUTION_FAILED="C00",De.HOST_UNREACHABLE="C01",De.CONNECTION_REFUSED="C02",De.CONNECTION_ERROR="C03",De.CORRUPT_MEDIA_ISOBMFF="M00",De.CORRUPT_MEDIA_OTHER="M01",De.BASE_URL_CHANGED="F00",De.BECAME_REPORTER="S00";var H=De,_=ne(1180);function E(q){var Ce,Ee,nt=(q=q||{}).eventBus,At=q.dashMetrics,it=q.metricsConstants,et=q.events;function rt(Rn){var Mn=new H;if(Ee){for(var Xn in Rn)Rn.hasOwnProperty(Xn)&&(Mn[Xn]=Rn[Xn]);Mn.mpdurl||(Mn.mpdurl=Ee.originalUrl||Ee.url),Mn.terror||(Mn.terror=new Date),At.addDVBErrors(Mn)}}function Et(Rn){Rn.error||(Ee=Rn.manifest)}function Ot(Rn){rt({errorcode:H.BASE_URL_CHANGED,servicelocation:Rn.entry})}function _n(){rt({errorcode:H.BECAME_REPORTER})}function Zt(Rn){var Mn;Rn.metric===it.HTTP_REQUEST&&(0===(Mn=Rn.value).responsecode||null==Mn.responsecode||Mn.responsecode>=400||Mn.responsecode<100||Mn.responsecode>=600)&&rt({errorcode:Mn.responsecode||H.CONNECTION_ERROR,url:Mn.url,terror:Mn.tresponse,servicelocation:Mn._serviceLocation})}function xn(Rn){var Mn;switch(Rn.error?Rn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:Mn=H.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:Mn=H.CORRUPT_MEDIA_OTHER;break;default:return}rt({errorcode:Mn})}return Ce={initialize:function(){nt.on(et.MANIFEST_UPDATED,Et,Ce),nt.on(et.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Ot,Ce),nt.on(et.METRIC_ADDED,Zt,Ce),nt.on(et.METRIC_UPDATED,Zt,Ce),nt.on(et.PLAYBACK_ERROR,xn,Ce),nt.on(_.Z.BECAME_REPORTING_PLAYER,_n,Ce)},reset:function(){nt.off(et.MANIFEST_UPDATED,Et,Ce),nt.off(et.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Ot,Ce),nt.off(et.METRIC_ADDED,Zt,Ce),nt.off(et.METRIC_UPDATED,Zt,Ce),nt.off(et.PLAYBACK_ERROR,xn,Ce),nt.off(_.Z.BECAME_REPORTING_PLAYER,_n,Ce)}}}E.__dashjs_factory_name="DVBErrorsTranslator";var k=dashjs.FactoryMaker.getSingletonFactory(E),V=ne(2295);function w(q){var Ce,Ee,nt=!1,it=(q=q||{}).mediaElement;return Ce={initialize:function(et){et&&et.length&&(et.forEach(function(rt){var Et=rt.starttime;Ee.add(Et,Et+rt.duration)}),nt=!!et[0]._useWallClockTime)},reset:function(){Ee.clear()},isEnabled:function(){var et,rt=Ee.length;if(!rt)return!0;et=nt?(new Date).getTime()/1e3:it.currentTime;for(var Et=0;Et<rt;Et+=1){var Ot=Ee.start(Et),_n=Ee.end(Et);if(Ot<=et&&et<_n)return!0}return!1}},Ee=(0,V.Z)(this.context).create(),Ce}w.__dashjs_factory_name="RangeController";var F=dashjs.FactoryMaker.getClassFactory(w);function G(){return{serialise:function q(Ce){var Ee,nt,At=[],it=[];for(Ee in Ce)if(Ce.hasOwnProperty(Ee)&&0!==Ee.indexOf("_")){if(null==(nt=Ce[Ee])&&(nt=""),Array.isArray(nt)){if(!nt.length)continue;it=[],nt.forEach(function(et){var rt="Object"!==Object.prototype.toString.call(et).slice(8,-1);it.push(rt?et:q(et))}),nt=it.map(encodeURIComponent).join(",")}else"string"==typeof nt?nt=encodeURIComponent(nt):nt instanceof Date?nt=nt.toISOString():"number"==typeof nt&&(nt=Math.round(nt));At.push(Ee+"="+nt)}return At.join("&")}}}G.__dashjs_factory_name="MetricSerialiser";var T=dashjs.FactoryMaker.getSingletonFactory(G);function M(){var q,Ce,Ee,nt=window.crypto||window.msCrypto,At=Uint32Array,it=Math.pow(2,8*At.BYTES_PER_ELEMENT)-1;function et(){nt&&(q||(q=new At(10)),nt.getRandomValues(q),Ce=0)}return Ee={random:function(rt,Et){var Ot;return rt||(rt=0),Et||(Et=1),nt?(Ce===q.length&&et(),Ot=q[Ce]/it,Ce+=1):Ot=Math.random(),Ot*(Et-rt)+rt}},et(),Ee}M.__dashjs_factory_name="RNG";var O=dashjs.FactoryMaker.getSingletonFactory(M),te=ne(5717);function ce(q){var Ce,Ee,nt,At,it,et,rt,Et,Ot=this.context,_n=[],Zt=(q=q||{}).metricsConstants;function xn(){it=!1,et=!1,rt=null,Et=null}return Ce={report:function(Rn,Mn){Array.isArray(Mn)||(Mn=[Mn]),et&&Et.isEnabled()&&Mn.forEach(function(Xn){var Ir=Ee.serialise(Xn);Rn!==Zt.DVB_ERRORS&&(Ir="metricname=".concat(Rn,"&").concat(Ir)),function(Yr,Li,ei){var gi=new XMLHttpRequest;gi.withCredentials=nt.getXHRWithCredentialsForType(Zt.HTTP_REQUEST_DVB_REPORTING_TYPE);var Xi=function(){var ti=_n.indexOf(gi);-1!==ti&&(_n.splice(ti,1),!(gi.status>=200&&gi.status<300)&&ei&&ei())};_n.push(gi);try{gi.open("GET",Yr),gi.onloadend=Xi,gi.onerror=Xi,gi.send()}catch{gi.onerror()}}(Ir="".concat(rt,"?").concat(Ir),0,function(){et=!1})})},initialize:function(Rn,Mn){var Xn;if(Et=Mn,!(rt=Rn.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");it||((Xn=Rn.dvb_probability)&&(1e3===Xn||Xn/1e3>=At.random())&&(et=!0),it=!0)},reset:function(){xn()}},Ee=T(Ot).getInstance(),At=O(Ot).getInstance(),nt=(0,te.Z)(Ot).getInstance(),xn(),Ce}ce.__dashjs_factory_name="DVBReporting";var ue=dashjs.FactoryMaker.getClassFactory(ce);function se(q){var Ee={"urn:dvb:dash:reporting:2014":ue},nt=this.context,At=(q=q||{}).debug?q.debug.getLogger(undefined):{},it=q.metricsConstants,et=q.mediaPlayerModel||{};return{create:function(rt,Et){var Ot;try{(Ot=Ee[rt.schemeIdUri](nt).create({metricsConstants:it,mediaPlayerModel:et})).initialize(rt,Et)}catch(_n){Ot=null,At.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(rt.schemeIdUri," (").concat(_n.message,")"))}return Ot},register:function(rt,Et){Ee[rt]=Et},unregister:function(rt){delete Ee[rt]}}}se.__dashjs_factory_name="ReportingFactory";var Ne=dashjs.FactoryMaker.getSingletonFactory(se);function $(q){var Ce=[],Ee=Ne(this.context).getInstance(q);return{initialize:function(nt,At){nt.some(function(it){var et=Ee.create(it,At);if(et)return Ce.push(et),!0})},reset:function(){Ce.forEach(function(nt){return nt.reset()}),Ce=[]},report:function(nt,At){Ce.forEach(function(it){return it.report(nt,At)})}}}$.__dashjs_factory_name="ReportingController";var be=dashjs.FactoryMaker.getClassFactory($);function xe(){return{reconstructFullMetricName:function(q,Ce,Ee){var nt=q;return Ce&&(nt+="("+Ce,Ee&&Ee.length&&(nt+=","+Ee),nt+=")"),nt},validateN:function(q){if(!q)throw new Error("missing n");if(isNaN(q))throw new Error("n is NaN");if(q<0)throw new Error("n must be positive");return q}}}xe.__dashjs_factory_name="HandlerHelpers";var x=dashjs.FactoryMaker.getSingletonFactory(xe);function _e(q){var Ce,Ee,nt,At,it;q=q||{};var rt=x(this.context).getInstance(),Et=[],Ot=q.metricsConstants;function _n(){var Zt=function(){try{return Object.keys(Et).map(function(xn){return Et[xn]}).reduce(function(xn,Rn){return xn.level<Rn.level?xn:Rn})}catch{return}}();Zt&&it!==Zt.t&&(it=Zt.t,Ce.report(nt,Zt))}return{initialize:function(Zt,xn,Rn){xn&&(Ee=rt.validateN(Rn),Ce=xn,nt=rt.reconstructFullMetricName(Zt,Rn),At=setInterval(_n,Ee))},reset:function(){clearInterval(At),At=null,Ee=0,Ce=null,it=null},handleNewMetric:function(Zt,xn,Rn){Zt===Ot.BUFFER_LEVEL&&(Et[Rn]=xn)}}}_e.__dashjs_factory_name="BufferLevelHandler";var he=dashjs.FactoryMaker.getClassFactory(_e),Je=dashjs.FactoryMaker.getClassFactory(function(q){var Ce,Ee=(q=q||{}).eventBus,nt=q.metricsConstants;function At(){Ee.off(_.Z.METRICS_INITIALISATION_COMPLETE,At,this),Ee.trigger(_.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(it,et){et&&(Ce=et,Ee.on(_.Z.METRICS_INITIALISATION_COMPLETE,At,this))},reset:function(){Ce=null},handleNewMetric:function(it,et){it===nt.DVB_ERRORS&&Ce&&Ce.report(it,et)}}});function Me(q){var Ce,Ee,nt,At,it;q=q||{};var et=[],rt=x(this.context).getInstance(),Et=q.metricsConstants;function Ot(){et.length&&Ce&&Ce.report(At,et),et=[]}return{initialize:function(_n,Zt,xn,Rn){Zt&&(Ee=rt.validateN(xn),Ce=Zt,Rn&&Rn.length&&(nt=Rn),At=rt.reconstructFullMetricName(_n,xn,Rn),it=setInterval(Ot,Ee))},reset:function(){clearInterval(it),it=null,Ee=null,nt=null,et=[],Ce=null},handleNewMetric:function(_n,Zt){_n===Et.HTTP_REQUEST&&(nt&&nt!==Zt.type||et.push(Zt))}}}Me.__dashjs_factory_name="HttpListHandler";var ot=dashjs.FactoryMaker.getClassFactory(Me);function yt(){var q,Ce;return{initialize:function(Ee,nt){q=Ee,Ce=nt},reset:function(){Ce=null,q=void 0},handleNewMetric:function(Ee,nt){Ee===q&&Ce&&Ce.report(q,nt)}}}yt.__dashjs_factory_name="GenericMetricHandler";var Dt=dashjs.FactoryMaker.getClassFactory(yt);function Qe(q){var Ee=(q=q||{}).debug?q.debug.getLogger(undefined):{},nt=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,At=this.context,it={BufferLevel:he,DVBErrors:Je,HttpList:ot,PlayList:Dt,RepSwitchList:Dt,TcpList:Dt};return{create:function(et,rt){var Et,Ot=et.match(nt);if(Ot){try{(Et=it[Ot[1]](At).create({eventBus:q.eventBus,metricsConstants:q.metricsConstants})).initialize(Ot[1],rt,Ot[3],Ot[5])}catch(_n){Et=null,Ee.error("MetricsHandlerFactory: Could not create handler for type ".concat(Ot[1]," with args ").concat(Ot[3],", ").concat(Ot[5]," (").concat(_n.message,")"))}return Et}},register:function(et,rt){it[et]=rt},unregister:function(et){delete it[et]}}}Qe.__dashjs_factory_name="MetricsHandlerFactory";var Le=dashjs.FactoryMaker.getSingletonFactory(Qe);function Lt(q){var Ce,Ee=[],At=(q=q||{}).eventBus,it=q.events,et=Le(this.context).getInstance({debug:q.debug,eventBus:q.eventBus,metricsConstants:q.metricsConstants});function rt(Et){Ee.forEach(function(Ot){Ot.handleNewMetric(Et.metric,Et.value,Et.mediaType)})}return Ce={initialize:function(Et,Ot){Et.split(",").forEach(function(_n,Zt,xn){var Rn;if(-1!==_n.indexOf("(")&&-1===_n.indexOf(")")){var Mn=xn[Zt+1];Mn&&-1===Mn.indexOf("(")&&-1!==Mn.indexOf(")")&&(_n+=","+Mn,delete xn[Zt+1])}(Rn=et.create(_n,Ot))&&Ee.push(Rn)}),At.on(it.METRIC_ADDED,rt,Ce),At.on(it.METRIC_UPDATED,rt,Ce)},reset:function(){At.off(it.METRIC_ADDED,rt,Ce),At.off(it.METRIC_UPDATED,rt,Ce),Ee.forEach(function(Et){return Et.reset()}),Ee=[]}}}Lt.__dashjs_factory_name="MetricsHandlersController";var Vt=dashjs.FactoryMaker.getClassFactory(Lt);function ze(q){var Ce,Ee,nt;q=q||{};var At=this.context;function it(){Ce&&Ce.reset(),Ee&&Ee.reset(),nt&&nt.reset()}return{initialize:function(et){try{(nt=F(At).create({mediaElement:q.mediaElement})).initialize(et.Range),(Ee=be(At).create({debug:q.debug,metricsConstants:q.metricsConstants,mediaPlayerModel:q.mediaPlayerModel})).initialize(et.Reporting,nt),(Ce=Vt(At).create({debug:q.debug,eventBus:q.eventBus,metricsConstants:q.metricsConstants,events:q.events})).initialize(et.metrics,Ee)}catch(rt){throw it(),rt}},reset:it}}ze.__dashjs_factory_name="MetricsController";var mt=dashjs.FactoryMaker.getClassFactory(ze),fn=function q(){(function(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")})(this,q),this.metrics="",this.Range=[],this.Reporting=[]},Yt=function q(){(function(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")})(this,q),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Tt=function q(){(function(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")})(this,q),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3};function Rt(q){var Ce=(q=q||{}).adapter,Ee=q.constants;return{getMetrics:function(nt){var At=[];return nt&&nt.Metrics_asArray&&nt.Metrics_asArray.forEach(function(it){var et=new fn,rt=Ce.getIsDynamic(nt);it.hasOwnProperty("metrics")&&(et.metrics=it.metrics,it.Range_asArray&&it.Range_asArray.forEach(function(Et){var _n,xn,Rn,Mn,Xn,Ot=new Yt;Ot.starttime=(_n=nt,xn=Et,Xn=0,rt?Xn=Ce.getAvailabilityStartTime(_n)/1e3:(Rn=Ce.getRegularPeriods(_n)).length&&(Xn=Rn[0].start),Mn=Xn,xn&&xn.hasOwnProperty(Ee.START_TIME)&&(Mn+=xn.starttime),Mn),Ot.duration=Et.hasOwnProperty("duration")?Et.duration:Ce.getDuration(nt),Ot._useWallClockTime=rt,et.Range.push(Ot)}),it.Reporting_asArray&&(it.Reporting_asArray.forEach(function(Et){var Ot=new Tt;Et.hasOwnProperty(Ee.SCHEME_ID_URI)&&(Ot.schemeIdUri=Et.schemeIdUri,Et.hasOwnProperty("value")&&(Ot.value=Et.value),Et.hasOwnProperty(Ee.DVB_REPORTING_URL)&&(Ot.dvb_reportingUrl=Et[Ee.DVB_REPORTING_URL]),Et.hasOwnProperty(Ee.DVB_PROBABILITY)&&(Ot.dvb_probability=Et[Ee.DVB_PROBABILITY]),et.Reporting.push(Ot))}),At.push(et)))}),At}}}Rt.__dashjs_factory_name="ManifestParsing";var Ze=dashjs.FactoryMaker.getSingletonFactory(Rt);function qe(q){var Ce,Ee={},nt=this.context,At=(q=q||{}).eventBus,it=q.events;function et(Et){if(!Et.error){var Ot=Object.keys(Ee);Ze(nt).getInstance({adapter:q.adapter,constants:q.constants}).getMetrics(Et.manifest).forEach(function(_n){var Zt=JSON.stringify(_n);if(Ee.hasOwnProperty(Zt))Ot.splice(Zt,1);else try{var xn=mt(nt).create(q);xn.initialize(_n),Ee[Zt]=xn}catch{}}),Ot.forEach(function(_n){Ee[_n].reset(),delete Ee[_n]}),At.trigger(_.Z.METRICS_INITIALISATION_COMPLETE)}}function rt(){Object.keys(Ee).forEach(function(Et){Ee[Et].reset()}),Ee={}}return Ce={reset:function(){At.off(it.MANIFEST_UPDATED,et,Ce),At.off(it.STREAM_TEARDOWN_COMPLETE,rt,Ce)}},At.on(it.MANIFEST_UPDATED,et,Ce),At.on(it.STREAM_TEARDOWN_COMPLETE,rt,Ce),Ce}qe.__dashjs_factory_name="MetricsCollectionController";var It=dashjs.FactoryMaker.getClassFactory(qe);function N(){var q=this.context;return{createMetricsReporting:function(Ce){return k(q).getInstance({eventBus:Ce.eventBus,dashMetrics:Ce.dashMetrics,metricsConstants:Ce.metricsConstants,events:Ce.events}).initialize(),It(q).create(Ce)},getReportingFactory:function(){return Ne(q).getInstance()},getMetricsHandlerFactory:function(){return Le(q).getInstance()}}}N.__dashjs_factory_name="MetricsReporting";var I=dashjs.FactoryMaker.getClassFactory(N);I.events=_.Z,dashjs.FactoryMaker.updateClassFactory(N.__dashjs_factory_name,I);var Z=I},1180:function(Ut,$e,ne){"use strict";function De(V){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(w){return typeof w}:function(w){return w&&"function"==typeof Symbol&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(V)}function H(V,w){return(H=Object.setPrototypeOf||function(F,G){return F.__proto__=G,F})(V,w)}function E(V){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(V)}var k=new(function(V){!function(M,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(O&&O.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),O&&H(M,O)}(T,V);var w,F,G=(w=T,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var M,O=E(w);if(F){var te=E(this).constructor;M=Reflect.construct(O,arguments,te)}else M=O.apply(this,arguments);return function _(V,w){return!w||"object"!==De(w)&&"function"!=typeof w?function(F){if(void 0===F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(V):w}(this,M)});function T(){var M;return function(O,te){if(!(O instanceof te))throw new TypeError("Cannot call a class as a function")}(this,T),(M=G.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",M.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",M.CMCD_DATA_GENERATED="cmcdDataGenerated",M}return T}(ne(8342).Z));$e.Z=k},5717:function(Ut,$e,ne){"use strict";var De=ne(2610),H=ne(5448),_=ne(1264),E=ne(3106),k=ne(1767),V=ne(3393);function w(){var F,G,T,M,O,te,ce,ue,Ne=(0,_.Z)(this.context).getInstance();function $(){M=[],O=[],te=[],ue=[],ce=null,G=[]}function be(he,Je){var Me=-1;he.some(function(ot,yt){if(ot===Je)return Me=yt,!0}),Me<0||he.splice(Me,1)}function xe(he){var Je;for(Je=0;Je<ue.length;Je++)if(ue[Je].rulename===he)return Je;return-1}function x(he,Je){_e(he,Je);var Me=new De.Z;Me.schemeIdUri=he,Me.value=Je,G.push(Me)}function _e(he,Je){(0,E.PS)(he,"string"),(0,E.PS)(Je,"string"),G.forEach(function(Me,ot){Me.schemeIdUri===he&&Me.value===Je&&G.splice(ot,1)})}return F={getCustomInitialTrackSelectionFunction:function(){return ce},setCustomInitialTrackSelectionFunction:function(he){ce=he},resetCustomInitialTrackSelectionFunction:function(){ce=null},getLicenseResponseFilters:function(){return O},getLicenseRequestFilters:function(){return M},getCustomCapabilitiesFilters:function(){return te},registerCustomCapabilitiesFilter:function(he){te.push(he)},registerLicenseResponseFilter:function(he){O.push(he)},registerLicenseRequestFilter:function(he){M.push(he)},unregisterCustomCapabilitiesFilter:function(he){be(te,he)},unregisterLicenseResponseFilter:function(he){be(O,he)},unregisterLicenseRequestFilter:function(he){be(M,he)},addAbrCustomRule:function(he,Je,Me){if("string"!=typeof he||he!==k.Z.ABANDON_FRAGMENT_RULES&&he!==k.Z.QUALITY_SWITCH_RULES||"string"!=typeof Je)throw V.Z.BAD_ARGUMENT_ERROR;var ot=xe(Je);-1===ot?ue.push({type:he,rulename:Je,rule:Me}):(ue[ot].type=he,ue[ot].rule=Me)},removeAllAbrCustomRule:function(){ue=[]},removeAbrCustomRule:function(he){if(he){var Je=xe(he);-1!==Je&&ue.splice(Je,1)}else ue=[]},getAbrCustomRules:function(){return ue},addUTCTimingSource:x,removeUTCTimingSource:_e,getUTCTimingSources:function(){return G},clearDefaultUTCTimingSources:function(){G=[]},restoreDefaultUTCTimingSources:function(){var he=Ne.get().streaming.utcSynchronization.defaultTimingSource;x(he.scheme,he.value)},setXHRWithCredentialsForType:function he(Je,Me){Je?T[Je]=!!Me:Object.keys(T).forEach(function(ot){he(ot,Me)})},getXHRWithCredentialsForType:function(he){var Je=T[he];return void 0===Je?T.default:Je},setConfig:function(){},reset:function(){$()}},T={default:!1},$(),F}w.__dashjs_factory_name="CustomParametersModel",$e.Z=H.Z.getSingletonFactory(w)},9032:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(7473);function _(k){var V=(k=k||{}).requestModifier;function w(F){var G=new Date,T=F.request,M=new XMLHttpRequest;if(M.open(F.method,F.url,!0),T.responseType&&(M.responseType=T.responseType),T.range&&M.setRequestHeader("Range","bytes="+T.range),T.requestStartDate||(T.requestStartDate=G),V&&V.modifyRequestHeader&&(M=V.modifyRequestHeader(M,{url:F.url})),F.headers)for(var O in F.headers){var te=F.headers[O];te&&M.setRequestHeader(O,te)}M.withCredentials=F.withCredentials,M.onload=F.onload,M.onloadend=F.onend,M.onerror=F.onerror,M.onprogress=F.progress,M.onabort=F.onabort,M.ontimeout=F.ontimeout,M.timeout=F.timeout,M.send(),F.response=M}return{load:function(F){V&&V.modifyRequest?(0,H.k)(F,V).then(function(){return w(F)}):w(F)},abort:function(F){var G=F.response;G.onloadend=G.onerror=G.onprogress=void 0,G.abort()}}}_.__dashjs_factory_name="XHRLoader";var E=De.Z.getClassFactory(_);$e.Z=E},1737:function(Ut,$e,ne){"use strict";ne.d($e,{default:function(){return Io}});var H={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},_=function(){function cn(){!function(Ct,$t){if(!(Ct instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,cn)}var rn;return(rn=[{key:"findCencContentProtection",value:function(Ct){for(var $t=null,xt=0;xt<Ct.length;++xt){var kt=Ct[xt];"urn:mpeg:dash:mp4protection:2011"!==kt.schemeIdUri.toLowerCase()||"cenc"!==kt.value.toLowerCase()&&"cbcs"!==kt.value.toLowerCase()||($t=kt)}return $t}},{key:"getPSSHData",value:function(Ct){var $t=8,xt=new DataView(Ct),kt=xt.getUint8($t);return $t+=20,kt>0&&($t+=4+16*xt.getUint32($t)),Ct.slice($t+=4)}},{key:"getPSSHForKeySystem",value:function(Ct,$t){var xt=cn.parsePSSHList($t);return Ct&&xt.hasOwnProperty(Ct.uuid.toLowerCase())?xt[Ct.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(Ct,$t){return"pssh"in Ct?(Ct.pssh.__text=Ct.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),$t.decodeArray(Ct.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(Ct){if(null==Ct)return[];for(var $t=new DataView(Ct.buffer||Ct),xt={},kt=0;;){var bn,zt,On=void 0,Wn=kt;if(kt>=$t.buffer.byteLength)break;if(bn=kt+$t.getUint32(kt),1886614376===$t.getUint32(kt+=4))if(0===(zt=$t.getUint8(kt+=4))||1===zt){kt++,kt+=3,On="";var In=void 0,ln=void 0;for(In=0;In<4;In++)On+=1===(ln=$t.getUint8(kt+In).toString(16)).length?"0"+ln:ln;for(kt+=4,On+="-",In=0;In<2;In++)On+=1===(ln=$t.getUint8(kt+In).toString(16)).length?"0"+ln:ln;for(kt+=2,On+="-",In=0;In<2;In++)On+=1===(ln=$t.getUint8(kt+In).toString(16)).length?"0"+ln:ln;for(kt+=2,On+="-",In=0;In<2;In++)On+=1===(ln=$t.getUint8(kt+In).toString(16)).length?"0"+ln:ln;for(kt+=2,On+="-",In=0;In<6;In++)On+=1===(ln=$t.getUint8(kt+In).toString(16)).length?"0"+ln:ln;kt+=6,kt+=4,xt[On=On.toLowerCase()]=$t.buffer.slice(Wn,bn),kt=bn}else kt=bn;else kt=bn}return xt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(Ct,$t){try{if(!Ct||0===Ct.length)return null;for(var xt=0,kt=null;xt<Ct.length&&!kt;){var bn=Ct[xt];if(bn&&bn.contentProtection&&bn.contentProtection.length>0){var zt=bn.contentProtection.filter(function(sr){return sr.schemeIdUri&&sr.schemeIdUri===$t});if(zt&&zt.length>0)for(var On=0;On<zt.length&&!kt;){for(var Wn=zt[On],In=0;In<H.attributes.length&&!kt;){for(var ln=0,gn=H.attributes[In];ln<H.prefixes.length&&!kt;)Wn[gn]&&Wn[gn].__prefix&&Wn[gn].__prefix===H.prefixes[ln]&&Wn[gn].__text&&(kt=Wn[gn].__text),ln+=1;In+=1}On+=1}}xt+=1}return kt}catch{return null}}}])&&function De(cn,un){for(var rn=0;rn<un.length;rn++){var Ct=un[rn];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(cn,Ct.key,Ct)}}(cn,rn),cn}(),E=function cn(un,rn){(function(Ct,$t){if(!(Ct instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,cn),this.contentType=un,this.robustness=rn},k=function cn(un,rn,Ct,$t,xt){(function(kt,bn){if(!(kt instanceof bn))throw new TypeError("Cannot call a class as a function")})(this,cn),this.initDataTypes=["cenc"],un&&un.length&&(this.audioCapabilities=un),rn&&rn.length&&(this.videoCapabilities=rn),this.distinctiveIdentifier=Ct,this.persistentState=$t,this.sessionTypes=xt};function V(cn){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(un){return typeof un}:function(un){return un&&"function"==typeof Symbol&&un.constructor===Symbol&&un!==Symbol.prototype?"symbol":typeof un})(cn)}function w(cn,un){return(w=Object.setPrototypeOf||function(rn,Ct){return rn.__proto__=Ct,rn})(cn,un)}function G(cn){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(un){return un.__proto__||Object.getPrototypeOf(un)})(cn)}var T=new(function(cn){!function(xt,kt){if("function"!=typeof kt&&null!==kt)throw new TypeError("Super expression must either be null or a function");xt.prototype=Object.create(kt&&kt.prototype,{constructor:{value:xt,writable:!0,configurable:!0}}),kt&&w(xt,kt)}($t,cn);var un,rn,Ct=(un=$t,rn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var xt,kt=G(un);if(rn){var bn=G(this).constructor;xt=Reflect.construct(kt,arguments,bn)}else xt=kt.apply(this,arguments);return function F(cn,un){return!un||"object"!==V(un)&&"function"!=typeof un?function(rn){if(void 0===rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn}(cn):un}(this,xt)});function $t(){var xt;return function(kt,bn){if(!(kt instanceof bn))throw new TypeError("Cannot call a class as a function")}(this,$t),(xt=Ct.call(this)).MEDIA_KEYERR_CODE=100,xt.MEDIA_KEYERR_UNKNOWN_CODE=101,xt.MEDIA_KEYERR_CLIENT_CODE=102,xt.MEDIA_KEYERR_SERVICE_CODE=103,xt.MEDIA_KEYERR_OUTPUT_CODE=104,xt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,xt.MEDIA_KEYERR_DOMAIN_CODE=106,xt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,xt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,xt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,xt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,xt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,xt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,xt.KEY_SESSION_CREATED_ERROR_CODE=113,xt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,xt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",xt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",xt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",xt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",xt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",xt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",xt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",xt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",xt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",xt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",xt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",xt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",xt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",xt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",xt}return $t}(ne(2230).Z)),M=ne(5459),O=function cn(un,rn,Ct,$t,xt,kt,bn,zt){(function(On,Wn){if(!(On instanceof Wn))throw new TypeError("Cannot call a class as a function")})(this,cn),this.url=un,this.method=rn,this.responseType=Ct,this.headers=$t,this.withCredentials=xt,this.messageType=kt,this.sessionId=bn,this.data=zt},te=function cn(un,rn,Ct){(function($t,xt){if(!($t instanceof xt))throw new TypeError("Cannot call a class as a function")})(this,cn),this.url=un,this.headers=rn,this.data=Ct},ce=ne(7855),ue=ne(703),se=ne(3393),Ne=ne(5448);function $(cn){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(un){return typeof un}:function(un){return un&&"function"==typeof Symbol&&un.constructor===Symbol&&un!==Symbol.prototype?"symbol":typeof un})(cn)}function be(cn){var un,rn,Ct,$t,xt,kt,bn,zt,On,Wn,In,ln=(cn=cn||{}).protectionKeyController,gn=cn.protectionModel,Vn=cn.eventBus,sr=cn.events,Vr=cn.BASE64,tr=cn.constants,nn=[],hn=cn.cmcdModel,Cn=cn.settings,cr=cn.customParametersModel;function gr(){if(!(Vn&&Vn.hasOwnProperty("on")&&ln&&ln.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function jr(pn,Qn){zt||On?zt&&zr():function(Sr,Oi){if(!On){On=!0;var fi,_r=[];Sr=Sr.sort(function(Di,li){return(xt&&xt[Di.ks.systemString]&&xt[Di.ks.systemString].priority>=0?xt[Di.ks.systemString].priority:Sr.length)-(xt&&xt[li.ks.systemString]&&xt[li.ks.systemString].priority>=0?xt[li.ks.systemString].priority:Sr.length)});for(var si=0;si<Sr.length;si++){var qr=Qa(Sr[si]);_r.push({ks:Sr[si].ks,configs:[qr],protData:Sr[si].protData})}gn.requestKeySystemAccess(_r).then(function(Di){var li=(fi=Di.data).mksa&&fi.mksa.selectedSystemString?fi.mksa.selectedSystemString:fi.keySystem.systemString;return rn.info("DRM: KeySystem Access Granted for system string ("+li+")!  Selecting key system..."),gn.selectKeySystem(fi)}).then(function(Di){if(zt=Di,On=!1,gn){Vn.trigger(sr.KEY_SYSTEM_SELECTED,{data:fi});var li=Vi(zt);li&&li.serverCertificate&&li.serverCertificate.length>0&&gn.setServerCertificate(Vr.decodeArray(li.serverCertificate).buffer),zr()}}).catch(function(Di){zt=null,On=!1,Oi||Vn.trigger(sr.KEY_SYSTEM_SELECTED,{data:null,error:new M.Z(T.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,T.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Di.error)})})}}(pn,Qn)}function zr(){for(var pn,Qn=0;Qn<Ct.length;Qn++)for(pn=0;pn<Ct[Qn].length;pn++)if(zt===Ct[Qn][pn].ks){so(Ct[Qn][pn]);break}Ct=[]}function so(pn){if(ln.isClearKey(zt)&&pn.protData&&pn.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(pn.protData.clearkeys).length){var Qn={kids:Object.keys(pn.protData.clearkeys)};pn.initData=(new TextEncoder).encode(JSON.stringify(Qn))}pn.sessionId?ci(pn):null!==pn.initData&&pi(pn)}function ci(pn){gr(),gn.loadKeySession(pn)}function pi(pn){var Qn=_.getPSSHForKeySystem(zt,pn?pn.initData:null);if(Qn){if(function(Sr){if(!Sr)return!1;try{for(var Oi=gn.getSessions(),fi=0;fi<Oi.length;fi++)if(Oi[fi].getKeyId()===Sr)return!0;return!1}catch{return!1}}(pn.keyId)||Ii(Qn))return;try{pn.initData=Qn,gn.createKeySession(pn)}catch(Sr){Vn.trigger(sr.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+Sr.message)})}}else pn&&pn.initData?gn.createKeySession(pn):Vn.trigger(sr.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(zt?zt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Vi(pn){if(pn){var Qn=pn.systemString;if(xt)return Qn in xt?xt[Qn]:null}return null}function Ii(pn){if(!pn)return!1;try{for(var Qn=gn.getAllInitData(),Sr=0;Sr<Qn.length;Sr++)if(ln.initDataEquals(pn,Qn[Sr]))return rn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function lo(pn){gr(),pn?(gn.setMediaElement(pn),Vn.on(sr.NEED_KEY,es,un)):null===pn&&(gn.setMediaElement(pn),Vn.off(sr.NEED_KEY,es,un))}function Qa(pn){var Qn=pn.protData,Sr=[],Oi=[],fi=Qn&&Qn.audioRobustness&&Qn.audioRobustness.length>0?Qn.audioRobustness:bn,_r=Qn&&Qn.videoRobustness&&Qn.videoRobustness.length>0?Qn.videoRobustness:bn,si=pn.sessionType,qr=Qn&&Qn.distinctiveIdentifier?Qn.distinctiveIdentifier:"optional",Di=Qn&&Qn.persistentState?Qn.persistentState:"temporary"===si?"optional":"required";return $t.forEach(function(li){li.type===tr.AUDIO?Sr.push(new E(li.codec,fi)):li.type===tr.VIDEO&&Oi.push(new E(li.codec,_r))}),new k(Sr,Oi,qr,Di,[si])}function Ja(pn){pn.error?Vn.trigger(sr.KEY_STATUSES_CHANGED,{data:null,error:pn.error}):rn.debug("DRM: key status = "+pn.status)}function ta(pn){rn.debug("DRM: onKeyMessage");var Qn=pn.data;Vn.trigger(sr.KEY_MESSAGE,{data:Qn});var Sr=Qn.messageType?Qn.messageType:"license-request",Oi=Qn.message,fi=Qn.sessionToken,_r=Vi(zt),si=ln.getLicenseServerModelInstance(zt,_r,Sr),qr={sessionToken:fi,messageType:Sr};if(Oi&&0!==Oi.byteLength){if(!si)return rn.debug("DRM: License server request not required for this message (type = "+pn.data.messageType+").  Session ID = "+fi.getSessionId()),void To(qr);if(ln.isClearKey(zt)){var Di=ln.processClearKeyLicenseRequest(zt,_r,Oi);if(Di&&Di.keyPairs&&Di.keyPairs.length>0)return rn.debug("DRM: ClearKey license request handled by application!"),To(qr),void gn.updateKeySession(fi,Di)}!function(li,Kr,or){var jo=li.sessionToken,No=li.messageType?li.messageType:"license-request",ys={sessionToken:jo,messageType:No},qo=zt?zt.systemString:null,Zn=function(yi,ts,Gr,mr,Hu){var Ko=null,Gu=mr.message;if(yi&&yi.serverURL){var Yi=yi.serverURL;"string"==typeof Yi&&""!==Yi?Ko=Yi:"object"===$(Yi)&&Yi.hasOwnProperty(ts)&&(Ko=Yi[ts])}else if(yi&&yi.laURL&&""!==yi.laURL)Ko=yi.laURL;else if(!(Ko=_.getLicenseServerUrlFromMediaInfo($t,zt.schemeIdURI))&&!ln.isClearKey(zt)){var yr=_.getPSSHData(Gr.initData);(Ko=zt.getLicenseServerURLFromInitData(yr))||(Ko=mr.laURL)}return Hu.getServerURLFromMessage(Ko,Gu,ts)}(or,No,jo,li,Kr);if(Zn){var Na={},br=!1;or&&Ma(Na,or.httpRequestHeaders);var ii=li.message;Ma(Na,zt.getRequestHeadersFromMessage(ii)),Object.keys(Na).forEach(function(yi){"authorization"===yi.toLowerCase()&&(br=!0)}),or&&"boolean"==typeof or.withCredentials&&(br=or.withCredentials);var Yl=function(yi){if(gn)if(yi.status>=200&&yi.status<=299){var ts=ue.Z.parseHttpHeaders(yi.getAllResponseHeaders?yi.getAllResponseHeaders():null),Gr=new te(yi.responseURL,ts,yi.response);Us(cr.getLicenseResponseFilters(),Gr).then(function(){var mr=Kr.getLicenseMessage(Gr.data,qo,No);null!==mr?(To(ys),gn.updateKeySession(jo,mr)):ml(yi,ys,qo,No,Kr)})}else ml(yi,ys,qo,No,Kr)},zl=function(yi){To(ys,new M.Z(T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+qo+' update, XHR aborted. status is "'+yi.statusText+'" ('+yi.status+"), readyState is "+yi.readyState))},Uu=function(yi){To(ys,new M.Z(T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+qo+' update, XHR error. status is "'+yi.statusText+'" ('+yi.status+"), readyState is "+yi.readyState))},ga=zt.getLicenseRequestFromMessage(ii),So=Kr.getHTTPMethod(No),vl=Kr.getResponseType(qo,No),Bu=or&&!isNaN(or.httpTimeout)?or.httpTimeout:8e3,Wl=jo.getSessionId()||null,xa=new O(Zn,So,vl,Na,br,No,Wl,ga),Vu=isNaN(Cn.get().streaming.retryAttempts[ce.w.LICENSE])?3:Cn.get().streaming.retryAttempts[ce.w.LICENSE];Us(cr.getLicenseRequestFilters(),xa).then(function(){Kl(xa,Vu,Bu,Yl,zl,Uu)})}else To(ys,new M.Z(T.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,T.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(Qn,si,_r)}else To(qr,new M.Z(T.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,T.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function To(pn,Qn){Vn.trigger(sr.LICENSE_REQUEST_COMPLETE,{data:pn,error:Qn})}function Kl(pn,Qn,Sr,Oi,fi,_r){var si=new XMLHttpRequest;if(Cn.get().streaming.cmcd&&Cn.get().streaming.cmcd.enabled&&Cn.get().streaming.cmcd.mode===se.Z.CMCD_MODE_QUERY){var qr=hn.getQueryParameter({url:pn.url,type:ce.w.LICENSE});qr&&(pn.url=ue.Z.addAditionalQueryParameterToUrl(pn.url,[qr]))}for(var Di in si.open(pn.method,pn.url,!0),si.responseType=pn.responseType,si.withCredentials=pn.withCredentials,Sr>0&&(si.timeout=Sr),pn.headers)si.setRequestHeader(Di,pn.headers[Di]);if(Cn.get().streaming.cmcd&&Cn.get().streaming.cmcd.enabled&&Cn.get().streaming.cmcd.mode===se.Z.CMCD_MODE_HEADER){var li=hn.getHeaderParameters({url:pn.url,type:ce.w.LICENSE});if(li)for(var Kr in li){var or=li[Kr];or&&si.setRequestHeader(Kr,or)}}var jo=function(){Qn--;var No=isNaN(Cn.get().streaming.retryIntervals[ce.w.LICENSE])?1e3:Cn.get().streaming.retryIntervals[ce.w.LICENSE];In=setTimeout(function(){Kl(pn,Qn,Sr,Oi,fi,_r)},No)};si.onload=function(){Wn=null,this.status>=200&&this.status<=299||Qn<=0?Oi(this):(rn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Qn),jo())},si.ontimeout=si.onerror=function(){Wn=null,Qn<=0?_r(this):(rn.warn("License request network request failed . Retrying it... Pending retries: "+Qn),jo())},si.onabort=function(){fi(this)},Vn.trigger(sr.LICENSE_REQUEST_SENDING,{url:pn.url,headers:pn.headers,payload:pn.data,sessionId:pn.sessionId}),Wn=si,si.send(pn.data)}function vs(){Wn&&(Wn.onloadend=Wn.onerror=Wn.onprogress=void 0,Wn.abort(),Wn=null),In&&(clearTimeout(In),In=null)}function Ma(pn,Qn){if(Qn)for(var Sr in Qn)pn[Sr]=Qn[Sr]}function ml(pn,Qn,Sr,Oi,fi){var _r="NONE",si=null;pn.response&&(_r=fi.getErrorResponse(pn.response,Sr,Oi),si={serverResponse:pn.response||null,responseCode:pn.status||null,responseText:pn.statusText||null}),To(Qn,new M.Z(T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Sr+' update, XHR complete. status is "'+pn.statusText+'" ('+pn.status+"), readyState is "+pn.readyState+".  Response is "+_r,si))}function Us(pn,Qn){return pn?pn.reduce(function(Sr,Oi){return Sr.then(function(){return Oi(Qn)})},Promise.resolve()):Promise.resolve()}function es(pn,Qn){if(!Cn.get().streaming.protection.ignoreEmeEncryptedEvent){if(rn.debug("DRM: onNeedKey"),"cenc"!==pn.key.initDataType)return void rn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+pn.key.initDataType);if(0===$t.length&&(rn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Qn=void 0===Qn?1:Qn+1)<5))return void nn.push(setTimeout(function(){es(pn,Qn)},500));var Sr=pn.key.initData;if(ArrayBuffer.isView(Sr)&&(Sr=Sr.buffer),zt){var Oi=_.getPSSHForKeySystem(zt,Sr);if(Oi&&Ii(Oi))return}rn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Sr)));var fi=ln.getSupportedKeySystemsFromSegmentPssh(Sr,xt,kt);if(0===fi.length)return void rn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");Ct.push(_r=fi),jr(_r,!1)}var _r}return rn=cn.debug.getLogger(un={initializeForMedia:function(pn){if(!pn)throw new Error("mediaInfo can not be null or undefined");gr(),$t.push(pn)},clearMediaInfoArray:function(){$t=[]},handleKeySystemFromManifest:function(){if($t&&0!==$t.length){var pn=[];$t.forEach(function(Qn){var Sr=ln.getSupportedKeySystemsFromContentProtection(Qn.contentProtection,xt,kt);Sr.length>0&&(0===pn.length&&(pn=Sr),Ct.push(Sr))}),pn&&pn.length>0&&jr(pn,!0)}},createKeySession:pi,loadKeySession:ci,removeKeySession:function(pn){gr(),gn.removeKeySession(pn)},closeKeySession:function(pn){gr(),gn.closeKeySession(pn)},setServerCertificate:function(pn){gr(),gn.setServerCertificate(pn)},setMediaElement:lo,setSessionType:function(pn){kt=pn},setRobustnessLevel:function(pn){bn=pn},setProtectionData:function(pn){xt=pn,ln.setProtectionData(pn)},getSupportedKeySystemsFromContentProtection:function(pn){return gr(),ln.getSupportedKeySystemsFromContentProtection(pn,xt,kt)},getKeySystems:function(){return ln?ln.getKeySystems():[]},setKeySystems:function(pn){ln&&ln.setKeySystems(pn)},stop:function(){vs(),gn&&gn.stop()},reset:function(){Vn.off(sr.INTERNAL_KEY_MESSAGE,ta,un),Vn.off(sr.INTERNAL_KEY_STATUS_CHANGED,Ja,un),gr(),vs(),lo(null),zt=null,On=!1,gn&&(gn.reset(),gn=null),nn.forEach(function(pn){return clearTimeout(pn)}),nn=[],$t=[],Ct=[]}}),Ct=[],$t=[],kt="temporary",bn="",Wn=null,In=null,Vn.on(sr.INTERNAL_KEY_MESSAGE,ta,un),Vn.on(sr.INTERNAL_KEY_STATUS_CHANGED,Ja,un),un}be.__dashjs_factory_name="ProtectionController";var xe=Ne.Z.getClassFactory(be),x=function cn(un,rn){(function(Ct,$t){if(!(Ct instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,cn),this.keyID=un,this.key=rn};var he=function(){function cn(Ct,$t){if(function(xt,kt){if(!(xt instanceof kt))throw new TypeError("Cannot call a class as a function")}(this,cn),$t&&"persistent"!==$t&&"temporary"!==$t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Ct,this.type=$t}var rn;return(rn=[{key:"toJWK",value:function(){var Ct,$t=this.keyPairs.length,xt={keys:[]};for(Ct=0;Ct<$t;Ct++)xt.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[Ct].keyID,k:this.keyPairs[Ct].key});this.type&&(xt.type=this.type);var bn=JSON.stringify(xt),zt=bn.length,On=new ArrayBuffer(zt),Wn=new Uint8Array(On);for(Ct=0;Ct<zt;Ct++)Wn[Ct]=bn.charCodeAt(Ct);return On}}])&&function _e(cn,un){for(var rn=0;rn<un.length;rn++){var Ct=un[rn];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(cn,Ct.key,Ct)}}(cn.prototype,rn),cn}();var Me=new(function(){function cn(){(function(Ct,$t){if(!(Ct instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,cn),this.init()}var rn;return(rn=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&function Je(cn,un){for(var rn=0;rn<un.length;rn++){var Ct=un[rn];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(cn,Ct.key,Ct)}}(cn.prototype,rn),cn}()),ot="e2719d58-a985-b3c9-781a-b030af78d30e",yt=Me.CLEARKEY_KEYSTEM_STRING,Dt="urn:uuid:"+ot;function Qe(cn){var un=(cn=cn||{}).BASE64;return{uuid:ot,schemeIdURI:Dt,systemString:yt,getInitData:function(rn,Ct){try{var $t=_.parseInitDataFromContentProtection(rn,un);if(!$t&&Ct){var xt={kids:[function(kt){try{var bn=kt.replace(/-/g,"");return(bn=btoa(bn.match(/\w{2}/g).map(function(zt){return String.fromCharCode(parseInt(zt,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Ct["cenc:default_KID"])]};$t=(new TextEncoder).encode(JSON.stringify(xt))}return $t}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(rn){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(rn))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(rn,Ct){var $t=null;if(rn){for(var xt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Ct))),kt=[],bn=0;bn<xt.kids.length;bn++){var zt=xt.kids[bn],On=rn.clearkeys&&rn.clearkeys.hasOwnProperty(zt)?rn.clearkeys[zt]:null;if(!On)throw new Error("DRM: ClearKey keyID ("+zt+") is not known!");kt.push(new x(zt,On))}$t=new he(kt)}return $t}}}Qe.__dashjs_factory_name="KeySystemClearKey";var Le=dashjs.FactoryMaker.getSingletonFactory(Qe),Lt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Vt=Me.CLEARKEY_KEYSTEM_STRING,ze="urn:uuid:"+Lt;function mt(cn){var rn=cn.BASE64,Ct=cn.debug.getLogger(undefined);return{uuid:Lt,schemeIdURI:ze,systemString:Vt,getInitData:function($t){return _.parseInitDataFromContentProtection($t,rn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function($t){return new Uint8Array($t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function($t,xt){var kt=null;if($t){for(var bn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(xt))),zt=[],On=0;On<bn.kids.length;On++){var Wn=bn.kids[On],In=$t.clearkeys&&$t.clearkeys.hasOwnProperty(Wn)?$t.clearkeys[Wn]:null;if(!In)throw new Error("DRM: ClearKey keyID ("+Wn+") is not known!");zt.push(new x(Wn,In))}kt=new he(zt),Ct.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return kt}}}mt.__dashjs_factory_name="KeySystemW3CClearKey";var fn=dashjs.FactoryMaker.getSingletonFactory(mt),Yt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Tt=Me.WIDEVINE_KEYSTEM_STRING,Rt="urn:uuid:"+Yt;function Ze(cn){var un=(cn=cn||{}).BASE64;return{uuid:Yt,schemeIdURI:Rt,systemString:Tt,getInitData:function(rn){return _.parseInitDataFromContentProtection(rn,un)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(rn){return new Uint8Array(rn)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ze.__dashjs_factory_name="KeySystemWidevine";var qe=dashjs.FactoryMaker.getSingletonFactory(Ze),It="9a04f079-9840-4286-ab92-e65be0885f95",N=Me.PLAYREADY_KEYSTEM_STRING,I="urn:uuid:"+It;function Z(cn){var un="utf-16",rn=(cn=cn||{}).BASE64,Ct=cn.settings;function $t(){if(!rn||!rn.hasOwnProperty("decodeArray")||!rn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:It,schemeIdURI:I,systemString:N,getInitData:function(xt){var kt,bn,zt,On,Wn,In=new Uint8Array([112,115,115,104,0,0,0,0]),ln=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),gn=0,Vn=null;if($t(),!xt)return null;if("pssh"in xt)return _.parseInitDataFromContentProtection(xt,rn);if("pro"in xt)Vn=rn.decodeArray(xt.pro.__text);else{if(!("prheader"in xt))return null;Vn=rn.decodeArray(xt.prheader.__text)}return bn=4+In.length+ln.length+4+(kt=Vn.length),zt=new ArrayBuffer(bn),On=new Uint8Array(zt),(Wn=new DataView(zt)).setUint32(gn,bn),On.set(In,gn+=4),On.set(ln,gn+=In.length),Wn.setUint32(gn+=ln.length,kt),On.set(Vn,gn+=4),gn+=kt,On.buffer},getRequestHeadersFromMessage:function(xt){var kt,bn,zt={},On=new DOMParser;if(Ct&&Ct.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===un&&xt&&xt.byteLength%2==1)return zt["Content-Type"]="text/xml; charset=utf-8",zt;var Wn="utf-16"===un?new Uint16Array(xt):new Uint8Array(xt);kt=String.fromCharCode.apply(null,Wn);for(var In=(bn=On.parseFromString(kt,"application/xml")).getElementsByTagName("name"),ln=bn.getElementsByTagName("value"),gn=0;gn<In.length;gn++)zt[In[gn].childNodes[0].nodeValue]=ln[gn].childNodes[0].nodeValue;return zt.hasOwnProperty("Content")&&(zt["Content-Type"]=zt.Content,delete zt.Content),zt.hasOwnProperty("Content-Type")||(zt["Content-Type"]="text/xml; charset=utf-8"),zt},getLicenseRequestFromMessage:function(xt){var kt=null,bn=new DOMParser;if(Ct&&Ct.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===un&&xt&&xt.byteLength%2==1)return xt;var zt="utf-16"===un?new Uint16Array(xt):new Uint8Array(xt);$t();var On=String.fromCharCode.apply(null,zt),Wn=bn.parseFromString(On,"application/xml");if(!Wn.getElementsByTagName("PlayReadyKeyMessage")[0])return xt;var In=Wn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return In&&(kt=rn.decode(In)),kt},getLicenseServerURLFromInitData:function(xt){if(xt)for(var kt=new DataView(xt),bn=kt.getUint16(4,!0),zt=6,On=new DOMParser,Wn=0;Wn<bn;Wn++){var In=kt.getUint16(zt,!0),ln=kt.getUint16(zt+=2,!0);if(zt+=2,1===In){var gn=xt.slice(zt,zt+ln),Vn=String.fromCharCode.apply(null,new Uint16Array(gn)),sr=On.parseFromString(Vn,"application/xml");if(sr.getElementsByTagName("LA_URL")[0]){var Dr=sr.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Dr)return Dr}if(sr.getElementsByTagName("LUI_URL")[0]){var Vr=sr.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Vr)return Vr}}else zt+=ln}return null},getCDMData:function(xt){var kt,bn,zt,On;if($t(),!xt)return null;for(kt=[],On=0;On<xt.length;++On)kt.push(xt.charCodeAt(On)),kt.push(0);for(kt=String.fromCharCode.apply(null,kt),kt=rn.encode(kt),bn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",kt),zt=[],On=0;On<bn.length;++On)zt.push(bn.charCodeAt(On)),zt.push(0);return new Uint8Array(zt).buffer},setPlayReadyMessageFormat:function(xt){if("utf-8"!==xt&&"utf-16"!==xt)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');un=xt}}}Z.__dashjs_factory_name="KeySystemPlayReady";var q=dashjs.FactoryMaker.getSingletonFactory(Z);function Ce(cn){var un=(cn=cn||{}).BASE64,rn={};return rn[Me.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Ct){return un.decodeArray(Ct.license)},getErrorResponse:function(Ct){return Ct}},rn[Me.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Ct){return Ct},getErrorResponse:function(Ct){return String.fromCharCode.apply(null,new Uint8Array(Ct))}},{getServerURLFromMessage:function(Ct){return Ct},getHTTPMethod:function(){return"POST"},getResponseType:function(Ct){return rn[Ct].responseType},getLicenseMessage:function(Ct,$t){return function(){if(!un||!un.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),rn[$t].getLicenseMessage(Ct)},getErrorResponse:function(Ct,$t){return rn[$t].getErrorResponse(Ct)}}}Ce.__dashjs_factory_name="DRMToday";var Ee=dashjs.FactoryMaker.getSingletonFactory(Ce);function nt(){var cn="http://schemas.xmlsoap.org/soap/envelope/";function un($t){var xt=String.fromCharCode.apply(null,new Uint8Array($t));return decodeURIComponent(escape(xt))}function rn($t){if(window.DOMParser){var xt=un($t),kt=(new window.DOMParser).parseFromString(xt,"text/xml"),bn=kt?kt.getElementsByTagNameNS(cn,"Envelope")[0]:null,zt=bn?bn.getElementsByTagNameNS(cn,"Body")[0]:null;if(zt&&zt.getElementsByTagNameNS(cn,"Fault")[0])return null}return $t}function Ct($t){var xt="",kt="",bn="",zt=-1,On=-1;if(window.DOMParser){var Wn=un($t),In=(new window.DOMParser).parseFromString(Wn,"text/xml"),ln=In?In.getElementsByTagNameNS(cn,"Envelope")[0]:null,gn=ln?ln.getElementsByTagNameNS(cn,"Body")[0]:null,Vn=gn?gn.getElementsByTagNameNS(cn,"Fault")[0]:null,sr=Vn?Vn.getElementsByTagName("detail")[0]:null,Dr=sr?sr.getElementsByTagName("Exception")[0]:null,Vr=null;if(null===Vn)return Wn;xt=(Vr=Vn.getElementsByTagName("faultstring")[0].firstChild)?Vr.nodeValue:null,null!==Dr&&(kt=(Vr=Dr.getElementsByTagName("StatusCode")[0])?Vr.firstChild.nodeValue:null,zt=(bn=(Vr=Dr.getElementsByTagName("Message")[0])?Vr.firstChild.nodeValue:null)?bn.lastIndexOf("[")+1:-1,On=bn?bn.indexOf("]"):-1,bn=bn?bn.substring(zt,On):"")}var tr="code: ".concat(kt,", name: ").concat(xt);return bn&&(tr+=", message: ".concat(bn)),tr}return{getServerURLFromMessage:function($t){return $t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function($t){return rn.call(this,$t)},getErrorResponse:function($t){return Ct.call(this,$t)}}}nt.__dashjs_factory_name="PlayReady";var At=Ne.Z.getSingletonFactory(nt);function it(){return{getServerURLFromMessage:function(cn){return cn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(cn){return cn},getErrorResponse:function(cn){return String.fromCharCode.apply(null,new Uint8Array(cn))}}}it.__dashjs_factory_name="Widevine";var et=dashjs.FactoryMaker.getSingletonFactory(it);function rt(){return{getServerURLFromMessage:function(cn){return cn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(cn){if(!cn.hasOwnProperty("keys"))return null;for(var un=[],rn=0;rn<cn.keys.length;rn++){var Ct=cn.keys[rn],$t=Ct.kid.replace(/=/g,""),xt=Ct.k.replace(/=/g,"");un.push(new x($t,xt))}return new he(un)},getErrorResponse:function(cn){return String.fromCharCode.apply(null,new Uint8Array(cn))}}}rt.__dashjs_factory_name="ClearKey";var Et=dashjs.FactoryMaker.getSingletonFactory(rt);function Ot(){var cn,un,rn,Ct,$t,xt,kt,bn,zt=this.context;function On(ln,gn){return gn&&ln in gn?gn[ln]:null}function Wn(ln,gn){return ln&&ln.sessionId?ln.sessionId:gn&&gn.sessionId?gn.sessionId:null}function In(ln,gn){return ln&&ln.sessionType?ln.sessionType:gn}return cn={initialize:function(){var ln;Ct=[],ln=q(zt).getInstance({BASE64:$t,settings:xt}),Ct.push(ln),ln=qe(zt).getInstance({BASE64:$t}),Ct.push(ln),ln=Le(zt).getInstance({BASE64:$t}),Ct.push(ln),kt=ln,ln=fn(zt).getInstance({BASE64:$t,debug:un}),Ct.push(ln),bn=ln},setProtectionData:function(ln){for(var gn,Vn,sr=0;sr<Ct.length;sr++){var Dr=Ct[sr];Dr.hasOwnProperty("init")&&Dr.init((gn=Dr.systemString,Vn=void 0,Vn=null,ln&&(Vn=gn in ln?ln[gn]:null),Vn))}},isClearKey:function(ln){return ln===kt||ln===bn},initDataEquals:function(ln,gn){if(ln.byteLength===gn.byteLength){for(var Vn=new Uint8Array(ln),sr=new Uint8Array(gn),Dr=0;Dr<Vn.length;Dr++)if(Vn[Dr]!==sr[Dr])return!1;return!0}return!1},getKeySystems:function(){return Ct},setKeySystems:function(ln){Ct=ln},getKeySystemBySystemString:function(ln){for(var gn=0;gn<Ct.length;gn++)if(Ct[gn].systemString===ln)return Ct[gn];return null},getSupportedKeySystemsFromContentProtection:function(ln,gn,Vn){var sr,Dr,Vr,tr,nn=[];if(ln){var hn=_.findCencContentProtection(ln);for(Vr=0;Vr<Ct.length;++Vr){var Cn=On((Dr=Ct[Vr]).systemString,gn);for(tr=0;tr<ln.length;++tr)if((sr=ln[tr]).schemeIdUri.toLowerCase()===Dr.schemeIdURI){var cr=Dr.getInitData(sr,hn);nn.push({ks:Ct[Vr],keyId:sr.keyId,initData:cr,protData:Cn,cdmData:Dr.getCDMData(Cn?Cn.cdmData:null),sessionId:Wn(Cn,sr),sessionType:In(Cn,Vn)})}}}return nn},getSupportedKeySystemsFromSegmentPssh:function(ln,gn,Vn){for(var sr,Dr=[],Vr=_.parsePSSHList(ln),tr=0;tr<Ct.length;++tr){var nn=On((sr=Ct[tr]).systemString,gn);sr.uuid in Vr&&Dr.push({ks:sr,initData:Vr[sr.uuid],protData:nn,cdmData:sr.getCDMData(nn?nn.cdmData:null),sessionId:Wn(nn),sessionType:In(nn,Vn)})}return Dr},getLicenseServerModelInstance:function(ln,gn,Vn){if("license-release"===Vn||"individualization-request"===Vn)return null;var sr=null;return gn&&gn.hasOwnProperty("drmtoday")?sr=Ee(zt).getInstance({BASE64:$t}):ln.systemString===Me.WIDEVINE_KEYSTEM_STRING?sr=et(zt).getInstance():ln.systemString===Me.PLAYREADY_KEYSTEM_STRING?sr=At(zt).getInstance():ln.systemString===Me.CLEARKEY_KEYSTEM_STRING&&(sr=Et(zt).getInstance()),sr},processClearKeyLicenseRequest:function(ln,gn,Vn){try{return ln.getClearKeysFromProtectionData(gn,Vn)}catch{return rn.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(ln){ln&&(ln.debug&&(rn=(un=ln.debug).getLogger(cn)),ln.BASE64&&($t=ln.BASE64),ln.settings&&(xt=ln.settings))}}}Ot.__dashjs_factory_name="ProtectionKeyController";var _n=dashjs.FactoryMaker.getSingletonFactory(Ot);function Zt(cn){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(un){return typeof un}:function(un){return un&&"function"==typeof Symbol&&un.constructor===Symbol&&un!==Symbol.prototype?"symbol":typeof un})(cn)}function xn(cn,un){return(xn=Object.setPrototypeOf||function(rn,Ct){return rn.__proto__=Ct,rn})(cn,un)}function Mn(cn){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(un){return un.__proto__||Object.getPrototypeOf(un)})(cn)}var Xn=new(function(cn){!function(xt,kt){if("function"!=typeof kt&&null!==kt)throw new TypeError("Super expression must either be null or a function");xt.prototype=Object.create(kt&&kt.prototype,{constructor:{value:xt,writable:!0,configurable:!0}}),kt&&xn(xt,kt)}($t,cn);var un,rn,Ct=(un=$t,rn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var xt,kt=Mn(un);if(rn){var bn=Mn(this).constructor;xt=Reflect.construct(kt,arguments,bn)}else xt=kt.apply(this,arguments);return function Rn(cn,un){return!un||"object"!==Zt(un)&&"function"!=typeof un?function(rn){if(void 0===rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn}(cn):un}(this,xt)});function $t(){var xt;return function(kt,bn){if(!(kt instanceof bn))throw new TypeError("Cannot call a class as a function")}(this,$t),(xt=Ct.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",xt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",xt.KEY_ADDED="public_keyAdded",xt.KEY_ERROR="public_keyError",xt.KEY_MESSAGE="public_keyMessage",xt.KEY_SESSION_CLOSED="public_keySessionClosed",xt.KEY_SESSION_CREATED="public_keySessionCreated",xt.KEY_SESSION_REMOVED="public_keySessionRemoved",xt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",xt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",xt.KEY_SYSTEM_SELECTED="public_keySystemSelected",xt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",xt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",xt.NEED_KEY="needkey",xt.PROTECTION_CREATED="public_protectioncreated",xt.PROTECTION_DESTROYED="public_protectiondestroyed",xt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",xt.TEARDOWN_COMPLETE="protectionTeardownComplete",xt.VIDEO_ELEMENT_SELECTED="videoElementSelected",xt.KEY_SESSION_UPDATED="public_keySessionUpdated",xt}return $t}(ne(8342).Z)),Ir=function cn(un,rn){(function(Ct,$t){if(!(Ct instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,cn),this.initData=un,this.initDataType=rn},Yr=function cn(un,rn,Ct,$t){(function(xt,kt){if(!(xt instanceof kt))throw new TypeError("Cannot call a class as a function")})(this,cn),this.sessionToken=un,this.message=rn,this.defaultURL=Ct,this.messageType=$t||"license-request"},Li=function cn(un,rn){(function(Ct,$t){if(!(Ct instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,cn),this.keySystem=un,this.ksConfiguration=rn},ei={};function gi(cn){var un,rn,Ct,$t,xt,kt,bn,zt,On=this.context,Wn=(cn=cn||{}).eventBus,In=cn.events;function gn(nn,hn,Cn,cr){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var gr="Insecure origins are not allowed";return Wn.trigger(In.KEY_SYSTEM_ACCESS_COMPLETE,{error:gr}),void cr({error:gr})}var pi,Vi,so=nn[hn].ks,ci=so.systemString;(pi=(nn[hn].protData&&nn[hn].protData.systemStringPriority?nn[hn].protData.systemStringPriority:null)||(ei[ci]?ei[ci]:[ci]),Vi=nn[hn].configs,new Promise(function(Ii,lo){Vn(pi,Vi,0,Ii,lo)})).then(function(pi){var Vi="function"==typeof pi.getConfiguration?pi.getConfiguration():null,Ii=new Li(so,Vi);Ii.mksa=pi,Wn.trigger(In.KEY_SYSTEM_ACCESS_COMPLETE,{data:Ii}),Cn({data:Ii})}).catch(function(pi){if(hn+1<nn.length)gn(nn,hn+1,Cn,cr);else{var Vi="Key system access denied! ";Wn.trigger(In.KEY_SYSTEM_ACCESS_COMPLETE,{error:Vi+pi.message}),cr({error:Vi+pi.message})}})}function Vn(nn,hn,Cn,cr,gr){var jr=nn[Cn];rn.debug("Requesting key system access for system string ".concat(jr)),navigator.requestMediaKeySystemAccess(jr,hn).then(function(zr){zr.selectedSystemString=jr,cr(zr)}).catch(function(zr){Cn+1<nn.length?Vn(nn,hn,Cn+1,cr,gr):gr(zr)})}function sr(nn){if(!nn||!nn.session)return Promise.resolve;var hn=nn.session;return hn.removeEventListener("keystatuseschange",nn),hn.removeEventListener("message",nn),hn.close()}function Dr(nn){for(var hn=0;hn<kt.length;hn++)if(kt[hn]===nn){kt.splice(hn,1);break}}function Vr(nn){var hn,Cn;return nn&&nn.length>0&&(nn[0]&&("string"==typeof nn[0]?hn=nn[0]:Cn=nn[0]),nn[1]&&("string"==typeof nn[1]?hn=nn[1]:Cn=nn[1])),{status:hn,keyId:Cn}}function tr(nn,hn){var Cn={session:nn,keyId:hn.keyId,initData:hn.initData,sessionId:hn.sessionId,sessionType:hn.sessionType,handleEvent:function(cr){switch(cr.type){case"keystatuseschange":Wn.trigger(In.KEY_STATUSES_CHANGED,{data:this}),cr.target.keyStatuses.forEach(function(){var jr=Vr(arguments);Wn.trigger(In.INTERNAL_KEY_STATUS_CHANGED,"expired"===jr.status?{error:new M.Z(T.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,T.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}:jr)});break;case"message":var gr=ArrayBuffer.isView(cr.message)?cr.message.buffer:cr.message;Wn.trigger(In.INTERNAL_KEY_MESSAGE,{data:new Yr(this,gr,void 0,cr.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return nn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return nn.expiration},getKeyStatuses:function(){return nn.keyStatuses},getUsable:function(){var cr=!1;return nn.keyStatuses.forEach(function(){"usable"===Vr(arguments).status&&(cr=!0)}),cr}};return nn.addEventListener("keystatuseschange",Cn),nn.addEventListener("message",Cn),nn.closed.then(function(){Dr(Cn),rn.debug("DRM: Session closed.  SessionID = "+Cn.getSessionId()),Wn.trigger(In.KEY_SESSION_CLOSED,{data:Cn.getSessionId()})}),kt.push(Cn),Cn}return un={getAllInitData:function(){for(var nn=[],hn=0;hn<kt.length;hn++)kt[hn].initData&&nn.push(kt[hn].initData);return nn},getSessions:function(){return kt},requestKeySystemAccess:function(nn){return new Promise(function(hn,Cn){gn(nn,0,hn,Cn)})},selectKeySystem:function(nn){return new Promise(function(hn,Cn){nn.mksa.createMediaKeys().then(function(cr){return Ct=nn.keySystem,xt=cr,$t?$t.setMediaKeys(xt):Promise.resolve()}).then(function(){hn(Ct)}).catch(function(){Cn({error:"Error selecting keys system ("+nn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(nn){$t!==nn&&($t&&($t.removeEventListener("encrypted",bn),$t.setMediaKeys&&$t.setMediaKeys(null)),($t=nn)&&($t.addEventListener("encrypted",bn),$t.setMediaKeys&&xt&&$t.setMediaKeys(xt)))},setServerCertificate:function(nn){if(!Ct||!xt)throw new Error("Can not set server certificate until you have selected a key system");xt.setServerCertificate(nn).then(function(){rn.info("DRM: License server certificate successfully updated."),Wn.trigger(In.SERVER_CERTIFICATE_UPDATED)}).catch(function(hn){Wn.trigger(In.SERVER_CERTIFICATE_UPDATED,{error:new M.Z(T.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,T.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+hn.name)})})},createKeySession:function(nn){if(!Ct||!xt)throw new Error("Can not create sessions until you have selected a key system");var hn=xt.createSession(nn.sessionType),Cn=tr(hn,nn);hn.generateRequest(Ct.systemString===Me.CLEARKEY_KEYSTEM_STRING&&(nn.initData||nn.protData&&nn.protData.clearkeys)?Me.INITIALIZATION_DATA_TYPE_KEYIDS:Me.INITIALIZATION_DATA_TYPE_CENC,nn.initData).then(function(){rn.debug("DRM: Session created.  SessionID = "+Cn.getSessionId()),Wn.trigger(In.KEY_SESSION_CREATED,{data:Cn})}).catch(function(gr){Dr(Cn),Wn.trigger(In.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+gr.name)})})},updateKeySession:function(nn,hn){var Cn=nn.session;zt.isClearKey(Ct)&&(hn=hn.toJWK()),Cn.update(hn).then(function(){Wn.trigger(In.KEY_SESSION_UPDATED)}).catch(function(cr){Wn.trigger(In.KEY_ERROR,{error:new M.Z(T.MEDIA_KEYERR_CODE,"Error sending update() message! "+cr.name,nn)})})},loadKeySession:function(nn){if(!Ct||!xt)throw new Error("Can not load sessions until you have selected a key system");for(var hn=nn.sessionId,Cn=0;Cn<kt.length;Cn++)if(hn===kt[Cn].sessionId)return void rn.warn("DRM: Ignoring session ID because we have already seen it!");var cr=xt.createSession(nn.sessionType),gr=tr(cr,nn);cr.load(hn).then(function(jr){jr?(rn.debug("DRM: Session loaded.  SessionID = "+gr.getSessionId()),Wn.trigger(In.KEY_SESSION_CREATED,{data:gr})):(Dr(gr),Wn.trigger(In.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+hn+")")}))}).catch(function(jr){Dr(gr),Wn.trigger(In.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+hn+")! "+jr.name)})})},removeKeySession:function(nn){nn.session.remove().then(function(){rn.debug("DRM: Session removed.  SessionID = "+nn.getSessionId()),Wn.trigger(In.KEY_SESSION_REMOVED,{data:nn.getSessionId()})},function(hn){Wn.trigger(In.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+nn.getSessionId()+"). "+hn.name})})},closeKeySession:function(nn){sr(nn).catch(function(hn){Dr(nn),Wn.trigger(In.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+nn.getSessionId()+") "+hn.name})})},stop:function(){for(var nn,hn=0;hn<kt.length;hn++)(nn=kt[hn]).getUsable()||(sr(nn),Dr(nn))},reset:function(){var nn,hn=kt.length;0!==hn?function(){for(var Cn=function(gr){Dr(gr),0===kt.length&&($t?($t.removeEventListener("encrypted",bn),$t.setMediaKeys(null).then(function(){Wn.trigger(In.TEARDOWN_COMPLETE)})):Wn.trigger(In.TEARDOWN_COMPLETE))},cr=0;cr<hn;cr++)gr=nn=kt[cr],sr(nn),Cn(gr);var gr}():Wn.trigger(In.TEARDOWN_COMPLETE)}},rn=cn.debug.getLogger(un),Ct=null,$t=null,xt=null,kt=[],zt=_n(On).getInstance(),bn={handleEvent:function(nn){if("encrypted"===nn.type&&nn.initData){var hn=ArrayBuffer.isView(nn.initData)?nn.initData.buffer:nn.initData;Wn.trigger(In.NEED_KEY,{key:new Ir(hn,nn.initDataType)})}}},un}ei[Me.PLAYREADY_KEYSTEM_STRING]=[Me.PLAYREADY_KEYSTEM_STRING,Me.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],ei[Me.WIDEVINE_KEYSTEM_STRING]=[Me.WIDEVINE_KEYSTEM_STRING],ei[Me.CLEARKEY_KEYSTEM_STRING]=[Me.CLEARKEY_KEYSTEM_STRING],gi.__dashjs_factory_name="ProtectionModel_21Jan2015";var Xi=dashjs.FactoryMaker.getClassFactory(gi);function ti(cn){var un,rn,Ct,$t,xt,kt,bn,zt,On,Wn=this.context,In=(cn=cn||{}).eventBus,ln=cn.events,Vn=cn.api;function sr(){try{for(var tr=0;tr<bn.length;tr++)Dr(bn[tr]);Ct&&Ct.removeEventListener(Vn.needkey,zt),In.trigger(ln.TEARDOWN_COMPLETE)}catch(nn){In.trigger(ln.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+nn.message})}}function Dr(tr){var nn=tr.session;nn.removeEventListener(Vn.error,tr),nn.removeEventListener(Vn.message,tr),nn.removeEventListener(Vn.ready,tr),nn.removeEventListener(Vn.close,tr);for(var hn=0;hn<bn.length;hn++)if(bn[hn]===tr){bn.splice(hn,1);break}nn[Vn.release]()}function Vr(){var tr=null,nn=function(){Ct.removeEventListener("loadedmetadata",tr),Ct[Vn.setMediaKeys](xt),In.trigger(ln.VIDEO_ELEMENT_SELECTED)};Ct.readyState>=1?nn():(tr=nn.bind(this),Ct.addEventListener("loadedmetadata",tr))}return un={getAllInitData:function(){for(var tr=[],nn=0;nn<bn.length;nn++)tr.push(bn[nn].initData);return tr},getSessions:function(){return bn},requestKeySystemAccess:function(tr){return new Promise(function(nn,hn){for(var Cn=!1,cr=0;cr<tr.length;cr++)for(var gr=tr[cr].ks.systemString,jr=tr[cr].configs,zr=null,so=null,ci=0;ci<jr.length;ci++){var pi=jr[ci].audioCapabilities,Vi=jr[ci].videoCapabilities;if(pi&&0!==pi.length){zr=[];for(var Ii=0;Ii<pi.length;Ii++)window[Vn.MediaKeys].isTypeSupported(gr,pi[Ii].contentType)&&zr.push(pi[Ii])}if(Vi&&0!==Vi.length){so=[];for(var lo=0;lo<Vi.length;lo++)window[Vn.MediaKeys].isTypeSupported(gr,Vi[lo].contentType)&&so.push(Vi[lo])}if(!(!zr&&!so||zr&&0===zr.length||so&&0===so.length)){Cn=!0;var Qa=new k(zr,so),Ja=On.getKeySystemBySystemString(gr),ta=new Li(Ja,Qa);In.trigger(ln.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),nn({data:ta});break}}if(!Cn){var To="Key system access denied! -- No valid audio/video content configurations detected!";In.trigger(ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:To}),hn({error:To})}})},selectKeySystem:function(tr){return new Promise(function(nn,hn){try{xt=tr.mediaKeys=new window[Vn.MediaKeys](tr.keySystem.systemString),$t=tr.keySystem,kt=tr,Ct&&Vr(),nn($t)}catch{hn({error:"Error selecting keys system ("+$t.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(tr){Ct!==tr&&(Ct&&Ct.removeEventListener(Vn.needkey,zt),(Ct=tr)&&(Ct.addEventListener(Vn.needkey,zt),xt&&Vr()))},createKeySession:function(tr){if(!$t||!xt||!kt)throw new Error("Can not create sessions until you have selected a key system");var nn=null;if(kt.ksConfiguration.videoCapabilities&&kt.ksConfiguration.videoCapabilities.length>0&&(nn=kt.ksConfiguration.videoCapabilities[0]),null===nn&&kt.ksConfiguration.audioCapabilities&&kt.ksConfiguration.audioCapabilities.length>0&&(nn=kt.ksConfiguration.audioCapabilities[0]),null===nn)throw new Error("Can not create sessions for unknown content types.");var jr,Cn=xt.createSession(nn.contentType,new Uint8Array(tr.initData),tr.cdmData?new Uint8Array(tr.cdmData):null),cr={session:Cn,keyId:(jr=tr).keyId,initData:jr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(zr){switch(zr.type){case Vn.error:In.trigger(ln.KEY_ERROR,{error:new M.Z(T.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Vn.message:var so=ArrayBuffer.isView(zr.message)?zr.message.buffer:zr.message;In.trigger(ln.INTERNAL_KEY_MESSAGE,{data:new Yr(this,so,zr.destinationURL)});break;case Vn.ready:rn.debug("DRM: Key added."),In.trigger(ln.KEY_ADDED);break;case Vn.close:rn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),In.trigger(ln.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}};Cn.addEventListener(Vn.error,cr),Cn.addEventListener(Vn.message,cr),Cn.addEventListener(Vn.ready,cr),Cn.addEventListener(Vn.close,cr),bn.push(cr),rn.debug("DRM: Session created.  SessionID = "+cr.getSessionId()),In.trigger(ln.KEY_SESSION_CREATED,{data:cr})},updateKeySession:function(tr,nn){var hn=tr.session;On.isClearKey($t)?hn.update(new Uint8Array(nn.toJWK())):hn.update(new Uint8Array(nn)),In.trigger(ln.KEY_SESSION_UPDATED)},closeKeySession:Dr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:sr,reset:sr},rn=cn.debug.getLogger(un),Ct=null,$t=null,xt=null,kt=null,bn=[],On=_n(Wn).getInstance(),zt={handleEvent:function(tr){if(tr.type===Vn.needkey&&tr.initData){var nn=ArrayBuffer.isView(tr.initData)?tr.initData.buffer:tr.initData;In.trigger(ln.NEED_KEY,{key:new Ir(nn,"cenc")})}}},un}ti.__dashjs_factory_name="ProtectionModel_3Feb2014";var Mo=dashjs.FactoryMaker.getClassFactory(ti);function Bi(cn){var un,rn,Ct,$t,xt,kt,bn,zt,On,Wn=this.context,In=(cn=cn||{}).eventBus,ln=cn.events,Vn=cn.api,sr=cn.errHandler;function Dr(){Ct&&nn();for(var hn=0;hn<bn.length;hn++)Vr(bn[hn]);In.trigger(ln.TEARDOWN_COMPLETE)}function Vr(hn){try{Ct[Vn.cancelKeyRequest]($t.systemString,hn.sessionId)}catch(Cn){In.trigger(ln.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+hn.sessionId+") "+Cn.message})}}function tr(hn,Cn){if(Cn&&hn){for(var cr=hn.length,gr=0;gr<cr;gr++)if(hn[gr].sessionId==Cn)return hn[gr];return null}return null}function nn(){Ct.removeEventListener(Vn.keyerror,On),Ct.removeEventListener(Vn.needkey,On),Ct.removeEventListener(Vn.keymessage,On),Ct.removeEventListener(Vn.keyadded,On)}return rn=cn.debug.getLogger(un={getAllInitData:function(){for(var hn=[],Cn=0;Cn<kt.length;Cn++)hn.push(kt[Cn].initData);for(var cr=0;cr<bn.length;cr++)hn.push(bn[cr].initData);return hn},getSessions:function(){return bn.concat(kt)},requestKeySystemAccess:function(hn){return new Promise(function(Cn,cr){var gr=Ct;gr||(gr=document.createElement("video"));for(var jr=!1,zr=0;zr<hn.length;zr++)for(var so=hn[zr].ks.systemString,ci=hn[zr].configs,pi=null,Vi=0;Vi<ci.length;Vi++){var Ii=ci[Vi].videoCapabilities;if(Ii&&0!==Ii.length){pi=[];for(var lo=0;lo<Ii.length;lo++)""!==gr.canPlayType(Ii[lo].contentType,so)&&pi.push(Ii[lo])}if(pi&&(!pi||0!==pi.length)){jr=!0;var Qa=new k(null,pi),Ja=xt.getKeySystemBySystemString(so),ta=new Li(Ja,Qa);In.trigger(ln.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),Cn({data:ta});break}}if(!jr){var To="Key system access denied! -- No valid audio/video content configurations detected!";In.trigger(ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:To}),cr({error:To})}})},selectKeySystem:function(hn){return $t=hn.keySystem,Promise.resolve($t)},setMediaElement:function(hn){if(Ct!==hn){if(Ct){nn();for(var Cn=0;Cn<bn.length;Cn++)Vr(bn[Cn]);bn=[]}(Ct=hn)&&(Ct.addEventListener(Vn.keyerror,On),Ct.addEventListener(Vn.needkey,On),Ct.addEventListener(Vn.keymessage,On),Ct.addEventListener(Vn.keyadded,On),In.trigger(ln.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(hn){if(!$t)throw new Error("Can not create sessions until you have selected a key system");if(zt||0===bn.length){var Cn={sessionId:null,keyId:hn.keyId,initData:hn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return kt.push(Cn),Ct[Vn.generateKeyRequest]($t.systemString,new Uint8Array(hn.initData)),Cn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(hn,Cn){var cr=hn.sessionId;if(xt.isClearKey($t))for(var gr=0;gr<Cn.keyPairs.length;gr++)Ct[Vn.addKey]($t.systemString,Cn.keyPairs[gr].key,Cn.keyPairs[gr].keyID,cr);else Ct[Vn.addKey]($t.systemString,new Uint8Array(Cn),new Uint8Array(hn.initData),cr);In.trigger(ln.KEY_SESSION_UPDATED)},closeKeySession:Vr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Dr,reset:Dr}),Ct=null,$t=null,kt=[],bn=[],xt=_n(Wn).getInstance(),On={handleEvent:function(hn){var Cn=null;switch(hn.type){case Vn.needkey:var cr=ArrayBuffer.isView(hn.initData)?hn.initData.buffer:hn.initData;In.trigger(ln.NEED_KEY,{key:new Ir(cr,"cenc")});break;case Vn.keyerror:if((Cn=tr(bn,hn.sessionId))||(Cn=tr(kt,hn.sessionId)),Cn){var gr=T.MEDIA_KEYERR_CODE,jr="";switch(hn.errorCode.code){case 1:gr=T.MEDIA_KEYERR_UNKNOWN_CODE,jr+="MEDIA_KEYERR_UNKNOWN - "+T.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:gr=T.MEDIA_KEYERR_CLIENT_CODE,jr+="MEDIA_KEYERR_CLIENT - "+T.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:gr=T.MEDIA_KEYERR_SERVICE_CODE,jr+="MEDIA_KEYERR_SERVICE - "+T.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:gr=T.MEDIA_KEYERR_OUTPUT_CODE,jr+="MEDIA_KEYERR_OUTPUT - "+T.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:gr=T.MEDIA_KEYERR_HARDWARECHANGE_CODE,jr+="MEDIA_KEYERR_HARDWARECHANGE - "+T.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:gr=T.MEDIA_KEYERR_DOMAIN_CODE,jr+="MEDIA_KEYERR_DOMAIN - "+T.MEDIA_KEYERR_DOMAIN_MESSAGE}In.trigger(ln.KEY_ERROR,{error:new M.Z(gr,jr+="  System Code = "+hn.systemCode,Cn)})}else rn.error("No session token found for key error");break;case Vn.keyadded:(Cn=tr(bn,hn.sessionId))||(Cn=tr(kt,hn.sessionId)),Cn?(rn.debug("DRM: Key added."),In.trigger(ln.KEY_ADDED,{data:Cn})):rn.debug("No session token found for key added");break;case Vn.keymessage:if((zt=null!=hn.sessionId)?!(Cn=tr(bn,hn.sessionId))&&kt.length>0&&(Cn=kt.shift(),bn.push(Cn),Cn.sessionId=hn.sessionId,In.trigger(ln.KEY_SESSION_CREATED,{data:Cn})):kt.length>0&&(Cn=kt.shift(),bn.push(Cn),0!==kt.length&&sr.error(new M.Z(T.MEDIA_KEY_MESSAGE_ERROR_CODE,T.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Cn){var zr=ArrayBuffer.isView(hn.message)?hn.message.buffer:hn.message;Cn.keyMessage=zr,In.trigger(ln.INTERNAL_KEY_MESSAGE,{data:new Yr(Cn,zr,hn.defaultURL)})}else rn.warn("No session token found for key message")}}},un}Bi.__dashjs_factory_name="ProtectionModel_01b";var Eo=dashjs.FactoryMaker.getClassFactory(Bi),Zo=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],_o=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function ea(){var cn,un=this.context;function rn(Ct,$t){for(var xt=0;xt<$t.length;xt++){var kt=$t[xt];if("function"==typeof Ct[kt[Object.keys(kt)[0]]])return kt}return null}return cn={createProtectionSystem:function(Ct){var $t=null,xt=_n(un).getInstance();xt.setConfig({debug:Ct.debug,BASE64:Ct.BASE64,settings:Ct.settings}),xt.initialize();var bn,zt,On,Wn,In,ln,kt=(On=(zt=(bn=Ct).debug).getLogger(cn),Wn=bn.eventBus,In=bn.errHandler,(ln=bn.videoModel?bn.videoModel.getElement():null)&&void 0===ln.onencrypted||ln&&void 0===ln.mediaKeys?rn(ln,_o)?(On.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Mo(un).create({debug:zt,eventBus:Wn,events:bn.events,api:rn(ln,_o)})):rn(ln,Zo)?(On.info("EME detected on this user agent! (ProtectionModel_01b)"),Eo(un).create({debug:zt,eventBus:Wn,errHandler:In,events:bn.events,api:rn(ln,Zo)})):(On.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(On.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Xi(un).create({debug:zt,eventBus:Wn,events:bn.events})));return!$t&&kt&&($t=xe(un).create({protectionModel:kt,protectionKeyController:xt,eventBus:Ct.eventBus,debug:Ct.debug,events:Ct.events,BASE64:Ct.BASE64,constants:Ct.constants,cmcdModel:Ct.cmcdModel,customParametersModel:Ct.customParametersModel,settings:Ct.settings}),Ct.capabilities.setEncryptedMediaSupported(!0)),$t}}}ea.__dashjs_factory_name="Protection";var ha=dashjs.FactoryMaker.getClassFactory(ea);ha.events=Xn,ha.errors=T,dashjs.FactoryMaker.updateClassFactory(ea.__dashjs_factory_name,ha);var Io=ha},2068:function(Ut,$e,ne){"use strict";var De=ne(5448),H={DEFAULT:.5,STRONG:1,WEAK:0};function _(k,V,w){var T,M;return M=H.DEFAULT,(T=w)!==H.DEFAULT&&T!==H.STRONG&&T!==H.WEAK||(M=T),{quality:void 0===k?-1:k,reason:void 0===V?null:V,priority:M}}_.__dashjs_factory_name="SwitchRequest";var E=De.Z.getClassFactory(_);E.NO_CHANGE=-1,E.PRIORITY=H,De.Z.updateClassFactory(_.__dashjs_factory_name,E),$e.Z=E},1767:function(Ut,$e,ne){"use strict";var De=ne(5628),H=ne(6535),_=ne(7423),E=ne(895),k=ne(6070),V=ne(3112),w=ne(1914),F=ne(5435),G=ne(5448),T=ne(2068),M=ne(3393),O="qualitySwitchRules",te="abandonFragmentRules";function ce(se){var Ne,$,be=this.context,xe=(se=se||{}).mediaPlayerModel,x=se.customParametersModel,_e=se.dashMetrics,he=se.settings;function Je(ot){return ot.filter(function(yt){return yt.quality>T.Z.NO_CHANGE})}function Me(ot){var yt,Dt,Qe,Le,Lt,Vt={},ze=null;if(0!==ot.length){for(Vt[T.Z.PRIORITY.STRONG]={quality:T.Z.NO_CHANGE,reason:null},Vt[T.Z.PRIORITY.WEAK]={quality:T.Z.NO_CHANGE,reason:null},Vt[T.Z.PRIORITY.DEFAULT]={quality:T.Z.NO_CHANGE,reason:null},yt=0,Dt=ot.length;yt<Dt;yt+=1)(Qe=ot[yt]).quality!==T.Z.NO_CHANGE&&(Vt[Qe.priority].quality===T.Z.NO_CHANGE||Vt[Qe.priority].quality>Qe.quality)&&(Vt[Qe.priority].quality=Qe.quality,Vt[Qe.priority].reason=Qe.reason||null);return Vt[T.Z.PRIORITY.WEAK].quality!==T.Z.NO_CHANGE&&(ze=Vt[T.Z.PRIORITY.WEAK]),Vt[T.Z.PRIORITY.DEFAULT].quality!==T.Z.NO_CHANGE&&(ze=Vt[T.Z.PRIORITY.DEFAULT]),Vt[T.Z.PRIORITY.STRONG].quality!==T.Z.NO_CHANGE&&(ze=Vt[T.Z.PRIORITY.STRONG]),ze&&(Le=ze.quality,Lt=ze.reason),(0,T.Z)(be).create(Le,Lt)}}return{initialize:function(){Ne=[],$=[],he.get().streaming.abr.useDefaultABRRules&&(he.get().streaming.abr.ABRStrategy===M.Z.ABR_STRATEGY_L2A?Ne.push((0,w.Z)(be).create({dashMetrics:_e,settings:he})):he.get().streaming.abr.ABRStrategy===M.Z.ABR_STRATEGY_LoLP?Ne.push((0,F.Z)(be).create({dashMetrics:_e})):(Ne.push((0,V.Z)(be).create({dashMetrics:_e,mediaPlayerModel:xe,settings:he})),Ne.push((0,De.Z)(be).create({dashMetrics:_e})),he.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&Ne.push((0,H.Z)(be).create({dashMetrics:_e,settings:he})),he.get().streaming.abr.additionalAbrRules.switchHistoryRule&&Ne.push((0,k.Z)(be).create()),he.get().streaming.abr.additionalAbrRules.droppedFramesRule&&Ne.push((0,E.Z)(be).create()),he.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&$.push((0,_.Z)(be).create({dashMetrics:_e,mediaPlayerModel:xe,settings:he})))),x.getAbrCustomRules().forEach(function(ot){ot.type===O&&Ne.push(ot.rule(be).create()),ot.type===te&&$.push(ot.rule(be).create())})},reset:function(){[Ne,$].forEach(function(ot){ot&&ot.length&&ot.forEach(function(yt){return yt.reset&&yt.reset()})}),Ne=[],$=[]},getMaxQuality:function(ot){return Me(Je(Ne.map(function(yt){return yt.getMaxIndex(ot)})))||(0,T.Z)(be).create()},getMinSwitchRequest:Me,shouldAbandonFragment:function(ot,yt){var Dt=Me(Je($.map(function(Qe){return Qe.shouldAbandon(ot,yt)})));return Dt&&(Dt.reason.forceAbandon=!0),Dt||(0,T.Z)(be).create()},getQualitySwitchRules:function(){return Ne}}}ce.__dashjs_factory_name="ABRRulesCollection";var ue=G.Z.getClassFactory(ce);ue.QUALITY_SWITCH_RULES=O,ue.ABANDON_FRAGMENT_RULES=te,G.Z.updateSingletonFactory(ce.__dashjs_factory_name,ue),$e.Z=ue},7423:function(Ut,$e,ne){"use strict";var De=ne(2068),H=ne(5448),_=ne(6398);function E(k){var V,w,F,G,T,M=this.context,O=(k=k||{}).mediaPlayerModel,te=k.dashMetrics,ce=k.settings;function ue(){F={},G={},T=[]}return V={shouldAbandon:function(se){var Ne=(0,De.Z)(M).create(De.Z.NO_CHANGE,{name:E.__dashjs_factory_name});if(!(se&&se.hasOwnProperty("getMediaInfo")&&se.hasOwnProperty("getMediaType")&&se.hasOwnProperty("getCurrentRequest")&&se.hasOwnProperty("getRepresentationInfo")&&se.hasOwnProperty("getAbrController")))return Ne;var $,be,mt,fn,xe=se.getMediaInfo(),x=se.getMediaType(),_e=se.getStreamInfo(),he=_e?_e.id:null,Je=se.getCurrentRequest();if(!isNaN(Je.index)){be=Je.index,F[$=x]=F[$]||{},F[$][be]=F[$][be]||{};var Me=O.getStableBufferTime();if(te.getCurrentBufferLevel(x)>Me)return Ne;var ot=F[x][Je.index];if(null===ot||null===Je.firstByteDate||G.hasOwnProperty(ot.id))return Ne;if(void 0===ot.firstByteTime&&(T[x]=[],ot.firstByteTime=Je.firstByteDate.getTime(),ot.segmentDuration=Je.duration,ot.bytesTotal=Je.bytesTotal,ot.id=Je.index),ot.bytesLoaded=Je.bytesLoaded,ot.elapsedTime=(new Date).getTime()-ot.firstByteTime,ot.bytesLoaded>0&&ot.elapsedTime>0&&(mt=x,fn=Math.round(8*ot.bytesLoaded/ot.elapsedTime),T[mt]=T[mt]||[],T[mt].push(fn)),T[x].length>=ce.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&ot.elapsedTime>ce.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&ot.bytesLoaded<ot.bytesTotal){var yt=T[x].reduce(function(mt,fn){return mt+fn},0);if(ot.measuredBandwidthInKbps=Math.round(yt/T[x].length),ot.estimatedTimeOfDownload=+(8*ot.bytesTotal/ot.measuredBandwidthInKbps/1e3).toFixed(2),ot.estimatedTimeOfDownload<ot.segmentDuration*ce.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||0===se.getRepresentationInfo().quality)return Ne;if(!G.hasOwnProperty(ot.id)){var Dt=se.getAbrController(),Qe=ot.bytesTotal-ot.bytesLoaded,Le=Dt.getBitrateList(xe),Lt=Dt.getQualityForBitrate(xe,ot.measuredBandwidthInKbps*ce.get().streaming.abr.bandwidthSafetyFactor,he),Vt=Dt.getMinAllowedIndexFor(x,he),ze=void 0!==Vt?Math.max(Vt,Lt):Lt;Qe>ot.bytesTotal*Le[ze].bitrate/Le[Dt.getQualityFor(x,he)].bitrate&&(Ne.quality=ze,Ne.reason.throughput=ot.measuredBandwidthInKbps,Ne.reason.fragmentID=ot.id,Ne.reason.rule=this.getClassName(),G[ot.id]=ot,w.debug("["+x+"] frag id",ot.id," is asking to abandon and switch to quality to ",ze," measured bandwidth was",ot.measuredBandwidthInKbps),delete F[x][ot.id])}}else ot.bytesLoaded===ot.bytesTotal&&delete F[x][ot.id]}return Ne},reset:ue},w=(0,_.Z)(M).getInstance().getLogger(V),ue(),V}E.__dashjs_factory_name="AbandonRequestsRule",$e.Z=H.Z.getClassFactory(E)},3112:function(Ut,$e,ne){"use strict";var De=ne(3860),H=ne(2068),_=ne(5448),E=ne(7855),k=ne(5595),V=ne(8512),w=ne(6398),F=ne(8825),G=ne(3393),T=10;function M(O){var te,ce,ue,se=this.context,Ne=(O=O||{}).dashMetrics,$=O.mediaPlayerModel,be=(0,k.Z)(se).getInstance();function xe(ze,mt,fn){var Yt=fn.reduce(function(Ze,qe,It){return qe>fn[Ze]?It:Ze},0);if(0===Yt)return null;var Tt=Math.max(ze,T+2*mt.length),Rt=(fn[Yt]-1)/(Tt/T-1);return{gp:Rt,Vp:T/Rt}}function x(ze){ze.placeholderBuffer=0,ze.mostAdvancedSegmentStart=NaN,ze.lastSegmentWasReplacement=!1,ze.lastSegmentStart=NaN,ze.lastSegmentDurationS=NaN,ze.lastSegmentRequestTimeMs=NaN,ze.lastSegmentFinishTimeMs=NaN}function _e(ze,mt){var fn=$.getStableBufferTime();if(ze.stableBufferTime!==fn){var Yt=xe(fn,ze.bitrates,ze.utilities);if(Yt.Vp!==ze.Vp||Yt.gp!==ze.gp){var Tt=Ne.getCurrentBufferLevel(mt),Rt=Tt+ze.placeholderBuffer;Rt-=T,Rt*=Yt.Vp/ze.Vp,Rt+=T,ze.stableBufferTime=fn,ze.Vp=Yt.Vp,ze.gp=Yt.gp,ze.placeholderBuffer=Math.max(0,Rt-Tt)}}}function he(ze,mt){return ze.Vp*(ze.utilities[mt]+ze.gp)}function Je(ze,mt){for(var fn=ze.bitrates[mt],Yt=ze.utilities[mt],Tt=0,Rt=mt-1;Rt>=0;--Rt)if(ze.utilities[Rt]<ze.utilities[mt]){var Ze=ze.bitrates[Rt];Tt=Math.max(Tt,ze.Vp*(ze.gp+(fn*ze.utilities[Rt]-Ze*Yt)/(fn-Ze)))}return Tt}function Me(ze){var mt=ze.mediaType===G.Z.AUDIO?[G.Z.AUDIO]:ue;for(var fn in mt)ue.hasOwnProperty(fn)&&2===ue[fn].state&&(ue[fn].placeholderBuffer=0)}function ot(){for(var ze in ue)if(ue.hasOwnProperty(ze)){var mt=ue[ze];0!==mt.state&&(mt.state=1,x(mt))}}function yt(ze){if(ze&&ze.chunk&&ze.chunk.mediaInfo){var mt=ue[ze.chunk.mediaInfo.type];if(mt&&0!==mt.state){var fn=ze.chunk.start;isNaN(mt.mostAdvancedSegmentStart)||fn>mt.mostAdvancedSegmentStart?(mt.mostAdvancedSegmentStart=fn,mt.lastSegmentWasReplacement=!1):mt.lastSegmentWasReplacement=!0,mt.lastSegmentStart=fn,mt.lastSegmentDurationS=ze.chunk.duration,mt.lastQuality=ze.chunk.quality,Qe(mt,ze.chunk.mediaInfo.type)}}}function Dt(ze){if(ze&&ze.metric===De.Z.HTTP_REQUEST&&ze.value&&ze.value.type===E.w.MEDIA_SEGMENT_TYPE&&ze.value.trace&&ze.value.trace.length){var mt=ue[ze.mediaType];mt&&0!==mt.state&&(mt.lastSegmentRequestTimeMs=ze.value.trequest.getTime(),mt.lastSegmentFinishTimeMs=ze.value._tfinish.getTime(),Qe(mt,ze.mediaType))}}function Qe(ze,mt){if(!isNaN(ze.lastSegmentStart)&&!isNaN(ze.lastSegmentRequestTimeMs)&&!isNaN(ze.placeholderBuffer)){if(ze.placeholderBuffer*=.99,!isNaN(ze.lastSegmentFinishTimeMs)){var fn=Ne.getCurrentBufferLevel(mt)+.001*(ze.lastSegmentFinishTimeMs-ze.lastSegmentRequestTimeMs),Yt=he(ze,ze.lastQuality),Tt=Math.max(0,Yt-fn);ze.placeholderBuffer=Math.min(Tt,ze.placeholderBuffer)}ze.lastSegmentWasReplacement&&!isNaN(ze.lastSegmentDurationS)&&(ze.placeholderBuffer+=ze.lastSegmentDurationS),ze.lastSegmentStart=NaN,ze.lastSegmentRequestTimeMs=NaN}}function Le(ze){if(ze){var mt=ue[ze.mediaType];mt&&0!==mt.state&&(mt.abrQuality=ze.newQuality)}}function Lt(ze){if(ze){var mt=ue[ze.mediaType];if(mt&&0!==mt.state){var fn,Yt=Ne.getCurrentBufferLevel(ze.mediaType);fn=mt.abrQuality>0?Je(mt,mt.abrQuality):T;var Tt=Math.max(0,fn-Yt);mt.placeholderBuffer=Math.min(mt.placeholderBuffer,Tt)}}}function Vt(){ue={}}return te={getMaxIndex:function(ze){var mt=(0,H.Z)(se).create();if(!(ze&&ze.hasOwnProperty("getMediaInfo")&&ze.hasOwnProperty("getMediaType")&&ze.hasOwnProperty("getScheduleController")&&ze.hasOwnProperty("getStreamInfo")&&ze.hasOwnProperty("getAbrController")&&ze.hasOwnProperty("useBufferOccupancyABR")))return mt;var fn=ze.getMediaInfo(),Yt=ze.getMediaType(),Tt=ze.getScheduleController(),Rt=ze.getStreamInfo(),Ze=ze.getAbrController(),qe=Ze.getThroughputHistory(),It=Rt?Rt.id:null,N=Rt&&Rt.manifestInfo&&Rt.manifestInfo.isDynamic,I=ze.useBufferOccupancyABR();if(mt.reason=mt.reason||{},!I)return mt;Tt.setTimeToLoadDelay(0);var rt,Et,Ot,Z=(Et=(rt=ze).getMediaType(),(Ot=ue[Et])?0!==Ot.state&&_e(Ot,Et):(Ot=function(_n){var Zt={},xn=_n.getMediaInfo().bitrateList.map(function(Ir){return Ir.bandwidth}),Rn=xn.map(function(Yr){return Math.log(Yr)});Rn=Rn.map(function(Ir){return Ir-Rn[0]+1});var Mn=$.getStableBufferTime(),Xn=xe(Mn,xn,Rn);return Xn?(Zt.state=1,Zt.bitrates=xn,Zt.utilities=Rn,Zt.stableBufferTime=Mn,Zt.Vp=Xn.Vp,Zt.gp=Xn.gp,Zt.lastQuality=0,x(Zt)):Zt.state=0,Zt}(rt),ue[Et]=Ot),Ot);if(0===Z.state)return mt;var q,Ce=Ne.getCurrentBufferLevel(Yt),Ee=qe.getAverageThroughput(Yt,N),nt=qe.getSafeAverageThroughput(Yt,N),At=qe.getAverageLatency(Yt);if(mt.reason.state=Z.state,mt.reason.throughput=Ee,mt.reason.latency=At,isNaN(Ee))return mt;switch(Z.state){case 1:q=Ze.getQualityForBitrate(fn,nt,It,At),mt.quality=q,mt.reason.throughput=nt,Z.placeholderBuffer=Math.max(0,Je(Z,q)-Ce),Z.lastQuality=q,!isNaN(Z.lastSegmentDurationS)&&Ce>=Z.lastSegmentDurationS&&(Z.state=2);break;case 2:(function(rt,Et){var Ot=Date.now();isNaN(rt.lastSegmentFinishTimeMs)?isNaN(rt.lastCallTimeMs)||(rt.placeholderBuffer+=Math.max(0,.001*(Ot-rt.lastCallTimeMs))):rt.placeholderBuffer+=Math.max(0,.001*(Ot-rt.lastSegmentFinishTimeMs)),rt.lastCallTimeMs=Ot,rt.lastSegmentStart=NaN,rt.lastSegmentRequestTimeMs=NaN,rt.lastSegmentFinishTimeMs=NaN,_e(rt,Et)})(Z,Yt),q=function(rt,Et){for(var Ot=rt.bitrates.length,_n=NaN,Zt=NaN,xn=0;xn<Ot;++xn){var Rn=(rt.Vp*(rt.utilities[xn]+rt.gp)-Et)/rt.bitrates[xn];(isNaN(Zt)||Rn>=Zt)&&(Zt=Rn,_n=xn)}return _n}(Z,Ce+Z.placeholderBuffer);var it=Ze.getQualityForBitrate(fn,nt,It,At);q>Z.lastQuality&&q>it&&(q=Math.max(it,Z.lastQuality));var et=Math.max(0,Ce+Z.placeholderBuffer-he(Z,q));et<=Z.placeholderBuffer?(Z.placeholderBuffer-=et,et=0):(et-=Z.placeholderBuffer,Z.placeholderBuffer=0,q<Ze.getMaxAllowedIndexFor(Yt,It)?Tt.setTimeToLoadDelay(1e3*et):et=0),mt.quality=q,mt.reason.throughput=Ee,mt.reason.latency=At,mt.reason.bufferLevel=Ce,mt.reason.placeholderBuffer=Z.placeholderBuffer,mt.reason.delay=et,Z.lastQuality=q;break;default:ce.debug("BOLA ABR rule invoked in bad state."),mt.quality=Ze.getQualityForBitrate(fn,nt,It,At),mt.reason.state=Z.state,mt.reason.throughput=nt,mt.reason.latency=At,Z.state=1,x(Z)}return mt},reset:function(){Vt(),be.off(F.Z.BUFFER_EMPTY,Me,te),be.off(F.Z.PLAYBACK_SEEKING,ot,te),be.off(F.Z.METRIC_ADDED,Dt,te),be.off(F.Z.QUALITY_CHANGE_REQUESTED,Le,te),be.off(F.Z.FRAGMENT_LOADING_ABANDONED,Lt,te),be.off(V.Z.MEDIA_FRAGMENT_LOADED,yt,te)}},ce=(0,w.Z)(se).getInstance().getLogger(te),Vt(),be.on(F.Z.BUFFER_EMPTY,Me,te),be.on(F.Z.PLAYBACK_SEEKING,ot,te),be.on(F.Z.METRIC_ADDED,Dt,te),be.on(F.Z.QUALITY_CHANGE_REQUESTED,Le,te),be.on(F.Z.FRAGMENT_LOADING_ABANDONED,Lt,te),be.on(V.Z.MEDIA_FRAGMENT_LOADED,yt,te),te}M.__dashjs_factory_name="BolaRule",$e.Z=_.Z.getClassFactory(M)},895:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(2068),_=ne(6398);function E(){var k,V,w=this.context;return k={getMaxIndex:function(F){var G=(0,H.Z)(w).create();if(!F||!F.hasOwnProperty("getDroppedFramesHistory"))return G;var T=F.getDroppedFramesHistory(),M=F.getStreamInfo().id;if(T){var O=T.getFrameHistory(M);if(!O||0===O.length)return G;for(var te=0,ce=0,ue=H.Z.NO_CHANGE,se=1;se<O.length;se++)if(O[se]&&(te=O[se].droppedVideoFrames,(ce=O[se].totalVideoFrames)>375&&te/ce>.15)){V.debug("index: "+(ue=se-1)+" Dropped Frames: "+te+" Total Frames: "+ce);break}return(0,H.Z)(w).create(ue,{droppedFrames:te})}return G}},V=(0,_.Z)(w).getInstance().getLogger(k),k}E.__dashjs_factory_name="DroppedFramesRule",$e.Z=De.Z.getClassFactory(E)},6535:function(Ut,$e,ne){"use strict";var De=ne(5595),H=ne(8512),_=ne(5448),E=ne(6398),k=ne(2068),V=ne(3393),w=ne(3860),F=ne(8825);function G(T){T=T||{};var M,O,te,ce=this.context,ue=(0,De.Z)(ce).getInstance(),se=T.dashMetrics;function Ne(){(te={})[V.Z.VIDEO]={ignoreCount:2},te[V.Z.AUDIO]={ignoreCount:2}}function $(){Ne()}function be(xe){isNaN(xe.startTime)||xe.mediaType!==V.Z.AUDIO&&xe.mediaType!==V.Z.VIDEO||te[xe.mediaType].ignoreCount>0&&te[xe.mediaType].ignoreCount--}return M={getMaxIndex:function(xe){var x=(0,k.Z)(ce).create();if(!xe||!xe.hasOwnProperty("getMediaType"))return x;!function(){if(!se||!se.hasOwnProperty("getCurrentBufferLevel")||!se.hasOwnProperty("getCurrentBufferState"))throw new Error(V.Z.MISSING_CONFIG_ERROR)}();var _e=xe.getMediaType(),he=se.getCurrentBufferState(_e),Je=xe.getRepresentationInfo().fragmentDuration,Me=xe.getStreamInfo(),ot=Me?Me.id:null,yt=xe.getScheduleController(),Dt=Me&&Me.manifestInfo&&Me.manifestInfo.isDynamic;if(!yt.getPlaybackController().getLowLatencyModeEnabled()&&te[_e].ignoreCount>0||!Je)return x;if(he&&he.state===w.Z.BUFFER_EMPTY)O.debug("["+_e+"] Switch to index 0; buffer is empty."),x.quality=0,x.reason="InsufficientBufferRule: Buffer is empty";else{var Qe=xe.getMediaInfo(),Le=xe.getAbrController(),Lt=Le.getThroughputHistory(),Vt=se.getCurrentBufferLevel(_e),ze=Lt.getAverageThroughput(_e,Dt),mt=Lt.getAverageLatency(_e);x.quality=Le.getQualityForBitrate(Qe,ze*(Vt/Je)*.5,ot,mt),x.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return x},reset:function(){Ne(),ue.off(F.Z.PLAYBACK_SEEKING,$,M),ue.off(H.Z.BYTES_APPENDED_END_FRAGMENT,be,M)}},O=(0,E.Z)(ce).getInstance().getLogger(M),Ne(),ue.on(F.Z.PLAYBACK_SEEKING,$,M),ue.on(H.Z.BYTES_APPENDED_END_FRAGMENT,be,M),M}G.__dashjs_factory_name="InsufficientBufferRule",$e.Z=_.Z.getClassFactory(G)},1914:function(Ut,$e,ne){"use strict";var De=ne(3860),H=ne(2068),_=ne(5448),E=ne(7855),k=ne(5595),V=ne(8512),w=ne(6398),F=ne(3393);function G(T){var M,O,te,ce,ue=this.context,se=(T=T||{}).dashMetrics,Ne=(0,k.Z)(ue).getInstance();function $(ot){ot.placeholderBuffer=0,ot.mostAdvancedSegmentStart=NaN,ot.lastSegmentWasReplacement=!1,ot.lastSegmentStart=NaN,ot.lastSegmentDurationS=NaN,ot.lastSegmentRequestTimeMs=NaN,ot.lastSegmentFinishTimeMs=NaN,ot.lastSegmentUrl=""}function be(){for(var ot in O)if(O.hasOwnProperty(ot)){var yt=O[ot];0!==yt.state&&(yt.state=1,$(yt))}}function xe(ot){if(ot&&ot.chunk&&ot.chunk.mediaInfo){var yt=O[ot.chunk.mediaInfo.type],Dt=te[ot.chunk.mediaInfo.type];if(yt&&0!==yt.state){var Qe=ot.chunk.start;isNaN(yt.mostAdvancedSegmentStart)||Qe>yt.mostAdvancedSegmentStart?(yt.mostAdvancedSegmentStart=Qe,yt.lastSegmentWasReplacement=!1):yt.lastSegmentWasReplacement=!0,yt.lastSegmentStart=Qe,yt.lastSegmentDurationS=ot.chunk.duration,yt.lastQuality=ot.chunk.quality,_e(yt,Dt)}}}function x(ot){if(ot&&ot.metric===De.Z.HTTP_REQUEST&&ot.value&&ot.value.type===E.w.MEDIA_SEGMENT_TYPE&&ot.value.trace&&ot.value.trace.length){var yt=O[ot.mediaType],Dt=te[ot.mediaType];yt&&0!==yt.state&&(yt.lastSegmentRequestTimeMs=ot.value.trequest.getTime(),yt.lastSegmentFinishTimeMs=ot.value._tfinish.getTime(),_e(yt,Dt))}}function _e(ot,yt){isNaN(ot.lastSegmentStart)||isNaN(ot.lastSegmentRequestTimeMs)||(yt.segment_request_start_s=.001*ot.lastSegmentRequestTimeMs,yt.segment_download_finish_s=.001*ot.lastSegmentFinishTimeMs,ot.lastSegmentStart=NaN,ot.lastSegmentRequestTimeMs=NaN)}function he(ot){if(ot&&ot.mediaType){var yt=O[ot.mediaType];yt&&0!==yt.state&&(yt.abrQuality=ot.newQuality)}}function Je(ot,yt){if(ot.length!==yt.length)return-1;for(var Dt=0,Qe=0;Qe<ot.length;Qe++)Dt+=ot[Qe]*yt[Qe];return Dt}function Me(){O={},te={}}return M={getMaxIndex:function(ot){var yt,Dt=(0,H.Z)(ue).create(),Qe=Math.pow(4,.99),Le=Math.max(Math.pow(4,1),Qe*Math.sqrt(4)),Lt=ot.getMediaInfo(),Vt=ot.getMediaType(),ze=Lt.bitrateList.map(function(Xn){return Xn.bandwidth}),mt=ze.length,fn=ot.getScheduleController(),Yt=ot.getStreamInfo(),Tt=ot.getAbrController(),Rt=Tt.getThroughputHistory(),Ze=Yt&&Yt.manifestInfo&&Yt.manifestInfo.isDynamic,qe=ot.useL2AABR(),It=se.getCurrentBufferLevel(Vt,!0),N=Rt.getSafeAverageThroughput(Vt,Ze),I=Rt.getAverageThroughput(Vt,Ze),Z=Rt.getAverageLatency(Vt),q=ot.getVideoModel().getPlaybackRate();if(!(ot&&ot.hasOwnProperty("getMediaInfo")&&ot.hasOwnProperty("getMediaType")&&ot.hasOwnProperty("getScheduleController")&&ot.hasOwnProperty("getStreamInfo")&&ot.hasOwnProperty("getAbrController")&&ot.hasOwnProperty("useL2AABR")&&(Dt.reason=Dt.reason||{},qe&&Vt!==F.Z.AUDIO)))return Dt;fn.setTimeToLoadDelay(0);var Xn,ti,ei,gi,Xi,Ir,Yr,Ce=(Ir=(Xn=ot).getMediaType(),(Yr=O[Ir])||(ei={},Xi=(gi=Xn.getMediaInfo()).bitrateList.map(function(ti){return ti.bandwidth/1e3}),ei.state=1,ei.bitrates=Xi,ei.lastQuality=0,(ti=gi)&&ti.type&&(te[ti.type]={},te[ti.type].w=[],te[ti.type].prev_w=[],te[ti.type].Q=0,te[ti.type].segment_request_start_s=0,te[ti.type].segment_download_finish_s=0,te[ti.type].B_target=1.5),$(ei),O[Ir]=Yr=ei),Yr);if(0===Ce.state)return Dt;var Ee=te[Vt];if(!Ee||(Dt.reason.state=Ce.state,Dt.reason.throughput=I,Dt.reason.latency=Z,isNaN(I)))return Dt;switch(Ce.state){case 1:if(yt=Tt.getQualityForBitrate(Lt,N,Yt.id,Z),Dt.quality=yt,Dt.reason.throughput=N,Ce.lastQuality=yt,!isNaN(Ce.lastSegmentDurationS)&&It>=Ee.B_target){Ce.state=2,Ee.Q=Qe;for(var nt=0;nt<mt;++nt)Ee.prev_w[nt]=nt===Ce.lastQuality?1:0}break;case 2:var At=[],it=se.getCurrentHttpRequest(Vt).trace.reduce(function(Xn,Ir){return Xn+Ir.d},0),et=se.getCurrentHttpRequest(Vt).trace.reduce(function(Xn,Ir){return Xn+Ir.b[0]},0),rt=Math.round(8*et/it),Et=se.getCurrentHttpRequest(Vt);if(rt<1&&(rt=1),Et.url===Ce.lastSegmentUrl||Et.type===E.w.INIT_SEGMENT_TYPE)yt=Ce.lastQuality;else{for(var Ot=Ce.lastSegmentDurationS,_n=1,Zt=0;Zt<mt;++Zt)ze[Zt]=ze[Zt]/1e3,q*ze[Zt]>rt&&(_n=-1),Ee.w[Zt]=Ee.prev_w[Zt]+_n*(Ot/(2*Le))*((Ee.Q+Qe)*(q*ze[Zt]/rt));Ee.w=function(Xn){for(var Ir=Xn.length,Yr=!1,Li=[],ei=0;ei<Ir;++ei)Li[ei]=Xn[ei];for(var gi=Xn.sort(function(Zo,_o){return _o-Zo}),Xi=0,ti=0,Mo=[],Bi=0;Bi<Ir-1;++Bi)if((ti=((Xi+=gi[Bi])-1)/(Bi+1))>=gi[Bi+1]){Yr=!0;break}Yr||(ti=(Xi+gi[Ir-1]-1)/Ir);for(var Eo=0;Eo<Ir;++Eo)Mo[Eo]=Math.max(Li[Eo]-ti,0);return Mo}(Ee.w);for(var xn=0;xn<mt;++xn)At[xn]=Ee.w[xn]-Ee.prev_w[xn],Ee.prev_w[xn]=Ee.w[xn];Ee.Q=Math.max(0,Ee.Q-Ot+Ot*q*((Je(ze,Ee.prev_w)+Je(ze,At))/rt));for(var Rn=[],Mn=0;Mn<mt;++Mn)Rn[Mn]=Math.abs(ze[Mn]-Je(Ee.w,ze));(yt=Rn.indexOf(Math.min.apply(Math,Rn)))>Ce.lastQuality&&ze[Ce.lastQuality+1]<=rt&&(yt=Ce.lastQuality+1),ze[yt]>=rt&&(Ee.Q=2*Math.max(Qe,Ee.Q)),Ce.lastSegmentUrl=Et.url}Dt.quality=yt,Dt.reason.throughput=I,Dt.reason.latency=Z,Dt.reason.bufferLevel=It,Ce.lastQuality=Dt.quality;break;default:ce.debug("L2A ABR rule invoked in bad state."),Dt.quality=Tt.getQualityForBitrate(Lt,N,Yt.id,Z),Dt.reason.state=Ce.state,Dt.reason.throughput=N,Dt.reason.latency=Z,Ce.state=1,$(Ce)}return Dt},reset:function(){Me(),Ne.off(V.Z.PLAYBACK_SEEKING,be,M),Ne.off(V.Z.MEDIA_FRAGMENT_LOADED,xe,M),Ne.off(V.Z.METRIC_ADDED,x,M),Ne.off(V.Z.QUALITY_CHANGE_REQUESTED,he,M)}},ce=(0,w.Z)(ue).getInstance().getLogger(M),Me(),Ne.on(V.Z.PLAYBACK_SEEKING,be,M),Ne.on(V.Z.MEDIA_FRAGMENT_LOADED,xe,M),Ne.on(V.Z.METRIC_ADDED,x,M),Ne.on(V.Z.QUALITY_CHANGE_REQUESTED,he,M),M}G.__dashjs_factory_name="L2ARule",$e.Z=_.Z.getClassFactory(G)},6070:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(6398),_=ne(2068);function E(){var k,V,w=this.context;return k={getMaxIndex:function(F){for(var G=F?F.getSwitchHistory():null,T=G?G.getSwitchRequests():[],M=0,O=0,te=0,ce=(0,_.Z)(w).create(),ue=0;ue<T.length;ue++)if(void 0!==T[ue]&&(te+=T[ue].dropSize,(M+=T[ue].drops)+(O+=T[ue].noDrops)>=6&&M/O>.075)){ce.quality=ue>0&&T[ue].drops>0?ue-1:ue,ce.reason={index:ce.quality,drops:M,noDrops:O,dropSize:te},V.debug("Switch history rule index: "+ce.quality+" samples: "+(M+O)+" drops: "+M);break}return ce}},V=(0,H.Z)(w).getInstance().getLogger(k),k}E.__dashjs_factory_name="SwitchHistoryRule",$e.Z=De.Z.getClassFactory(E)},5628:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(2068),_=ne(3393),E=ne(3860);function k(V){var w=this.context,F=(V=V||{}).dashMetrics;return{getMaxIndex:function(G){var T=(0,H.Z)(w).create();if(!(G&&G.hasOwnProperty("getMediaInfo")&&G.hasOwnProperty("getMediaType")&&G.hasOwnProperty("useBufferOccupancyABR")&&G.hasOwnProperty("getAbrController")&&G.hasOwnProperty("getScheduleController")))return T;!function(){if(!F||!F.hasOwnProperty("getCurrentBufferState"))throw new Error(_.Z.MISSING_CONFIG_ERROR)}();var M=G.getMediaInfo(),O=G.getMediaType(),te=F.getCurrentBufferState(O),ce=G.getScheduleController(),ue=G.getAbrController(),se=G.getStreamInfo(),Ne=se?se.id:null,$=se&&se.manifestInfo?se.manifestInfo.isDynamic:null,be=ue.getThroughputHistory(),xe=be.getSafeAverageThroughput(O,$),x=be.getAverageLatency(O),_e=G.useBufferOccupancyABR();return isNaN(xe)||!te||_e||ue.getAbandonmentStateFor(Ne,O)!==E.Z.ABANDON_LOAD&&(te.state===E.Z.BUFFER_LOADED||$)&&(T.quality=ue.getQualityForBitrate(M,xe,Ne,x),ce.setTimeToLoadDelay(0),T.reason={throughput:xe,latency:x}),T},reset:function(){}}}k.__dashjs_factory_name="ThroughputRule",$e.Z=De.Z.getClassFactory(k)},4722:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(6398);function _(){var E,k,V,w,F,G,T,M,O;function ce(){V=null,w=1,F=100,G=0,T=null,M=null,O="dynamic_weight_selection"}function ue(){var xe=0;if(V)for(var x=0;x<V.length;x++){var _e=V[x];_e.state.throughput>xe&&(xe=_e.state.throughput)}return xe}function se(xe,x,_e){var he=xe.map(function(Je,Me){return _e[Me]*Math.pow(Je-x[Me],2)}).reduce(function(Je,Me){return Je+Me});return(he<0?-1:1)*Math.sqrt(Math.abs(he))}function Ne(xe,x){return se([xe.state.throughput,xe.state.latency,xe.state.rebuffer,xe.state.switch],[x.state.throughput,x.state.latency,x.state.rebuffer,x.state.switch],[1,1,1,1])}function $(xe,x,_e){for(var he=0;he<x.length;he++){var Je=x[he],Me=Ne(Je,xe);be(Je,_e,Math.exp(-1*Math.pow(Me,2)/(2*Math.pow(.1,2))))}}function be(xe,x,_e){var he=xe.state,Je=[.01,.01,.01,.01];he.throughput=he.throughput+(x[0]-he.throughput)*Je[0]*_e,he.latency=he.latency+(x[1]-he.latency)*Je[1]*_e,he.rebuffer=he.rebuffer+(x[2]-he.rebuffer)*Je[2]*_e,he.switch=he.switch+(x[3]-he.switch)*Je[3]*_e}return E={getNextQuality:function(xe,x,_e,he,Je,Me,ot){var yt=_e,Dt=he,Qe=x,Le=function(Ee){if(!V){V=[];var nt=Ee.bitrateList,At=[];G=nt[0].bandwidth,nt.forEach(function(Et){At.push(Et.bandwidth),Et.bandwidth<G&&(G=Et.bandwidth)}),rt=At.map(function(Et){return Math.pow(Et,2)}).reduce(function(Et,Ot){return Et+Ot}),w=Math.sqrt(rt);for(var it=0;it<nt.length;it++)V.push({qualityIndex:it,bitrate:nt[it].bandwidth,state:{throughput:nt[it].bandwidth/w,latency:0,rebuffer:0,switch:0}});M=function(Et){var Ot=[],_n=function(Io){for(var cn=[],un=0;un<Io;un++){var rn=[Math.random()*ue(),Math.random(),Math.random(),Math.random()];cn.push(rn)}return cn}(Math.pow(Et.length,2));Ot.push(_n[0]);for(var Zt=[1,1,1,1],xn=1;xn<Et.length;xn++){for(var Rn=null,Mn=null,Xn=0;Xn<_n.length;Xn++){for(var Ir=_n[Xn],Yr=null,Li=0;Li<Ot.length;Li++){var ei=se(Ir,Ot[Li],Zt);(null===Yr||ei<Yr)&&(Yr=ei)}(null===Mn||Yr>Mn)&&(Rn=Ir,Mn=Yr)}Ot.push(Rn)}for(var gi=null,Xi=null,ti=0;ti<Ot.length;ti++){for(var Mo=0,Bi=0;Bi<Ot.length;Bi++)ti!==Bi&&(Mo+=se(Ot[ti],Ot[Bi],Zt));(null===gi||Mo>gi)&&(gi=Mo,Xi=ti)}var Eo=[];for(Eo.push(Ot[Xi]),Ot.splice(Xi,1);Ot.length>0;){for(var Zo=null,_o=null,ea=0;ea<Ot.length;ea++){var ha=se(Eo[0],Ot[ea],Zt);(null===Zo||ha<Zo)&&(Zo=ha,_o=ea)}Eo.push(Ot[_o]),Ot.splice(_o,1)}return Eo}(V)}var rt;return V}(xe),Lt=x/w;Lt>1&&(Lt=ue()),_e/=F,k.debug("getNextQuality called throughput:".concat(Lt," latency:").concat(_e," bufferSize:").concat(he," currentQualityIndex:").concat(Me," playbackRate:").concat(Je));var Vt=Le[Me],ze=Vt.bitrate*ot.getSegmentDuration()/Qe,mt=Math.max(0,ze-Dt);if(Dt-ze<ot.getMinBuffer())return k.debug("Buffer is low for bitrate= ".concat(Vt.bitrate," downloadTime=").concat(ze," currentBuffer=").concat(Dt," rebuffer=").concat(mt)),function(Ee,nt){var At=0,it=Ee;if(V)for(var et=0;et<V.length;et++){var rt=V[et];rt.bitrate<Ee.bitrate&&rt.bitrate>At&&nt>rt.bitrate&&(At=rt.bitrate,it=rt)}return it}(Vt,Qe).qualityIndex;switch(O){case"manual_weight_selection":T=[.4,.4,.4,.4];break;case"random_weight_selection":T=function(nt,At){for(var it=[],et=Math.sqrt(2/nt),rt=0;rt<4;rt++)it.push(Math.random()*et);return T=it}(Le.length);break;default:!function(Ee,nt,At,it,et,rt,Et){T||(T=M[M.length-1]);var Ot=Ee.findWeightVector(nt,At,it,et,rt,Et);null!==Ot&&-1!==Ot&&(T=Ot)}(ot,Le,yt,Dt,mt,Qe,Je)}for(var fn=null,Yt=null,Tt=null,Rt=0;Rt<Le.length;Rt++){var Ze=Le[Rt],qe=Ze.state,It=[qe.throughput,qe.latency,qe.rebuffer,qe.switch],N=T.slice(),I=ot.getNextBufferWithBitrate(Ze.bitrate,Dt,Qe),Z=I<ot.getMinBuffer();Z&&k.debug("Buffer is low for bitrate=".concat(Ze.bitrate," downloadTime=").concat(ze," currentBuffer=").concat(Dt," nextBuffer=").concat(I)),(Ze.bitrate>x-1e4||Z)&&Ze.bitrate!==G&&(N[0]=100);var q=se(It,[Lt,0,0,0],N);(null===fn||q<fn)&&(fn=q,Yt=Ze.qualityIndex,Tt=Ze)}var Ce=Math.abs(Vt.bitrate-Tt.bitrate)/w;return $(Vt,Le,[Lt,_e,mt,Ce]),$(Tt,Le,[Lt,0,0,Ce]),Yt},reset:function(){ce()}},k=(0,H.Z)(this.context).getInstance().getLogger(E),ce(),E}_.__dashjs_factory_name="LearningAbrController",$e.Z=De.Z.getClassFactory(_)},5317:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(2298);function _(){var E,k,V,w,F;function G(){k=null,V=null,w=null,F=null}function T(O,te,ce,ue){var se=new H.Z;return se.type=O,se.weights.bitrateReward=te||1,se.weights.bitrateSwitchPenalty=1,se.weights.rebufferPenalty=ce||1e3,se.weights.latencyPenalty=[],se.weights.latencyPenalty.push({threshold:1.1,penalty:.05*ue}),se.weights.latencyPenalty.push({threshold:1e8,penalty:.1*ce}),se.weights.playbackSpeedPenalty=ue||200,se}function M(O,te,ce,ue,se){se.bitrateWSum+=se.weights.bitrateReward*O,se.lastBitrate&&(se.bitrateSwitchWSum+=se.weights.bitrateSwitchPenalty*Math.abs(O-se.lastBitrate)),se.lastBitrate=O,se.rebufferWSum+=se.weights.rebufferPenalty*te;for(var Ne=0;Ne<se.weights.latencyPenalty.length;Ne++){var $=se.weights.latencyPenalty[Ne];if(ce<=$.threshold){se.latencyWSum+=$.penalty*ce;break}}se.playbackSpeedWSum+=se.weights.playbackSpeedPenalty*Math.abs(1-ue),se.totalQoe=se.bitrateWSum-se.bitrateSwitchWSum-se.rebufferWSum-se.latencyWSum-se.playbackSpeedWSum}return E={setupPerSegmentQoe:function(O,te,ce){k=T("segment",O,te,ce),V=O,w=te,F=ce},logSegmentMetrics:function(O,te,ce,ue){k&&M(O,te,ce,ue,k)},getPerSegmentQoe:function(){return k},calculateSingleUseQoe:function(O,te,ce,ue){var se=null;return V&&w&&F&&(se=T("segment",V,w,F)),se?(M(O,te,ce,ue,se),se.totalQoe):0},reset:function(){G()}},G(),E}_.__dashjs_factory_name="LoLpQoeEvaluator",$e.Z=De.Z.getClassFactory(_)},5435:function(Ut,$e,ne){"use strict";var De=ne(6398),H=ne(5448),_=ne(4722),E=ne(5317),k=ne(2068),V=ne(3860),w=ne(6523),F=ne(3393);function G(T){var M,O,te,ce,ue=(T=T||{}).dashMetrics,se=this.context;return O={getMaxIndex:function(Ne){try{var $=(0,k.Z)(se).create(),be=Ne.getMediaInfo().type,xe=Ne.getAbrController(),x=Ne.getStreamInfo(),_e=xe.getQualityFor(be,x.id),he=Ne.getMediaInfo(),Je=ue.getCurrentBufferState(be),Me=Ne.getScheduleController(),ot=ue.getCurrentBufferLevel(be,!0),yt=x&&x.manifestInfo?x.manifestInfo.isDynamic:null,Dt=Me.getPlaybackController(),Qe=Dt.getCurrentLiveLatency();if(!Ne.useLoLPABR()||be===F.Z.AUDIO)return $;Qe||(Qe=0);var Le=Dt.getPlaybackRate(),Lt=xe.getThroughputHistory().getSafeAverageThroughput(be,yt);if(M.debug("Throughput ".concat(Math.round(Lt)," kbps")),isNaN(Lt)||!Je||xe.getAbandonmentStateFor(x.id,be)===V.Z.ABANDON_LOAD)return $;for(var Vt=he.bitrateList,ze=Ne.getRepresentationInfo().fragmentDuration,mt=Vt[0].bandwidth/1e3,fn=Vt[Vt.length-1].bandwidth/1e3,Yt=0;Yt<Vt.length;Yt++){var Tt=Vt[Yt].bandwidth/1e3;Tt>fn?fn=Tt:Tt<mt&&(mt=Tt)}var Rt=Vt[_e].bandwidth/1e3,Ze=ue.getCurrentHttpRequest(be,!0),qe=(Ze.tresponse.getTime()-Ze.trequest.getTime())/1e3,It=qe>ze?qe-ze:0;ce.setupPerSegmentQoe(ze,fn,mt),ce.logSegmentMetrics(Rt,It,Qe,Le);var N=(0,w.Z)(se).create({targetLatency:1.5,bufferMin:.3,segmentDuration:ze,qoeEvaluator:ce});return $.quality=te.getNextQuality(he,1e3*Lt,Qe,ot,Le,_e,N),$.reason={throughput:Lt,latency:Qe},$.priority=k.Z.PRIORITY.STRONG,Me.setTimeToLoadDelay(0),$.quality!==_e&&M.debug("[TgcLearningRule]["+be+"] requesting switch to index: ",$.quality,"Average throughput",Math.round(Lt),"kbps"),$}catch(I){throw I}},reset:function(){te.reset(),ce.reset()}},M=(0,De.Z)(se).getInstance().getLogger(O),te=(0,_.Z)(se).create(),ce=(0,E.Z)(se).create(),O}G.__dashjs_factory_name="LoLPRule",$e.Z=H.Z.getClassFactory(G)},6523:function(Ut,$e,ne){"use strict";var De=ne(5448);function H(_){var E,k,V,w,F=_.targetLatency,G=_.bufferMin,T=_.segmentDuration,M=_.qoeEvaluator;function O(){return T}function te(ce,ue){var se=O();return ue>se?ce-se:ce+se-ue}return E={getMinBuffer:function(){return G},getSegmentDuration:O,getNextBufferWithBitrate:function(ce,ue,se){return te(ue,ce*T/se)},getNextBuffer:te,findWeightVector:function(ce,ue,se,Ne,$,be){var xe=null,x=null,_e=null,he=Math.abs(ue-V);return ce.forEach(function(Je){k.forEach(function(Me){var ot=Me[1],yt=Me[2],Dt=Je.bitrate*T/$,Qe=te(se,Dt),Le=(0===yt?10:1/yt)*Math.max(1e-5,Dt-Qe),Vt=M.calculateSingleUseQoe(Je.bitrate,Le,(0===ot?10:1/ot)*Je.state.latency,be);(null===xe||Vt>xe)&&(!(ue>F+he)&&Qe>=G)&&(xe=Vt,x=Me,_e=Je.bitrate)})}),null===x&&null===_e&&(x=-1),V=ue,x}},k=function ce(ue,se,Ne){if(Ne===se)return ue;for(var $=ue.length,be=0;be<$;be++)for(var xe=ue.shift(),x=0;x<w.length;x++)ue.push(xe.concat(w[x]));return ce(ue,se,Ne+1)}((w=[.2,.4,.6,.8,1]).map(function(ce){return[ce]}),4,1),V=0,E}H.__dashjs_factory_name="LoLpWeightSelector",$e.Z=De.Z.getClassFactory(H)},2298:function(Ut,$e){"use strict";$e.Z=function ne(){(function(De,H){if(!(De instanceof H))throw new TypeError("Cannot call a class as a function")})(this,ne),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(Ut,$e,ne){"use strict";ne.d($e,{Y:function(){return M}});var De=ne(3393),H=ne(1553),_=ne(5448),E=ne(2128),k=ne(2594),V=ne(7387),w=ne(7417),F=ne(9032),G=ne(9326),T=ne(7802),M=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function O(te){var ce,ue,se,Ne,$,be,xe,x,_e=this.context,he=te.adapter,Je=te.baseURLController,Me=te.streamInfo,ot=te.timelineConverter,yt=te.debug,Dt=te.eventBus,Qe=te.events,Le=te.dashConstants,Lt=(0,k.Z)(_e).getInstance();function Vt(mt,fn){var Tt,Rt,Yt=new E.Z;Yt.id=mt.id,Yt.bitrate=mt.bandwidth,Yt.width=mt.width,Yt.height=mt.height,Yt.tilesHor=1,Yt.tilesVert=1,mt.essentialProperties&&mt.essentialProperties.forEach(function(Tt){if(M.indexOf(Tt.schemeIdUri)>=0&&Tt.value){var Rt=Tt.value.split("x");2!==Rt.length||isNaN(Rt[0])||isNaN(Rt[1])||(Yt.tilesHor=parseInt(Rt[0],10),Yt.tilesVert=parseInt(Rt[1],10))}}),fn?be.updateSegmentData(mt).then(function(Tt){var Rt,Ze,It,N;Rt=Yt,It=[],N=function(I,Z){var q,Ce,Ee,nt,At=[],it=0;for(q=0,Ce=I.segments.length;q<Ce;q++)Ee=I.segments[q],(nt=(0,V.TJ)(ot,he.getIsDynamic(),Z,Ee.startTime,Ee.duration,Ee.timescale,Ee.media,Ee.mediaRange,it))&&(At.push(nt),nt=null,it++);return At}(Tt,Ze=mt),Ze.segments=N,Rt.segmentDuration=Ze.segments[0].duration,Rt.readThumbnail=function(I,Z){var q=null;It.some(function(Ce){if(Ce.start<=I&&Ce.end>I)return q=Ce.url,!0}),q?Z(q):Ze.segments.some(function(Ce){if(Ce.mediaStartTime<=I&&Ce.mediaStartTime+Ce.duration>I){var Ee=Je.resolve(Ze.path);return xe.load({method:"get",url:Ee.url,request:{range:Ce.mediaRange,responseType:"arraybuffer"},onload:function(nt){var At=x.getSamplesInfo(nt.target.response),it=new Blob([nt.target.response.slice(At.sampleList[0].offset,At.sampleList[0].offset+At.sampleList[0].size)],{type:"image/jpeg"}),et=window.URL.createObjectURL(it);It.push({start:Ce.mediaStartTime,end:Ce.mediaStartTime+Ce.duration,url:et}),Z&&Z(et)}}),!0}})}}):(Yt.startNumber=mt.startNumber,Yt.segmentDuration=mt.segmentDuration,Yt.timescale=mt.timescale,Yt.templateUrl=(Rt=Lt.isRelative((Tt=mt).media)?Lt.resolve(Tt.media,Je.resolve(Tt.path).url):Tt.media)?(0,V.Aj)(Rt,Tt.id):""),Yt.tilesHor>0&&Yt.tilesVert>0&&(Yt.widthPerTile=Yt.width/Yt.tilesHor,Yt.heightPerTile=Yt.height/Yt.tilesVert,ue.push(Yt))}function ze(){ue=[],Ne=-1,$=null}return ce={getTracks:function(){return ue},addTracks:function(){if(Me&&he&&($=he.getMediaInfoForType(Me,De.Z.IMAGE))){var mt=he.getVoRepresentations($);mt&&mt.length>0&&mt.forEach(function(fn){(fn.segmentInfoType===H.Z.SEGMENT_TEMPLATE&&fn.segmentDuration>0&&fn.media||fn.segmentInfoType===H.Z.SEGMENT_TIMELINE)&&Vt(fn),fn.segmentInfoType===H.Z.SEGMENT_BASE&&Vt(fn,!0)}),ue.length>0&&ue.sort(function(fn,Yt){return fn.bitrate-Yt.bitrate})}},reset:ze,setTrackByIndex:function(mt){ue&&0!==ue.length&&(mt>=ue.length&&(mt=ue.length-1),Ne=mt)},getCurrentTrack:function(){return Ne<0?null:ue[Ne]},getCurrentTrackIndex:function(){return Ne},getThumbnailRequestForTime:function(mt){for(var fn,Yt=he.getVoRepresentations($),Tt=0;Tt<Yt.length;Tt++)if(ue[Ne].id===Yt[Tt].id){fn=Yt[Tt];break}return se.getSegmentRequestForTime($,fn,mt)}},ze(),xe=(0,F.Z)(_e).create({}),x=(0,w.Z)(_e).getInstance(),be=(0,T.Z)(_e).create({events:Qe,eventBus:Dt,streamInfo:Me,timelineConverter:ot,dashConstants:Le,dashMetrics:te.dashMetrics,segmentBaseController:te.segmentBaseController,type:De.Z.IMAGE}),(se=(0,G.Z)(_e).create({streamInfo:Me,type:De.Z.IMAGE,timelineConverter:ot,segmentsController:be,baseURLController:Je,debug:yt,eventBus:Dt,events:Qe,dashConstants:Le,urlUtils:Lt})).initialize(!!he&&he.getIsDynamic()),ce}O.__dashjs_factory_name="ThumbnailTracks",$e.Z=_.Z.getClassFactory(O)},7417:function(Ut,$e,ne){"use strict";var De=ne(6398),H=ne(8260),_=ne(5448),E=ne(6934),k=ne(9597);function V(){var w,F,G=this.context;function T(te){if(!te)return null;void 0===te.fileStart&&(te.fileStart=0);var ce=E.parseBuffer(te),ue=(0,H.Z)(G).create();return ue.setData(ce),ue}function M(te,ce){return te[ce+3]>>>0|te[ce+2]<<8>>>0|te[ce+1]<<16>>>0|te[ce]<<24>>>0}function O(te,ce){return String.fromCharCode(te[ce++])+String.fromCharCode(te[ce++])+String.fromCharCode(te[ce++])+String.fromCharCode(te[ce])}return F={parse:T,findLastTopIsoBoxCompleted:function(te,ce,ue){if(void 0===ue&&(ue=0),!ce||ue+8>=ce.byteLength)return new k.Z(0,!1);for(var se,Ne=ce instanceof ArrayBuffer?new Uint8Array(ce):ce,$=0;ue<Ne.byteLength;){var be=M(Ne,ue),xe=O(Ne,ue+4);if(0===be)break;ue+be<=Ne.byteLength&&(te.indexOf(xe)>=0?se=new k.Z(ue,!0,be):$=ue+be),ue+=be}return se||new k.Z($,!1)},getMediaTimescaleFromMoov:function(te){var ce=T(te),ue=ce?ce.getBox("mdhd"):void 0;return ue?ue.timescale:NaN},getSamplesInfo:function(te){if(!te||0===te.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var ce,ue,se,Ne,$,be,xe,x,_e,he,Je,Me,ot,yt,Dt,Qe,Le=T(te),Lt=Le.getBoxes("moof"),Vt=Le.getBoxes("mfhd");Dt=Le.getBoxes("moof").length,yt=Vt[Vt.length-1].sequence_number,ue=0,$=[];var ze=-1,mt=-1;for(he=0;he<Lt.length;he++){var fn=Lt[he],Yt=fn.getChildBoxes("traf");for(x=0;x<Yt.length;x++){var Tt=Yt[x],Rt=Tt.getChildBox("tfhd"),Ze=Tt.getChildBox("tfdt");Ne=Ze.baseMediaDecodeTime;var qe=Tt.getChildBoxes("trun"),It=Tt.getChildBoxes("subs");for(_e=0;_e<qe.length;_e++){var N=qe[_e];for(ue=N.sample_count,ot=(Rt.base_data_offset||0)+(N.data_offset||0),xe=0;xe<ue;xe++){ce=void 0!==(be=N.samples[xe]).sample_duration?be.sample_duration:Rt.default_sample_duration;var I={dts:Ne,cts:Ne+(void 0!==be.sample_composition_time_offset?be.sample_composition_time_offset:0),duration:ce,offset:fn.offset+ot,size:se=void 0!==be.sample_size?be.sample_size:Rt.default_sample_size,subSizes:[se]};if(It)for(Je=0;Je<It.length;Je++){var Z=It[Je];if(ze<Z.entry_count-1&&xe>mt&&(ze++,mt+=Z.entries[ze].sample_delta),xe==mt){I.subSizes=[];var q=Z.entries[ze];for(Me=0;Me<q.subsample_count;Me++)I.subSizes.push(q.subsamples[Me].subsample_size)}}$.push(I),ot+=se,Ne+=ce}}Qe=Ne-Ze.baseMediaDecodeTime}}return{sampleList:$,lastSequenceNumber:yt,totalDuration:Qe,numSequences:Dt}},findInitRange:function(te){var ce=null,ue=T(te);if(!ue)return ce;var se=ue.getBox("ftyp"),Ne=ue.getBox("moov");return w.debug("Searching for initialization."),Ne&&Ne.isComplete&&w.debug("Found the initialization.  Range: "+(ce=(se?se.offset:Ne.offset)+"-"+(Ne.offset+Ne.size-1))),ce},parsePayload:function(te,ce,ue){if(void 0===ue&&(ue=0),!ce||ue+8>=ce.byteLength)return new k.Z(0,!1);for(var se,Ne=ce instanceof ArrayBuffer?new Uint8Array(ce):ce,$=0;ue<Ne.byteLength;){var be=M(Ne,ue),xe=O(Ne,ue+4);if(0===be)break;ue+be<=Ne.byteLength&&(te.indexOf(xe)>=0?se=new k.Z(ue,!0,be,xe):$=ue+be),ue+=be}return se||new k.Z($,!1)}},w=(0,De.Z)(G).getInstance().getLogger(F),F}V.__dashjs_factory_name="BoxParser",$e.Z=_.Z.getSingletonFactory(V)},1715:function(Ut,$e,ne){"use strict";ne.d($e,{B:function(){return k}});var De=ne(5448),H=ne(7803),_=ne(3393),E=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function k(){var w="ManagedMediaSource"in window,F="WebKitMediaSource"in window,G="MediaSource"in window;return w||F||G}function V(){var w,F,G;return w={setConfig:function(T){T&&T.settings&&(F=T.settings)},supportsMediaSource:k,supportsEncryptedMedia:function(){return G},supportsCodec:function(T,M){return M!==_.Z.AUDIO&&M!==_.Z.VIDEO?Promise.resolve(!0):(O=T,te=M,F.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(O.codec&&te===_.Z.AUDIO||te===_.Z.VIDEO&&O.codec&&O.width&&O.height&&O.bitrate&&O.framerate)?function(O,te){return new Promise(function(ce){if(O&&O.codec){var ue={type:"media-source"};ue[te]={},ue[te].contentType=O.codec,ue[te].width=O.width,ue[te].height=O.height,ue[te].bitrate=parseInt(O.bitrate),ue[te].framerate=parseFloat(O.framerate),navigator.mediaCapabilities.decodingInfo(ue).then(function(se){ce(se.supported)}).catch(function(){ce(!1)})}else ce(!1)})}(T,M):function(O){return new Promise(function(te){if(O&&O.codec){var ce=O.codec;O.width&&O.height&&(ce+=';width="'+O.width+'";height="'+O.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(ce)||"MediaSource"in window&&MediaSource.isTypeSupported(ce)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(ce)?te(!0):te(!1)}else te(!1)})}(T));var O,te},setEncryptedMediaSupported:function(T){G=T},supportsEssentialProperty:function(T){try{return-1!==H.Y.indexOf(T.schemeIdUri)}catch{return!0}},codecRootCompatibleWithCodec:function(T,M){for(var O,te=T.split(".")[0],ce=0===M.indexOf(te),ue=0;ue<E.length;ue++)if(E[ue].codec===te){O=E[ue];break}return O?ce||O.compatibleCodecs.some(function(se){return 0===M.indexOf(se)}):ce}},G=!1,w}V.__dashjs_factory_name="Capabilities",$e.Z=De.Z.getSingletonFactory(V)},2295:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(3106);function _(){return{customTimeRangeArray:[],length:0,add:function(E,k){var V;for(V=0;V<this.customTimeRangeArray.length&&E>this.customTimeRangeArray[V].start;V++);for(this.customTimeRangeArray.splice(V,0,{start:E,end:k}),V=0;V<this.customTimeRangeArray.length-1;V++)this.mergeRanges(V,V+1)&&V--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(E,k){for(var V=0;V<this.customTimeRangeArray.length;V++)if(E<=this.customTimeRangeArray[V].start&&k>=this.customTimeRangeArray[V].end)this.customTimeRangeArray.splice(V,1),V--;else{if(E>this.customTimeRangeArray[V].start&&k<this.customTimeRangeArray[V].end){this.customTimeRangeArray.splice(V+1,0,{start:k,end:this.customTimeRangeArray[V].end}),this.customTimeRangeArray[V].end=E;break}E>this.customTimeRangeArray[V].start&&E<this.customTimeRangeArray[V].end?this.customTimeRangeArray[V].end=E:k>this.customTimeRangeArray[V].start&&k<this.customTimeRangeArray[V].end&&(this.customTimeRangeArray[V].start=k)}this.length=this.customTimeRangeArray.length},mergeRanges:function(E,k){var V=this.customTimeRangeArray[E],w=this.customTimeRangeArray[k];return V.start<=w.start&&w.start<=V.end&&V.end<=w.end?(V.end=w.end,this.customTimeRangeArray.splice(k,1),!0):w.start<=V.start&&V.start<=w.end&&w.end<=V.end?(V.start=w.start,this.customTimeRangeArray.splice(k,1),!0):w.start<=V.start&&V.start<=w.end&&V.end<=w.end?(this.customTimeRangeArray.splice(E,1),!0):V.start<=w.start&&w.start<=V.end&&w.end<=V.end&&(this.customTimeRangeArray.splice(k,1),!0)},start:function(E){return(0,H.SE)(E),E>=this.customTimeRangeArray.length||E<0?NaN:this.customTimeRangeArray[E].start},end:function(E){return(0,H.SE)(E),E>=this.customTimeRangeArray.length||E<0?NaN:this.customTimeRangeArray[E].end}}}_.__dashjs_factory_name="CustomTimeRanges",$e.Z=De.Z.getClassFactory(_)},5:function(Ut,$e,ne){"use strict";var De=ne(5448);function H(){var _,E=/^[a-z][a-z0-9+\-_.]*:/i,k=/^https?:\/\//i,V=/^https:\/\//i,w=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,F=function(se,Ne){try{return new window.URL(se,Ne).toString()}catch{return se}},G=function(se,Ne){var $=T;if(!Ne||!te(se))return se;ce(se)&&($=M),ue(se)&&($=O);var be=$(Ne),xe="/"!==be.charAt(be.length-1)&&"/"!==se.charAt(0)?"/":"";return[be,se].join(xe)};function T(se){var Ne=se.indexOf("/"),$=se.lastIndexOf("/");return-1!==Ne?$===Ne+1?se:(-1!==se.indexOf("?")&&(se=se.substring(0,se.indexOf("?"))),se.substring(0,$+1)):""}function M(se){var Ne=se.match(w);return Ne?Ne[1]:""}function O(se){var Ne=se.match(E);return Ne?Ne[0]:""}function te(se){return!E.test(se)}function ce(se){return te(se)&&"/"===se.charAt(0)}function ue(se){return 0===se.indexOf("//")}return function(){try{new window.URL("x","http://y"),_=F}catch{}finally{_=_||G}}(),{parseBaseUrl:T,parseOrigin:M,parseScheme:O,isRelative:te,isPathAbsolute:ce,isSchemeRelative:ue,isHTTPURL:function(se){return k.test(se)},isHTTPS:function(se){return V.test(se)},removeHostname:function(se){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(se)[2].substring(1)},resolve:function(se,Ne){return _(se,Ne)}}}H.__dashjs_factory_name="DefaultURLUtils",$e.Z=De.Z.getSingletonFactory(H)},8260:function(Ut,$e,ne){"use strict";var De=ne(2839),H=ne(5448);function _(){var E;function k(w){var F=[];if(!w||!E||"function"!=typeof E.fetchAll)return F;for(var G,T=E.fetchAll(w),M=0,O=T.length;M<O;M++)(G=V(T[M]))&&F.push(G);return F}function V(w){if(!w)return null;var F=new De.Z(w);return w.hasOwnProperty("_incomplete")&&(F.isComplete=!w._incomplete),F}return{getBox:function(w){return w&&E&&E.boxes&&0!==E.boxes.length&&"function"==typeof E.fetch?V(E.fetch(w)):null},getBoxes:k,setData:function(w){E=w},getLastBox:function(){if(!E||!E.boxes||!E.boxes.length)return null;var w=k(E.boxes[E.boxes.length-1].type);return w.length>0?w[w.length-1]:null}}}_.__dashjs_factory_name="IsoFile",$e.Z=H.Z.getClassFactory(_)},7473:function(Ut,$e,ne){"use strict";ne.d($e,{k:function(){return H}});var De=ne(5448);function H(E,k){var V={url:E.url,method:E.method,headers:Object.assign({},E.headers),credentials:E.withCredentials?"include":void 0};return Promise.resolve(k.modifyRequest(V)).then(function(){return Object.assign(E,V,{withCredentials:"include"===V.credentials})})}function _(){return{modifyRequest:null,modifyRequestURL:function(E){return E},modifyRequestHeader:function(E,k){return E}}}_.__dashjs_factory_name="RequestModifier",$e.Z=De.Z.getSingletonFactory(_)},3106:function(Ut,$e,ne){"use strict";ne.d($e,{PS:function(){return _},SE:function(){return E}});var De=ne(3393);function H(k){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(k)}function _(k,V){if(H(k)!==V)throw De.Z.BAD_ARGUMENT_ERROR}function E(k){if(null===k||isNaN(k)||k%1!=0)throw De.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(Ut,$e,ne){"use strict";var De=ne(5448),H=ne(5);function _(){var k,V=[];function F(G,T,M){var O=function(te){var ce;for(ce=0;ce<V.length;ce++)if(V[ce].regex.test(te))return V[ce].utils;return k}(M||T);return O&&"function"==typeof O[G]?O[G](T,M):k[G](T,M)}return k=(0,H.Z)(this.context).getInstance(),{registerUrlRegex:function(G,T){V.push({regex:G,utils:T})},parseBaseUrl:function(G){return F("parseBaseUrl",G)},parseOrigin:function(G){return F("parseOrigin",G)},parseScheme:function(G){return F("parseScheme",G)},isRelative:function(G){return F("isRelative",G)},isPathAbsolute:function(G){return F("isPathAbsolute",G)},isSchemeRelative:function(G){return F("isSchemeRelative",G)},isHTTPURL:function(G){return F("isHTTPURL",G)},isHTTPS:function(G){return F("isHTTPS",G)},removeHostname:function(G){return F("removeHostname",G)},resolve:function(G,T){return F("resolve",G,T)}}}_.__dashjs_factory_name="URLUtils";var E=De.Z.getSingletonFactory(_);$e.Z=E},5459:function(Ut,$e){"use strict";$e.Z=function ne(De,H,_){(function(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")})(this,ne),this.code=De||null,this.message=H||null,this.data=_||null}},3186:function(Ut,$e,ne){"use strict";var De=ne(7855);var _=function(){function E(w){(function(F,G){if(!(F instanceof G))throw new TypeError("Cannot call a class as a function")})(this,E),this.action=E.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=w||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var V;return(V=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===De.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(w){this.type=w&&w.init?De.w.INIT_SEGMENT_TYPE:De.w.MEDIA_SEGMENT_TYPE,this.url=w&&w.url?w.url:null,this.range=w&&w.range?w.range.start+"-"+w.range.end:null,this.mediaType=w&&w.mediaType?w.mediaType:null}}])&&function H(E,k){for(var V=0;V<k.length;V++){var w=k[V];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(E,w.key,w)}}(E.prototype,V),E}();_.ACTION_DOWNLOAD="download",_.ACTION_COMPLETE="complete",$e.Z=_},2839:function(Ut,$e){"use strict";var De=function(){function H(k){if(function(O,te){if(!(O instanceof te))throw new TypeError("Cannot call a class as a function")}(this,H),this.offset=k._offset,this.type=k.type,this.size=k.size,this.boxes=[],k.boxes)for(var V=0;V<k.boxes.length;V++)this.boxes.push(new H(k.boxes[V]));switch(this.isComplete=!0,k.type){case"sidx":if(this.timescale=k.timescale,this.earliest_presentation_time=k.earliest_presentation_time,this.first_offset=k.first_offset,this.references=k.references,k.references){this.references=[];for(var w=0;w<k.references.length;w++)this.references.push({reference_type:k.references[w].reference_type,referenced_size:k.references[w].referenced_size,subsegment_duration:k.references[w].subsegment_duration})}break;case"emsg":this.id=k.id,this.version=1===k.version?1:0,this.value=k.value,this.timescale=k.timescale,this.scheme_id_uri=k.scheme_id_uri,this.presentation_time_delta=1===k.version?k.presentation_time:k.presentation_time_delta,this.event_duration=k.event_duration,this.message_data=k.message_data;break;case"mdhd":this.timescale=k.timescale;break;case"mfhd":this.sequence_number=k.sequence_number;break;case"subs":this.entry_count=k.entry_count,this.entries=k.entries;break;case"tfhd":this.base_data_offset=k.base_data_offset,this.sample_description_index=k.sample_description_index,this.default_sample_duration=k.default_sample_duration,this.default_sample_size=k.default_sample_size,this.default_sample_flags=k.default_sample_flags,this.flags=k.flags;break;case"tfdt":this.version=k.version,this.baseMediaDecodeTime=k.baseMediaDecodeTime,this.flags=k.flags;break;case"trun":if(this.sample_count=k.sample_count,this.first_sample_flags=k.first_sample_flags,this.data_offset=k.data_offset,this.flags=k.flags,this.samples=k.samples,k.samples){this.samples=[];for(var G=0,T=k.samples.length;G<T;G++)this.samples.push({sample_size:k.samples[G].sample_size,sample_duration:k.samples[G].sample_duration,sample_composition_time_offset:k.samples[G].sample_composition_time_offset})}break;case"prft":this.version=k.version,this.reference_track_ID=k.reference_track_ID,this.ntp_timestamp_sec=k.ntp_timestamp_sec,this.ntp_timestamp_frac=k.ntp_timestamp_frac,this.media_time=k.media_time,this.flags=k.flags}}var E;return(E=[{key:"getChildBox",value:function(k){for(var V=0;V<this.boxes.length;V++)if(this.boxes[V].type===k)return this.boxes[V]}},{key:"getChildBoxes",value:function(k){for(var V=[],w=0;w<this.boxes.length;w++)this.boxes[w].type===k&&V.push(this.boxes[w]);return V}}])&&function ne(H,_){for(var E=0;E<_.length;E++){var k=_[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,k.key,k)}}(H.prototype,E),H}();$e.Z=De},9597:function(Ut,$e){"use strict";$e.Z=function ne(De,H,_){(function(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")})(this,ne),this.lastCompletedOffset=De,this.found=H,this.size=_}},2128:function(Ut,$e){"use strict";$e.Z=function ne(){(function(De,H){if(!(De instanceof H))throw new TypeError("Cannot call a class as a function")})(this,ne),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(Ut,$e,ne){"use strict";function De(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")}ne.d($e,{O:function(){return _},w:function(){return H}});var H=function E(){De(this,E),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},_=function E(){De(this,E),this.s=null,this.d=null,this.b=[]};H.GET="GET",H.HEAD="HEAD",H.MPD_TYPE="MPD",H.XLINK_EXPANSION_TYPE="XLinkExpansion",H.INIT_SEGMENT_TYPE="InitializationSegment",H.INDEX_SEGMENT_TYPE="IndexSegment",H.MEDIA_SEGMENT_TYPE="MediaSegment",H.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",H.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",H.DVB_REPORTING_TYPE="DVBReporting",H.LICENSE="license",H.CONTENT_STEERING_TYPE="ContentSteering",H.OTHER_TYPE="other"},3039:function(Ut,$e){"use strict";function ne(H,_){return function(E,k){for(var V,w,F,G=De(E,"tag"),T=De(k??"*","range"),M=[],O=-1;++O<T.length;)if(V=T[O].toLowerCase(),_||"*"!==V){for(w=-1,F=[];++w<G.length;)if(H(G[w].toLowerCase(),V)){if(!_)return G[w];M.push(G[w])}else F.push(G[w]);G=F}return _?M:void 0}}function De(H,_){var E=H&&"string"==typeof H?[H]:H;if(!E||"object"!=typeof E||!("length"in E))throw new Error("Invalid "+_+" `"+E+"`, expected non-empty string");return E}$e.basicFilter=ne(function(H,_){return"*"===_||H===_||H.indexOf(_+"-")>-1},!0),$e.extendedFilter=ne(function(H,_){var E=H.split("-"),k=_.split("-"),V=0,w=0;if("*"!==k[w]&&E[V]!==k[w])return!1;for(V++,w++;w<k.length;)if("*"!==k[w]){if(!E[V])return!1;if(E[V]!==k[w]){if(1===E[V].length)return!1;V++}else V++,w++}else w++;return!0},!0),$e.lookup=ne(function(H,_){for(var E,k=_;;){if("*"===k||H===k)return!0;if((E=k.lastIndexOf("-"))<0)return!1;"-"===k.charAt(E-2)&&(E-=2),k=k.slice(0,E)}})},3973:function(Ut,$e,ne){"use strict";Ut.exports=ne(3854)},3854:function(Ut,$e,ne){"use strict";var De=ne(2415),H=ne(3039),_=ne(7778),E=ne(5813),k=ne(3165),V=ne(9460);Ut.exports=function(ce,ue){var se,Ne=ue||{},$=De.parse(String(ce||"").toLowerCase(),Ne),be=De.stringify($),xe=-1;if(!be)return be;for(;++xe<_.length;)H.extendedFilter(be,_[xe].from).length&&(T($,_[xe].from,_[xe].to),be=De.stringify($));for(xe=-1;++xe<E.length;)M($,E[xe].from.field,E[xe].from.value)&&O($,E[xe].to.field,E[xe].to.value);for(be=De.stringify(Object.assign({},$,G)),xe=-1;++xe<k.length;)be===k[xe]&&(T($,k[xe],k[xe].split("-").slice(0,-1).join("-")),be=De.stringify(Object.assign({},$,G)));if($.extensions.sort(te),Ne.warning)for(se in V)w.call(V[se],$[se])&&Ne.warning("Deprecated "+se+" `"+$[se]+"`, expected one of `"+V[se][$[se]].join("`, `")+"`",null,7);return $.script&&($.script=$.script.charAt(0).toUpperCase()+$.script.slice(1)),$.region&&($.region=$.region.toUpperCase()),De.stringify($)};var w={}.hasOwnProperty,F=new Intl.Collator,G={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function T(ce,ue,se){var Ne,$=De.parse(ue),be=De.parse(se),xe=[];for(Ne in $)$[Ne]&&$[Ne].length&&M(ce,Ne,$[Ne])&&xe.push(Ne);for(Ne in be)be[Ne]&&be[Ne].length&&(xe.indexOf(Ne)>-1||!ce[Ne]||!ce[Ne].length)&&O(ce,Ne,be[Ne])}function M(ce,ue,se){var Ne,$,be,xe,x=!1;if(se){if($=Ne=ce[ue],Ne&&"object"==typeof Ne)for($=[],be=-1;++be<Ne.length;)se.indexOf(xe=Ne[be])<0?$.push(xe):x=!0;else Ne===se&&($=null,x=!0);ce[ue]=$}return x}function O(ce,ue,se){var Ne,$,be,xe=ce[ue];if(xe&&"object"==typeof xe)for(Ne=[].concat(se),$=-1;++$<Ne.length;)xe.indexOf(be=Ne[$])<0&&xe.push(be);else ce[ue]=se}function te(ce,ue){return F.compare(ce.singleton,ue.singleton)}},2415:function(Ut,$e,ne){"use strict";$e.parse=ne(6903),$e.stringify=ne(6713)},6903:function(Ut,$e,ne){"use strict";var De=ne(2219),H=ne(3516),_=ne(395),E=ne(858),k=ne(8589);Ut.exports=function w(F,G){var T,M,O,te=G||{},ce={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},ue=String(F),se=ue.toLowerCase(),Ne=0;if(null==F)throw new Error("Expected string, got `"+F+"`");if(V.call(k,se))return(null==te.normalize||te.normalize)&&k[se]?w(k[se]):(ce[-1===E.indexOf(se)?"irregular":"regular"]=ue,ce);for(;H(se.charCodeAt(Ne))&&Ne<9;)Ne++;if(Ne>1&&Ne<9){if(ce.language=ue.slice(0,Ne),Ne<4)for(M=0;45===se.charCodeAt(Ne)&&H(se.charCodeAt(Ne+1))&&H(se.charCodeAt(Ne+2))&&H(se.charCodeAt(Ne+3))&&!H(se.charCodeAt(Ne+4));){if(M>2)return $(Ne,3,"Too many extended language subtags, expected at most 3 subtags");ce.extendedLanguageSubtags.push(ue.slice(Ne+1,Ne+4)),Ne+=4,M++}for(45===se.charCodeAt(Ne)&&H(se.charCodeAt(Ne+1))&&H(se.charCodeAt(Ne+2))&&H(se.charCodeAt(Ne+3))&&H(se.charCodeAt(Ne+4))&&!H(se.charCodeAt(Ne+5))&&(ce.script=ue.slice(Ne+1,Ne+5),Ne+=5),45===se.charCodeAt(Ne)&&(H(se.charCodeAt(Ne+1))&&H(se.charCodeAt(Ne+2))&&!H(se.charCodeAt(Ne+3))?(ce.region=ue.slice(Ne+1,Ne+3),Ne+=3):_(se.charCodeAt(Ne+1))&&_(se.charCodeAt(Ne+2))&&_(se.charCodeAt(Ne+3))&&!_(se.charCodeAt(Ne+4))&&(ce.region=ue.slice(Ne+1,Ne+4),Ne+=4));45===se.charCodeAt(Ne);){for(O=T=Ne+1;De(se.charCodeAt(O));){if(O-T>7)return $(O,1,"Too long variant, expected at most 8 characters");O++}if(!(O-T>4||O-T>3&&_(se.charCodeAt(T))))break;ce.variants.push(ue.slice(T,O)),Ne=O}for(;45===se.charCodeAt(Ne)&&120!==se.charCodeAt(Ne+1)&&De(se.charCodeAt(Ne+1))&&45===se.charCodeAt(Ne+2)&&De(se.charCodeAt(Ne+3));){for(O=Ne+2,M=0;45===se.charCodeAt(O)&&De(se.charCodeAt(O+1))&&De(se.charCodeAt(O+2));)for(O=(T=O+1)+2,M++;De(se.charCodeAt(O));){if(O-T>7)return $(O,2,"Too long extension, expected at most 8 characters");O++}if(!M)return $(O,4,"Empty extension, extensions must have at least 2 characters of content");ce.extensions.push({singleton:ue.charAt(Ne+1),extensions:ue.slice(Ne+3,O).split("-")}),Ne=O}}else Ne=0;if(0===Ne&&120===se.charCodeAt(Ne)||45===se.charCodeAt(Ne)&&120===se.charCodeAt(Ne+1))for(O=Ne=Ne?Ne+2:1;45===se.charCodeAt(O)&&De(se.charCodeAt(O+1));){for(O=T=Ne+1;De(se.charCodeAt(O));){if(O-T>7)return $(O,5,"Too long private-use area, expected at most 8 characters");O++}ce.privateuse.push(ue.slice(Ne+1,O)),Ne=O}return Ne!==ue.length?$(Ne,6,"Found superfluous content after tag"):ce;function $(be,xe,x){return te.warning&&te.warning(x,xe,be),te.forgiving?ce:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var V={}.hasOwnProperty},6713:function(Ut){"use strict";Ut.exports=function($e){var ne,De,H,_=$e||{},E=[];if(_.irregular||_.regular)return _.irregular||_.regular;if(_.language)for(E=E.concat(_.language,_.extendedLanguageSubtags||[],_.script||[],_.region||[],_.variants||[]),ne=_.extensions||[],De=-1;++De<ne.length;)(H=ne[De]).singleton&&H.extensions&&H.extensions.length&&(E=E.concat(H.singleton,H.extensions));return _.privateuse&&_.privateuse.length&&(E=E.concat("x",_.privateuse)),E.join("-")}},1549:function(Ut,$e,ne){"use strict";var De=ne(6693),H=ne(2165),_="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;$e.Buffer=V,$e.SlowBuffer=function(N){return+N!=N&&(N=0),V.alloc(+N)},$e.INSPECT_MAX_BYTES=50;var E=2147483647;function k(N){if(N>E)throw new RangeError('The value "'+N+'" is invalid for option "size"');var I=new Uint8Array(N);return Object.setPrototypeOf(I,V.prototype),I}function V(N,I,Z){if("number"==typeof N){if("string"==typeof I)throw new TypeError('The "string" argument must be of type string. Received type number');return G(N)}return w(N,I,Z)}function w(N,I,Z){if("string"==typeof N)return function(Ee,nt){if("string"==typeof nt&&""!==nt||(nt="utf8"),!V.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);var At=0|te(Ee,nt),it=k(At),et=it.write(Ee,nt);return et!==At&&(it=it.slice(0,et)),it}(N,I);if(ArrayBuffer.isView(N))return function(Ee){if(Ze(Ee,Uint8Array)){var nt=new Uint8Array(Ee);return M(nt.buffer,nt.byteOffset,nt.byteLength)}return T(Ee)}(N);if(null==N)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(Ze(N,ArrayBuffer)||N&&Ze(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(N,SharedArrayBuffer)||N&&Ze(N.buffer,SharedArrayBuffer)))return M(N,I,Z);if("number"==typeof N)throw new TypeError('The "value" argument must not be of type number. Received type number');var q=N.valueOf&&N.valueOf();if(null!=q&&q!==N)return V.from(q,I,Z);var Ce=function(Ee){if(V.isBuffer(Ee)){var nt=0|O(Ee.length),At=k(nt);return 0===At.length||Ee.copy(At,0,0,nt),At}return void 0!==Ee.length?"number"!=typeof Ee.length||qe(Ee.length)?k(0):T(Ee):"Buffer"===Ee.type&&Array.isArray(Ee.data)?T(Ee.data):void 0}(N);if(Ce)return Ce;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof N[Symbol.toPrimitive])return V.from(N[Symbol.toPrimitive]("string"),I,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}function F(N){if("number"!=typeof N)throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function G(N){return F(N),k(N<0?0:0|O(N))}function T(N){for(var I=N.length<0?0:0|O(N.length),Z=k(I),q=0;q<I;q+=1)Z[q]=255&N[q];return Z}function M(N,I,Z){if(I<0||N.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<I+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var q;return q=void 0===I&&void 0===Z?new Uint8Array(N):void 0===Z?new Uint8Array(N,I):new Uint8Array(N,I,Z),Object.setPrototypeOf(q,V.prototype),q}function O(N){if(N>=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E.toString(16)+" bytes");return 0|N}function te(N,I){if(V.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||Ze(N,ArrayBuffer))return N.byteLength;if("string"!=typeof N)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);var Z=N.length,q=arguments.length>2&&!0===arguments[2];if(!q&&0===Z)return 0;for(var Ce=!1;;)switch(I){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return Yt(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Z;case"hex":return Z>>>1;case"base64":return Tt(N).length;default:if(Ce)return q?-1:Yt(N).length;I=(""+I).toLowerCase(),Ce=!0}}function ce(N,I,Z){var q=!1;if((void 0===I||I<0)&&(I=0),I>this.length||((void 0===Z||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0)<=(I>>>=0))return"";for(N||(N="utf8");;)switch(N){case"hex":return Dt(this,I,Z);case"utf8":case"utf-8":return Je(this,I,Z);case"ascii":return ot(this,I,Z);case"latin1":case"binary":return yt(this,I,Z);case"base64":return he(this,I,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qe(this,I,Z);default:if(q)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),q=!0}}function ue(N,I,Z){var q=N[I];N[I]=N[Z],N[Z]=q}function se(N,I,Z,q,Ce){if(0===N.length)return-1;if("string"==typeof Z?(q=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),qe(Z=+Z)&&(Z=Ce?0:N.length-1),Z<0&&(Z=N.length+Z),Z>=N.length){if(Ce)return-1;Z=N.length-1}else if(Z<0){if(!Ce)return-1;Z=0}if("string"==typeof I&&(I=V.from(I,q)),V.isBuffer(I))return 0===I.length?-1:Ne(N,I,Z,q,Ce);if("number"==typeof I)return I&=255,"function"==typeof Uint8Array.prototype.indexOf?Ce?Uint8Array.prototype.indexOf.call(N,I,Z):Uint8Array.prototype.lastIndexOf.call(N,I,Z):Ne(N,[I],Z,q,Ce);throw new TypeError("val must be string, number or Buffer")}function Ne(N,I,Z,q,Ce){var Ee,nt=1,At=N.length,it=I.length;if(void 0!==q&&("ucs2"===(q=String(q).toLowerCase())||"ucs-2"===q||"utf16le"===q||"utf-16le"===q)){if(N.length<2||I.length<2)return-1;nt=2,At/=2,it/=2,Z/=2}function et(_n,Zt){return 1===nt?_n[Zt]:_n.readUInt16BE(Zt*nt)}if(Ce){var rt=-1;for(Ee=Z;Ee<At;Ee++)if(et(N,Ee)===et(I,-1===rt?0:Ee-rt)){if(-1===rt&&(rt=Ee),Ee-rt+1===it)return rt*nt}else-1!==rt&&(Ee-=Ee-rt),rt=-1}else for(Z+it>At&&(Z=At-it),Ee=Z;Ee>=0;Ee--){for(var Et=!0,Ot=0;Ot<it;Ot++)if(et(N,Ee+Ot)!==et(I,Ot)){Et=!1;break}if(Et)return Ee}return-1}function $(N,I,Z,q){Z=Number(Z)||0;var Ce=N.length-Z;q?(q=Number(q))>Ce&&(q=Ce):q=Ce;var Ee=I.length;q>Ee/2&&(q=Ee/2);for(var nt=0;nt<q;++nt){var At=parseInt(I.substr(2*nt,2),16);if(qe(At))return nt;N[Z+nt]=At}return nt}function be(N,I,Z,q){return Rt(Yt(I,N.length-Z),N,Z,q)}function xe(N,I,Z,q){return Rt(function(Ce){for(var Ee=[],nt=0;nt<Ce.length;++nt)Ee.push(255&Ce.charCodeAt(nt));return Ee}(I),N,Z,q)}function x(N,I,Z,q){return Rt(Tt(I),N,Z,q)}function _e(N,I,Z,q){return Rt(function(Ce,Ee){for(var nt,At,et=[],rt=0;rt<Ce.length&&!((Ee-=2)<0);++rt)At=(nt=Ce.charCodeAt(rt))>>8,et.push(nt%256),et.push(At);return et}(I,N.length-Z),N,Z,q)}function he(N,I,Z){return De.fromByteArray(0===I&&Z===N.length?N:N.slice(I,Z))}function Je(N,I,Z){Z=Math.min(N.length,Z);for(var q=[],Ce=I;Ce<Z;){var Ee,nt,At,it,et=N[Ce],rt=null,Et=et>239?4:et>223?3:et>191?2:1;if(Ce+Et<=Z)switch(Et){case 1:et<128&&(rt=et);break;case 2:128==(192&(Ee=N[Ce+1]))&&(it=(31&et)<<6|63&Ee)>127&&(rt=it);break;case 3:nt=N[Ce+2],128==(192&(Ee=N[Ce+1]))&&128==(192&nt)&&(it=(15&et)<<12|(63&Ee)<<6|63&nt)>2047&&(it<55296||it>57343)&&(rt=it);break;case 4:nt=N[Ce+2],At=N[Ce+3],128==(192&(Ee=N[Ce+1]))&&128==(192&nt)&&128==(192&At)&&(it=(15&et)<<18|(63&Ee)<<12|(63&nt)<<6|63&At)>65535&&it<1114112&&(rt=it)}null===rt?(rt=65533,Et=1):rt>65535&&(q.push((rt-=65536)>>>10&1023|55296),rt=56320|1023&rt),q.push(rt),Ce+=Et}return function(Ot){var _n=Ot.length;if(_n<=Me)return String.fromCharCode.apply(String,Ot);for(var Zt="",xn=0;xn<_n;)Zt+=String.fromCharCode.apply(String,Ot.slice(xn,xn+=Me));return Zt}(q)}$e.kMaxLength=E,(V.TYPED_ARRAY_SUPPORT=function(){try{var N=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(N,I),42===N.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}}),V.poolSize=8192,V.from=function(N,I,Z){return w(N,I,Z)},Object.setPrototypeOf(V.prototype,Uint8Array.prototype),Object.setPrototypeOf(V,Uint8Array),V.alloc=function(N,I,Z){return Ce=I,Ee=Z,F(q=N),q<=0?k(q):void 0!==Ce?"string"==typeof Ee?k(q).fill(Ce,Ee):k(q).fill(Ce):k(q);var q,Ce,Ee},V.allocUnsafe=function(N){return G(N)},V.allocUnsafeSlow=function(N){return G(N)},V.isBuffer=function(N){return null!=N&&!0===N._isBuffer&&N!==V.prototype},V.compare=function(N,I){if(Ze(N,Uint8Array)&&(N=V.from(N,N.offset,N.byteLength)),Ze(I,Uint8Array)&&(I=V.from(I,I.offset,I.byteLength)),!V.isBuffer(N)||!V.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===I)return 0;for(var Z=N.length,q=I.length,Ce=0,Ee=Math.min(Z,q);Ce<Ee;++Ce)if(N[Ce]!==I[Ce]){Z=N[Ce],q=I[Ce];break}return Z<q?-1:q<Z?1:0},V.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(N,I){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(0===N.length)return V.alloc(0);var Z;if(void 0===I)for(I=0,Z=0;Z<N.length;++Z)I+=N[Z].length;var q=V.allocUnsafe(I),Ce=0;for(Z=0;Z<N.length;++Z){var Ee=N[Z];if(Ze(Ee,Uint8Array))Ce+Ee.length>q.length?V.from(Ee).copy(q,Ce):Uint8Array.prototype.set.call(q,Ee,Ce);else{if(!V.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(q,Ce)}Ce+=Ee.length}return q},V.byteLength=te,V.prototype._isBuffer=!0,V.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<N;I+=2)ue(this,I,I+1);return this},V.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<N;I+=4)ue(this,I,I+3),ue(this,I+1,I+2);return this},V.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<N;I+=8)ue(this,I,I+7),ue(this,I+1,I+6),ue(this,I+2,I+5),ue(this,I+3,I+4);return this},V.prototype.toString=function(){var N=this.length;return 0===N?"":0===arguments.length?Je(this,0,N):ce.apply(this,arguments)},V.prototype.toLocaleString=V.prototype.toString,V.prototype.equals=function(N){if(!V.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||0===V.compare(this,N)},V.prototype.inspect=function(){var N="",I=$e.INSPECT_MAX_BYTES;return N=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(N+=" ... "),"<Buffer "+N+">"},_&&(V.prototype[_]=V.prototype.inspect),V.prototype.compare=function(N,I,Z,q,Ce){if(Ze(N,Uint8Array)&&(N=V.from(N,N.offset,N.byteLength)),!V.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(void 0===I&&(I=0),void 0===Z&&(Z=N?N.length:0),void 0===q&&(q=0),void 0===Ce&&(Ce=this.length),I<0||Z>N.length||q<0||Ce>this.length)throw new RangeError("out of range index");if(q>=Ce&&I>=Z)return 0;if(q>=Ce)return-1;if(I>=Z)return 1;if(this===N)return 0;for(var Ee=(Ce>>>=0)-(q>>>=0),nt=(Z>>>=0)-(I>>>=0),At=Math.min(Ee,nt),it=this.slice(q,Ce),et=N.slice(I,Z),rt=0;rt<At;++rt)if(it[rt]!==et[rt]){Ee=it[rt],nt=et[rt];break}return Ee<nt?-1:nt<Ee?1:0},V.prototype.includes=function(N,I,Z){return-1!==this.indexOf(N,I,Z)},V.prototype.indexOf=function(N,I,Z){return se(this,N,I,Z,!0)},V.prototype.lastIndexOf=function(N,I,Z){return se(this,N,I,Z,!1)},V.prototype.write=function(N,I,Z,q){if(void 0===I)q="utf8",Z=this.length,I=0;else if(void 0===Z&&"string"==typeof I)q=I,Z=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(Z)?(Z>>>=0,void 0===q&&(q="utf8")):(q=Z,Z=void 0)}var Ce=this.length-I;if((void 0===Z||Z>Ce)&&(Z=Ce),N.length>0&&(Z<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");for(var Ee=!1;;)switch(q){case"hex":return $(this,N,I,Z);case"utf8":case"utf-8":return be(this,N,I,Z);case"ascii":case"latin1":case"binary":return xe(this,N,I,Z);case"base64":return x(this,N,I,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,N,I,Z);default:if(Ee)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),Ee=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Me=4096;function ot(N,I,Z){var q="";Z=Math.min(N.length,Z);for(var Ce=I;Ce<Z;++Ce)q+=String.fromCharCode(127&N[Ce]);return q}function yt(N,I,Z){var q="";Z=Math.min(N.length,Z);for(var Ce=I;Ce<Z;++Ce)q+=String.fromCharCode(N[Ce]);return q}function Dt(N,I,Z){var q=N.length;(!I||I<0)&&(I=0),(!Z||Z<0||Z>q)&&(Z=q);for(var Ce="",Ee=I;Ee<Z;++Ee)Ce+=It[N[Ee]];return Ce}function Qe(N,I,Z){for(var q=N.slice(I,Z),Ce="",Ee=0;Ee<q.length-1;Ee+=2)Ce+=String.fromCharCode(q[Ee]+256*q[Ee+1]);return Ce}function Le(N,I,Z){if(N%1!=0||N<0)throw new RangeError("offset is not uint");if(N+I>Z)throw new RangeError("Trying to access beyond buffer length")}function Lt(N,I,Z,q,Ce,Ee){if(!V.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>Ce||I<Ee)throw new RangeError('"value" argument is out of bounds');if(Z+q>N.length)throw new RangeError("Index out of range")}function Vt(N,I,Z,q,Ce,Ee){if(Z+q>N.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function ze(N,I,Z,q,Ce){return I=+I,Z>>>=0,Ce||Vt(N,0,Z,4),H.write(N,I,Z,q,23,4),Z+4}function mt(N,I,Z,q,Ce){return I=+I,Z>>>=0,Ce||Vt(N,0,Z,8),H.write(N,I,Z,q,52,8),Z+8}V.prototype.slice=function(N,I){var Z=this.length;(N=~~N)<0?(N+=Z)<0&&(N=0):N>Z&&(N=Z),(I=void 0===I?Z:~~I)<0?(I+=Z)<0&&(I=0):I>Z&&(I=Z),I<N&&(I=N);var q=this.subarray(N,I);return Object.setPrototypeOf(q,V.prototype),q},V.prototype.readUintLE=V.prototype.readUIntLE=function(N,I,Z){N>>>=0,I>>>=0,Z||Le(N,I,this.length);for(var q=this[N],Ce=1,Ee=0;++Ee<I&&(Ce*=256);)q+=this[N+Ee]*Ce;return q},V.prototype.readUintBE=V.prototype.readUIntBE=function(N,I,Z){N>>>=0,I>>>=0,Z||Le(N,I,this.length);for(var q=this[N+--I],Ce=1;I>0&&(Ce*=256);)q+=this[N+--I]*Ce;return q},V.prototype.readUint8=V.prototype.readUInt8=function(N,I){return N>>>=0,I||Le(N,1,this.length),this[N]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(N,I){return N>>>=0,I||Le(N,2,this.length),this[N]|this[N+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(N,I){return N>>>=0,I||Le(N,2,this.length),this[N]<<8|this[N+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(N,I){return N>>>=0,I||Le(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(N,I){return N>>>=0,I||Le(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},V.prototype.readIntLE=function(N,I,Z){N>>>=0,I>>>=0,Z||Le(N,I,this.length);for(var q=this[N],Ce=1,Ee=0;++Ee<I&&(Ce*=256);)q+=this[N+Ee]*Ce;return q>=(Ce*=128)&&(q-=Math.pow(2,8*I)),q},V.prototype.readIntBE=function(N,I,Z){N>>>=0,I>>>=0,Z||Le(N,I,this.length);for(var q=I,Ce=1,Ee=this[N+--q];q>0&&(Ce*=256);)Ee+=this[N+--q]*Ce;return Ee>=(Ce*=128)&&(Ee-=Math.pow(2,8*I)),Ee},V.prototype.readInt8=function(N,I){return N>>>=0,I||Le(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},V.prototype.readInt16LE=function(N,I){N>>>=0,I||Le(N,2,this.length);var Z=this[N]|this[N+1]<<8;return 32768&Z?4294901760|Z:Z},V.prototype.readInt16BE=function(N,I){N>>>=0,I||Le(N,2,this.length);var Z=this[N+1]|this[N]<<8;return 32768&Z?4294901760|Z:Z},V.prototype.readInt32LE=function(N,I){return N>>>=0,I||Le(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},V.prototype.readInt32BE=function(N,I){return N>>>=0,I||Le(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},V.prototype.readFloatLE=function(N,I){return N>>>=0,I||Le(N,4,this.length),H.read(this,N,!0,23,4)},V.prototype.readFloatBE=function(N,I){return N>>>=0,I||Le(N,4,this.length),H.read(this,N,!1,23,4)},V.prototype.readDoubleLE=function(N,I){return N>>>=0,I||Le(N,8,this.length),H.read(this,N,!0,52,8)},V.prototype.readDoubleBE=function(N,I){return N>>>=0,I||Le(N,8,this.length),H.read(this,N,!1,52,8)},V.prototype.writeUintLE=V.prototype.writeUIntLE=function(N,I,Z,q){N=+N,I>>>=0,Z>>>=0,q||Lt(this,N,I,Z,Math.pow(2,8*Z)-1,0);var Ce=1,Ee=0;for(this[I]=255&N;++Ee<Z&&(Ce*=256);)this[I+Ee]=N/Ce&255;return I+Z},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(N,I,Z,q){N=+N,I>>>=0,Z>>>=0,q||Lt(this,N,I,Z,Math.pow(2,8*Z)-1,0);var Ce=Z-1,Ee=1;for(this[I+Ce]=255&N;--Ce>=0&&(Ee*=256);)this[I+Ce]=N/Ee&255;return I+Z},V.prototype.writeUint8=V.prototype.writeUInt8=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,1,255,0),this[I]=255&N,I+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,2,65535,0),this[I]=255&N,this[I+1]=N>>>8,I+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,2,65535,0),this[I]=N>>>8,this[I+1]=255&N,I+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,4,4294967295,0),this[I+3]=N>>>24,this[I+2]=N>>>16,this[I+1]=N>>>8,this[I]=255&N,I+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,4,4294967295,0),this[I]=N>>>24,this[I+1]=N>>>16,this[I+2]=N>>>8,this[I+3]=255&N,I+4},V.prototype.writeIntLE=function(N,I,Z,q){if(N=+N,I>>>=0,!q){var Ce=Math.pow(2,8*Z-1);Lt(this,N,I,Z,Ce-1,-Ce)}var Ee=0,nt=1,At=0;for(this[I]=255&N;++Ee<Z&&(nt*=256);)N<0&&0===At&&0!==this[I+Ee-1]&&(At=1),this[I+Ee]=(N/nt>>0)-At&255;return I+Z},V.prototype.writeIntBE=function(N,I,Z,q){if(N=+N,I>>>=0,!q){var Ce=Math.pow(2,8*Z-1);Lt(this,N,I,Z,Ce-1,-Ce)}var Ee=Z-1,nt=1,At=0;for(this[I+Ee]=255&N;--Ee>=0&&(nt*=256);)N<0&&0===At&&0!==this[I+Ee+1]&&(At=1),this[I+Ee]=(N/nt>>0)-At&255;return I+Z},V.prototype.writeInt8=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,1,127,-128),N<0&&(N=255+N+1),this[I]=255&N,I+1},V.prototype.writeInt16LE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,2,32767,-32768),this[I]=255&N,this[I+1]=N>>>8,I+2},V.prototype.writeInt16BE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,2,32767,-32768),this[I]=N>>>8,this[I+1]=255&N,I+2},V.prototype.writeInt32LE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,4,2147483647,-2147483648),this[I]=255&N,this[I+1]=N>>>8,this[I+2]=N>>>16,this[I+3]=N>>>24,I+4},V.prototype.writeInt32BE=function(N,I,Z){return N=+N,I>>>=0,Z||Lt(this,N,I,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[I]=N>>>24,this[I+1]=N>>>16,this[I+2]=N>>>8,this[I+3]=255&N,I+4},V.prototype.writeFloatLE=function(N,I,Z){return ze(this,N,I,!0,Z)},V.prototype.writeFloatBE=function(N,I,Z){return ze(this,N,I,!1,Z)},V.prototype.writeDoubleLE=function(N,I,Z){return mt(this,N,I,!0,Z)},V.prototype.writeDoubleBE=function(N,I,Z){return mt(this,N,I,!1,Z)},V.prototype.copy=function(N,I,Z,q){if(!V.isBuffer(N))throw new TypeError("argument should be a Buffer");if(Z||(Z=0),q||0===q||(q=this.length),I>=N.length&&(I=N.length),I||(I=0),q>0&&q<Z&&(q=Z),q===Z||0===N.length||0===this.length)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(Z<0||Z>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),N.length-I<q-Z&&(q=N.length-I+Z);var Ce=q-Z;return this===N&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(I,Z,q):Uint8Array.prototype.set.call(N,this.subarray(Z,q),I),Ce},V.prototype.fill=function(N,I,Z,q){if("string"==typeof N){if("string"==typeof I?(q=I,I=0,Z=this.length):"string"==typeof Z&&(q=Z,Z=this.length),void 0!==q&&"string"!=typeof q)throw new TypeError("encoding must be a string");if("string"==typeof q&&!V.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(1===N.length){var Ce=N.charCodeAt(0);("utf8"===q&&Ce<128||"latin1"===q)&&(N=Ce)}}else"number"==typeof N?N&=255:"boolean"==typeof N&&(N=Number(N));if(I<0||this.length<I||this.length<Z)throw new RangeError("Out of range index");if(Z<=I)return this;var Ee;if(I>>>=0,Z=void 0===Z?this.length:Z>>>0,N||(N=0),"number"==typeof N)for(Ee=I;Ee<Z;++Ee)this[Ee]=N;else{var nt=V.isBuffer(N)?N:V.from(N,q),At=nt.length;if(0===At)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(Ee=0;Ee<Z-I;++Ee)this[Ee+I]=nt[Ee%At]}return this};var fn=/[^+/0-9A-Za-z-_]/g;function Yt(N,I){var Z;I=I||1/0;for(var q=N.length,Ce=null,Ee=[],nt=0;nt<q;++nt){if((Z=N.charCodeAt(nt))>55295&&Z<57344){if(!Ce){if(Z>56319){(I-=3)>-1&&Ee.push(239,191,189);continue}if(nt+1===q){(I-=3)>-1&&Ee.push(239,191,189);continue}Ce=Z;continue}if(Z<56320){(I-=3)>-1&&Ee.push(239,191,189),Ce=Z;continue}Z=65536+(Ce-55296<<10|Z-56320)}else Ce&&(I-=3)>-1&&Ee.push(239,191,189);if(Ce=null,Z<128){if((I-=1)<0)break;Ee.push(Z)}else if(Z<2048){if((I-=2)<0)break;Ee.push(Z>>6|192,63&Z|128)}else if(Z<65536){if((I-=3)<0)break;Ee.push(Z>>12|224,Z>>6&63|128,63&Z|128)}else{if(!(Z<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;Ee.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,63&Z|128)}}return Ee}function Tt(N){return De.toByteArray(function(I){if((I=(I=I.split("=")[0]).trim().replace(fn,"")).length<2)return"";for(;I.length%4!=0;)I+="=";return I}(N))}function Rt(N,I,Z,q){for(var Ce=0;Ce<q&&!(Ce+Z>=I.length||Ce>=N.length);++Ce)I[Ce+Z]=N[Ce];return Ce}function Ze(N,I){return N instanceof I||null!=N&&null!=N.constructor&&null!=N.constructor.name&&N.constructor.name===I.name}function qe(N){return N!=N}var It=function(){for(var N="0123456789abcdef",I=new Array(256),Z=0;Z<16;++Z)for(var q=16*Z,Ce=0;Ce<16;++Ce)I[q+Ce]=N[Z]+N[Ce];return I}()},6693:function(Ut,$e){"use strict";$e.byteLength=function(F){var G=V(F),M=G[1];return 3*(G[0]+M)/4-M},$e.toByteArray=function(F){var G,T,be,M=V(F),O=M[0],te=M[1],ce=new H(3*(O+(be=te))/4-be),ue=0,se=te>0?O-4:O;for(T=0;T<se;T+=4)G=De[F.charCodeAt(T)]<<18|De[F.charCodeAt(T+1)]<<12|De[F.charCodeAt(T+2)]<<6|De[F.charCodeAt(T+3)],ce[ue++]=G>>16&255,ce[ue++]=G>>8&255,ce[ue++]=255&G;return 2===te&&(G=De[F.charCodeAt(T)]<<2|De[F.charCodeAt(T+1)]>>4,ce[ue++]=255&G),1===te&&(G=De[F.charCodeAt(T)]<<10|De[F.charCodeAt(T+1)]<<4|De[F.charCodeAt(T+2)]>>2,ce[ue++]=G>>8&255,ce[ue++]=255&G),ce},$e.fromByteArray=function(F){for(var G,T=F.length,M=T%3,O=[],ce=0,ue=T-M;ce<ue;ce+=16383)O.push(w(F,ce,ce+16383>ue?ue:ce+16383));return 1===M?O.push(ne[(G=F[T-1])>>2]+ne[G<<4&63]+"=="):2===M&&O.push(ne[(G=(F[T-2]<<8)+F[T-1])>>10]+ne[G>>4&63]+ne[G<<2&63]+"="),O.join("")};for(var ne=[],De=[],H=typeof Uint8Array<"u"?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0;E<64;++E)ne[E]=_[E],De[_.charCodeAt(E)]=E;function V(F){var G=F.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=F.indexOf("=");return-1===T&&(T=G),[T,T===G?0:4-T%4]}function w(F,G,T){for(var O,te=[],ce=G;ce<T;ce+=3)te.push(ne[(O=(F[ce]<<16&16711680)+(F[ce+1]<<8&65280)+(255&F[ce+2]))>>18&63]+ne[O>>12&63]+ne[O>>6&63]+ne[63&O]);return te.join("")}De["-".charCodeAt(0)]=62,De["_".charCodeAt(0)]=63},2165:function(Ut,$e){$e.read=function(ne,De,H,_,E){var k,V,w=8*E-_-1,F=(1<<w)-1,G=F>>1,T=-7,M=H?E-1:0,O=H?-1:1,te=ne[De+M];for(M+=O,k=te&(1<<-T)-1,te>>=-T,T+=w;T>0;k=256*k+ne[De+M],M+=O,T-=8);for(V=k&(1<<-T)-1,k>>=-T,T+=_;T>0;V=256*V+ne[De+M],M+=O,T-=8);if(0===k)k=1-G;else{if(k===F)return V?NaN:1/0*(te?-1:1);V+=Math.pow(2,_),k-=G}return(te?-1:1)*V*Math.pow(2,k-_)},$e.write=function(ne,De,H,_,E,k){var V,w,F,G=8*k-E-1,T=(1<<G)-1,M=T>>1,O=23===E?Math.pow(2,-24)-Math.pow(2,-77):0,te=_?0:k-1,ce=_?1:-1,ue=De<0||0===De&&1/De<0?1:0;for(De=Math.abs(De),isNaN(De)||De===1/0?(w=isNaN(De)?1:0,V=T):(V=Math.floor(Math.log(De)/Math.LN2),De*(F=Math.pow(2,-V))<1&&(V--,F*=2),(De+=V+M>=1?O/F:O*Math.pow(2,1-M))*F>=2&&(V++,F/=2),V+M>=T?(w=0,V=T):V+M>=1?(w=(De*F-1)*Math.pow(2,E),V+=M):(w=De*Math.pow(2,M-1)*Math.pow(2,E),V=0));E>=8;ne[H+te]=255&w,te+=ce,w/=256,E-=8);for(V=V<<E|w,G+=E;G>0;ne[H+te]=255&V,te+=ce,V/=256,G-=8);ne[H+te-ce]|=128*ue}},6934:function(Ut,$e){var ne={parseBuffer:function(_){return new De(_).parse()},addBoxProcessor:function(_,E){"string"==typeof _&&"function"==typeof E&&(H.prototype._boxProcessors[_]=E)},createFile:function(){return new De},createBox:function(_,E,k){var V=H.create(_);return E&&E.append(V,k),V},createFullBox:function(_,E,k){var V=ne.createBox(_,E,k);return V.version=0,V.flags=0,V},Utils:{}};ne.Utils.dataViewToString=function(_,E){var k=E||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(k).decode(_);var V=[],w=0;if("utf-8"===k)for(;w<_.byteLength;){var F=_.getUint8(w++);F<128||(F<224?(F=(31&F)<<6,F|=63&_.getUint8(w++)):F<240?(F=(15&F)<<12,F|=(63&_.getUint8(w++))<<6,F|=63&_.getUint8(w++)):(F=(7&F)<<18,F|=(63&_.getUint8(w++))<<12,F|=(63&_.getUint8(w++))<<6,F|=63&_.getUint8(w++))),V.push(String.fromCharCode(F))}else for(;w<_.byteLength;)V.push(String.fromCharCode(_.getUint8(w++)));return V.join("")},ne.Utils.utf8ToByteArray=function(_){var E,k;if(typeof TextEncoder<"u")E=(new TextEncoder).encode(_);else for(E=[],k=0;k<_.length;++k){var V=_.charCodeAt(k);V<128?E.push(V):V<2048?(E.push(192|V>>6),E.push(128|63&V)):V<65536?(E.push(224|V>>12),E.push(128|63&V>>6),E.push(128|63&V)):(E.push(240|V>>18),E.push(128|63&V>>12),E.push(128|63&V>>6),E.push(128|63&V))}return E},ne.Utils.appendBox=function(_,E,k){if(E._offset=_._cursor.offset,E._root=_._root?_._root:_,E._raw=_._raw,E._parent=_,-1!==k)if(null!=k){var V,w=-1;if("number"==typeof k)w=k;else{if("string"==typeof k)V=k;else{if("object"!=typeof k||!k.type)return void _.boxes.push(E);V=k.type}for(var F=0;F<_.boxes.length;F++)if(V===_.boxes[F].type){w=F+1;break}}_.boxes.splice(w,0,E)}else _.boxes.push(E)},$e.parseBuffer=ne.parseBuffer,$e.addBoxProcessor=ne.addBoxProcessor,$e.createFile=ne.createFile,$e.createBox=ne.createBox,$e.createFullBox=ne.createFullBox,$e.Utils=ne.Utils,ne.Cursor=function(_){this.offset=void 0===_?0:_};var De=function(_){this._cursor=new ne.Cursor,this.boxes=[],_&&(this._raw=new DataView(_))};De.prototype.fetch=function(_){var E=this.fetchAll(_,!0);return E.length?E[0]:null},De.prototype.fetchAll=function(_,E){var k=[];return De._sweep.call(this,_,k,E),k},De.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var _=H.parse(this);if(void 0===_.type)break;this.boxes.push(_)}return this},De._sweep=function(_,E,k){for(var V in this.type&&this.type==_&&E.push(this),this.boxes){if(E.length&&k)return;De._sweep.call(this.boxes[V],_,E,k)}},De.prototype.write=function(){var _,E=0;for(_=0;_<this.boxes.length;_++)E+=this.boxes[_].getLength(!1);var k=new Uint8Array(E);for(this._rawo=new DataView(k.buffer),this.bytes=k,this._cursor.offset=0,_=0;_<this.boxes.length;_++)this.boxes[_].write();return k.buffer},De.prototype.append=function(_,E){ne.Utils.appendBox(this,_,E)};var H=function(){this._cursor=new ne.Cursor};H.parse=function(_){var E=new H;return E._offset=_._cursor.offset,E._root=_._root?_._root:_,E._raw=_._raw,E._parent=_,E._parseBox(),_._cursor.offset=E._raw.byteOffset+E._raw.byteLength,E},H.create=function(_){var E=new H;return E.type=_,E.boxes=[],E},H.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],H.prototype._boxProcessors={},H.prototype._procField=function(_,E,k){this._parsing?this[_]=this._readField(E,k):this._writeField(E,k,this[_])},H.prototype._procFieldArray=function(_,E,k,V){var w;if(this._parsing)for(this[_]=[],w=0;w<E;w++)this[_][w]=this._readField(k,V);else for(w=0;w<this[_].length;w++)this._writeField(k,V,this[_][w])},H.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},H.prototype._procEntries=function(_,E,k){var V;if(this._parsing)for(this[_]=[],V=0;V<E;V++)this[_].push({}),k.call(this,this[_][V]);else for(V=0;V<E;V++)k.call(this,this[_][V])},H.prototype._procSubEntries=function(_,E,k,V){var w;if(this._parsing)for(_[E]=[],w=0;w<k;w++)_[E].push({}),V.call(this,_[E][w]);else for(w=0;w<k;w++)V.call(this,_[E][w])},H.prototype._procEntryField=function(_,E,k,V){this._parsing?_[E]=this._readField(k,V):this._writeField(k,V,_[E])},H.prototype._procSubBoxes=function(_,E){var k;if(this._parsing)for(this[_]=[],k=0;k<E;k++)this[_].push(H.parse(this));else for(k=0;k<E;k++)this._rawo?this[_][k].write():this.size+=this[_][k].getLength()},H.prototype._readField=function(_,E){switch(_){case"uint":return this._readUint(E);case"int":return this._readInt(E);case"template":return this._readTemplate(E);case"string":return-1===E?this._readTerminatedString():this._readString(E);case"data":return this._readData(E);case"utf8":return this._readUTF8String();default:return-1}},H.prototype._readInt=function(_){var E=null,k=this._cursor.offset-this._raw.byteOffset;switch(_){case 8:E=this._raw.getInt8(k);break;case 16:E=this._raw.getInt16(k);break;case 32:E=this._raw.getInt32(k);break;case 64:var V=this._raw.getInt32(k),w=this._raw.getInt32(k+4);E=V*Math.pow(2,32)+w}return this._cursor.offset+=_>>3,E},H.prototype._readUint=function(_){var E,k,V=null,w=this._cursor.offset-this._raw.byteOffset;switch(_){case 8:V=this._raw.getUint8(w);break;case 16:V=this._raw.getUint16(w);break;case 24:V=((E=this._raw.getUint16(w))<<8)+(k=this._raw.getUint8(w+2));break;case 32:V=this._raw.getUint32(w);break;case 64:E=this._raw.getUint32(w),k=this._raw.getUint32(w+4),V=E*Math.pow(2,32)+k}return this._cursor.offset+=_>>3,V},H.prototype._readString=function(_){for(var E="",k=0;k<_;k++){var V=this._readUint(8);E+=String.fromCharCode(V)}return E},H.prototype._readTemplate=function(_){return this._readUint(_/2)+this._readUint(_/2)/Math.pow(2,_/2)},H.prototype._readTerminatedString=function(){for(var _="";this._cursor.offset-this._offset<this._raw.byteLength;){var E=this._readUint(8);if(0===E)break;_+=String.fromCharCode(E)}return _},H.prototype._readData=function(_){var E=_>0?_:this._raw.byteLength-(this._cursor.offset-this._offset);if(E>0){var k=new Uint8Array(this._raw.buffer,this._cursor.offset,E);return this._cursor.offset+=E,k}return null},H.prototype._readUTF8String=function(){var _=this._raw.byteLength-(this._cursor.offset-this._offset),E=null;return _>0&&(E=new DataView(this._raw.buffer,this._cursor.offset,_),this._cursor.offset+=_),E&&ne.Utils.dataViewToString(E)},H.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},H.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},H.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(H.parse(this))},H.prototype.append=function(_,E){ne.Utils.appendBox(this,_,E)},H.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var _=0;_<this.boxes.length;_++)this.size+=this.boxes[_].getLength();return this._data&&this._writeData(this._data),this.size},H.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var _=0;_<this.boxes.length;_++)this.boxes[_].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},H.prototype._writeInt=function(_,E){if(this._rawo){var k=this._cursor.offset-this._rawo.byteOffset;switch(_){case 8:this._rawo.setInt8(k,E);break;case 16:this._rawo.setInt16(k,E);break;case 32:this._rawo.setInt32(k,E);break;case 64:var V=Math.floor(E/Math.pow(2,32)),w=E-V*Math.pow(2,32);this._rawo.setUint32(k,V),this._rawo.setUint32(k+4,w)}this._cursor.offset+=_>>3}else this.size+=_>>3},H.prototype._writeUint=function(_,E){if(this._rawo){var k,V,w=this._cursor.offset-this._rawo.byteOffset;switch(_){case 8:this._rawo.setUint8(w,E);break;case 16:this._rawo.setUint16(w,E);break;case 24:V=255&E,this._rawo.setUint16(w,k=(16776960&E)>>8),this._rawo.setUint8(w+2,V);break;case 32:this._rawo.setUint32(w,E);break;case 64:V=E-(k=Math.floor(E/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(w,k),this._rawo.setUint32(w+4,V)}this._cursor.offset+=_>>3}else this.size+=_>>3},H.prototype._writeString=function(_,E){for(var k=0;k<_;k++)this._writeUint(8,E.charCodeAt(k))},H.prototype._writeTerminatedString=function(_){if(0!==_.length){for(var E=0;E<_.length;E++)this._writeUint(8,_.charCodeAt(E));this._writeUint(8,0)}},H.prototype._writeTemplate=function(_,E){var k=Math.floor(E),V=(E-k)*Math.pow(2,_/2);this._writeUint(_/2,k),this._writeUint(_/2,V)},H.prototype._writeData=function(_){if(_)if(this._rawo){if(_ instanceof Array){for(var E=this._cursor.offset-this._rawo.byteOffset,k=0;k<_.length;k++)this._rawo.setInt8(E+k,_[k]);this._cursor.offset+=_.length}_ instanceof Uint8Array&&(this._root.bytes.set(_,this._cursor.offset),this._cursor.offset+=_.length)}else this.size+=_.length},H.prototype._writeUTF8String=function(_){var E=ne.Utils.utf8ToByteArray(_);if(this._rawo)for(var k=new DataView(this._rawo.buffer,this._cursor.offset,E.length),V=0;V<E.length;V++)k.setUint8(V,E[V]);else this.size+=E.length},H.prototype._writeField=function(_,E,k){switch(_){case"uint":this._writeUint(E,k);break;case"int":this._writeInt(E,k);break;case"template":this._writeTemplate(E,k);break;case"string":-1==E?this._writeTerminatedString(k):this._writeString(E,k);break;case"data":this._writeData(k);break;case"utf8":this._writeUTF8String(k)}},H.prototype._boxProcessors.avc1=H.prototype._boxProcessors.avc2=H.prototype._boxProcessors.avc3=H.prototype._boxProcessors.avc4=H.prototype._boxProcessors.hvc1=H.prototype._boxProcessors.hev1=H.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},H.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(_){this._procEntryField(_,"sample_count","uint",32),this._procEntryField(_,"sample_offset",1===this.version?"int":"uint",32)})},H.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},H.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(_){this._procEntryField(_,"segment_duration","uint",1===this.version?64:32),this._procEntryField(_,"media_time","int",1===this.version?64:32),this._procEntryField(_,"media_rate_integer","int",16),this._procEntryField(_,"media_rate_fraction","int",16)})},H.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},H.prototype._boxProcessors.free=H.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},H.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},H.prototype._boxProcessors.ftyp=H.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var _=-1;this._parsing&&(_=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",_,"string",4)},H.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},H.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},H.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},H.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},H.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},H.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},H.prototype._boxProcessors.mp4a=H.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},H.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},H.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},H.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},H.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},H.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},H.prototype._boxProcessors.sdtp=function(){this._procFullBox();var _=-1;this._parsing&&(_=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",_,"uint",8)},H.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(_){this._parsing||(_.reference=(1&_.reference_type)<<31,_.reference|=2147483647&_.referenced_size,_.sap=(1&_.starts_with_SAP)<<31,_.sap|=(3&_.SAP_type)<<28,_.sap|=268435455&_.SAP_delta_time),this._procEntryField(_,"reference","uint",32),this._procEntryField(_,"subsegment_duration","uint",32),this._procEntryField(_,"sap","uint",32),this._parsing&&(_.reference_type=_.reference>>31&1,_.referenced_size=2147483647&_.reference,_.starts_with_SAP=_.sap>>31&1,_.SAP_type=_.sap>>28&7,_.SAP_delta_time=268435455&_.sap)})},H.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},H.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(_){this._procEntryField(_,"ranges_count","uint",32),this._procSubEntries(_,"ranges",_.ranges_count,function(E){this._procEntryField(E,"level","uint",8),this._procEntryField(E,"range_size","uint",24)})})},H.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},H.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},H.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(_){this._procEntryField(_,"sample_count","uint",32),this._procEntryField(_,"sample_delta","uint",32)})},H.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(_){this._procEntryField(_,"sample_delta","uint",32),this._procEntryField(_,"subsample_count","uint",16),this._procSubEntries(_,"subsamples",_.subsample_count,function(E){this._procEntryField(E,"subsample_size","uint",1===this.version?32:16),this._procEntryField(E,"subsample_priority","uint",8),this._procEntryField(E,"discardable","uint",8),this._procEntryField(E,"codec_specific_parameters","uint",32)})})},H.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},H.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},H.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},H.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(_){this._procEntryField(_,"time","uint",1===this.version?64:32),this._procEntryField(_,"moof_offset","uint",1===this.version?64:32),this._procEntryField(_,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(_,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(_,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},H.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},H.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},H.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(_){256&this.flags&&this._procEntryField(_,"sample_duration","uint",32),512&this.flags&&this._procEntryField(_,"sample_size","uint",32),1024&this.flags&&this._procEntryField(_,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(_,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},H.prototype._boxProcessors["url "]=H.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},H.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},H.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},H.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},H.prototype._boxProcessors.vtte=function(){}},5530:function(Ut,$e,ne){"use strict";Ut.exports=ne(6146).polyfill()},6146:function(Ut,$e,ne){Ut.exports=function(){"use strict";function De(Tt){return"function"==typeof Tt}var H=Array.isArray?Array.isArray:function(Tt){return"[object Array]"===Object.prototype.toString.call(Tt)},_=0,E=void 0,k=void 0,V=function(Tt,Rt){te[_]=Tt,te[_+1]=Rt,2===(_+=2)&&(k?k(ce):be())},w=typeof window<"u"?window:void 0,F=w||{},G=F.MutationObserver||F.WebKitMutationObserver,T=typeof self>"u"&&typeof process<"u"&&"[object process]"==={}.toString.call(process),M=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function O(){var Tt=setTimeout;return function(){return Tt(ce,1)}}var te=new Array(1e3);function ce(){for(var Tt=0;Tt<_;Tt+=2)(0,te[Tt])(te[Tt+1]),te[Tt]=void 0,te[Tt+1]=void 0;_=0}var ue,se,Ne,$,be=void 0;function xe(Tt,Rt){var Ze=this,qe=new this.constructor(he);void 0===qe[_e]&&mt(qe);var It=Ze._state;if(It){var N=arguments[It-1];V(function(){return Vt(It,qe,N,Ze._result)})}else Le(Ze,qe,Tt,Rt);return qe}function x(Tt){if(Tt&&"object"==typeof Tt&&Tt.constructor===this)return Tt;var Rt=new this(he);return ot(Rt,Tt),Rt}be=T?function(){return process.nextTick(ce)}:G?(se=0,Ne=new G(ce),$=document.createTextNode(""),Ne.observe($,{characterData:!0}),function(){$.data=se=++se%2}):M?((ue=new MessageChannel).port1.onmessage=ce,function(){return ue.port2.postMessage(0)}):void 0===w?function(){try{var Tt=Function("return this")().require("vertx");return void 0!==(E=Tt.runOnLoop||Tt.runOnContext)?function(){E(ce)}:O()}catch{return O()}}():O();var _e=Math.random().toString(36).substring(2);function he(){}var Je=void 0;function Me(Tt,Rt,Ze){var qe,It;Rt.constructor===Tt.constructor&&Ze===xe&&Rt.constructor.resolve===x?(qe=Tt,1===(It=Rt)._state?Dt(qe,It._result):2===It._state?Qe(qe,It._result):Le(It,void 0,function(N){return ot(qe,N)},function(N){return Qe(qe,N)})):void 0===Ze?Dt(Tt,Rt):De(Ze)?function(qe,It,N){V(function(I){var Z=!1,q=function(Ce,Ee,nt,At){try{Ce.call(Ee,function(Ce){Z||(Z=!0,It!==Ce?ot(I,Ce):Dt(I,Ce))},function(Ce){Z||(Z=!0,Qe(I,Ce))})}catch(it){return it}}(N,It);!Z&&q&&(Z=!0,Qe(I,q))},qe)}(Tt,Rt,Ze):Dt(Tt,Rt)}function ot(Tt,Rt){if(Tt===Rt)Qe(Tt,new TypeError("You cannot resolve a promise with itself"));else if(It=typeof(qe=Rt),null===qe||"object"!==It&&"function"!==It)Dt(Tt,Rt);else{var Ze=void 0;try{Ze=Rt.then}catch(N){return void Qe(Tt,N)}Me(Tt,Rt,Ze)}var qe,It}function yt(Tt){Tt._onerror&&Tt._onerror(Tt._result),Lt(Tt)}function Dt(Tt,Rt){Tt._state===Je&&(Tt._result=Rt,Tt._state=1,0!==Tt._subscribers.length&&V(Lt,Tt))}function Qe(Tt,Rt){Tt._state===Je&&(Tt._state=2,Tt._result=Rt,V(yt,Tt))}function Le(Tt,Rt,Ze,qe){var It=Tt._subscribers,N=It.length;Tt._onerror=null,It[N]=Rt,It[N+1]=Ze,It[N+2]=qe,0===N&&Tt._state&&V(Lt,Tt)}function Lt(Tt){var Rt=Tt._subscribers,Ze=Tt._state;if(0!==Rt.length){for(var qe=void 0,It=void 0,N=Tt._result,I=0;I<Rt.length;I+=3)It=Rt[I+Ze],(qe=Rt[I])?Vt(Ze,qe,It,N):It(N);Tt._subscribers.length=0}}function Vt(Tt,Rt,Ze,qe){var It=De(Ze),N=void 0,I=void 0,Z=!0;if(It){try{N=Ze(qe)}catch(q){Z=!1,I=q}if(Rt===N)return void Qe(Rt,new TypeError("A promises callback cannot return that same promise."))}else N=qe;Rt._state!==Je||(It&&Z?ot(Rt,N):!1===Z?Qe(Rt,I):1===Tt?Dt(Rt,N):2===Tt&&Qe(Rt,N))}var ze=0;function mt(Tt){Tt[_e]=ze++,Tt._state=void 0,Tt._result=void 0,Tt._subscribers=[]}var fn=function(){function Tt(Rt,Ze){this._instanceConstructor=Rt,this.promise=new Rt(he),this.promise[_e]||mt(this.promise),H(Ze)?(this.length=Ze.length,this._remaining=Ze.length,this._result=new Array(this.length),0===this.length?Dt(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ze),0===this._remaining&&Dt(this.promise,this._result))):Qe(this.promise,new Error("Array Methods must be provided an Array"))}return Tt.prototype._enumerate=function(Rt){for(var Ze=0;this._state===Je&&Ze<Rt.length;Ze++)this._eachEntry(Rt[Ze],Ze)},Tt.prototype._eachEntry=function(Rt,Ze){var qe=this._instanceConstructor,It=qe.resolve;if(It===x){var N=void 0,I=void 0,Z=!1;try{N=Rt.then}catch(Ce){Z=!0,I=Ce}if(N===xe&&Rt._state!==Je)this._settledAt(Rt._state,Ze,Rt._result);else if("function"!=typeof N)this._remaining--,this._result[Ze]=Rt;else if(qe===Yt){var q=new qe(he);Z?Qe(q,I):Me(q,Rt,N),this._willSettleAt(q,Ze)}else this._willSettleAt(new qe(function(Ce){return Ce(Rt)}),Ze)}else this._willSettleAt(It(Rt),Ze)},Tt.prototype._settledAt=function(Rt,Ze,qe){var It=this.promise;It._state===Je&&(this._remaining--,2===Rt?Qe(It,qe):this._result[Ze]=qe),0===this._remaining&&Dt(It,this._result)},Tt.prototype._willSettleAt=function(Rt,Ze){var qe=this;Le(Rt,void 0,function(It){return qe._settledAt(1,Ze,It)},function(It){return qe._settledAt(2,Ze,It)})},Tt}(),Yt=function(){function Tt(Rt){this[_e]=ze++,this._result=this._state=void 0,this._subscribers=[],he!==Rt&&("function"!=typeof Rt&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Tt?function(Ze,qe){try{qe(function(It){ot(Ze,It)},function(It){Qe(Ze,It)})}catch(It){Qe(Ze,It)}}(this,Rt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Tt.prototype.catch=function(Rt){return this.then(null,Rt)},Tt.prototype.finally=function(Rt){var qe=this.constructor;return De(Rt)?this.then(function(It){return qe.resolve(Rt()).then(function(){return It})},function(It){return qe.resolve(Rt()).then(function(){throw It})}):this.then(Rt,Rt)},Tt}();return Yt.prototype.then=xe,Yt.all=function(Tt){return new fn(this,Tt).promise},Yt.race=function(Tt){var Rt=this;return H(Tt)?new Rt(function(Ze,qe){for(var It=Tt.length,N=0;N<It;N++)Rt.resolve(Tt[N]).then(Ze,qe)}):new Rt(function(Ze,qe){return qe(new TypeError("You must pass an array to race."))})},Yt.resolve=x,Yt.reject=function(Tt){var Rt=new this(he);return Qe(Rt,Tt),Rt},Yt._setScheduler=function(Tt){k=Tt},Yt._setAsap=function(Tt){V=Tt},Yt._asap=V,Yt.polyfill=function(){var Tt=void 0;if(void 0!==ne.g)Tt=ne.g;else if(typeof self<"u")Tt=self;else try{Tt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Rt=Tt.Promise;if(Rt){var Ze=null;try{Ze=Object.prototype.toString.call(Rt.resolve())}catch{}if("[object Promise]"===Ze&&!Rt.cast)return}Tt.Promise=Yt},Yt.Promise=Yt,Yt}()},1159:function(Ut){"use strict";var $e,ne="object"==typeof Reflect?Reflect:null,De=ne&&"function"==typeof ne.apply?ne.apply:function(ce,ue,se){return Function.prototype.apply.call(ce,ue,se)};$e=ne&&"function"==typeof ne.ownKeys?ne.ownKeys:Object.getOwnPropertySymbols?function(ce){return Object.getOwnPropertyNames(ce).concat(Object.getOwnPropertySymbols(ce))}:function(ce){return Object.getOwnPropertyNames(ce)};var H=Number.isNaN||function(ce){return ce!=ce};function _(){_.init.call(this)}Ut.exports=_,Ut.exports.once=function(ce,ue){return new Promise(function(se,Ne){function $(xe){ce.removeListener(ue,be),Ne(xe)}function be(){"function"==typeof ce.removeListener&&ce.removeListener("error",$),se([].slice.call(arguments))}var xe;te(ce,ue,be,{once:!0}),"error"!==ue&&("function"==typeof(xe=ce).on&&te(xe,"error",$,{once:!0}))})},_.EventEmitter=_,_.prototype._events=void 0,_.prototype._eventsCount=0,_.prototype._maxListeners=void 0;var E=10;function k(ce){if("function"!=typeof ce)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ce)}function V(ce){return void 0===ce._maxListeners?_.defaultMaxListeners:ce._maxListeners}function w(ce,ue,se,Ne){var $,be,xe;if(k(se),void 0===(be=ce._events)?(be=ce._events=Object.create(null),ce._eventsCount=0):(void 0!==be.newListener&&(ce.emit("newListener",ue,se.listener?se.listener:se),be=ce._events),xe=be[ue]),void 0===xe)xe=be[ue]=se,++ce._eventsCount;else if("function"==typeof xe?xe=be[ue]=Ne?[se,xe]:[xe,se]:Ne?xe.unshift(se):xe.push(se),($=V(ce))>0&&xe.length>$&&!xe.warned){xe.warned=!0;var _e=new Error("Possible EventEmitter memory leak detected. "+xe.length+" "+String(ue)+" listeners added. Use emitter.setMaxListeners() to increase limit");_e.name="MaxListenersExceededWarning",_e.emitter=ce,_e.type=ue,_e.count=xe.length,console&&console.warn&&console.warn(_e)}return ce}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function G(ce,ue,se){var Ne={fired:!1,wrapFn:void 0,target:ce,type:ue,listener:se},$=F.bind(Ne);return $.listener=se,Ne.wrapFn=$,$}function T(ce,ue,se){var Ne=ce._events;if(void 0===Ne)return[];var $=Ne[ue];return void 0===$?[]:"function"==typeof $?se?[$.listener||$]:[$]:se?function(be){for(var xe=new Array(be.length),x=0;x<xe.length;++x)xe[x]=be[x].listener||be[x];return xe}($):O($,$.length)}function M(ce){var ue=this._events;if(void 0!==ue){var se=ue[ce];if("function"==typeof se)return 1;if(void 0!==se)return se.length}return 0}function O(ce,ue){for(var se=new Array(ue),Ne=0;Ne<ue;++Ne)se[Ne]=ce[Ne];return se}function te(ce,ue,se,Ne){if("function"==typeof ce.on)Ne.once?ce.once(ue,se):ce.on(ue,se);else{if("function"!=typeof ce.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ce);ce.addEventListener(ue,function $(be){Ne.once&&ce.removeEventListener(ue,$),se(be)})}}Object.defineProperty(_,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(ce){if("number"!=typeof ce||ce<0||H(ce))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ce+".");E=ce}}),_.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_.prototype.setMaxListeners=function(ce){if("number"!=typeof ce||ce<0||H(ce))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ce+".");return this._maxListeners=ce,this},_.prototype.getMaxListeners=function(){return V(this)},_.prototype.emit=function(ce){for(var ue=[],se=1;se<arguments.length;se++)ue.push(arguments[se]);var Ne="error"===ce,$=this._events;if(void 0!==$)Ne=Ne&&void 0===$.error;else if(!Ne)return!1;if(Ne){var be;if(ue.length>0&&(be=ue[0]),be instanceof Error)throw be;var xe=new Error("Unhandled error."+(be?" ("+be.message+")":""));throw xe.context=be,xe}var x=$[ce];if(void 0===x)return!1;if("function"==typeof x)De(x,this,ue);else{var _e=x.length,he=O(x,_e);for(se=0;se<_e;++se)De(he[se],this,ue)}return!0},_.prototype.on=_.prototype.addListener=function(ce,ue){return w(this,ce,ue,!1)},_.prototype.prependListener=function(ce,ue){return w(this,ce,ue,!0)},_.prototype.once=function(ce,ue){return k(ue),this.on(ce,G(this,ce,ue)),this},_.prototype.prependOnceListener=function(ce,ue){return k(ue),this.prependListener(ce,G(this,ce,ue)),this},_.prototype.off=_.prototype.removeListener=function(ce,ue){var se,Ne,$,be,xe;if(k(ue),void 0===(Ne=this._events))return this;if(void 0===(se=Ne[ce]))return this;if(se===ue||se.listener===ue)0==--this._eventsCount?this._events=Object.create(null):(delete Ne[ce],Ne.removeListener&&this.emit("removeListener",ce,se.listener||ue));else if("function"!=typeof se){for($=-1,be=se.length-1;be>=0;be--)if(se[be]===ue||se[be].listener===ue){xe=se[be].listener,$=be;break}if($<0)return this;0===$?se.shift():function(x,_e){for(;_e+1<x.length;_e++)x[_e]=x[_e+1];x.pop()}(se,$),1===se.length&&(Ne[ce]=se[0]),void 0!==Ne.removeListener&&this.emit("removeListener",ce,xe||ue)}return this},_.prototype.removeAllListeners=function(ce){var ue,se,Ne;if(void 0===(se=this._events))return this;if(void 0===se.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==se[ce]&&(0==--this._eventsCount?this._events=Object.create(null):delete se[ce]),this;if(0===arguments.length){var $,be=Object.keys(se);for(Ne=0;Ne<be.length;++Ne)"removeListener"!==($=be[Ne])&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ue=se[ce]))this.removeListener(ce,ue);else if(void 0!==ue)for(Ne=ue.length-1;Ne>=0;Ne--)this.removeListener(ce,ue[Ne]);return this},_.prototype.listeners=function(ce){return T(this,ce,!0)},_.prototype.rawListeners=function(ce){return T(this,ce,!1)},_.listenerCount=function(ce,ue){return"function"==typeof ce.listenerCount?ce.listenerCount(ue):M.call(ce,ue)},_.prototype.listenerCount=M,_.prototype.eventNames=function(){return this._eventsCount>0?$e(this._events):[]}},3101:function(Ut){"use strict";var $e=Array.isArray,ne=Object.keys,De=Object.prototype.hasOwnProperty;Ut.exports=function H(_,E){if(_===E)return!0;if(_&&E&&"object"==typeof _&&"object"==typeof E){var k,V,w,F=$e(_),G=$e(E);if(F&&G){if((V=_.length)!=E.length)return!1;for(k=V;0!=k--;)if(!H(_[k],E[k]))return!1;return!0}if(F!=G)return!1;var T=_ instanceof Date,M=E instanceof Date;if(T!=M)return!1;if(T&&M)return _.getTime()==E.getTime();var O=_ instanceof RegExp,te=E instanceof RegExp;if(O!=te)return!1;if(O&&te)return _.toString()==E.toString();var ce=ne(_);if((V=ce.length)!==ne(E).length)return!1;for(k=V;0!=k--;)if(!De.call(E,ce[k]))return!1;for(k=V;0!=k--;)if(!H(_[w=ce[k]],E[w]))return!1;return!0}return _!=_&&E!=E}},3362:function(Ut,$e,ne){!function(De,H,_,E,k){function V(I){if("contents"in I)for(var Z=("styleAttrs"in I?I.styleAttrs[E.byName.ruby.qname]:null),q="span"===I.kind&&("container"===Z||"textContainer"===Z||"baseContainer"===Z),Ce=I.contents.length-1;Ce>=0;Ce--)!q||"styleAttrs"in I.contents[Ce]&&E.byName.ruby.qname in I.contents[Ce].styleAttrs?V(I.contents[Ce]):delete I.contents[Ce]}function w(I,Z,q,Ce){var Ee=Ce&&"seq"===Ce.timeContainer,nt=0;Ce&&(nt=Ee&&q?q.end:Ce.begin),Z.begin=Z.explicit_begin?Z.explicit_begin+nt:nt;var At=Z.begin,it=null;if("sets"in Z)for(var et=0;et<Z.sets.length;et++)w(I,Z.sets[et],it,Z),At="seq"===Z.timeContainer?Z.sets[et].end:Math.max(At,Z.sets[et].end),it=Z.sets[et];if("contents"in Z){if("contents"in Z)for(var rt=0;rt<Z.contents.length;rt++)w(I,Z.contents[rt],it,Z),At="seq"===Z.timeContainer?Z.contents[rt].end:Math.max(At,Z.contents[rt].end),it=Z.contents[rt]}else At=Ee?Z.begin:Number.POSITIVE_INFINITY;Z.end=null!==Z.explicit_end&&null!==Z.explicit_dur?Math.min(Z.begin+Z.explicit_dur,nt+Z.explicit_end):null===Z.explicit_end&&null!==Z.explicit_dur?Z.begin+Z.explicit_dur:null!==Z.explicit_end&&null===Z.explicit_dur?nt+Z.explicit_end:At,delete Z.explicit_begin,delete Z.explicit_dur,delete Z.explicit_end,I._registerEvent(Z)}function F(I){this.node=I}function G(){this.events=[],this.head=new T,this.body=null}function T(){this.styling=new M,this.layout=new ce}function M(){this.styles={},this.initials={}}function O(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function te(){this.styleAttrs=null}function ce(){this.regions={}}function ue(I,Z){se.call(this,"image"),this.src=I,this.type=Z}function se(I){this.kind=I}function Ne(I){this.id=I}function $(I){this.regionID=I}function be(I){this.styleAttrs=I}function xe(I){this.sets=I}function x(I){this.contents=I}function _e(I,Z,q){this.explicit_begin=I,this.explicit_end=Z,this.explicit_dur=q}function he(){se.call(this,"body")}function Je(){se.call(this,"div")}function Me(){se.call(this,"p")}function ot(){se.call(this,"span")}function yt(){se.call(this,"span")}function Dt(){se.call(this,"br")}function Qe(){}function Le(){}function Lt(I){return I&&"xml:id"in I.attributes&&I.attributes["xml:id"].value||null}function Vt(I){return I&&"style"in I.attributes?I.attributes.style.value.split(" "):[]}function ze(I,Z){var q={};if(null!==I)for(var Ce in I.attributes){var Ee=I.attributes[Ce].uri+" "+I.attributes[Ce].local,nt=E.byQName[Ee];if(void 0!==nt){var At=nt.parse(I.attributes[Ce].value);null!==At?(q[Ee]=At,nt===E.byName.zIndex&&Ze(Z,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):qe(Z,"Cannot parse styling attribute "+Ee+" --\x3e "+I.attributes[Ce].value)}}return q}function mt(I,Z,q){for(var Ce in I.attributes)if(I.attributes[Ce].uri===Z&&I.attributes[Ce].local===q)return I.attributes[Ce].value;return null}function fn(I,Z,q){var Ce,Ee=null;return null!==(Ce=/^(\d+(?:\.\d+)?)f$/.exec(q))?null!==Z&&(Ee=parseFloat(Ce[1])/Z):null!==(Ce=/^(\d+(?:\.\d+)?)t$/.exec(q))?null!==I&&(Ee=parseFloat(Ce[1])/I):null!==(Ce=/^(\d+(?:\.\d+)?)ms$/.exec(q))?Ee=parseFloat(Ce[1])/1e3:null!==(Ce=/^(\d+(?:\.\d+)?)s$/.exec(q))?Ee=parseFloat(Ce[1]):null!==(Ce=/^(\d+(?:\.\d+)?)h$/.exec(q))?Ee=3600*parseFloat(Ce[1]):null!==(Ce=/^(\d+(?:\.\d+)?)m$/.exec(q))?Ee=60*parseFloat(Ce[1]):null!==(Ce=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(q))?Ee=3600*parseInt(Ce[1])+60*parseInt(Ce[2])+parseFloat(Ce[3]):null!==(Ce=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(q))&&null!==Z&&(Ee=3600*parseInt(Ce[1])+60*parseInt(Ce[2])+parseInt(Ce[3])+(null===Ce[4]?0:parseInt(Ce[4])/Z)),Ee}function Yt(I,Z,q){for(;Z.styleRefs.length>0;){var Ce=Z.styleRefs.pop();Ce in I.styles?(Yt(I,I.styles[Ce],q),Rt(I.styles[Ce].styleAttrs,Z.styleAttrs)):qe(q,"Non-existant style id referenced")}}function Tt(I,Z,q,Ce){for(var Ee=Z.length-1;Ee>=0;Ee--){var nt=Z[Ee];nt in I.styles?Rt(I.styles[nt].styleAttrs,q):qe(Ce,"Non-existant style id referenced")}}function Rt(I,Z){for(var q in I)I.hasOwnProperty(q)&&(q in Z||(Z[q]=I[q]))}function Ze(I,Z){if(I&&I.warn&&I.warn(Z))throw Z}function qe(I,Z){if(I&&I.error&&I.error(Z))throw Z}function It(I,Z){throw I&&I.fatal&&I.fatal(Z),Z}function N(I,Z){for(var q,Ce=0,Ee=I.length-1;Ce<=Ee;){var nt=I[q=Math.floor((Ce+Ee)/2)];if(nt<Z)Ce=q+1;else{if(!(nt>Z))return{found:!0,index:q};Ee=q-1}}return{found:!1,index:Ce}}De.fromXML=function(I,Z,q){var Ce=H.parser(!0,{xmlns:!0}),Ee=[],nt=[],At=[],it=0,et=null;Ce.onclosetag=function(Zt){if(Ee[0]instanceof Qe)null!==et.head&&null!==et.head.styling&&Tt(et.head.styling,Ee[0].styleRefs,Ee[0].styleAttrs,Z),delete Ee[0].styleRefs;else if(Ee[0]instanceof M)for(var xn in Ee[0].styles)Ee[0].styles.hasOwnProperty(xn)&&Yt(Ee[0],Ee[0].styles[xn],Z);else if(Ee[0]instanceof Me||Ee[0]instanceof ot){if(Ee[0].contents.length>1){var Rn,Mn=[Ee[0].contents[0]];for(Rn=1;Rn<Ee[0].contents.length;Rn++)Ee[0].contents[Rn]instanceof yt&&Mn[Mn.length-1]instanceof yt?Mn[Mn.length-1].text+=Ee[0].contents[Rn].text:Mn.push(Ee[0].contents[Rn]);Ee[0].contents=Mn}Ee[0]instanceof ot&&1===Ee[0].contents.length&&Ee[0].contents[0]instanceof yt&&(Ee[0].text=Ee[0].contents[0].text,delete Ee[0].contents)}else Ee[0]instanceof F&&(Ee[0].node.uri===_.ns_tt&&"metadata"===Ee[0].node.local?it--:it>0&&q&&"onCloseTag"in q&&q.onCloseTag());At.shift(),nt.shift(),Ee.shift()},Ce.ontext=function(Zt){if(void 0!==Ee[0])if(Ee[0]instanceof ot||Ee[0]instanceof Me){if(Ee[0]instanceof ot){var xn=Ee[0].styleAttrs[E.byName.ruby.qname];if("container"===xn||"textContainer"===xn||"baseContainer"===xn)return}var Rn=new yt;Rn.initFromText(et,Ee[0],Zt,nt[0],At[0],Z),Ee[0].contents.push(Rn)}else Ee[0]instanceof F&&it>0&&q&&"onText"in q&&q.onText(Zt)},Ce.onopentag=function(Zt){var xn=Zt.attributes["xml:space"];At.unshift(xn?xn.value:0===At.length?"default":At[0]);var Rn=Zt.attributes["xml:lang"];if(nt.unshift(Rn?Rn.value:0===nt.length?"":nt[0]),Zt.uri===_.ns_tt)if("tt"===Zt.local)null!==et&&It(Z,"Two <tt> elements at ("+this.line+","+this.column+")"),(et=new G).initFromNode(Zt,nt[0],Z),Ee.unshift(et);else if("head"===Zt.local)Ee[0]instanceof G||It(Z,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),Ee.unshift(et.head);else if("styling"===Zt.local)Ee[0]instanceof T||It(Z,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),Ee.unshift(et.head.styling);else if("style"===Zt.local){var Mn;Ee[0]instanceof M?((Mn=new O).initFromNode(Zt,Z),Mn.id?et.head.styling.styles[Mn.id]=Mn:qe(Z,"<style> element missing @id attribute"),Ee.unshift(Mn)):Ee[0]instanceof Qe?((Mn=new O).initFromNode(Zt,Z),Rt(Mn.styleAttrs,Ee[0].styleAttrs),Ee.unshift(Mn)):It(Z,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===Zt.local){var Xn;if(Ee[0]instanceof M){for(var Ir in(Xn=new te).initFromNode(Zt,Z),Xn.styleAttrs)Xn.styleAttrs.hasOwnProperty(Ir)&&(et.head.styling.initials[Ir]=Xn.styleAttrs[Ir]);Ee.unshift(Xn)}else It(Z,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===Zt.local)Ee[0]instanceof T||It(Z,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),Ee.unshift(et.head.layout);else if("region"===Zt.local){Ee[0]instanceof ce||It(Z,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Yr=new Qe;Yr.initFromNode(et,Zt,nt[0],Z),!Yr.id||Yr.id in et.head.layout.regions?qe(Z,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):et.head.layout.regions[Yr.id]=Yr,Ee.unshift(Yr)}else if("body"===Zt.local){Ee[0]instanceof G||It(Z,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==et.body&&It(Z,"Second <body> element at "+this.line+","+this.column+")");var Li=new he;Li.initFromNode(et,Zt,nt[0],Z),et.body=Li,Ee.unshift(Li)}else if("div"===Zt.local){Ee[0]instanceof Je||Ee[0]instanceof he||It(Z,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var ei=new Je;ei.initFromNode(et,Ee[0],Zt,nt[0],Z);var gi=ei.styleAttrs[E.byName.backgroundImage.qname];gi&&(ei.contents.push(new ue(gi)),delete ei.styleAttrs[E.byName.backgroundImage.qname]),Ee[0].contents.push(ei),Ee.unshift(ei)}else if("image"===Zt.local){Ee[0]instanceof Je||It(Z,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Xi=new ue;Xi.initFromNode(et,Ee[0],Zt,nt[0],Z),Ee[0].contents.push(Xi),Ee.unshift(Xi)}else if("p"===Zt.local){Ee[0]instanceof Je||It(Z,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var ti=new Me;ti.initFromNode(et,Ee[0],Zt,nt[0],Z),Ee[0].contents.push(ti),Ee.unshift(ti)}else if("span"===Zt.local){Ee[0]instanceof ot||Ee[0]instanceof Me||It(Z,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Mo=new ot;Mo.initFromNode(et,Ee[0],Zt,nt[0],At[0],Z),Ee[0].contents.push(Mo),Ee.unshift(Mo)}else if("br"===Zt.local){Ee[0]instanceof ot||Ee[0]instanceof Me||It(Z,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Bi=new Dt;Bi.initFromNode(et,Ee[0],Zt,nt[0],Z),Ee[0].contents.push(Bi),Ee.unshift(Bi)}else if("set"===Zt.local){Ee[0]instanceof ot||Ee[0]instanceof Me||Ee[0]instanceof Je||Ee[0]instanceof he||Ee[0]instanceof Qe||Ee[0]instanceof Dt||It(Z,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Eo=new Le;Eo.initFromNode(et,Ee[0],Zt,Z),Ee[0].sets.push(Eo),Ee.unshift(Eo)}else Ee.unshift(new F(Zt));else Ee.unshift(new F(Zt));if(Ee[0]instanceof F)if(Zt.uri===_.ns_tt&&"metadata"===Zt.local)it++;else if(it>0&&q&&"onOpenTag"in q){var Zo=[];for(var _o in Zt.attributes)Zo[Zt.attributes[_o].uri+" "+Zt.attributes[_o].local]={uri:Zt.attributes[_o].uri,local:Zt.attributes[_o].local,value:Zt.attributes[_o].value};q.onOpenTag(Zt.uri,Zt.local,Zo)}},Ce.write(I).close(),delete et.head.styling.styles;var rt=!1;for(var Et in et.head.layout.regions)if(et.head.layout.regions.hasOwnProperty(Et)){rt=!0;break}if(!rt){var Ot=Qe.prototype.createDefaultRegion(et.lang);et.head.layout.regions[Ot.id]=Ot}for(var _n in et.head.layout.regions)et.head.layout.regions.hasOwnProperty(_n)&&w(et,et.head.layout.regions[_n],null,null);return et.body&&w(et,et.body,null,null),et.body&&V(et.body),et},G.prototype.initFromNode=function(I,Z,q){var Ce=function(it,et){var rt=mt(it,_.ns_ttp,"cellResolution"),Et=15,Ot=32;if(null!==rt){var _n=/(\d+) (\d+)/.exec(rt);null!==_n?(Ot=parseInt(_n[1]),Et=parseInt(_n[2])):Ze(et,"Malformed cellResolution value (using initial value instead)")}return{w:Ot,h:Et}}(I,q);this.cellLength={h:new k.ComputedLength(0,1/Ce.h),w:new k.ComputedLength(1/Ce.w,0)};var Ee=function(it,et){var rt,Et=mt(it,_.ns_ttp,"frameRate"),Ot=30;null!==Et&&(null!==(rt=/(\d+)/.exec(Et))?Ot=parseInt(rt[1]):Ze(et,"Malformed frame rate attribute (using initial value instead)"));var _n=mt(it,_.ns_ttp,"frameRateMultiplier"),Zt=1;null!==_n&&(null!==(rt=/(\d+) (\d+)/.exec(_n))?Zt=parseInt(rt[1])/parseInt(rt[2]):Ze(et,"Malformed frame rate multiplier attribute (using initial value instead)"));var xn=Zt*Ot,Rn=1,Mn=mt(it,_.ns_ttp,"tickRate");return null===Mn?null!==Et&&(Rn=xn):null!==(rt=/(\d+)/.exec(Mn))?Rn=parseInt(rt[1]):Ze(et,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:xn,tickRate:Rn}}(I,q);this.effectiveFrameRate=Ee.effectiveFrameRate,this.tickRate=Ee.tickRate,this.aspectRatio=function(it,et){var rt=mt(it,_.ns_ittp,"aspectRatio");null===rt&&(rt=mt(it,_.ns_ttp,"displayAspectRatio"));var Et=null;if(null!==rt){var Ot=/(\d+)\s+(\d+)/.exec(rt);if(null!==Ot){var _n=parseInt(Ot[1]),Zt=parseInt(Ot[2]);0!==_n&&0!==Zt?Et=_n/Zt:qe(et,"Illegal aspectRatio values (ignoring)")}else qe(et,"Malformed aspectRatio attribute (ignoring)")}return Et}(I,q);var nt=mt(I,_.ns_ttp,"timeBase");null!==nt&&"media"!==nt&&It(q,"Unsupported time base");var At=function(it,et){var rt=mt(it,_.ns_tts,"extent");if(null===rt)return null;var Et=rt.split(" ");if(2!==Et.length)return Ze(et,"Malformed extent (ignoring)"),null;var Ot=k.parseLength(Et[0]),_n=k.parseLength(Et[1]);return _n&&Ot?{h:_n,w:Ot}:(Ze(et,"Malformed extent values (ignoring)"),null)}(I,q);null===At?this.pxLength={h:null,w:null}:("px"===At.h.unit&&"px"===At.w.unit||It(q,"Extent on TT must be in px or absent"),this.pxLength={h:new k.ComputedLength(0,1/At.h.value),w:new k.ComputedLength(1/At.w.value,0)}),this.dimensions={h:new k.ComputedLength(0,1),w:new k.ComputedLength(1,0)},this.lang=Z},G.prototype._registerEvent=function(I){if(!(I.end<=I.begin)){var Z=N(this.events,I.begin);if(Z.found||this.events.splice(Z.index,0,I.begin),I.end!==Number.POSITIVE_INFINITY){var q=N(this.events,I.end);q.found||this.events.splice(q.index,0,I.end)}}},G.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},G.prototype.getMediaTimeEvents=function(){return this.events},O.prototype.initFromNode=function(I,Z){this.id=Lt(I),this.styleAttrs=ze(I,Z),this.styleRefs=Vt(I)},te.prototype.initFromNode=function(I,Z){for(var q in this.styleAttrs={},I.attributes)I.attributes[q].uri!==_.ns_itts&&I.attributes[q].uri!==_.ns_ebutts&&I.attributes[q].uri!==_.ns_tts||(this.styleAttrs[I.attributes[q].uri+" "+I.attributes[q].local]=I.attributes[q].value)},ue.prototype.initFromNode=function(I,Z,q,Ce,Ee){this.src="src"in q.attributes?q.attributes.src.value:null,this.src||qe(Ee,"Invalid image@src attribute"),this.type="type"in q.attributes?q.attributes.type.value:null,this.type||qe(Ee,"Invalid image@type attribute"),be.prototype.initFromNode.call(this,I,Z,q,Ee),_e.prototype.initFromNode.call(this,I,Z,q,Ee),xe.prototype.initFromNode.call(this,I,Z,q,Ee),$.prototype.initFromNode.call(this,I,Z,q,Ee),this.lang=Ce},Ne.prototype.initFromNode=function(I,Z,q,Ce){this.id=Lt(q)},$.prototype.initFromNode=function(I,Z,q,Ce){var Ee;this.regionID=(Ee=q)&&"region"in Ee.attributes?Ee.attributes.region.value:""},be.prototype.initFromNode=function(I,Z,q,Ce){this.styleAttrs=ze(q,Ce),null!==I.head&&null!==I.head.styling&&Tt(I.head.styling,Vt(q),this.styleAttrs,Ce)},xe.prototype.initFromNode=function(I,Z,q,Ce){this.sets=[]},x.prototype.initFromNode=function(I,Z,q,Ce){this.contents=[]},_e.prototype.initFromNode=function(I,Z,q,Ce){var nt,it,Ee=function(nt,At,it,et){var rt=null;it&&"begin"in it.attributes&&null===(rt=fn(nt.tickRate,nt.effectiveFrameRate,it.attributes.begin.value))&&Ze(et,"Malformed begin value "+it.attributes.begin.value+" (using 0)");var Et=null;it&&"dur"in it.attributes&&null===(Et=fn(nt.tickRate,nt.effectiveFrameRate,it.attributes.dur.value))&&Ze(et,"Malformed dur value "+it.attributes.dur.value+" (ignoring)");var Ot=null;return it&&"end"in it.attributes&&null===(Ot=fn(nt.tickRate,nt.effectiveFrameRate,it.attributes.end.value))&&Ze(et,"Malformed end value (ignoring)"),{explicit_begin:rt,explicit_end:Ot,explicit_dur:Et}}(I,0,q,Ce);this.explicit_begin=Ee.explicit_begin,this.explicit_end=Ee.explicit_end,this.explicit_dur=Ee.explicit_dur,this.timeContainer=(it=(nt=q)&&"timeContainer"in nt.attributes?nt.attributes.timeContainer.value:null)&&"par"!==it?"seq"===it?"seq":(qe(Ce,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"},he.prototype.initFromNode=function(I,Z,q,Ce){be.prototype.initFromNode.call(this,I,null,Z,Ce),_e.prototype.initFromNode.call(this,I,null,Z,Ce),xe.prototype.initFromNode.call(this,I,null,Z,Ce),$.prototype.initFromNode.call(this,I,null,Z,Ce),x.prototype.initFromNode.call(this,I,null,Z,Ce),this.lang=q},Je.prototype.initFromNode=function(I,Z,q,Ce,Ee){be.prototype.initFromNode.call(this,I,Z,q,Ee),_e.prototype.initFromNode.call(this,I,Z,q,Ee),xe.prototype.initFromNode.call(this,I,Z,q,Ee),$.prototype.initFromNode.call(this,I,Z,q,Ee),x.prototype.initFromNode.call(this,I,Z,q,Ee),this.lang=Ce},Me.prototype.initFromNode=function(I,Z,q,Ce,Ee){be.prototype.initFromNode.call(this,I,Z,q,Ee),_e.prototype.initFromNode.call(this,I,Z,q,Ee),xe.prototype.initFromNode.call(this,I,Z,q,Ee),$.prototype.initFromNode.call(this,I,Z,q,Ee),x.prototype.initFromNode.call(this,I,Z,q,Ee),this.lang=Ce},ot.prototype.initFromNode=function(I,Z,q,Ce,Ee,nt){be.prototype.initFromNode.call(this,I,Z,q,nt),_e.prototype.initFromNode.call(this,I,Z,q,nt),xe.prototype.initFromNode.call(this,I,Z,q,nt),$.prototype.initFromNode.call(this,I,Z,q,nt),x.prototype.initFromNode.call(this,I,Z,q,nt),this.space=Ee,this.lang=Ce},yt.prototype.initFromText=function(I,Z,q,Ce,Ee,nt){_e.prototype.initFromNode.call(this,I,Z,null,nt),this.text=q,this.space=Ee,this.lang=Ce},Dt.prototype.initFromNode=function(I,Z,q,Ce,Ee){$.prototype.initFromNode.call(this,I,Z,q,Ee),_e.prototype.initFromNode.call(this,I,Z,q,Ee),this.lang=Ce},Qe.prototype.createDefaultRegion=function(I){var Z=new Qe;return Ne.call(Z,""),be.call(Z,{}),xe.call(Z,[]),_e.call(Z,0,Number.POSITIVE_INFINITY,null),this.lang=I,Z},Qe.prototype.initFromNode=function(I,Z,q,Ce){Ne.prototype.initFromNode.call(this,I,null,Z,Ce),_e.prototype.initFromNode.call(this,I,null,Z,Ce),xe.prototype.initFromNode.call(this,I,null,Z,Ce),this.styleAttrs=ze(Z,Ce),this.styleRefs=Vt(Z),this.lang=q},Le.prototype.initFromNode=function(I,Z,q,Ce){_e.prototype.initFromNode.call(this,I,Z,q,Ce);var Ee=ze(q,Ce);for(var nt in this.qname=null,this.value=null,Ee)if(Ee.hasOwnProperty(nt)){if(this.qname){qe(Ce,"More than one style specified on set");break}this.qname=nt,this.value=Ee[nt]}}}($e,typeof sax>"u"?ne(5378):sax,typeof imscNames>"u"?ne(210):imscNames,typeof imscStyles>"u"?ne(6811):imscStyles,typeof imscUtils>"u"?ne(5926):imscUtils)},506:function(Ut,$e,ne){var De=/firefox/i.test(navigator.userAgent);!function(H,_,E){function k(x,_e,he,Je){var Me;if("region"===he.kind)(Me=document.createElement("div")).style.position="absolute";else if("body"===he.kind)Me=document.createElement("div");else if("div"===he.kind)Me=document.createElement("div");else if("image"===he.kind){if(Me=document.createElement("img"),null!==x.imgResolver&&null!==he.src){var ot=x.imgResolver(he.src,Me);ot&&(Me.src=ot),Me.height=x.regionH,Me.width=x.regionW}}else if("p"===he.kind)Me=document.createElement("p");else if("span"===he.kind)if("container"===he.styleAttrs[E.byName.ruby.qname])Me=document.createElement("ruby"),x.ruby=!0;else if("base"===he.styleAttrs[E.byName.ruby.qname])Me=document.createElement("span");else if("text"===he.styleAttrs[E.byName.ruby.qname])Me=document.createElement("rt");else if("baseContainer"===he.styleAttrs[E.byName.ruby.qname])Me=document.createElement("rbc");else if("textContainer"===he.styleAttrs[E.byName.ruby.qname])Me=document.createElement("rtc");else{if("delimiter"===he.styleAttrs[E.byName.ruby.qname])return;Me=document.createElement("span")}else"br"===he.kind&&(Me=document.createElement("br"));if(Me){if(he.lang&&("region"!==he.kind&&he.lang===Je.lang||(Me.lang=he.lang)),_e.appendChild(Me),Me.style.margin="0","region"===he.kind){var yt=he.styleAttrs[E.byName.writingMode.qname];"lrtb"===yt||"lr"===yt?(x.ipd="lr",x.bpd="tb"):"rltb"===yt||"rl"===yt?(x.ipd="rl",x.bpd="tb"):"tblr"===yt?(x.ipd="tb",x.bpd="lr"):"tbrl"!==yt&&"tb"!==yt||(x.ipd="tb",x.bpd="rl")}else"p"===he.kind&&"tb"===x.bpd&&(x.ipd="ltr"===he.styleAttrs[E.byName.direction.qname]?"lr":"rl");for(var Qe=0;Qe<te.length;Qe++){var Le=te[Qe],Lt=he.styleAttrs[Le.qname];void 0!==Lt&&null!==Le.map&&Le.map(x,Me,he,Lt)}var Vt=Me,ze=he.styleAttrs[E.byName.linePadding.qname];if(ze&&!ze.isZero()){var mt=ze.toUsedLength(x.w,x.h);if(mt>0){var fn=Math.ceil(mt)+"px";"tb"===x.bpd?(Vt.style.paddingLeft=fn,Vt.style.paddingRight=fn):(Vt.style.paddingTop=fn,Vt.style.paddingBottom=fn),x.lp=ze}}var Yt=he.styleAttrs[E.byName.multiRowAlign.qname];if(Yt&&"auto"!==Yt){var Tt=document.createElement("span");Tt.style.display="inline-block",Tt.style.textAlign=Yt,Me.appendChild(Tt),Vt=Tt,x.mra=Yt}var Rt=he.styleAttrs[E.byName.rubyReserve.qname];if(Rt&&"none"!==Rt[0]&&(x.rubyReserve=Rt),he.styleAttrs[E.byName.fillLineGap.qname]&&(x.flg=!0),"span"===he.kind&&he.text){var Ze=he.styleAttrs[E.byName.textEmphasis.qname];if(Ze&&"none"!==Ze.style&&(x.textEmphasis=!0),E.byName.textCombine.qname in he.styleAttrs&&"all"===he.styleAttrs[E.byName.textCombine.qname])Me.textContent=he.text,Me._isd_element=he,Ze&&M(x,Me,0,Ze);else for(var qe="",It=0;It<he.text.length;It++){qe+=he.text.charAt(It);var N=he.text.charCodeAt(It);if(N<55296||N>56319||It===he.text.length-1){var I=document.createElement("span");I.textContent=qe,Ze&&M(x,I,0,Ze),Me.appendChild(I),qe="",I._isd_element=he}}}if("contents"in he)for(var Z=0;Z<he.contents.length;Z++)k(x,Vt,he.contents[Z],he);var q=[];if("p"===he.kind&&(T(x,Vt,q,null),x.rubyReserve&&(function(it,et){for(var rt=0;rt<it.length;rt++){var Et,Ot,_n=document.createElement("ruby"),Zt=document.createElement("span");Zt.textContent="\u200b",_n.appendChild(Zt);var Rn=et.rubyReserve[1].toUsedLength(et.w,et.h)+"px";"both"===et.rubyReserve[0]||"outside"===et.rubyReserve[0]&&1==it.length?((Et=document.createElement("rtc")).style[Ne]=se?"after":"under",Et.textContent="\u200b",Et.style.fontSize=Rn,(Ot=document.createElement("rtc")).style[Ne]=se?"before":"over",Ot.textContent="\u200b",Ot.style.fontSize=Rn,_n.appendChild(Et),_n.appendChild(Ot)):((Et=document.createElement("rtc")).textContent="\u200b",Et.style.fontSize=Rn,Et.style[Ne]="after"===et.rubyReserve[0]||"outside"===et.rubyReserve[0]&&rt>0?se?"after":"tb"===et.bpd||"rl"===et.bpd?"under":"over":se?"before":"tb"===et.bpd||"rl"===et.bpd?"over":"under",_n.appendChild(Et));for(var Mn=null,Xn=0;Xn<it[rt].rbc.length;Xn++)if("ruby"===it[rt].rbc[Xn].localName){Mn=it[rt].rbc[Xn];for(var Ir=0;Ir<Mn.style.length;Ir++)_n.style.setProperty(Mn.style.item(Ir),Mn.style.getPropertyValue(Mn.style.item(Ir)));break}(Mn=Mn||it[rt].elements[0].node).parentElement.insertBefore(_n,Mn)}}(q,x),x.rubyReserve=null),(x.ruby||x.rubyReserve)&&(function(it,et){for(var rt=0;rt<it.length;rt++)for(var Et=0;Et<it[rt].rbc.length;Et++)it[rt].rbc[Et].style[Ne]||(it[rt].rbc[Et].style[Ne]=se?0===rt?"before":"after":"tb"===et.bpd||"rl"===et.bpd?0===rt?"over":"under":0===rt?"under":"over")}(q,x),x.ruby=null),x.textEmphasis&&(function(it,et){for(var rt=0;rt<it.length;rt++)for(var Et=0;Et<it[rt].te.length;Et++)it[rt].te[Et].style[be]&&"none"!==it[rt].te[Et].style[be]||(it[rt].te[Et].style[be]="tb"===et.bpd?0===rt?"left over":"left under":"rl"===et.bpd?0===rt?"right under":"left under":0===rt?"left under":"right under")}(q,x),x.textEmphasis=null),x.mra&&(function(it){for(var et=0;et<it.length-1;et++){var rt=it[et].elements.length;if(0!==rt&&!1===it[et].br){var Et=document.createElement("br"),Ot=it[et].elements[rt-1].node;Ot.parentElement.insertBefore(Et,Ot.nextSibling)}}}(q),x.mra=null),x.lp&&(function(it,et,rt){if(null!==it)for(var Et=0;Et<it.length;Et++){var Ot=it[Et].elements.length,_n=Math.ceil(et)+"px",Zt="-"+Math.ceil(et)+"px";if(0!==Ot){var xn=it[Et].elements[it[Et].start_elem],Rn=it[Et].elements[it[Et].end_elem];if(xn===Rn){var Mn=xn.node.getBoundingClientRect();if(0==Mn.width||0==Mn.height)continue}"lr"===rt.ipd?(xn.node.style.marginLeft=Zt,xn.node.style.paddingLeft=_n):"rl"===rt.ipd?(xn.node.style.paddingRight=_n,xn.node.style.marginRight=Zt):"tb"===rt.ipd&&(xn.node.style.paddingTop=_n,xn.node.style.marginTop=Zt),"lr"===rt.ipd?(De||(Rn.node.style.marginRight=Zt),Rn.node.style.paddingRight=_n):"rl"===rt.ipd?(Rn.node.style.paddingLeft=_n,De||(Rn.node.style.marginLeft=Zt)):"tb"===rt.ipd&&(Rn.node.style.paddingBottom=_n,Rn.node.style.marginBottom=Zt)}}}(q,x.lp.toUsedLength(x.w,x.h),x),x.lp=null),function(it,et){for(var rt=0;rt<it.length;rt++)for(var Et=it[rt],Ot=1;Ot<Et.elements.length;)w(Et.elements[Ot-1].node,Et.elements[Ot].node,et)?Et.elements.splice(Ot,1):Ot++;for(var xn,Rn,Mn=[],Xn=0;Xn<it.length;Xn++)for(var Ir=0;Ir<it[Xn].elements.length;Ir++)(Rn=V(xn=it[Xn].elements[Ir].node,Mn,!1))&&(xn.style.backgroundColor=Rn);for(var Yr=0;Yr<Mn.length;Yr++)Mn[Yr].style.backgroundColor=""}(q,x),x.flg)){var Ce=G(Vt.getBoundingClientRect(),x);(function(it,et,rt,Et,Ot){for(var _n=Math.sign(rt-et),Zt=0;Zt<=it.length;Zt++){var xn,Rn,Mn,Xn;if(xn=0===Zt?Math.round(et):Zt===it.length?Math.round(rt):Math.round((it[Zt-1].after+it[Zt].before)/2),Zt>0&&it[Zt-1])for(Mn=0;Mn<it[Zt-1].elements.length;Mn++)Rn=_n*(xn-(Xn=it[Zt-1].elements[Mn]).after)+"px","lr"===Et.bpd?Xn.node.style.paddingRight=Rn:"rl"===Et.bpd?Xn.node.style.paddingLeft=Rn:"tb"===Et.bpd&&(Xn.node.style.paddingBottom=Rn);if(Zt<it.length)for(Mn=0;Mn<it[Zt].elements.length;Mn++)Rn=_n*((Xn=it[Zt].elements[Mn]).before-xn)+"px","lr"===Et.bpd?Xn.node.style.paddingLeft=Rn:"rl"===Et.bpd?Xn.node.style.paddingRight=Rn:"tb"===Et.bpd&&(Xn.node.style.paddingTop=Rn)}})(q,Ce.before,Ce.after,x),x.flg=null}if("region"===he.kind&&"tb"===x.bpd&&x.enableRollUp&&he.contents.length>0&&"after"===he.styleAttrs[E.byName.displayAlign.qname]){T(x,Vt,q,null);var Ee=new F(""===he.id?"_":he.id,q);if(x.currentISDState[Ee.id]=Ee,x.previousISDState&&Ee.id in x.previousISDState&&x.previousISDState[Ee.id].plist.length>0&&Ee.plist.length>1&&Ee.plist[Ee.plist.length-2].text===x.previousISDState[Ee.id].plist[x.previousISDState[Ee.id].plist.length-1].text){var nt=Me.firstElementChild,At=Ee.plist[Ee.plist.length-1].after-Ee.plist[Ee.plist.length-1].before;nt.style.bottom="-"+At+"px",nt.style.transition="transform 0.4s",nt.style.position="relative",nt.style.transform="translateY(-"+At+"px)"}}}else xe(x.errorHandler,"Error processing ISD element kind: "+he.kind)}function V(x,_e,he){return x.style.backgroundColor?(he&&!_e.includes(x)&&_e.push(x),x.style.backgroundColor):"SPAN"===x.parentElement.nodeName||"RUBY"===x.parentElement.nodeName||"RBC"===x.parentElement.nodeName||"RTC"===x.parentElement.nodeName||"RT"===x.parentElement.nodeName?V(x.parentElement,_e,!0):void 0}function w(x,_e,he){if("SPAN"===x.tagName&&"SPAN"===_e.tagName&&x._isd_element===_e._isd_element){if(!x._isd_element)return xe(he.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;x.textContent+=_e.textContent;for(var Je=0;Je<_e.style.length;Je++){var Me=_e.style[Je];(Me.indexOf("border")>=0||Me.indexOf("padding")>=0||Me.indexOf("margin")>=0)&&(x.style[Me]=_e.style[Me])}return _e.parentElement.removeChild(_e),!0}return!1}function F(x,_e){this.id=x,this.plist=_e}function G(x,_e){var he={before:null,after:null,start:null,end:null};return"tb"===_e.bpd?(he.before=x.top,he.after=x.bottom,"lr"===_e.ipd?(he.start=x.left,he.end=x.right):(he.start=x.right,he.end=x.left)):"lr"===_e.bpd?(he.before=x.left,he.after=x.right,he.start=x.top,he.end=x.bottom):"rl"===_e.bpd&&(he.before=x.right,he.after=x.left,he.start=x.top,he.end=x.bottom),he}function T(x,_e,he,Je){if("rt"!==_e.localName&&"rtc"!==_e.localName){var Me,ot,yt,Dt,Qe=_e.style.backgroundColor||Je;if(0===_e.childElementCount)if("span"===_e.localName||"rb"===_e.localName){var Le=G(_e.getBoundingClientRect(),x);if(0!==he.length&&(Me=Le.before,yt=he[he.length-1].before,(ot=Le.after)<(Dt=he[he.length-1].after)&&Me>yt||Dt<=ot&&yt>=Me)){var Lt=Math.sign(Le.after-Le.before),Vt=Math.sign(Le.end-Le.start);Lt*(Le.before-he[he.length-1].before)<0&&(he[he.length-1].before=Le.before),Lt*(Le.after-he[he.length-1].after)>0&&(he[he.length-1].after=Le.after),Vt*(Le.start-he[he.length-1].start)<0&&(he[he.length-1].start=Le.start,he[he.length-1].start_elem=he[he.length-1].elements.length),Vt*(Le.end-he[he.length-1].end)>0&&(he[he.length-1].end=Le.end,he[he.length-1].end_elem=he[he.length-1].elements.length)}else he.push({before:Le.before,after:Le.after,start:Le.start,end:Le.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});he[he.length-1].text+=_e.textContent,he[he.length-1].elements.push({node:_e,bgcolor:Qe,before:Le.before,after:Le.after})}else"br"===_e.localName&&0!==he.length&&(he[he.length-1].br=!0);else for(var ze=_e.firstChild;ze;)ze.nodeType===Node.ELEMENT_NODE&&(T(x,ze,he,Qe),"ruby"===ze.localName||"rtc"===ze.localName?he.length>0&&he[he.length-1].rbc.push(ze):"span"===ze.localName&&ze.style[$]&&"none"!==ze.style[$]&&he.length>0&&he[he.length-1].te.push(ze)),ze=ze.nextSibling}}function M(x,_e,he,Je){"none"!==Je.style&&(_e.style[$]="auto"===Je.style?"filled":Je.style+" "+Je.symbol,("before"===Je.position||"after"===Je.position)&&(_e.style[be]="tb"===x.bpd?"before"===Je.position?"left over":"left under":"rl"===x.bpd?"before"===Je.position?"right under":"left under":"before"===Je.position?"left under":"right under"))}function O(x,_e){this.qname=x,this.map=_e}H.render=function(x,_e,he,Je,Me,ot,yt,Dt,Qe){var Le=Je||_e.clientHeight,Lt=Me||_e.clientWidth;if(null!==x.aspectRatio){var Vt=Le*x.aspectRatio;Vt>Lt?Le=Math.round(Lt/x.aspectRatio):Lt=Vt}var ze=document.createElement("div");ze.style.position="relative",ze.style.width=Lt+"px",ze.style.height=Le+"px",ze.style.margin="auto",ze.style.top=0,ze.style.bottom=0,ze.style.left=0,ze.style.right=0,ze.style.zIndex=0;var mt={h:Le,w:Lt,regionH:null,regionW:null,imgResolver:he,displayForcedOnlyMode:ot||!1,isd:x,errorHandler:yt,previousISDState:Dt,enableRollUp:Qe||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(_e.appendChild(ze),"contents"in x)for(var fn=0;fn<x.contents.length;fn++)k(mt,ze,x.contents[fn],x);return mt.currentISDState};for(var te=[new O("http://www.w3.org/ns/ttml#styling backgroundColor",function(x,_e,he,Je){0!==Je[3]&&(_e.style.backgroundColor="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")")}),new O("http://www.w3.org/ns/ttml#styling color",function(x,_e,he,Je){_e.style.color="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")"}),new O("http://www.w3.org/ns/ttml#styling direction",function(x,_e,he,Je){_e.style.direction=Je}),new O("http://www.w3.org/ns/ttml#styling display",function(x,_e,he,Je){}),new O("http://www.w3.org/ns/ttml#styling displayAlign",function(x,_e,he,Je){_e.style.display="flex",_e.style.flexDirection="column","before"===Je?_e.style.justifyContent="flex-start":"center"===Je?_e.style.justifyContent="center":"after"===Je&&(_e.style.justifyContent="flex-end")}),new O("http://www.w3.org/ns/ttml#styling extent",function(x,_e,he,Je){x.regionH=Je.h.toUsedLength(x.w,x.h),x.regionW=Je.w.toUsedLength(x.w,x.h);var Me=0,ot=0,yt=he.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];yt&&(Me=yt[0].toUsedLength(x.w,x.h)+yt[2].toUsedLength(x.w,x.h),ot=yt[1].toUsedLength(x.w,x.h)+yt[3].toUsedLength(x.w,x.h)),_e.style.height=x.regionH-Me+"px",_e.style.width=x.regionW-ot+"px"}),new O("http://www.w3.org/ns/ttml#styling fontFamily",function(x,_e,he,Je){for(var Me=[],ot=0;ot<Je.length;ot++)Je[ot]=Je[ot].trim(),"monospaceSerif"===Je[ot]?(Me.push("Courier New"),Me.push('"Liberation Mono"'),Me.push("Courier"),Me.push("monospace")):"proportionalSansSerif"===Je[ot]?(Me.push("Arial"),Me.push("Helvetica"),Me.push('"Liberation Sans"'),Me.push("sans-serif")):"monospace"===Je[ot]?Me.push("monospace"):"sansSerif"===Je[ot]?Me.push("sans-serif"):"serif"===Je[ot]?Me.push("serif"):"monospaceSansSerif"===Je[ot]?(Me.push("Consolas"),Me.push("monospace")):Me.push("proportionalSerif"===Je[ot]?"serif":Je[ot]);if(Me.length>0){for(var yt=[Me[0]],Dt=1;Dt<Me.length;Dt++)-1==yt.indexOf(Me[Dt])&&yt.push(Me[Dt]);Me=yt}_e.style.fontFamily=Me.join(",")}),new O("http://www.w3.org/ns/ttml#styling shear",function(x,_e,he,Je){if(0!==Je){var Me=-.9*Je;_e.style.transform="tb"===x.bpd?"skewX("+Me+"deg)":"skewY("+Me+"deg)"}}),new O("http://www.w3.org/ns/ttml#styling fontSize",function(x,_e,he,Je){_e.style.fontSize=Je.toUsedLength(x.w,x.h)+"px"}),new O("http://www.w3.org/ns/ttml#styling fontStyle",function(x,_e,he,Je){_e.style.fontStyle=Je}),new O("http://www.w3.org/ns/ttml#styling fontWeight",function(x,_e,he,Je){_e.style.fontWeight=Je}),new O("http://www.w3.org/ns/ttml#styling lineHeight",function(x,_e,he,Je){_e.style.lineHeight="normal"===Je?"normal":Je.toUsedLength(x.w,x.h)+"px"}),new O("http://www.w3.org/ns/ttml#styling opacity",function(x,_e,he,Je){_e.style.opacity=Je}),new O("http://www.w3.org/ns/ttml#styling origin",function(x,_e,he,Je){_e.style.top=Je.h.toUsedLength(x.w,x.h)+"px",_e.style.left=Je.w.toUsedLength(x.w,x.h)+"px"}),new O("http://www.w3.org/ns/ttml#styling overflow",function(x,_e,he,Je){_e.style.overflow=Je}),new O("http://www.w3.org/ns/ttml#styling padding",function(x,_e,he,Je){var Me=[];Me[0]=Je[0].toUsedLength(x.w,x.h)+"px",Me[1]=Je[3].toUsedLength(x.w,x.h)+"px",Me[2]=Je[2].toUsedLength(x.w,x.h)+"px",Me[3]=Je[1].toUsedLength(x.w,x.h)+"px",_e.style.padding=Me.join(" ")}),new O("http://www.w3.org/ns/ttml#styling position",function(x,_e,he,Je){_e.style.top=Je.h.toUsedLength(x.w,x.h)+"px",_e.style.left=Je.w.toUsedLength(x.w,x.h)+"px"}),new O("http://www.w3.org/ns/ttml#styling rubyAlign",function(x,_e,he,Je){_e.style.rubyAlign="spaceAround"===Je?"space-around":"center"}),new O("http://www.w3.org/ns/ttml#styling rubyPosition",function(x,_e,he,Je){"before"!==Je&&"after"!==Je||(_e.parentElement.style[Ne]=se?Je:"tb"===x.bpd||"rl"===x.bpd?"before"===Je?"over":"under":"before"===Je?"under":"over")}),new O("http://www.w3.org/ns/ttml#styling showBackground",null),new O("http://www.w3.org/ns/ttml#styling textAlign",function(x,_e,he,Je){_e.style.textAlign="start"===Je?"rl"===x.ipd?"right":"left":"end"===Je?"rl"===x.ipd?"left":"right":Je}),new O("http://www.w3.org/ns/ttml#styling textDecoration",function(x,_e,he,Je){_e.style.textDecoration=Je.join(" ").replace("lineThrough","line-through")}),new O("http://www.w3.org/ns/ttml#styling textOutline",function(x,_e,he,Je){}),new O("http://www.w3.org/ns/ttml#styling textShadow",function(x,_e,he,Je){var Me=he.styleAttrs[E.byName.textOutline.qname];if("none"===Je&&"none"===Me)_e.style.textShadow="";else{var ot=[];if("none"!==Me){var yt="rgba("+Me.color[0].toString()+","+Me.color[1].toString()+","+Me.color[2].toString()+","+(Me.color[3]/255).toString()+")";ot.push("1px 1px 1px "+yt),ot.push("-1px 1px 1px "+yt),ot.push("1px -1px 1px "+yt),ot.push("-1px -1px 1px "+yt)}if("none"!==Je)for(var Dt=0;Dt<Je.length;Dt++)ot.push(Je[Dt].x_off.toUsedLength(x.w,x.h)+"px "+Je[Dt].y_off.toUsedLength(x.w,x.h)+"px "+Je[Dt].b_radius.toUsedLength(x.w,x.h)+"px rgba("+Je[Dt].color[0].toString()+","+Je[Dt].color[1].toString()+","+Je[Dt].color[2].toString()+","+(Je[Dt].color[3]/255).toString()+")");_e.style.textShadow=ot.join(",")}}),new O("http://www.w3.org/ns/ttml#styling textCombine",function(x,_e,he,Je){_e.style.textCombineUpright=Je}),new O("http://www.w3.org/ns/ttml#styling textEmphasis",function(x,_e,he,Je){}),new O("http://www.w3.org/ns/ttml#styling unicodeBidi",function(x,_e,he,Je){_e.style.unicodeBidi="bidiOverride"===Je?"bidi-override":Je}),new O("http://www.w3.org/ns/ttml#styling visibility",function(x,_e,he,Je){_e.style.visibility=Je}),new O("http://www.w3.org/ns/ttml#styling wrapOption",function(x,_e,he,Je){_e.style.whiteSpace="wrap"===Je?"preserve"===he.space?"pre-wrap":"normal":"preserve"===he.space?"pre":"noWrap"}),new O("http://www.w3.org/ns/ttml#styling writingMode",function(x,_e,he,Je){"lrtb"===Je||"lr"===Je||"rltb"===Je||"rl"===Je?_e.style.writingMode="horizontal-tb":"tblr"===Je?_e.style.writingMode="vertical-lr":"tbrl"!==Je&&"tb"!==Je||(_e.style.writingMode="vertical-rl")}),new O("http://www.w3.org/ns/ttml#styling zIndex",function(x,_e,he,Je){_e.style.zIndex=Je}),new O("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(x,_e,he,Je){x.displayForcedOnlyMode&&!1===Je&&(_e.style.visibility="hidden")})],ce={},ue=0;ue<te.length;ue++)ce[te[ue].qname]=te[ue];var se="webkitRubyPosition"in window.getComputedStyle(document.documentElement),Ne=se?"webkitRubyPosition":"rubyPosition",$="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",be="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function xe(x,_e){if(x&&x.error&&x.error(_e))throw _e}}($e,typeof imscNames>"u"?ne(210):imscNames,typeof imscStyles>"u"?ne(6811):imscStyles,typeof imscUtils>"u"?ne(5926):imscUtils)},4080:function(Ut,$e,ne){!function(De,H,_,E){De.generateISD=function(O,te,ce){var ue,se=new G(O),Ne={},$={},be=O.head.styling.initials[_.byName.showBackground.qname],xe=O.head.styling.initials[_.byName.backgroundColor.qname];for(var x in O.head.layout.regions)if(O.head.layout.regions.hasOwnProperty(x)){var _e=O.head.layout.regions[x],he=_e.styleAttrs[_.byName.showBackground.qname]||be;$[_e.id]=("always"===he||void 0===he)&&void 0!==(_e.styleAttrs[_.byName.backgroundColor.qname]||xe)&&!(te<_e.begin||te>=_e.end)}for(var Me in O.body&&O.body.regionID&&($[O.body.regionID]=!0),ue=null!==O.body?function yt(Dt,Qe){if(Qe.contents){var Le={};for(var Lt in Qe)Qe.hasOwnProperty(Lt)&&(Le[Lt]=Qe[Lt]);return Le.contents=[],Qe.contents.filter(function(Vt){return!(Dt<Vt.begin||Dt>=Vt.end)}).forEach(function(Vt){var ze=yt(Dt,Vt);ze.regionID&&($[ze.regionID]=!0),null!==ze&&Le.contents.push(ze)}),Le}return Qe}(te,O.body):null,void 0!==$[""]&&($[""]=!0),$)if($[Me]){var ot=V(O,te,O.head.layout.regions[Me],ue,null,"",O.head.layout.regions[Me],ce,Ne);null!==ot&&se.contents.push(ot.element)}return se};var k=[_.byName.color.qname,_.byName.textCombine.qname,_.byName.textDecoration.qname,_.byName.textEmphasis.qname,_.byName.textOutline.qname,_.byName.textShadow.qname];function V(O,te,ce,ue,se,Ne,$,be,xe){if(te<$.begin||te>=$.end)return null;var x="regionID"in $&&""!==$.regionID?$.regionID:Ne;if(null!==se&&x!==ce.id&&(!("contents"in $)||"contents"in $&&0===$.contents.length||""!==x))return null;var _e=new T($);if("sets"in $)for(var he=0;he<$.sets.length;he++)te<$.sets[he].begin||te>=$.sets[he].end||(_e.styleAttrs[$.sets[he].qname]=$.sets[he].value);var Je={};for(var Me in _e.styleAttrs)if(_e.styleAttrs.hasOwnProperty(Me)&&(Je[Me]=!0,"region"===_e.kind&&Me===_.byName.writingMode.qname&&!(_.byName.direction.qname in _e.styleAttrs))){var ot=_e.styleAttrs[Me];"lrtb"===ot||"lr"===ot?_e.styleAttrs[_.byName.direction.qname]="ltr":"rltb"!==ot&&"rl"!==ot||(_e.styleAttrs[_.byName.direction.qname]="rtl")}if(null!==se)for(var yt=0;yt<_.all.length;yt++){var Dt=_.all[yt];if(Dt.qname===_.byName.textDecoration.qname){var Qe=se.styleAttrs[Dt.qname],Le=_e.styleAttrs[Dt.qname],Lt=[];void 0===Le?Lt=Qe:-1===Le.indexOf("none")?((-1===Le.indexOf("noUnderline")&&-1!==Qe.indexOf("underline")||-1!==Le.indexOf("underline"))&&Lt.push("underline"),(-1===Le.indexOf("noLineThrough")&&-1!==Qe.indexOf("lineThrough")||-1!==Le.indexOf("lineThrough"))&&Lt.push("lineThrough"),(-1===Le.indexOf("noOverline")&&-1!==Qe.indexOf("overline")||-1!==Le.indexOf("overline"))&&Lt.push("overline")):Lt.push("none"),_e.styleAttrs[Dt.qname]=Lt}else if(Dt.qname!==_.byName.fontSize.qname||Dt.qname in _e.styleAttrs||"span"!==_e.kind||"textContainer"!==_e.styleAttrs[_.byName.ruby.qname])if(Dt.qname!==_.byName.fontSize.qname||Dt.qname in _e.styleAttrs||"span"!==_e.kind||"text"!==_e.styleAttrs[_.byName.ruby.qname])Dt.inherit&&Dt.qname in se.styleAttrs&&!(Dt.qname in _e.styleAttrs)&&(_e.styleAttrs[Dt.qname]=se.styleAttrs[Dt.qname]);else{var Vt=se.styleAttrs[_.byName.fontSize.qname];_e.styleAttrs[Dt.qname]="textContainer"===se.styleAttrs[_.byName.ruby.qname]?Vt:new E.ComputedLength(.5*Vt.rw,.5*Vt.rh)}else{var ze=se.styleAttrs[_.byName.fontSize.qname];_e.styleAttrs[Dt.qname]=new E.ComputedLength(.5*ze.rw,.5*ze.rh)}}for(var mt=0;mt<_.all.length;mt++){var fn=_.all[mt];if(!(fn.qname in _e.styleAttrs)&&!(fn.qname===_.byName.position.qname&&_.byName.origin.qname in _e.styleAttrs||fn.qname===_.byName.origin.qname&&_.byName.position.qname in _e.styleAttrs)){var Yt=O.head.styling.initials[fn.qname]||fn.initial;if(null!==Yt&&("region"===_e.kind||!1===fn.inherit&&null!==Yt)){var Tt=fn.parse(Yt);null!==Tt?(_e.styleAttrs[fn.qname]=Tt,Je[fn.qname]=!0):M(be,"Invalid initial value for '"+fn.qname+"' on element '"+_e.kind)}}}for(var Rt=0;Rt<_.all.length;Rt++){var Ze=_.all[Rt];if(Ze.qname in Je&&null!==Ze.compute){var qe=Ze.compute(O,se,_e,_e.styleAttrs[Ze.qname],xe);null!==qe?_e.styleAttrs[Ze.qname]=qe:(_e.styleAttrs[Ze.qname]=Ze.compute(O,se,_e,Ze.parse(Ze.initial),xe),M(be,"Style '"+Ze.qname+"' on element '"+_e.kind+"' cannot be computed"))}}if("none"===_e.styleAttrs[_.byName.display.qname])return null;var It=null;null===se?It=null===ue?[]:[ue]:"contents"in $&&(It=$.contents);for(var N=0;null!==It&&N<It.length;N++){var I=V(O,te,ce,ue,_e,x,It[N],be,xe);null!==I&&_e.contents.push(I.element)}for(var Z in _e.styleAttrs)if(_e.styleAttrs.hasOwnProperty(Z)){var q=!1;if("span"===_e.kind){var Ce=_e.styleAttrs[_.byName.ruby.qname];(q=("container"===Ce||"textContainer"===Ce||"baseContainer"===Ce)&&-1!==k.indexOf(Z))||(q="container"!==Ce&&Z===_.byName.rubyAlign.qname),q||(q=!("textContainer"===Ce||"text"===Ce)&&Z===_.byName.rubyPosition.qname)}if(!q){var Ee=_.byQName[Z];"applies"in Ee&&(q=-1===Ee.applies.indexOf(_e.kind))}q&&delete _e.styleAttrs[Z]}var nt=_e.styleAttrs[_.byName.ruby.qname];if("p"===_e.kind||"span"===_e.kind&&("textContainer"===nt||"text"===nt)){var At=[];w(_e,At),function(it){for(var et,rt=0;rt<it.length;)if("br"!==(et=it[rt]).kind&&"preserve"!==et.space){var Et=et.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(Et)&&(0===rt||"br"===(Ot=it[rt-1]).kind||/[\r\n\t ]$/.test(Ot.text))&&(Et=Et.substring(1)),et.text=Et,0===Et.length?it.splice(rt,1):rt++}else rt++;var Ot,_n;for(rt=0;rt<it.length;rt++)"br"!==(et=it[rt]).kind&&"preserve"!==et.space?/[ ]$/.test(et.text)&&(rt===it.length-1||"br"===(_n=it[rt+1]).kind||"preserve"===_n.space&&/^[\r\n]/.test(_n.text))&&(et.text=et.text.slice(0,-1)):rt++}(At),F(_e)}return"div"===_e.kind&&_.byName.backgroundImage.qname in _e.styleAttrs||"br"===_e.kind||"image"===_e.kind||"contents"in _e&&_e.contents.length>0||"span"===_e.kind&&null!==_e.text||"region"===_e.kind&&"always"===_e.styleAttrs[_.byName.showBackground.qname]?{region_id:x,element:_e}:null}function w(O,te){if("contents"in O)for(var ce=0;ce<O.contents.length;ce++){var ue=O.contents[ce],se=ue.styleAttrs[_.byName.ruby.qname];("span"!==ue.kind||"textContainer"!==se&&"text"!==se)&&("contents"in ue?w(ue,te):("span"===ue.kind&&0!==ue.text.length||"br"===ue.kind)&&te.push(ue))}}function F(O){if("br"===O.kind)return!1;if("text"in O)return 0===O.text.length;if("contents"in O){for(var te=O.contents.length;te--;)F(O.contents[te])&&O.contents.splice(te,1);return 0===O.contents.length}}function G(O){this.contents=[],this.aspectRatio=O.aspectRatio,this.lang=O.lang}function T(O){for(var te in this.kind=O.kind||"region",this.lang=O.lang,O.id&&(this.id=O.id),this.styleAttrs={},O.styleAttrs)O.styleAttrs.hasOwnProperty(te)&&(this.styleAttrs[te]=O.styleAttrs[te]);"src"in O&&(this.src=O.src),"type"in O&&(this.type=O.type),"text"in O?this.text=O.text:("region"===this.kind||"contents"in O)&&(this.contents=[]),"space"in O&&(this.space=O.space)}function M(O,te){if(O&&O.error&&O.error(te))throw te}}($e,typeof imscNames>"u"?ne(210):imscNames,typeof imscStyles>"u"?ne(6811):imscStyles,typeof imscUtils>"u"?ne(5926):imscUtils)},4403:function(Ut,$e,ne){$e.generateISD=ne(4080).generateISD,$e.fromXML=ne(3362).fromXML,$e.renderHTML=ne(506).render},210:function(Ut,$e){var ne;(ne=$e).ns_tt="http://www.w3.org/ns/ttml",ne.ns_tts="http://www.w3.org/ns/ttml#styling",ne.ns_ttp="http://www.w3.org/ns/ttml#parameter",ne.ns_xml="http://www.w3.org/XML/1998/namespace",ne.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",ne.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",ne.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",ne.ns_ebutts="urn:ebu:tt:style"},6811:function(Ut,$e,ne){!function(De,H,_){function E(w,F,G,T,M,O,te,ce){this.name=F,this.ns=w,this.qname=w+" "+F,this.inherit=M,this.animatable=O,this.initial=G,this.applies=T,this.parse=te,this.compute=ce}for(var k in De.all=[new E(H.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,_.parseColor,null),new E(H.ns_tts,"color","white",["span"],!0,!0,_.parseColor,null),new E(H.ns_tts,"direction","ltr",["p","span"],!0,!0,function(w){return w},null),new E(H.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(w){return w},null),new E(H.ns_tts,"displayAlign","before",["region"],!1,!0,function(w){return w},null),new E(H.ns_tts,"extent","auto",["tt","region"],!1,!0,function(w){if("auto"===w)return w;var F=w.split(" ");if(2!==F.length)return null;var G=_.parseLength(F[0]),T=_.parseLength(F[1]);return T&&G?{h:T,w:G}:null},function(w,F,G,T,M){var O,te;if("auto"===T)O=new _.ComputedLength(0,1);else if(null===(O=_.toComputedLength(T.h.value,T.h.unit,null,w.dimensions.h,null,w.pxLength.h)))return null;if("auto"===T)te=new _.ComputedLength(1,0);else if(null===(te=_.toComputedLength(T.w.value,T.w.unit,null,w.dimensions.w,null,w.pxLength.w)))return null;return{h:O,w:te}}),new E(H.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(w){for(var F=w.split(","),G=[],T=0;T<F.length;T++)"'"!==F[T].charAt(0)&&'"'!==F[T].charAt(0)&&"default"===F[T]?G.push("monospaceSerif"):G.push(F[T]);return G},null),new E(H.ns_tts,"shear","0%",["p"],!0,!0,_.parseLength,function(w,F,G,T){return"%"!==T.unit?null:Math.abs(T.value)>100?100*Math.sign(T.value):T.value}),new E(H.ns_tts,"fontSize","1c",["span","p"],!0,!0,_.parseLength,function(w,F,G,T,M){return _.toComputedLength(T.value,T.unit,null!==F?F.styleAttrs[De.byName.fontSize.qname]:w.cellLength.h,null!==F?F.styleAttrs[De.byName.fontSize.qname]:w.cellLength.h,w.cellLength.h,w.pxLength.h)}),new E(H.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(w){return w},null),new E(H.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(w){return w},null),new E(H.ns_tts,"lineHeight","normal",["p"],!0,!0,function(w){return"normal"===w?w:_.parseLength(w)},function(w,F,G,T,M){var O;if("normal"===T)O=T;else if(null===(O=_.toComputedLength(T.value,T.unit,G.styleAttrs[De.byName.fontSize.qname],G.styleAttrs[De.byName.fontSize.qname],w.cellLength.h,w.pxLength.h)))return null;return O}),new E(H.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new E(H.ns_tts,"origin","auto",["region"],!1,!0,function(w){if("auto"===w)return w;var F=w.split(" ");if(2!==F.length)return null;var G=_.parseLength(F[0]),T=_.parseLength(F[1]);return T&&G?{h:T,w:G}:null},function(w,F,G,T,M){var O,te;if("auto"===T)O=new _.ComputedLength(0,0);else if(null===(O=_.toComputedLength(T.h.value,T.h.unit,null,w.dimensions.h,null,w.pxLength.h)))return null;if("auto"===T)te=new _.ComputedLength(0,0);else if(null===(te=_.toComputedLength(T.w.value,T.w.unit,null,w.dimensions.w,null,w.pxLength.w)))return null;return{h:O,w:te}}),new E(H.ns_tts,"overflow","hidden",["region"],!1,!0,function(w){return w},null),new E(H.ns_tts,"padding","0px",["region"],!1,!0,function(w){var F=w.split(" ");if(F.length>4)return null;for(var G=[],T=0;T<F.length;T++){var M=_.parseLength(F[T]);if(!M)return null;G.push(M)}return G},function(w,F,G,T,M){var O;if(1===T.length)O=[T[0],T[0],T[0],T[0]];else if(2===T.length)O=[T[0],T[1],T[0],T[1]];else if(3===T.length)O=[T[0],T[1],T[2],T[1]];else{if(4!==T.length)return null;O=[T[0],T[1],T[2],T[3]]}var te=G.styleAttrs[De.byName.writingMode.qname];if("lrtb"===te||"lr"===te)O=[O[0],O[3],O[2],O[1]];else if("rltb"===te||"rl"===te)O=[O[0],O[1],O[2],O[3]];else if("tblr"===te)O=[O[3],O[0],O[1],O[2]];else{if("tbrl"!==te&&"tb"!==te)return null;O=[O[3],O[2],O[1],O[0]]}for(var ce=[],ue=0;ue<O.length;ue++)if(0===O[ue].value)ce[ue]=new _.ComputedLength(0,0);else if(ce[ue]=_.toComputedLength(O[ue].value,O[ue].unit,G.styleAttrs[De.byName.fontSize.qname],0===ue||2===ue?G.styleAttrs[De.byName.extent.qname].h:G.styleAttrs[De.byName.extent.qname].w,0===ue||2===ue?w.cellLength.h:w.cellLength.w,0===ue||2===ue?w.pxLength.h:w.pxLength.w),null===ce[ue])return null;return ce}),new E(H.ns_tts,"position","top left",["region"],!1,!0,function(w){return _.parsePosition(w)},function(w,F,G,T){var M,O;return null===(M=_.toComputedLength(T.v.offset.value,T.v.offset.unit,null,new _.ComputedLength(-G.styleAttrs[De.byName.extent.qname].h.rw,w.dimensions.h.rh-G.styleAttrs[De.byName.extent.qname].h.rh),null,w.pxLength.h))?null:("bottom"===T.v.edge&&(M=new _.ComputedLength(-M.rw-G.styleAttrs[De.byName.extent.qname].h.rw,w.dimensions.h.rh-M.rh-G.styleAttrs[De.byName.extent.qname].h.rh)),O=_.toComputedLength(T.h.offset.value,T.h.offset.unit,null,new _.ComputedLength(w.dimensions.w.rw-G.styleAttrs[De.byName.extent.qname].w.rw,-G.styleAttrs[De.byName.extent.qname].w.rh),null,w.pxLength.w),null===M?null:("right"===T.h.edge&&(O=new _.ComputedLength(w.dimensions.w.rw-O.rw-G.styleAttrs[De.byName.extent.qname].w.rw,-O.rh-G.styleAttrs[De.byName.extent.qname].w.rh)),{h:M,w:O}))}),new E(H.ns_tts,"ruby","none",["span"],!1,!0,function(w){return w},null),new E(H.ns_tts,"rubyAlign","center",["span"],!0,!0,function(w){return"center"!==w&&"spaceAround"!==w?null:w},null),new E(H.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(w){return w},null),new E(H.ns_tts,"rubyReserve","none",["p"],!0,!0,function(w){var F=w.split(" "),G=[null,null];if(0===F.length||F.length>2||"none"!==F[0]&&"both"!==F[0]&&"after"!==F[0]&&"before"!==F[0]&&"outside"!==F[0])return null;if(G[0]=F[0],2===F.length&&"none"!==F[0]){var T=_.parseLength(F[1]);if(!T)return null;G[1]=T}return G},function(w,F,G,T,M){return"none"===T[0]?T:null===(O=null===T[1]?new _.ComputedLength(.5*G.styleAttrs[De.byName.fontSize.qname].rw,.5*G.styleAttrs[De.byName.fontSize.qname].rh):_.toComputedLength(T[1].value,T[1].unit,G.styleAttrs[De.byName.fontSize.qname],G.styleAttrs[De.byName.fontSize.qname],w.cellLength.h,w.pxLength.h))?null:[T[0],O];var O}),new E(H.ns_tts,"showBackground","always",["region"],!1,!0,function(w){return w},null),new E(H.ns_tts,"textAlign","start",["p"],!0,!0,function(w){return w},function(w,F,G,T,M){return"left"===T?"start":"right"===T?"end":T}),new E(H.ns_tts,"textCombine","none",["span"],!0,!0,function(w){return"none"===w||"all"===w?w:null},null),new E(H.ns_tts,"textDecoration","none",["span"],!0,!0,function(w){return w.split(" ")},null),new E(H.ns_tts,"textEmphasis","none",["span"],!0,!0,function(w){for(var F=w.split(" "),G={style:null,symbol:null,color:null,position:null},T=0;T<F.length;T++)if("none"===F[T]||"auto"===F[T])G.style=F[T];else if("filled"===F[T]||"open"===F[T])G.style=F[T];else if("circle"===F[T]||"dot"===F[T]||"sesame"===F[T])G.symbol=F[T];else if("current"===F[T])G.color=F[T];else if("outside"===F[T]||"before"===F[T]||"after"===F[T])G.position=F[T];else if(G.color=_.parseColor(F[T]),null===G.color)return null;return null==G.style&&null==G.symbol?G.style="auto":(G.symbol=G.symbol||"circle",G.style=G.style||"filled"),G.position=G.position||"outside",G.color=G.color||"current",G},null),new E(H.ns_tts,"textOutline","none",["span"],!0,!0,function(w){if("none"===w)return w;var F={},G=w.split(" ");if(0===G.length||G.length>2)return null;var T=_.parseColor(G[0]);if(F.color=T,null!==T&&G.shift(),1!==G.length)return null;var M=_.parseLength(G[0]);return M?(F.thickness=M,F):null},function(w,F,G,T,M){if("none"===T)return T;var O={};return O.color=null===T.color?G.styleAttrs[De.byName.color.qname]:T.color,O.thickness=_.toComputedLength(T.thickness.value,T.thickness.unit,G.styleAttrs[De.byName.fontSize.qname],G.styleAttrs[De.byName.fontSize.qname],w.cellLength.h,w.pxLength.h),null===O.thickness?null:O}),new E(H.ns_tts,"textShadow","none",["span"],!0,!0,_.parseTextShadow,function(w,F,G,T){if("none"===T)return T;for(var M=[],O=0;O<T.length;O++){var te={};if(te.x_off=_.toComputedLength(T[O][0].value,T[O][0].unit,null,G.styleAttrs[De.byName.fontSize.qname],null,w.pxLength.w),null===te.x_off||(te.y_off=_.toComputedLength(T[O][1].value,T[O][1].unit,null,G.styleAttrs[De.byName.fontSize.qname],null,w.pxLength.h),null===te.y_off))return null;if(null===T[O][2])te.b_radius=0;else if(te.b_radius=_.toComputedLength(T[O][2].value,T[O][2].unit,null,G.styleAttrs[De.byName.fontSize.qname],null,w.pxLength.h),null===te.b_radius)return null;te.color=null===T[O][3]?G.styleAttrs[De.byName.color.qname]:T[O][3],M.push(te)}return M}),new E(H.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(w){return w},null),new E(H.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(w){return w},null),new E(H.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(w){return w},null),new E(H.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(w){return w},null),new E(H.ns_tts,"zIndex","auto",["region"],!1,!0,function(w){var F;return"auto"===w?F=w:(F=parseInt(w),isNaN(F)&&(F=null)),F},null),new E(H.ns_ebutts,"linePadding","0c",["p"],!0,!1,_.parseLength,function(w,F,G,T,M){return _.toComputedLength(T.value,T.unit,null,null,w.cellLength.w,null)}),new E(H.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(w){return w},null),new E(H.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(w){return w},null),new E(H.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(w){return"true"===w},null),new E(H.ns_itts,"fillLineGap","false",["p"],!0,!0,function(w){return"true"===w},null)],De.byQName={},De.all)De.byQName[De.all[k].qname]=De.all[k];for(var V in De.byName={},De.all)De.byName[De.all[V].name]=De.all[V]}($e,typeof imscNames>"u"?ne(210):imscNames,typeof imscUtils>"u"?ne(5926):imscUtils)},5926:function(Ut,$e){!function(ne){var De=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,H=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,_=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,E={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};ne.parseColor=function(V){var w,F=null,G=E[V.toLowerCase()];return void 0!==G?F=G:null!==(w=De.exec(V))?F=[parseInt(w[1],16),parseInt(w[2],16),parseInt(w[3],16),void 0!==w[4]?parseInt(w[4],16):255]:null!==(w=H.exec(V))?F=[parseInt(w[1]),parseInt(w[2]),parseInt(w[3]),255]:null!==(w=_.exec(V))&&(F=[parseInt(w[1]),parseInt(w[2]),parseInt(w[3]),parseInt(w[4])]),F};var k=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;ne.parseLength=function(V){var w,F=null;return null!==(w=k.exec(V))&&(F={value:parseFloat(w[1]),unit:w[2]}),F},ne.parseTextShadow=function(V){for(var w=V.match(/([^\(,\)]|\([^\)]+\))+/g),F=[],G=0;G<w.length;G++){var T=w[G].split(" ");if(1===T.length&&"none"===T[0])return"none";if(T.length>1&&T.length<5){var M=[null,null,null,null],O=ne.parseLength(T.shift());if(null===O||(M[0]=O,null===(O=ne.parseLength(T.shift()))))return null;if(M[1]=O,0===T.length){F.push(M);continue}if(null!==(O=ne.parseLength(T[0]))&&(M[2]=O,T.shift()),0===T.length){F.push(M);continue}var te=ne.parseColor(T[0]);if(null===te)return null;M[3]=te,F.push(M)}}return F},ne.parsePosition=function(V){var w=V.split(" "),F=function(ue){return"center"===ue||"left"===ue||"top"===ue||"bottom"===ue||"right"===ue};if(w.length>4)return null;for(var G=0;G<w.length;G++)if(!F(w[G])){var T=ne.parseLength(w[G]);if(null===T)return null;w[G]=T}for(var M={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},O=0;O<w.length;){var te=w[O++];if(F(te)){var ce={value:0,unit:"%"};2!==w.length&&O<w.length&&!F(w[O])&&(ce=w[O++]),"right"===te?(M.h.edge=te,M.h.offset=ce):"bottom"===te?(M.v.edge=te,M.v.offset=ce):"left"===te?M.h.offset=ce:"top"===te&&(M.v.offset=ce)}else{if(1!==w.length&&2!==w.length)return null;1===O?M.h.offset=te:M.v.offset=te}}return M},ne.ComputedLength=function(V,w){this.rw=V,this.rh=w},ne.ComputedLength.prototype.toUsedLength=function(V,w){return V*this.rw+w*this.rh},ne.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},ne.toComputedLength=function(V,w,F,G,T,M){return"%"===w&&G?new ne.ComputedLength(G.rw*V/100,G.rh*V/100):"em"===w&&F?new ne.ComputedLength(F.rw*V,F.rh*V):"c"===w&&T?new ne.ComputedLength(V*T.rw,V*T.rh):"px"===w&&M?new ne.ComputedLength(V*M.rw,V*M.rh):"rh"===w?new ne.ComputedLength(0,V/100):"rw"===w?new ne.ComputedLength(V/100,0):null}}($e)},3516:function(Ut){"use strict";Ut.exports=function($e){var ne="string"==typeof $e?$e.charCodeAt(0):$e;return ne>=97&&ne<=122||ne>=65&&ne<=90}},2219:function(Ut,$e,ne){"use strict";var De=ne(3516),H=ne(395);Ut.exports=function(_){return De(_)||H(_)}},395:function(Ut){"use strict";Ut.exports=function($e){var ne="string"==typeof $e?$e.charCodeAt(0):$e;return ne>=48&&ne<=57}},3875:function(Ut){"use strict";function $e(H){if("string"!=typeof H)throw new TypeError("Path must be a string. Received "+JSON.stringify(H))}function ne(H,_){for(var E,k="",V=0,w=-1,F=0,G=0;G<=H.length;++G){if(G<H.length)E=H.charCodeAt(G);else{if(47===E)break;E=47}if(47===E){if(w!==G-1&&1!==F)if(w!==G-1&&2===F){if(k.length<2||2!==V||46!==k.charCodeAt(k.length-1)||46!==k.charCodeAt(k.length-2))if(k.length>2){var T=k.lastIndexOf("/");if(T!==k.length-1){-1===T?(k="",V=0):V=(k=k.slice(0,T)).length-1-k.lastIndexOf("/"),w=G,F=0;continue}}else if(2===k.length||1===k.length){k="",V=0,w=G,F=0;continue}_&&(k.length>0?k+="/..":k="..",V=2)}else k.length>0?k+="/"+H.slice(w+1,G):k=H.slice(w+1,G),V=G-w-1;w=G,F=0}else 46===E&&-1!==F?++F:F=-1}return k}var De={resolve:function(){for(var H,_="",E=!1,k=arguments.length-1;k>=-1&&!E;k--){var V;k>=0?V=arguments[k]:(void 0===H&&(H=process.cwd()),V=H),$e(V),0!==V.length&&(_=V+"/"+_,E=47===V.charCodeAt(0))}return _=ne(_,!E),E?_.length>0?"/"+_:"/":_.length>0?_:"."},normalize:function(H){if($e(H),0===H.length)return".";var _=47===H.charCodeAt(0),E=47===H.charCodeAt(H.length-1);return 0!==(H=ne(H,!_)).length||_||(H="."),H.length>0&&E&&(H+="/"),_?"/"+H:H},isAbsolute:function(H){return $e(H),H.length>0&&47===H.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var H,_=0;_<arguments.length;++_){var E=arguments[_];$e(E),E.length>0&&(void 0===H?H=E:H+="/"+E)}return void 0===H?".":De.normalize(H)},relative:function(H,_){if($e(H),$e(_),H===_||(H=De.resolve(H))===(_=De.resolve(_)))return"";for(var E=1;E<H.length&&47===H.charCodeAt(E);++E);for(var k=H.length,V=k-E,w=1;w<_.length&&47===_.charCodeAt(w);++w);for(var F=_.length-w,G=V<F?V:F,T=-1,M=0;M<=G;++M){if(M===G){if(F>G){if(47===_.charCodeAt(w+M))return _.slice(w+M+1);if(0===M)return _.slice(w+M)}else V>G&&(47===H.charCodeAt(E+M)?T=M:0===M&&(T=0));break}var O=H.charCodeAt(E+M);if(O!==_.charCodeAt(w+M))break;47===O&&(T=M)}var te="";for(M=E+T+1;M<=k;++M)M!==k&&47!==H.charCodeAt(M)||(te+=0===te.length?"..":"/..");return te.length>0?te+_.slice(w+T):(47===_.charCodeAt(w+=T)&&++w,_.slice(w))},_makeLong:function(H){return H},dirname:function(H){if($e(H),0===H.length)return".";for(var _=H.charCodeAt(0),E=47===_,k=-1,V=!0,w=H.length-1;w>=1;--w)if(47===(_=H.charCodeAt(w))){if(!V){k=w;break}}else V=!1;return-1===k?E?"/":".":E&&1===k?"//":H.slice(0,k)},basename:function(H,_){if(void 0!==_&&"string"!=typeof _)throw new TypeError('"ext" argument must be a string');$e(H);var E,k=0,V=-1,w=!0;if(void 0!==_&&_.length>0&&_.length<=H.length){if(_.length===H.length&&_===H)return"";var F=_.length-1,G=-1;for(E=H.length-1;E>=0;--E){var T=H.charCodeAt(E);if(47===T){if(!w){k=E+1;break}}else-1===G&&(w=!1,G=E+1),F>=0&&(T===_.charCodeAt(F)?-1==--F&&(V=E):(F=-1,V=G))}return k===V?V=G:-1===V&&(V=H.length),H.slice(k,V)}for(E=H.length-1;E>=0;--E)if(47===H.charCodeAt(E)){if(!w){k=E+1;break}}else-1===V&&(w=!1,V=E+1);return-1===V?"":H.slice(k,V)},extname:function(H){$e(H);for(var _=-1,E=0,k=-1,V=!0,w=0,F=H.length-1;F>=0;--F){var G=H.charCodeAt(F);if(47!==G)-1===k&&(V=!1,k=F+1),46===G?-1===_?_=F:1!==w&&(w=1):-1!==_&&(w=-1);else if(!V){E=F+1;break}}return-1===_||-1===k||0===w||1===w&&_===k-1&&_===E+1?"":H.slice(_,k)},format:function(H){if(null===H||"object"!=typeof H)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof H);return V=(E=H).base||(E.name||"")+(E.ext||""),(k=E.dir||E.root)?k===E.root?k+V:k+"/"+V:V;var E,k,V},parse:function(H){$e(H);var _={root:"",dir:"",base:"",ext:"",name:""};if(0===H.length)return _;var E,k=H.charCodeAt(0),V=47===k;V?(_.root="/",E=1):E=0;for(var w=-1,F=0,G=-1,T=!0,M=H.length-1,O=0;M>=E;--M)if(47!==(k=H.charCodeAt(M)))-1===G&&(T=!1,G=M+1),46===k?-1===w?w=M:1!==O&&(O=1):-1!==w&&(O=-1);else if(!T){F=M+1;break}return-1===w||-1===G||0===O||1===O&&w===G-1&&w===F+1?-1!==G&&(_.base=_.name=H.slice(0===F&&V?1:F,G)):(0===F&&V?(_.name=H.slice(1,w),_.base=H.slice(1,G)):(_.name=H.slice(F,w),_.base=H.slice(F,G)),_.ext=H.slice(w,G)),F>0?_.dir=H.slice(0,F-1):V&&(_.dir="/"),_},sep:"/",delimiter:":",win32:null,posix:null};De.posix=De,Ut.exports=De},8387:function(Ut,$e,ne){var De=ne(1549),H=De.Buffer;function _(k,V){for(var w in k)V[w]=k[w]}function E(k,V,w){return H(k,V,w)}H.from&&H.alloc&&H.allocUnsafe&&H.allocUnsafeSlow?Ut.exports=De:(_(De,$e),$e.Buffer=E),_(H,E),E.from=function(k,V,w){if("number"==typeof k)throw new TypeError("Argument must not be a number");return H(k,V,w)},E.alloc=function(k,V,w){if("number"!=typeof k)throw new TypeError("Argument must be a number");var F=H(k);return void 0!==V?"string"==typeof w?F.fill(V,w):F.fill(V):F.fill(0),F},E.allocUnsafe=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return H(k)},E.allocUnsafeSlow=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return De.SlowBuffer(k)}},5378:function(Ut,$e,ne){!function(De){De.parser=function(N,I){return new E(N,I)},De.SAXParser=E,De.SAXStream=V,De.createStream=function(N,I){return new V(N,I)},De.MAX_BUFFER_LENGTH=65536;var H,_=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function E(N,I){if(!(this instanceof E))return new E(N,I);var Z=this;(function(q){for(var Ce=0,Ee=_.length;Ce<Ee;Ce++)q[_[Ce]]=""})(Z),Z.q=Z.c="",Z.bufferCheckPosition=De.MAX_BUFFER_LENGTH,Z.opt=I||{},Z.opt.lowercase=Z.opt.lowercase||Z.opt.lowercasetags,Z.looseCase=Z.opt.lowercase?"toLowerCase":"toUpperCase",Z.tags=[],Z.closed=Z.closedRoot=Z.sawRoot=!1,Z.tag=Z.error=null,Z.strict=!!N,Z.noscript=!(!N&&!Z.opt.noscript),Z.state=Me.BEGIN,Z.strictEntities=Z.opt.strictEntities,Z.ENTITIES=Object.create(Z.strictEntities?De.XML_ENTITIES:De.ENTITIES),Z.attribList=[],Z.opt.xmlns&&(Z.ns=Object.create(ce)),Z.trackPosition=!1!==Z.opt.position,Z.trackPosition&&(Z.position=Z.line=Z.column=0),yt(Z,"onready")}De.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(N){function I(){}return I.prototype=N,new I}),Object.keys||(Object.keys=function(N){var I=[];for(var Z in N)N.hasOwnProperty(Z)&&I.push(Z);return I}),E.prototype={end:function(){Vt(this)},write:function(N){var I=this;if(this.error)throw this.error;if(I.closed)return Lt(I,"Cannot write after close. Assign an onready handler.");if(null===N)return Vt(I);"object"==typeof N&&(N=N.toString());for(var Z=0,q="";q=It(N,Z++),I.c=q,q;)switch(I.trackPosition&&(I.position++,"\n"===q?(I.line++,I.column=0):I.column++),I.state){case Me.BEGIN:if(I.state=Me.BEGIN_WHITESPACE,"\ufeff"===q)continue;qe(I,q);continue;case Me.BEGIN_WHITESPACE:qe(I,q);continue;case Me.TEXT:if(I.sawRoot&&!I.closedRoot){for(var Ce=Z-1;q&&"<"!==q&&"&"!==q;)(q=It(N,Z++))&&I.trackPosition&&(I.position++,"\n"===q?(I.line++,I.column=0):I.column++);I.textNode+=N.substring(Ce,Z-1)}"<"!==q||I.sawRoot&&I.closedRoot&&!I.strict?(!x(w,q)||I.sawRoot&&!I.closedRoot||ze(I,"Text data outside of root node."),"&"===q?I.state=Me.TEXT_ENTITY:I.textNode+=q):(I.state=Me.OPEN_WAKA,I.startTagPosition=I.position);continue;case Me.SCRIPT:"<"===q?I.state=Me.SCRIPT_ENDING:I.script+=q;continue;case Me.SCRIPT_ENDING:"/"===q?I.state=Me.CLOSE_TAG:(I.script+="<"+q,I.state=Me.SCRIPT);continue;case Me.OPEN_WAKA:"!"===q?(I.state=Me.SGML_DECL,I.sgmlDecl=""):xe(w,q)||(xe(ue,q)?(I.state=Me.OPEN_TAG,I.tagName=q):"/"===q?(I.state=Me.CLOSE_TAG,I.tagName=""):"?"===q?(I.state=Me.PROC_INST,I.procInstName=I.procInstBody=""):(ze(I,"Unencoded <"),I.startTagPosition+1<I.position&&(q=new Array(I.position-I.startTagPosition).join(" ")+q),I.textNode+="<"+q,I.state=Me.TEXT));continue;case Me.SGML_DECL:"[CDATA["===(I.sgmlDecl+q).toUpperCase()?(Dt(I,"onopencdata"),I.state=Me.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+q==="--"?(I.state=Me.COMMENT,I.comment="",I.sgmlDecl=""):"DOCTYPE"===(I.sgmlDecl+q).toUpperCase()?(I.state=Me.DOCTYPE,(I.doctype||I.sawRoot)&&ze(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):">"===q?(Dt(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=Me.TEXT):(xe(T,q)&&(I.state=Me.SGML_DECL_QUOTED),I.sgmlDecl+=q);continue;case Me.SGML_DECL_QUOTED:q===I.q&&(I.state=Me.SGML_DECL,I.q=""),I.sgmlDecl+=q;continue;case Me.DOCTYPE:">"===q?(I.state=Me.TEXT,Dt(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=q,"["===q?I.state=Me.DOCTYPE_DTD:xe(T,q)&&(I.state=Me.DOCTYPE_QUOTED,I.q=q));continue;case Me.DOCTYPE_QUOTED:I.doctype+=q,q===I.q&&(I.q="",I.state=Me.DOCTYPE);continue;case Me.DOCTYPE_DTD:I.doctype+=q,"]"===q?I.state=Me.DOCTYPE:xe(T,q)&&(I.state=Me.DOCTYPE_DTD_QUOTED,I.q=q);continue;case Me.DOCTYPE_DTD_QUOTED:I.doctype+=q,q===I.q&&(I.state=Me.DOCTYPE_DTD,I.q="");continue;case Me.COMMENT:"-"===q?I.state=Me.COMMENT_ENDING:I.comment+=q;continue;case Me.COMMENT_ENDING:"-"===q?(I.state=Me.COMMENT_ENDED,I.comment=Le(I.opt,I.comment),I.comment&&Dt(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+q,I.state=Me.COMMENT);continue;case Me.COMMENT_ENDED:">"!==q?(ze(I,"Malformed comment"),I.comment+="--"+q,I.state=Me.COMMENT):I.state=Me.TEXT;continue;case Me.CDATA:"]"===q?I.state=Me.CDATA_ENDING:I.cdata+=q;continue;case Me.CDATA_ENDING:"]"===q?I.state=Me.CDATA_ENDING_2:(I.cdata+="]"+q,I.state=Me.CDATA);continue;case Me.CDATA_ENDING_2:">"===q?(I.cdata&&Dt(I,"oncdata",I.cdata),Dt(I,"onclosecdata"),I.cdata="",I.state=Me.TEXT):"]"===q?I.cdata+="]":(I.cdata+="]]"+q,I.state=Me.CDATA);continue;case Me.PROC_INST:"?"===q?I.state=Me.PROC_INST_ENDING:xe(w,q)?I.state=Me.PROC_INST_BODY:I.procInstName+=q;continue;case Me.PROC_INST_BODY:if(!I.procInstBody&&xe(w,q))continue;"?"===q?I.state=Me.PROC_INST_ENDING:I.procInstBody+=q;continue;case Me.PROC_INST_ENDING:">"===q?(Dt(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=Me.TEXT):(I.procInstBody+="?"+q,I.state=Me.PROC_INST_BODY);continue;case Me.OPEN_TAG:xe(se,q)?I.tagName+=q:(mt(I),">"===q?Tt(I):"/"===q?I.state=Me.OPEN_TAG_SLASH:(x(w,q)&&ze(I,"Invalid character in tag name"),I.state=Me.ATTRIB));continue;case Me.OPEN_TAG_SLASH:">"===q?(Tt(I,!0),Rt(I)):(ze(I,"Forward-slash in opening tag not followed by >"),I.state=Me.ATTRIB);continue;case Me.ATTRIB:if(xe(w,q))continue;">"===q?Tt(I):"/"===q?I.state=Me.OPEN_TAG_SLASH:xe(ue,q)?(I.attribName=q,I.attribValue="",I.state=Me.ATTRIB_NAME):ze(I,"Invalid attribute name");continue;case Me.ATTRIB_NAME:"="===q?I.state=Me.ATTRIB_VALUE:">"===q?(ze(I,"Attribute without value"),I.attribValue=I.attribName,Yt(I),Tt(I)):xe(w,q)?I.state=Me.ATTRIB_NAME_SAW_WHITE:xe(se,q)?I.attribName+=q:ze(I,"Invalid attribute name");continue;case Me.ATTRIB_NAME_SAW_WHITE:if("="===q)I.state=Me.ATTRIB_VALUE;else{if(xe(w,q))continue;ze(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",Dt(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",">"===q?Tt(I):xe(ue,q)?(I.attribName=q,I.state=Me.ATTRIB_NAME):(ze(I,"Invalid attribute name"),I.state=Me.ATTRIB)}continue;case Me.ATTRIB_VALUE:if(xe(w,q))continue;xe(T,q)?(I.q=q,I.state=Me.ATTRIB_VALUE_QUOTED):(ze(I,"Unquoted attribute value"),I.state=Me.ATTRIB_VALUE_UNQUOTED,I.attribValue=q);continue;case Me.ATTRIB_VALUE_QUOTED:if(q!==I.q){"&"===q?I.state=Me.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=q;continue}Yt(I),I.q="",I.state=Me.ATTRIB_VALUE_CLOSED;continue;case Me.ATTRIB_VALUE_CLOSED:xe(w,q)?I.state=Me.ATTRIB:">"===q?Tt(I):"/"===q?I.state=Me.OPEN_TAG_SLASH:xe(ue,q)?(ze(I,"No whitespace between attributes"),I.attribName=q,I.attribValue="",I.state=Me.ATTRIB_NAME):ze(I,"Invalid attribute name");continue;case Me.ATTRIB_VALUE_UNQUOTED:if(x(M,q)){"&"===q?I.state=Me.ATTRIB_VALUE_ENTITY_U:I.attribValue+=q;continue}Yt(I),">"===q?Tt(I):I.state=Me.ATTRIB;continue;case Me.CLOSE_TAG:if(I.tagName)">"===q?Rt(I):xe(se,q)?I.tagName+=q:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=Me.SCRIPT):(x(w,q)&&ze(I,"Invalid tagname in closing tag"),I.state=Me.CLOSE_TAG_SAW_WHITE);else{if(xe(w,q))continue;x(ue,q)?I.script?(I.script+="</"+q,I.state=Me.SCRIPT):ze(I,"Invalid tagname in closing tag."):I.tagName=q}continue;case Me.CLOSE_TAG_SAW_WHITE:if(xe(w,q))continue;">"===q?Rt(I):ze(I,"Invalid characters in closing tag");continue;case Me.TEXT_ENTITY:case Me.ATTRIB_VALUE_ENTITY_Q:case Me.ATTRIB_VALUE_ENTITY_U:var nt,At;switch(I.state){case Me.TEXT_ENTITY:nt=Me.TEXT,At="textNode";break;case Me.ATTRIB_VALUE_ENTITY_Q:nt=Me.ATTRIB_VALUE_QUOTED,At="attribValue";break;case Me.ATTRIB_VALUE_ENTITY_U:nt=Me.ATTRIB_VALUE_UNQUOTED,At="attribValue"}";"===q?(I[At]+=Ze(I),I.entity="",I.state=nt):xe(I.entity.length?$:Ne,q)?I.entity+=q:(ze(I,"Invalid character in entity name"),I[At]+="&"+I.entity+q,I.entity="",I.state=nt);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&function(it){for(var et=Math.max(De.MAX_BUFFER_LENGTH,10),rt=0,Et=0,Ot=_.length;Et<Ot;Et++){var _n=it[_[Et]].length;if(_n>et)switch(_[Et]){case"textNode":Qe(it);break;case"cdata":Dt(it,"oncdata",it.cdata),it.cdata="";break;case"script":Dt(it,"onscript",it.script),it.script="";break;default:Lt(it,"Max buffer length exceeded: "+_[Et])}rt=Math.max(rt,_n)}it.bufferCheckPosition=De.MAX_BUFFER_LENGTH-rt+it.position}(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var N;Qe(N=this),""!==N.cdata&&(Dt(N,"oncdata",N.cdata),N.cdata=""),""!==N.script&&(Dt(N,"onscript",N.script),N.script="")}};try{H=ne(182).Stream}catch{H=function(){}}var k=De.EVENTS.filter(function(N){return"error"!==N&&"end"!==N});function V(N,I){if(!(this instanceof V))return new V(N,I);H.apply(this),this._parser=new E(N,I),this.writable=!0,this.readable=!0;var Z=this;this._parser.onend=function(){Z.emit("end")},this._parser.onerror=function(q){Z.emit("error",q),Z._parser.error=null},this._decoder=null,k.forEach(function(q){Object.defineProperty(Z,"on"+q,{get:function(){return Z._parser["on"+q]},set:function(Ce){if(!Ce)return Z.removeAllListeners(q),Z._parser["on"+q]=Ce,Ce;Z.on(q,Ce)},enumerable:!0,configurable:!1})})}(V.prototype=Object.create(H.prototype,{constructor:{value:V}})).write=function(N){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(N)){if(!this._decoder){var I=ne(7503).s;this._decoder=new I("utf8")}N=this._decoder.write(N)}return this._parser.write(N.toString()),this.emit("data",N),!0},V.prototype.end=function(N){return N&&N.length&&this.write(N),this._parser.end(),!0},V.prototype.on=function(N,I){var Z=this;return Z._parser["on"+N]||-1===k.indexOf(N)||(Z._parser["on"+N]=function(){var q=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);q.splice(0,0,N),Z.emit.apply(Z,q)}),H.prototype.on.call(Z,N,I)};var w="\r\n\t ",F="0124356789",G="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",T="'\"",M=w+">",O="http://www.w3.org/XML/1998/namespace",te="http://www.w3.org/2000/xmlns/",ce={xml:O,xmlns:te};w=be(w),F=be(F),G=be(G);var ue=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,se=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function be(N){return N.split("").reduce(function(I,Z){return I[Z]=!0,I},{})}function xe(N,I){return"[object RegExp]"===Object.prototype.toString.call(N)?!!I.match(N):N[I]}function x(N,I){return!xe(N,I)}T=be(T),M=be(M);var _e,he,Je,Me=0;for(var ot in De.STATE={BEGIN:Me++,BEGIN_WHITESPACE:Me++,TEXT:Me++,TEXT_ENTITY:Me++,OPEN_WAKA:Me++,SGML_DECL:Me++,SGML_DECL_QUOTED:Me++,DOCTYPE:Me++,DOCTYPE_QUOTED:Me++,DOCTYPE_DTD:Me++,DOCTYPE_DTD_QUOTED:Me++,COMMENT_STARTING:Me++,COMMENT:Me++,COMMENT_ENDING:Me++,COMMENT_ENDED:Me++,CDATA:Me++,CDATA_ENDING:Me++,CDATA_ENDING_2:Me++,PROC_INST:Me++,PROC_INST_BODY:Me++,PROC_INST_ENDING:Me++,OPEN_TAG:Me++,OPEN_TAG_SLASH:Me++,ATTRIB:Me++,ATTRIB_NAME:Me++,ATTRIB_NAME_SAW_WHITE:Me++,ATTRIB_VALUE:Me++,ATTRIB_VALUE_QUOTED:Me++,ATTRIB_VALUE_CLOSED:Me++,ATTRIB_VALUE_UNQUOTED:Me++,ATTRIB_VALUE_ENTITY_Q:Me++,ATTRIB_VALUE_ENTITY_U:Me++,CLOSE_TAG:Me++,CLOSE_TAG_SAW_WHITE:Me++,SCRIPT:Me++,SCRIPT_ENDING:Me++},De.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},De.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(De.ENTITIES).forEach(function(N){var I=De.ENTITIES[N],Z="number"==typeof I?String.fromCharCode(I):I;De.ENTITIES[N]=Z}),De.STATE)De.STATE[De.STATE[ot]]=ot;function yt(N,I,Z){N[I]&&N[I](Z)}function Dt(N,I,Z){N.textNode&&Qe(N),yt(N,I,Z)}function Qe(N){N.textNode=Le(N.opt,N.textNode),N.textNode&&yt(N,"ontext",N.textNode),N.textNode=""}function Le(N,I){return N.trim&&(I=I.trim()),N.normalize&&(I=I.replace(/\s+/g," ")),I}function Lt(N,I){return Qe(N),N.trackPosition&&(I+="\nLine: "+N.line+"\nColumn: "+N.column+"\nChar: "+N.c),I=new Error(I),N.error=I,yt(N,"onerror",I),N}function Vt(N){return N.sawRoot&&!N.closedRoot&&ze(N,"Unclosed root tag"),N.state!==Me.BEGIN&&N.state!==Me.BEGIN_WHITESPACE&&N.state!==Me.TEXT&&Lt(N,"Unexpected end"),Qe(N),N.c="",N.closed=!0,yt(N,"onend"),E.call(N,N.strict,N.opt),N}function ze(N,I){if("object"!=typeof N||!(N instanceof E))throw new Error("bad call to strictFail");N.strict&&Lt(N,I)}function mt(N){N.strict||(N.tagName=N.tagName[N.looseCase]());var I=N.tags[N.tags.length-1]||N,Z=N.tag={name:N.tagName,attributes:{}};N.opt.xmlns&&(Z.ns=I.ns),N.attribList.length=0,Dt(N,"onopentagstart",Z)}function fn(N,I){var Z=N.indexOf(":")<0?["",N]:N.split(":"),q=Z[0],Ce=Z[1];return I&&"xmlns"===N&&(q="xmlns",Ce=""),{prefix:q,local:Ce}}function Yt(N){if(N.strict||(N.attribName=N.attribName[N.looseCase]()),-1!==N.attribList.indexOf(N.attribName)||N.tag.attributes.hasOwnProperty(N.attribName))N.attribName=N.attribValue="";else{if(N.opt.xmlns){var I=fn(N.attribName,!0),q=I.local;if("xmlns"===I.prefix)if("xml"===q&&N.attribValue!==O)ze(N,"xml: prefix must be bound to "+O+"\nActual: "+N.attribValue);else if("xmlns"===q&&N.attribValue!==te)ze(N,"xmlns: prefix must be bound to "+te+"\nActual: "+N.attribValue);else{var Ce=N.tag,Ee=N.tags[N.tags.length-1]||N;Ce.ns===Ee.ns&&(Ce.ns=Object.create(Ee.ns)),Ce.ns[q]=N.attribValue}N.attribList.push([N.attribName,N.attribValue])}else N.tag.attributes[N.attribName]=N.attribValue,Dt(N,"onattribute",{name:N.attribName,value:N.attribValue});N.attribName=N.attribValue=""}}function Tt(N,I){if(N.opt.xmlns){var Z=N.tag,q=fn(N.tagName);Z.prefix=q.prefix,Z.local=q.local,Z.uri=Z.ns[q.prefix]||"",Z.prefix&&!Z.uri&&(ze(N,"Unbound namespace prefix: "+JSON.stringify(N.tagName)),Z.uri=q.prefix),Z.ns&&(N.tags[N.tags.length-1]||N).ns!==Z.ns&&Object.keys(Z.ns).forEach(function(xn){Dt(N,"onopennamespace",{prefix:xn,uri:Z.ns[xn]})});for(var Ee=0,nt=N.attribList.length;Ee<nt;Ee++){var At=N.attribList[Ee],it=At[0],et=At[1],rt=fn(it,!0),Et=rt.prefix,_n=""===Et?"":Z.ns[Et]||"",Zt={name:it,value:et,prefix:Et,local:rt.local,uri:_n};Et&&"xmlns"!==Et&&!_n&&(ze(N,"Unbound namespace prefix: "+JSON.stringify(Et)),Zt.uri=Et),N.tag.attributes[it]=Zt,Dt(N,"onattribute",Zt)}N.attribList.length=0}N.tag.isSelfClosing=!!I,N.sawRoot=!0,N.tags.push(N.tag),Dt(N,"onopentag",N.tag),I||(N.state=N.noscript||"script"!==N.tagName.toLowerCase()?Me.TEXT:Me.SCRIPT,N.tag=null,N.tagName=""),N.attribName=N.attribValue="",N.attribList.length=0}function Rt(N){if(!N.tagName)return ze(N,"Weird empty close tag."),N.textNode+="</>",void(N.state=Me.TEXT);if(N.script){if("script"!==N.tagName)return N.script+="</"+N.tagName+">",N.tagName="",void(N.state=Me.SCRIPT);Dt(N,"onscript",N.script),N.script=""}var I=N.tags.length,Z=N.tagName;N.strict||(Z=Z[N.looseCase]());for(var q=Z;I--&&N.tags[I].name!==q;)ze(N,"Unexpected close tag");if(I<0)return ze(N,"Unmatched closing tag: "+N.tagName),N.textNode+="</"+N.tagName+">",void(N.state=Me.TEXT);N.tagName=Z;for(var Ce=N.tags.length;Ce-- >I;){var Ee=N.tag=N.tags.pop();N.tagName=N.tag.name,Dt(N,"onclosetag",N.tagName);var nt={};for(var At in Ee.ns)nt[At]=Ee.ns[At];N.opt.xmlns&&Ee.ns!==(N.tags[N.tags.length-1]||N).ns&&Object.keys(Ee.ns).forEach(function(et){Dt(N,"onclosenamespace",{prefix:et,uri:Ee.ns[et]})})}0===I&&(N.closedRoot=!0),N.tagName=N.attribValue=N.attribName="",N.attribList.length=0,N.state=Me.TEXT}function Ze(N){var I,Z=N.entity,q=Z.toLowerCase(),Ce="";return N.ENTITIES[Z]?N.ENTITIES[Z]:N.ENTITIES[q]?N.ENTITIES[q]:("#"===(Z=q).charAt(0)&&("x"===Z.charAt(1)?(Z=Z.slice(2),Ce=(I=parseInt(Z,16)).toString(16)):(Z=Z.slice(1),Ce=(I=parseInt(Z,10)).toString(10))),Z=Z.replace(/^0+/,""),Ce.toLowerCase()!==Z?(ze(N,"Invalid character entity"),"&"+N.entity+";"):String.fromCodePoint(I))}function qe(N,I){"<"===I?(N.state=Me.OPEN_WAKA,N.startTagPosition=N.position):x(w,I)&&(ze(N,"Non-whitespace before first tag."),N.textNode=I,N.state=Me.TEXT)}function It(N,I){var Z="";return I<N.length&&(Z=N.charAt(I)),Z}Me=De.STATE,String.fromCodePoint||(_e=String.fromCharCode,he=Math.floor,Je=function(){var N,q=[],Ce=-1,Ee=arguments.length;if(!Ee)return"";for(var nt="";++Ce<Ee;){var At=Number(arguments[Ce]);if(!isFinite(At)||At<0||At>1114111||he(At)!==At)throw RangeError("Invalid code point: "+At);At<=65535?q.push(At):(N=55296+((At-=65536)>>10),q.push(N,At%1024+56320)),(Ce+1===Ee||q.length>16384)&&(nt+=_e.apply(null,q),q.length=0)}return nt},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Je,configurable:!0,writable:!0}):String.fromCodePoint=Je)}($e)},182:function(Ut,$e,ne){Ut.exports=H;var De=ne(1159).EventEmitter;function H(){De.call(this)}ne(1765)(H,De),H.Readable=ne(2846),H.Writable=ne(8318),H.Duplex=ne(6138),H.Transform=ne(9798),H.PassThrough=ne(5472),H.finished=ne(8800),H.pipeline=ne(7295),H.Stream=H,H.prototype.pipe=function(_,E){var k=this;function V(te){_.writable&&!1===_.write(te)&&k.pause&&k.pause()}function w(){k.readable&&k.resume&&k.resume()}k.on("data",V),_.on("drain",w),_._isStdio||E&&!1===E.end||(k.on("end",G),k.on("close",T));var F=!1;function G(){F||(F=!0,_.end())}function T(){F||(F=!0,"function"==typeof _.destroy&&_.destroy())}function M(te){if(O(),0===De.listenerCount(this,"error"))throw te}function O(){k.removeListener("data",V),_.removeListener("drain",w),k.removeListener("end",G),k.removeListener("close",T),k.removeListener("error",M),_.removeListener("error",M),k.removeListener("end",O),k.removeListener("close",O),_.removeListener("close",O)}return k.on("error",M),_.on("error",M),k.on("end",O),k.on("close",O),_.on("close",O),_.emit("pipe",k),_}},1765:function(Ut){Ut.exports="function"==typeof Object.create?function($e,ne){ne&&($e.super_=ne,$e.prototype=Object.create(ne.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}))}:function($e,ne){if(ne){$e.super_=ne;var De=function(){};De.prototype=ne.prototype,$e.prototype=new De,$e.prototype.constructor=$e}}},3690:function(Ut){"use strict";var $e={};function ne(H,_,E){E||(E=Error);var k=function(V){var w,F;function G(T,M,O){return V.call(this,"string"==typeof _?_:_(T,M,O))||this}return F=V,(w=G).prototype=Object.create(F.prototype),w.prototype.constructor=w,w.__proto__=F,G}(E);k.prototype.name=E.name,k.prototype.code=H,$e[H]=k}function De(H,_){if(Array.isArray(H)){var E=H.length;return H=H.map(function(k){return String(k)}),E>2?"one of ".concat(_," ").concat(H.slice(0,E-1).join(", "),", or ")+H[E-1]:2===E?"one of ".concat(_," ").concat(H[0]," or ").concat(H[1]):"of ".concat(_," ").concat(H[0])}return"of ".concat(_," ").concat(String(H))}ne("ERR_INVALID_OPT_VALUE",function(H,_){return'The value "'+_+'" is invalid for option "'+H+'"'},TypeError),ne("ERR_INVALID_ARG_TYPE",function(H,_,E){var k,w,F,G,M,te;if("string"==typeof _&&"not "===_.substr(0,"not ".length)?(k="must not be",_=_.replace(/^not /,"")):k="must be",M=H,(void 0===te||te>M.length)&&(te=M.length)," argument"===M.substring(te-" argument".length,te))w="The ".concat(H," ").concat(k," ").concat(De(_,"type"));else{var T=("number"!=typeof G&&(G=0),G+1>(F=H).length||-1===F.indexOf(".",G)?"argument":"property");w='The "'.concat(H,'" ').concat(T," ").concat(k," ").concat(De(_,"type"))}return w+". Received type ".concat(typeof E)},TypeError),ne("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ne("ERR_METHOD_NOT_IMPLEMENTED",function(H){return"The "+H+" method is not implemented"}),ne("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ne("ERR_STREAM_DESTROYED",function(H){return"Cannot call "+H+" after a stream was destroyed"}),ne("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ne("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ne("ERR_STREAM_WRITE_AFTER_END","write after end"),ne("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ne("ERR_UNKNOWN_ENCODING",function(H){return"Unknown encoding: "+H},TypeError),ne("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ut.exports.q=$e},6138:function(Ut,$e,ne){"use strict";var De=Object.keys||function(T){var M=[];for(var O in T)M.push(O);return M};Ut.exports=w;var H=ne(2846),_=ne(8318);ne(1765)(w,H);for(var E=De(_.prototype),k=0;k<E.length;k++){var V=E[k];w.prototype[V]||(w.prototype[V]=_.prototype[V])}function w(T){if(!(this instanceof w))return new w(T);H.call(this,T),_.call(this,T),this.allowHalfOpen=!0,T&&(!1===T.readable&&(this.readable=!1),!1===T.writable&&(this.writable=!1),!1===T.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",F)))}function F(){this._writableState.ended||process.nextTick(G,this)}function G(T){T.end()}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(T){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=T,this._writableState.destroyed=T)}})},5472:function(Ut,$e,ne){"use strict";Ut.exports=H;var De=ne(9798);function H(_){if(!(this instanceof H))return new H(_);De.call(this,_)}ne(1765)(H,De),H.prototype._transform=function(_,E,k){k(null,_)}},2846:function(Ut,$e,ne){"use strict";var De;Ut.exports=_e,_e.ReadableState=x,ne(1159);var H,_=function(Ze,qe){return Ze.listeners(qe).length},E=ne(9299),k=ne(1549).Buffer,V=ne.g.Uint8Array||function(){},w=ne(964);H=w&&w.debuglog?w.debuglog("stream"):function(){};var F,G,T,M=ne(8393),O=ne(6163),te=ne(7269).getHighWaterMark,ce=ne(3690).q,ue=ce.ERR_INVALID_ARG_TYPE,se=ce.ERR_STREAM_PUSH_AFTER_EOF,Ne=ce.ERR_METHOD_NOT_IMPLEMENTED,$=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ne(1765)(_e,E);var be=O.errorOrDestroy,xe=["error","close","destroy","pause","resume"];function x(Ze,qe,It){De=De||ne(6138),"boolean"!=typeof It&&(It=qe instanceof De),this.objectMode=!!(Ze=Ze||{}).objectMode,It&&(this.objectMode=this.objectMode||!!Ze.readableObjectMode),this.highWaterMark=te(this,Ze,"readableHighWaterMark",It),this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Ze.emitClose,this.autoDestroy=!!Ze.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ze.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ze.encoding&&(F||(F=ne(7503).s),this.decoder=new F(Ze.encoding),this.encoding=Ze.encoding)}function _e(Ze){if(De=De||ne(6138),!(this instanceof _e))return new _e(Ze);this._readableState=new x(Ze,this,this instanceof De),this.readable=!0,Ze&&("function"==typeof Ze.read&&(this._read=Ze.read),"function"==typeof Ze.destroy&&(this._destroy=Ze.destroy)),E.call(this)}function he(Ze,qe,It,N,I){H("readableAddChunk",qe);var Z,Ce,Ee,nt,At,q=Ze._readableState;if(null===qe)q.reading=!1,function(Ce,Ee){if(H("onEofChunk"),!Ee.ended){if(Ee.decoder){var nt=Ee.decoder.end();nt&&nt.length&&(Ee.buffer.push(nt),Ee.length+=Ee.objectMode?1:nt.length)}Ee.ended=!0,Ee.sync?yt(Ce):(Ee.needReadable=!1,Ee.emittedReadable||(Ee.emittedReadable=!0,Dt(Ce)))}}(Ze,q);else if(I||(Ce=q,k.isBuffer(At=Ee=qe)||At instanceof V||"string"==typeof Ee||void 0===Ee||Ce.objectMode||(nt=new ue("chunk",["string","Buffer","Uint8Array"],Ee)),Z=nt),Z)be(Ze,Z);else if(q.objectMode||qe&&qe.length>0)if("string"==typeof qe||q.objectMode||Object.getPrototypeOf(qe)===k.prototype||(qe=function(Ce){return k.from(Ce)}(qe)),N)q.endEmitted?be(Ze,new $):Je(Ze,q,qe,!0);else if(q.ended)be(Ze,new se);else{if(q.destroyed)return!1;q.reading=!1,q.decoder&&!It?(qe=q.decoder.write(qe),q.objectMode||0!==qe.length?Je(Ze,q,qe,!1):Qe(Ze,q)):Je(Ze,q,qe,!1)}else N||(q.reading=!1,Qe(Ze,q));return!q.ended&&(q.length<q.highWaterMark||0===q.length)}function Je(Ze,qe,It,N){qe.flowing&&0===qe.length&&!qe.sync?(qe.awaitDrain=0,Ze.emit("data",It)):(qe.length+=qe.objectMode?1:It.length,N?qe.buffer.unshift(It):qe.buffer.push(It),qe.needReadable&&yt(Ze)),Qe(Ze,qe)}Object.defineProperty(_e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Ze){this._readableState&&(this._readableState.destroyed=Ze)}}),_e.prototype.destroy=O.destroy,_e.prototype._undestroy=O.undestroy,_e.prototype._destroy=function(Ze,qe){qe(Ze)},_e.prototype.push=function(Ze,qe){var It,N=this._readableState;return N.objectMode?It=!0:"string"==typeof Ze&&((qe=qe||N.defaultEncoding)!==N.encoding&&(Ze=k.from(Ze,qe),qe=""),It=!0),he(this,Ze,qe,!1,It)},_e.prototype.unshift=function(Ze){return he(this,Ze,null,!0,!1)},_e.prototype.isPaused=function(){return!1===this._readableState.flowing},_e.prototype.setEncoding=function(Ze){F||(F=ne(7503).s);var qe=new F(Ze);this._readableState.decoder=qe,this._readableState.encoding=this._readableState.decoder.encoding;for(var It=this._readableState.buffer.head,N="";null!==It;)N+=qe.write(It.data),It=It.next;return this._readableState.buffer.clear(),""!==N&&this._readableState.buffer.push(N),this._readableState.length=N.length,this};var Me=1073741824;function ot(Ze,qe){return Ze<=0||0===qe.length&&qe.ended?0:qe.objectMode?1:Ze!=Ze?qe.flowing&&qe.length?qe.buffer.head.data.length:qe.length:(Ze>qe.highWaterMark&&(qe.highWaterMark=((It=Ze)>=Me?It=Me:(It--,It|=It>>>1,It|=It>>>2,It|=It>>>4,It|=It>>>8,It|=It>>>16,It++),It)),Ze<=qe.length?Ze:qe.ended?qe.length:(qe.needReadable=!0,0));var It}function yt(Ze){var qe=Ze._readableState;H("emitReadable",qe.needReadable,qe.emittedReadable),qe.needReadable=!1,qe.emittedReadable||(H("emitReadable",qe.flowing),qe.emittedReadable=!0,process.nextTick(Dt,Ze))}function Dt(Ze){var qe=Ze._readableState;H("emitReadable_",qe.destroyed,qe.length,qe.ended),qe.destroyed||!qe.length&&!qe.ended||(Ze.emit("readable"),qe.emittedReadable=!1),qe.needReadable=!qe.flowing&&!qe.ended&&qe.length<=qe.highWaterMark,mt(Ze)}function Qe(Ze,qe){qe.readingMore||(qe.readingMore=!0,process.nextTick(Le,Ze,qe))}function Le(Ze,qe){for(;!qe.reading&&!qe.ended&&(qe.length<qe.highWaterMark||qe.flowing&&0===qe.length);){var It=qe.length;if(H("maybeReadMore read 0"),Ze.read(0),It===qe.length)break}qe.readingMore=!1}function Lt(Ze){var qe=Ze._readableState;qe.readableListening=Ze.listenerCount("readable")>0,qe.resumeScheduled&&!qe.paused?qe.flowing=!0:Ze.listenerCount("data")>0&&Ze.resume()}function Vt(Ze){H("readable nexttick read 0"),Ze.read(0)}function ze(Ze,qe){H("resume",qe.reading),qe.reading||Ze.read(0),qe.resumeScheduled=!1,Ze.emit("resume"),mt(Ze),qe.flowing&&!qe.reading&&Ze.read(0)}function mt(Ze){var qe=Ze._readableState;for(H("flow",qe.flowing);qe.flowing&&null!==Ze.read(););}function fn(Ze,qe){return 0===qe.length?null:(qe.objectMode?It=qe.buffer.shift():!Ze||Ze>=qe.length?(It=qe.decoder?qe.buffer.join(""):1===qe.buffer.length?qe.buffer.first():qe.buffer.concat(qe.length),qe.buffer.clear()):It=qe.buffer.consume(Ze,qe.decoder),It);var It}function Yt(Ze){var qe=Ze._readableState;H("endReadable",qe.endEmitted),qe.endEmitted||(qe.ended=!0,process.nextTick(Tt,qe,Ze))}function Tt(Ze,qe){if(H("endReadableNT",Ze.endEmitted,Ze.length),!Ze.endEmitted&&0===Ze.length&&(Ze.endEmitted=!0,qe.readable=!1,qe.emit("end"),Ze.autoDestroy)){var It=qe._writableState;(!It||It.autoDestroy&&It.finished)&&qe.destroy()}}function Rt(Ze,qe){for(var It=0,N=Ze.length;It<N;It++)if(Ze[It]===qe)return It;return-1}_e.prototype.read=function(Ze){H("read",Ze),Ze=parseInt(Ze,10);var qe=this._readableState,It=Ze;if(0!==Ze&&(qe.emittedReadable=!1),0===Ze&&qe.needReadable&&((0!==qe.highWaterMark?qe.length>=qe.highWaterMark:qe.length>0)||qe.ended))return H("read: emitReadable",qe.length,qe.ended),0===qe.length&&qe.ended?Yt(this):yt(this),null;if(0===(Ze=ot(Ze,qe))&&qe.ended)return 0===qe.length&&Yt(this),null;var N,I=qe.needReadable;return H("need readable",I),(0===qe.length||qe.length-Ze<qe.highWaterMark)&&H("length less than watermark",I=!0),qe.ended||qe.reading?H("reading or ended",I=!1):I&&(H("do read"),qe.reading=!0,qe.sync=!0,0===qe.length&&(qe.needReadable=!0),this._read(qe.highWaterMark),qe.sync=!1,qe.reading||(Ze=ot(It,qe))),null===(N=Ze>0?fn(Ze,qe):null)?(qe.needReadable=qe.length<=qe.highWaterMark,Ze=0):(qe.length-=Ze,qe.awaitDrain=0),0===qe.length&&(qe.ended||(qe.needReadable=!0),It!==Ze&&qe.ended&&Yt(this)),null!==N&&this.emit("data",N),N},_e.prototype._read=function(Ze){be(this,new Ne("_read()"))},_e.prototype.pipe=function(Ze,qe){var It=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=Ze;break;case 1:N.pipes=[N.pipes,Ze];break;default:N.pipes.push(Ze)}N.pipesCount+=1,H("pipe count=%d opts=%j",N.pipesCount,qe);var I=qe&&!1===qe.end||Ze===process.stdout||Ze===process.stderr?et:Z;function Z(){H("onend"),Ze.end()}N.endEmitted?process.nextTick(I):It.once("end",I),Ze.on("unpipe",function rt(Et,Ot){H("onunpipe"),Et===It&&Ot&&!1===Ot.hasUnpiped&&(Ot.hasUnpiped=!0,H("cleanup"),Ze.removeListener("close",At),Ze.removeListener("finish",it),Ze.removeListener("drain",q),Ze.removeListener("error",nt),Ze.removeListener("unpipe",rt),It.removeListener("end",Z),It.removeListener("end",et),It.removeListener("data",Ee),Ce=!0,!N.awaitDrain||Ze._writableState&&!Ze._writableState.needDrain||q())});var rt,q=(rt=It,function(){var Et=rt._readableState;H("pipeOnDrain",Et.awaitDrain),Et.awaitDrain&&Et.awaitDrain--,0===Et.awaitDrain&&_(rt,"data")&&(Et.flowing=!0,mt(rt))});Ze.on("drain",q);var Ce=!1;function Ee(rt){H("ondata");var Et=Ze.write(rt);H("dest.write",Et),!1===Et&&((1===N.pipesCount&&N.pipes===Ze||N.pipesCount>1&&-1!==Rt(N.pipes,Ze))&&!Ce&&(H("false write response, pause",N.awaitDrain),N.awaitDrain++),It.pause())}function nt(rt){H("onerror",rt),et(),Ze.removeListener("error",nt),0===_(Ze,"error")&&be(Ze,rt)}function At(){Ze.removeListener("finish",it),et()}function it(){H("onfinish"),Ze.removeListener("close",At),et()}function et(){H("unpipe"),It.unpipe(Ze)}return It.on("data",Ee),function(rt,Et,Ot){if("function"==typeof rt.prependListener)return rt.prependListener(Et,Ot);rt._events&&rt._events[Et]?Array.isArray(rt._events[Et])?rt._events[Et].unshift(Ot):rt._events[Et]=[Ot,rt._events[Et]]:rt.on(Et,Ot)}(Ze,"error",nt),Ze.once("close",At),Ze.once("finish",it),Ze.emit("pipe",It),N.flowing||(H("pipe resume"),It.resume()),Ze},_e.prototype.unpipe=function(Ze){var qe=this._readableState,It={hasUnpiped:!1};if(0===qe.pipesCount)return this;if(1===qe.pipesCount)return Ze&&Ze!==qe.pipes||(Ze||(Ze=qe.pipes),qe.pipes=null,qe.pipesCount=0,qe.flowing=!1,Ze&&Ze.emit("unpipe",this,It)),this;if(!Ze){var N=qe.pipes,I=qe.pipesCount;qe.pipes=null,qe.pipesCount=0,qe.flowing=!1;for(var Z=0;Z<I;Z++)N[Z].emit("unpipe",this,{hasUnpiped:!1});return this}var q=Rt(qe.pipes,Ze);return-1===q||(qe.pipes.splice(q,1),qe.pipesCount-=1,1===qe.pipesCount&&(qe.pipes=qe.pipes[0]),Ze.emit("unpipe",this,It)),this},_e.prototype.addListener=_e.prototype.on=function(Ze,qe){var It=E.prototype.on.call(this,Ze,qe),N=this._readableState;return"data"===Ze?(N.readableListening=this.listenerCount("readable")>0,!1!==N.flowing&&this.resume()):"readable"===Ze&&(N.endEmitted||N.readableListening||(N.readableListening=N.needReadable=!0,N.flowing=!1,N.emittedReadable=!1,H("on readable",N.length,N.reading),N.length?yt(this):N.reading||process.nextTick(Vt,this))),It},_e.prototype.removeListener=function(Ze,qe){var It=E.prototype.removeListener.call(this,Ze,qe);return"readable"===Ze&&process.nextTick(Lt,this),It},_e.prototype.removeAllListeners=function(Ze){var qe=E.prototype.removeAllListeners.apply(this,arguments);return"readable"!==Ze&&void 0!==Ze||process.nextTick(Lt,this),qe},_e.prototype.resume=function(){var It,Ze=this._readableState;return Ze.flowing||(H("resume"),Ze.flowing=!Ze.readableListening,this,(It=Ze).resumeScheduled||(It.resumeScheduled=!0,process.nextTick(ze,this,It))),Ze.paused=!1,this},_e.prototype.pause=function(){return H("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(H("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_e.prototype.wrap=function(Ze){var qe=this,It=this._readableState,N=!1;for(var I in Ze.on("end",function(){if(H("wrapped end"),It.decoder&&!It.ended){var q=It.decoder.end();q&&q.length&&qe.push(q)}qe.push(null)}),Ze.on("data",function(q){H("wrapped data"),It.decoder&&(q=It.decoder.write(q)),It.objectMode&&null==q||(It.objectMode||q&&q.length)&&(qe.push(q)||(N=!0,Ze.pause()))}),Ze)void 0===this[I]&&"function"==typeof Ze[I]&&(this[I]=function(q){return function(){return Ze[q].apply(Ze,arguments)}}(I));for(var Z=0;Z<xe.length;Z++)Ze.on(xe[Z],this.emit.bind(this,xe[Z]));return this._read=function(q){H("wrapped _read",q),N&&(N=!1,Ze.resume())},this},"function"==typeof Symbol&&(_e.prototype[Symbol.asyncIterator]=function(){return void 0===G&&(G=ne(7299)),G(this)}),Object.defineProperty(_e.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_e.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_e.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ze){this._readableState&&(this._readableState.flowing=Ze)}}),_e._fromList=fn,Object.defineProperty(_e.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_e.from=function(Ze,qe){return void 0===T&&(T=ne(6233)),T(_e,Ze,qe)})},9798:function(Ut,$e,ne){"use strict";Ut.exports=F;var De=ne(3690).q,H=De.ERR_METHOD_NOT_IMPLEMENTED,_=De.ERR_MULTIPLE_CALLBACK,E=De.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=De.ERR_TRANSFORM_WITH_LENGTH_0,V=ne(6138);function w(M,O){var te=this._transformState;te.transforming=!1;var ce=te.writecb;if(null===ce)return this.emit("error",new _);te.writechunk=null,te.writecb=null,null!=O&&this.push(O),ce(M);var ue=this._readableState;ue.reading=!1,(ue.needReadable||ue.length<ue.highWaterMark)&&this._read(ue.highWaterMark)}function F(M){if(!(this instanceof F))return new F(M);V.call(this,M),this._transformState={afterTransform:w.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,M&&("function"==typeof M.transform&&(this._transform=M.transform),"function"==typeof M.flush&&(this._flush=M.flush)),this.on("prefinish",G)}function G(){var M=this;"function"!=typeof this._flush||this._readableState.destroyed?T(this,null,null):this._flush(function(O,te){T(M,O,te)})}function T(M,O,te){if(O)return M.emit("error",O);if(null!=te&&M.push(te),M._writableState.length)throw new k;if(M._transformState.transforming)throw new E;return M.push(null)}ne(1765)(F,V),F.prototype.push=function(M,O){return this._transformState.needTransform=!1,V.prototype.push.call(this,M,O)},F.prototype._transform=function(M,O,te){te(new H("_transform()"))},F.prototype._write=function(M,O,te){var ce=this._transformState;if(ce.writecb=te,ce.writechunk=M,ce.writeencoding=O,!ce.transforming){var ue=this._readableState;(ce.needTransform||ue.needReadable||ue.length<ue.highWaterMark)&&this._read(ue.highWaterMark)}},F.prototype._read=function(M){var O=this._transformState;null===O.writechunk||O.transforming?O.needTransform=!0:(O.transforming=!0,this._transform(O.writechunk,O.writeencoding,O.afterTransform))},F.prototype._destroy=function(M,O){V.prototype._destroy.call(this,M,function(te){O(te)})}},8318:function(Ut,$e,ne){"use strict";function De(Qe){var Le=this;this.next=null,this.entry=null,this.finish=function(){!function(Lt,Vt,ze){var mt=Lt.entry;for(Lt.entry=null;mt;){var fn=mt.callback;Vt.pendingcb--,fn(void 0),mt=mt.next}Vt.corkedRequestsFree.next=Lt}(Le,Qe)}}var H;Ut.exports=_e,_e.WritableState=x;var _,E={deprecate:ne(7839)},k=ne(9299),V=ne(1549).Buffer,w=ne.g.Uint8Array||function(){},F=ne(6163),G=ne(7269).getHighWaterMark,T=ne(3690).q,M=T.ERR_INVALID_ARG_TYPE,O=T.ERR_METHOD_NOT_IMPLEMENTED,te=T.ERR_MULTIPLE_CALLBACK,ce=T.ERR_STREAM_CANNOT_PIPE,ue=T.ERR_STREAM_DESTROYED,se=T.ERR_STREAM_NULL_VALUES,Ne=T.ERR_STREAM_WRITE_AFTER_END,$=T.ERR_UNKNOWN_ENCODING,be=F.errorOrDestroy;function xe(){}function x(Qe,Le,Lt){H=H||ne(6138),"boolean"!=typeof Lt&&(Lt=Le instanceof H),this.objectMode=!!(Qe=Qe||{}).objectMode,Lt&&(this.objectMode=this.objectMode||!!Qe.writableObjectMode),this.highWaterMark=G(this,Qe,"writableHighWaterMark",Lt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Qe.decodeStrings),this.defaultEncoding=Qe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ze){!function(mt,fn){var qe,Yt=mt._writableState,Tt=Yt.sync,Rt=Yt.writecb;if("function"!=typeof Rt)throw new te;if((qe=Yt).writing=!1,qe.writecb=null,qe.length-=qe.writelen,qe.writelen=0,fn)!function(qe,It,N,I,Z){--It.pendingcb,N?(process.nextTick(Z,I),process.nextTick(Dt,qe,It),qe._writableState.errorEmitted=!0,be(qe,I)):(Z(I),qe._writableState.errorEmitted=!0,be(qe,I),Dt(qe,It))}(mt,Yt,Tt,fn,Rt);else{var Ze=ot(Yt)||mt.destroyed;Ze||Yt.corked||Yt.bufferProcessing||!Yt.bufferedRequest||Me(mt,Yt),Tt?process.nextTick(Je,mt,Yt,Ze,Rt):Je(mt,Yt,Ze,Rt)}}(Le,ze)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Qe.emitClose,this.autoDestroy=!!Qe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new De(this)}function _e(Qe){var Le=this instanceof(H=H||ne(6138));if(!Le&&!_.call(_e,this))return new _e(Qe);this._writableState=new x(Qe,this,Le),this.writable=!0,Qe&&("function"==typeof Qe.write&&(this._write=Qe.write),"function"==typeof Qe.writev&&(this._writev=Qe.writev),"function"==typeof Qe.destroy&&(this._destroy=Qe.destroy),"function"==typeof Qe.final&&(this._final=Qe.final)),k.call(this)}function he(Qe,Le,Lt,Vt,ze,mt,fn){Le.writelen=Vt,Le.writecb=fn,Le.writing=!0,Le.sync=!0,Le.destroyed?Le.onwrite(new ue("write")):Lt?Qe._writev(ze,Le.onwrite):Qe._write(ze,mt,Le.onwrite),Le.sync=!1}function Je(Qe,Le,Lt,Vt){var ze,mt;Lt||(ze=Qe,0===(mt=Le).length&&mt.needDrain&&(mt.needDrain=!1,ze.emit("drain"))),Le.pendingcb--,Vt(),Dt(Qe,Le)}function Me(Qe,Le){Le.bufferProcessing=!0;var Lt=Le.bufferedRequest;if(Qe._writev&&Lt&&Lt.next){var ze=new Array(Le.bufferedRequestCount),mt=Le.corkedRequestsFree;mt.entry=Lt;for(var fn=0,Yt=!0;Lt;)ze[fn]=Lt,Lt.isBuf||(Yt=!1),Lt=Lt.next,fn+=1;ze.allBuffers=Yt,he(Qe,Le,!0,Le.length,ze,"",mt.finish),Le.pendingcb++,Le.lastBufferedRequest=null,mt.next?(Le.corkedRequestsFree=mt.next,mt.next=null):Le.corkedRequestsFree=new De(Le),Le.bufferedRequestCount=0}else{for(;Lt;){var Tt=Lt.chunk;if(he(Qe,Le,!1,Le.objectMode?1:Tt.length,Tt,Lt.encoding,Lt.callback),Lt=Lt.next,Le.bufferedRequestCount--,Le.writing)break}null===Lt&&(Le.lastBufferedRequest=null)}Le.bufferedRequest=Lt,Le.bufferProcessing=!1}function ot(Qe){return Qe.ending&&0===Qe.length&&null===Qe.bufferedRequest&&!Qe.finished&&!Qe.writing}function yt(Qe,Le){Qe._final(function(Lt){Le.pendingcb--,Lt&&be(Qe,Lt),Le.prefinished=!0,Qe.emit("prefinish"),Dt(Qe,Le)})}function Dt(Qe,Le){var ze,mt,Lt=ot(Le);if(Lt&&(ze=Qe,(mt=Le).prefinished||mt.finalCalled||("function"!=typeof ze._final||mt.destroyed?(mt.prefinished=!0,ze.emit("prefinish")):(mt.pendingcb++,mt.finalCalled=!0,process.nextTick(yt,ze,mt))),0===Le.pendingcb&&(Le.finished=!0,Qe.emit("finish"),Le.autoDestroy))){var Vt=Qe._readableState;(!Vt||Vt.autoDestroy&&Vt.endEmitted)&&Qe.destroy()}return Lt}ne(1765)(_e,k),x.prototype.getBuffer=function(){for(var Qe=this.bufferedRequest,Le=[];Qe;)Le.push(Qe),Qe=Qe.next;return Le},function(){try{Object.defineProperty(x.prototype,"buffer",{get:E.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(_e,Symbol.hasInstance,{value:function(Qe){return!!_.call(this,Qe)||this===_e&&Qe&&Qe._writableState instanceof x}})):_=function(Qe){return Qe instanceof this},_e.prototype.pipe=function(){be(this,new ce)},_e.prototype.write=function(Qe,Le,Lt){var Vt,Yt,Tt,Rt,ze=this._writableState,mt=!1,fn=!ze.objectMode&&(V.isBuffer(Vt=Qe)||Vt instanceof w);return fn&&!V.isBuffer(Qe)&&(Qe=V.from(Qe)),"function"==typeof Le&&(Lt=Le,Le=null),fn?Le="buffer":Le||(Le=ze.defaultEncoding),"function"!=typeof Lt&&(Lt=xe),ze.ending?(Yt=this,Tt=Lt,Rt=new Ne,be(Yt,Rt),process.nextTick(Tt,Rt)):(fn||function(Yt,Tt,Rt,Ze){var qe;return null===Rt?qe=new se:"string"==typeof Rt||Tt.objectMode||(qe=new M("chunk",["string","Buffer"],Rt)),!qe||(be(Yt,qe),process.nextTick(Ze,qe),!1)}(this,ze,Qe,Lt))&&(ze.pendingcb++,mt=function(Yt,Tt,Rt,Ze,qe,It){if(!Rt){var N=(Ee=Ze,(Ce=Tt).objectMode||!1===Ce.decodeStrings||"string"!=typeof Ee||(Ee=V.from(Ee,qe)),Ee);Ze!==N&&(Rt=!0,qe="buffer",Ze=N)}var Ce,Ee,I=Tt.objectMode?1:Ze.length;Tt.length+=I;var Z=Tt.length<Tt.highWaterMark;if(Z||(Tt.needDrain=!0),Tt.writing||Tt.corked){var q=Tt.lastBufferedRequest;Tt.lastBufferedRequest={chunk:Ze,encoding:qe,isBuf:Rt,callback:It,next:null},q?q.next=Tt.lastBufferedRequest:Tt.bufferedRequest=Tt.lastBufferedRequest,Tt.bufferedRequestCount+=1}else he(Yt,Tt,!1,I,Ze,qe,It);return Z}(this,ze,fn,Qe,Le,Lt)),mt},_e.prototype.cork=function(){this._writableState.corked++},_e.prototype.uncork=function(){var Qe=this._writableState;Qe.corked&&(Qe.corked--,Qe.writing||Qe.corked||Qe.bufferProcessing||!Qe.bufferedRequest||Me(this,Qe))},_e.prototype.setDefaultEncoding=function(Qe){if("string"==typeof Qe&&(Qe=Qe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Qe+"").toLowerCase())>-1))throw new $(Qe);return this._writableState.defaultEncoding=Qe,this},Object.defineProperty(_e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_e.prototype._write=function(Qe,Le,Lt){Lt(new O("_write()"))},_e.prototype._writev=null,_e.prototype.end=function(Qe,Le,Lt){var mt,fn,Vt=this._writableState;return"function"==typeof Qe?(Lt=Qe,Qe=null,Le=null):"function"==typeof Le&&(Lt=Le,Le=null),null!=Qe&&this.write(Qe,Le),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||(this,fn=Lt,(mt=Vt).ending=!0,Dt(this,mt),fn&&(mt.finished?process.nextTick(fn):this.once("finish",fn)),mt.ended=!0,this.writable=!1),this},Object.defineProperty(_e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Qe){this._writableState&&(this._writableState.destroyed=Qe)}}),_e.prototype.destroy=F.destroy,_e.prototype._undestroy=F.undestroy,_e.prototype._destroy=function(Qe,Le){Le(Qe)}},7299:function(Ut,$e,ne){"use strict";var De;function H(se,Ne,$){return Ne in se?Object.defineProperty(se,Ne,{value:$,enumerable:!0,configurable:!0,writable:!0}):se[Ne]=$,se}var _=ne(8800),E=Symbol("lastResolve"),k=Symbol("lastReject"),V=Symbol("error"),w=Symbol("ended"),F=Symbol("lastPromise"),G=Symbol("handlePromise"),T=Symbol("stream");function M(se,Ne){return{value:se,done:Ne}}function O(se){var Ne=se[E];if(null!==Ne){var $=se[T].read();null!==$&&(se[F]=null,se[E]=null,se[k]=null,Ne(M($,!1)))}}function te(se){process.nextTick(O,se)}var ce=Object.getPrototypeOf(function(){}),ue=Object.setPrototypeOf((H(De={get stream(){return this[T]},next:function(){var se=this,Ne=this[V];if(null!==Ne)return Promise.reject(Ne);if(this[w])return Promise.resolve(M(void 0,!0));if(this[T].destroyed)return new Promise(function(x,_e){process.nextTick(function(){se[V]?_e(se[V]):x(M(void 0,!0))})});var $,x,_e,be=this[F];if(be)$=new Promise((x=be,_e=this,function(he,Je){x.then(function(){_e[w]?he(M(void 0,!0)):_e[G](he,Je)},Je)}));else{var xe=this[T].read();if(null!==xe)return Promise.resolve(M(xe,!1));$=new Promise(this[G])}return this[F]=$,$}},Symbol.asyncIterator,function(){return this}),H(De,"return",function(){var se=this;return new Promise(function(Ne,$){se[T].destroy(null,function(be){be?$(be):Ne(M(void 0,!0))})})}),De),ce);Ut.exports=function(se){var Ne,$=Object.create(ue,(H(Ne={},T,{value:se,writable:!0}),H(Ne,E,{value:null,writable:!0}),H(Ne,k,{value:null,writable:!0}),H(Ne,V,{value:null,writable:!0}),H(Ne,w,{value:se._readableState.endEmitted,writable:!0}),H(Ne,G,{value:function(be,xe){var x=$[T].read();x?($[F]=null,$[E]=null,$[k]=null,be(M(x,!1))):($[E]=be,$[k]=xe)},writable:!0}),Ne));return $[F]=null,_(se,function(be){if(be&&"ERR_STREAM_PREMATURE_CLOSE"!==be.code){var xe=$[k];return null!==xe&&($[F]=null,$[E]=null,$[k]=null,xe(be)),void($[V]=be)}var x=$[E];null!==x&&($[F]=null,$[E]=null,$[k]=null,x(M(void 0,!0))),$[w]=!0}),se.on("readable",te.bind(null,$)),$}},8393:function(Ut,$e,ne){"use strict";function De(w,F){var G=Object.keys(w);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(w);F&&(T=T.filter(function(M){return Object.getOwnPropertyDescriptor(w,M).enumerable})),G.push.apply(G,T)}return G}function H(w,F,G){return F in w?Object.defineProperty(w,F,{value:G,enumerable:!0,configurable:!0,writable:!0}):w[F]=G,w}var E=ne(1549).Buffer,k=ne(9862).inspect,V=k&&k.custom||"inspect";Ut.exports=function(){function w(){(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,w),this.head=null,this.tail=null,this.length=0}var G;return G=[{key:"push",value:function(T){var M={data:T,next:null};this.length>0?this.tail.next=M:this.head=M,this.tail=M,++this.length}},{key:"unshift",value:function(T){var M={data:T,next:this.head};0===this.length&&(this.tail=M),this.head=M,++this.length}},{key:"shift",value:function(){if(0!==this.length){var T=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(0===this.length)return"";for(var M=this.head,O=""+M.data;M=M.next;)O+=T+M.data;return O}},{key:"concat",value:function(T){if(0===this.length)return E.alloc(0);for(var ce=E.allocUnsafe(T>>>0),ue=this.head,se=0;ue;)E.prototype.copy.call(ue.data,ce,se),se+=ue.data.length,ue=ue.next;return ce}},{key:"consume",value:function(T,M){var O;return T<this.head.data.length?(O=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):O=T===this.head.data.length?this.shift():M?this._getString(T):this._getBuffer(T),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var M=this.head,O=1,te=M.data;for(T-=te.length;M=M.next;){var ce=M.data,ue=T>ce.length?ce.length:T;if(te+=ue===ce.length?ce:ce.slice(0,T),0==(T-=ue)){ue===ce.length?(++O,this.head=M.next?M.next:this.tail=null):(this.head=M,M.data=ce.slice(ue));break}++O}return this.length-=O,te}},{key:"_getBuffer",value:function(T){var M=E.allocUnsafe(T),O=this.head,te=1;for(O.data.copy(M),T-=O.data.length;O=O.next;){var ce=O.data,ue=T>ce.length?ce.length:T;if(ce.copy(M,M.length-T,0,ue),0==(T-=ue)){ue===ce.length?(++te,this.head=O.next?O.next:this.tail=null):(this.head=O,O.data=ce.slice(ue));break}++te}return this.length-=te,M}},{key:V,value:function(T,M){return k(this,function(O){for(var te=1;te<arguments.length;te++){var ce=null!=arguments[te]?arguments[te]:{};te%2?De(Object(ce),!0).forEach(function(ue){H(O,ue,ce[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ce)):De(Object(ce)).forEach(function(ue){Object.defineProperty(O,ue,Object.getOwnPropertyDescriptor(ce,ue))})}return O}({},M,{depth:0,customInspect:!1}))}}],G&&function _(w,F){for(var G=0;G<F.length;G++){var T=F[G];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}(w.prototype,G),w}()},6163:function(Ut){"use strict";function $e(H,_){De(H,_),ne(H)}function ne(H){H._writableState&&!H._writableState.emitClose||H._readableState&&!H._readableState.emitClose||H.emit("close")}function De(H,_){H.emit("error",_)}Ut.exports={destroy:function(H,_){var E=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(H):H&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(De,this,H)):process.nextTick(De,this,H)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(H||null,function(w){!_&&w?E._writableState?E._writableState.errorEmitted?process.nextTick(ne,E):(E._writableState.errorEmitted=!0,process.nextTick($e,E,w)):process.nextTick($e,E,w):_?(process.nextTick(ne,E),_(w)):process.nextTick(ne,E)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(H,_){var E=H._readableState,k=H._writableState;E&&E.autoDestroy||k&&k.autoDestroy?H.destroy(_):H.emit("error",_)}}},8800:function(Ut,$e,ne){"use strict";var De=ne(3690).q.ERR_STREAM_PREMATURE_CLOSE;function H(){}Ut.exports=function _(E,k,V){if("function"==typeof k)return _(E,null,k);var Ne,$;k||(k={}),Ne=V||H,$=!1,V=function(){if(!$){$=!0;for(var be=arguments.length,xe=new Array(be),x=0;x<be;x++)xe[x]=arguments[x];Ne.apply(this,xe)}};var w=k.readable||!1!==k.readable&&E.readable,F=k.writable||!1!==k.writable&&E.writable,G=function(){E.writable||M()},T=E._writableState&&E._writableState.finished,M=function(){F=!1,T=!0,w||V.call(E)},O=E._readableState&&E._readableState.endEmitted,te=function(){w=!1,O=!0,F||V.call(E)},ce=function(Ne){V.call(E,Ne)},ue=function(){var Ne;return w&&!O?(E._readableState&&E._readableState.ended||(Ne=new De),V.call(E,Ne)):F&&!T?(E._writableState&&E._writableState.ended||(Ne=new De),V.call(E,Ne)):void 0},se=function(){E.req.on("finish",M)};return function(Ne){return Ne.setHeader&&"function"==typeof Ne.abort}(E)?(E.on("complete",M),E.on("abort",ue),E.req?se():E.on("request",se)):F&&!E._writableState&&(E.on("end",G),E.on("close",G)),E.on("end",te),E.on("finish",M),!1!==k.error&&E.on("error",ce),E.on("close",ue),function(){E.removeListener("complete",M),E.removeListener("abort",ue),E.removeListener("request",se),E.req&&E.req.removeListener("finish",M),E.removeListener("end",G),E.removeListener("close",G),E.removeListener("finish",M),E.removeListener("end",te),E.removeListener("error",ce),E.removeListener("close",ue)}}},6233:function(Ut){Ut.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(Ut,$e,ne){"use strict";var De,H=ne(3690).q,_=H.ERR_MISSING_ARGS,E=H.ERR_STREAM_DESTROYED;function k(T){if(T)throw T}function w(T){T()}function F(T,M){return T.pipe(M)}Ut.exports=function(){for(var T=arguments.length,M=new Array(T),O=0;O<T;O++)M[O]=arguments[O];var te,ce=function G(T){return T.length?"function"!=typeof T[T.length-1]?k:T.pop():k}(M);if(Array.isArray(M[0])&&(M=M[0]),M.length<2)throw new _("streams");var ue=M.map(function(se,Ne){var $=Ne<M.length-1;return function V(T,M,O,te){var se,Ne;se=te,Ne=!1,te=function(){Ne||(Ne=!0,se.apply(void 0,arguments))};var ce=!1;T.on("close",function(){ce=!0}),void 0===De&&(De=ne(8800)),De(T,{readable:M,writable:O},function(se){if(se)return te(se);ce=!0,te()});var ue=!1;return function(se){if(!ce&&!ue)return ue=!0,function(Ne){return Ne.setHeader&&"function"==typeof Ne.abort}(T)?T.abort():"function"==typeof T.destroy?T.destroy():void te(se||new E("pipe"))}}(se,$,Ne>0,function(be){te||(te=be),be&&ue.forEach(w),$||(ue.forEach(w),ce(te))})});return M.reduce(F)}},7269:function(Ut,$e,ne){"use strict";var De=ne(3690).q.ERR_INVALID_OPT_VALUE;Ut.exports={getHighWaterMark:function(H,_,E,k){var w,V=null!=(w=_).highWaterMark?w.highWaterMark:k?w[E]:null;if(null!=V){if(!isFinite(V)||Math.floor(V)!==V||V<0)throw new De(k?E:"highWaterMark",V);return Math.floor(V)}return H.objectMode?16:16384}}},9299:function(Ut,$e,ne){Ut.exports=ne(1159).EventEmitter},7503:function(Ut,$e,ne){"use strict";var De=ne(8387).Buffer,H=De.isEncoding||function(O){switch((O=""+O)&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _(O){var te;switch(this.encoding=function(ce){var ue=function(se){if(!se)return"utf8";for(var Ne;;)switch(se){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return se;default:if(Ne)return;se=(""+se).toLowerCase(),Ne=!0}}(ce);if("string"!=typeof ue&&(De.isEncoding===H||!H(ce)))throw new Error("Unknown encoding: "+ce);return ue||ce}(O),this.encoding){case"utf16le":this.text=V,this.end=w,te=4;break;case"utf8":this.fillLast=k,te=4;break;case"base64":this.text=F,this.end=G,te=3;break;default:return this.write=T,void(this.end=M)}this.lastNeed=0,this.lastTotal=0,this.lastChar=De.allocUnsafe(te)}function E(O){return O<=127?0:O>>5==6?2:O>>4==14?3:O>>3==30?4:O>>6==2?-1:-2}function k(O){var te=this.lastTotal-this.lastNeed,ce=function(ue,se,Ne){if(128!=(192&se[0]))return ue.lastNeed=0,"\ufffd";if(ue.lastNeed>1&&se.length>1){if(128!=(192&se[1]))return ue.lastNeed=1,"\ufffd";if(ue.lastNeed>2&&se.length>2&&128!=(192&se[2]))return ue.lastNeed=2,"\ufffd"}}(this,O);return void 0!==ce?ce:this.lastNeed<=O.length?(O.copy(this.lastChar,te,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(O.copy(this.lastChar,te,0,O.length),void(this.lastNeed-=O.length))}function V(O,te){if((O.length-te)%2==0){var ce=O.toString("utf16le",te);if(ce){var ue=ce.charCodeAt(ce.length-1);if(ue>=55296&&ue<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],ce.slice(0,-1)}return ce}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",te,O.length-1)}function w(O){var te=O&&O.length?this.write(O):"";return this.lastNeed?te+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):te}function F(O,te){var ce=(O.length-te)%3;return 0===ce?O.toString("base64",te):(this.lastNeed=3-ce,this.lastTotal=3,1===ce?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",te,O.length-ce))}function G(O){var te=O&&O.length?this.write(O):"";return this.lastNeed?te+this.lastChar.toString("base64",0,3-this.lastNeed):te}function T(O){return O.toString(this.encoding)}function M(O){return O&&O.length?this.write(O):""}$e.s=_,_.prototype.write=function(O){if(0===O.length)return"";var te,ce;if(this.lastNeed){if(void 0===(te=this.fillLast(O)))return"";ce=this.lastNeed,this.lastNeed=0}else ce=0;return ce<O.length?te?te+this.text(O,ce):this.text(O,ce):te||""},_.prototype.end=function(O){var te=O&&O.length?this.write(O):"";return this.lastNeed?te+"\ufffd":te},_.prototype.text=function(O,te){var ce=function(se,Ne,$){var be=Ne.length-1;if(be<$)return 0;var xe=E(Ne[be]);return xe>=0?(xe>0&&(se.lastNeed=xe-1),xe):--be<$||-2===xe?0:(xe=E(Ne[be]))>=0?(xe>0&&(se.lastNeed=xe-2),xe):--be<$||-2===xe?0:(xe=E(Ne[be]))>=0?(xe>0&&(2===xe?xe=0:se.lastNeed=xe-3),xe):0}(this,O,te);if(!this.lastNeed)return O.toString("utf8",te);this.lastTotal=ce;var ue=O.length-(ce-this.lastNeed);return O.copy(this.lastChar,0,ue),O.toString("utf8",te,ue)},_.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length}},1067:function(Ut,$e,ne){var De;!function(H,_){"use strict";var E="function",k="undefined",V="object",w="string",F="model",G="name",T="type",M="vendor",O="version",te="architecture",ce="console",ue="mobile",se="tablet",Ne="smarttv",$="wearable",be="embedded",xe="Amazon",x="Apple",he="BlackBerry",Je="Browser",Me="Chrome",ot="Firefox",yt="Google",Le="Microsoft",Lt="Motorola",Vt="Opera",ze="Samsung",mt="Sony",Yt="Zebra",Tt="Facebook",Rt=function(At){for(var it={},et=0;et<At.length;et++)it[At[et].toUpperCase()]=At[et];return it},Ze=function(At,it){return typeof At===w&&-1!==qe(it).indexOf(qe(At))},qe=function(At){return At.toLowerCase()},It=function(At,it){if(typeof At===w)return At=At.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof it===k?At:At.substring(0,255)},N=function(At,it){for(var et,rt,Et,Ot,_n,Zt,xn=0;xn<it.length&&!_n;){var Rn=it[xn],Mn=it[xn+1];for(et=rt=0;et<Rn.length&&!_n;)if(_n=Rn[et++].exec(At))for(Et=0;Et<Mn.length;Et++)Zt=_n[++rt],typeof(Ot=Mn[Et])===V&&Ot.length>0?2===Ot.length?this[Ot[0]]=typeof Ot[1]==E?Ot[1].call(this,Zt):Ot[1]:3===Ot.length?this[Ot[0]]=typeof Ot[1]!==E||Ot[1].exec&&Ot[1].test?Zt?Zt.replace(Ot[1],Ot[2]):_:Zt?Ot[1].call(this,Zt,Ot[2]):_:4===Ot.length&&(this[Ot[0]]=Zt?Ot[3].call(this,Zt.replace(Ot[1],Ot[2])):_):this[Ot]=Zt||_;xn+=2}},I=function(At,it){for(var et in it)if(typeof it[et]===V&&it[et].length>0){for(var rt=0;rt<it[et].length;rt++)if(Ze(it[et][rt],At))return"?"===et?_:et}else if(Ze(it[et],At))return"?"===et?_:et;return At},Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[G,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[G,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[G,O],[/opios[\/ ]+([\w\.]+)/i],[O,[G,Vt+" Mini"]],[/\bopr\/([\w\.]+)/i],[O,[G,Vt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[G,O],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[G,"UC"+Je]],[/\bqbcore\/([\w\.]+)/i],[O,[G,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[O,[G,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[G,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[G,"IE"]],[/yabrowser\/([\w\.]+)/i],[O,[G,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[G,/(.+)/,"$1 Secure "+Je],O],[/\bfocus\/([\w\.]+)/i],[O,[G,ot+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[G,Vt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[G,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[G,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[G,Vt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[G,"MIUI "+Je]],[/fxios\/([-\w\.]+)/i],[O,[G,ot]],[/\bqihu|(qi?ho?o?|360)browser/i],[[G,"360 "+Je]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[G,/(.+)/,"$1 "+Je],O],[/(comodo_dragon)\/([\w\.]+)/i],[[G,/_/g," "],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[G,O],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[G],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[G,Tt],O],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[G,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[G,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[G,Me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[G,Me+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[G,"Android "+Je]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[G,O],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[O,[G,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[O,G],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[G,[O,I,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[G,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[G,"Netscape"],O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[G,ot+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[G,O]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[te,"amd64"]],[/(ia32(?=;))/i],[[te,qe]],[/((?:i[346]|x)86)[;\)]/i],[[te,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[te,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[te,"armhf"]],[/windows (ce|mobile); ppc;/i],[[te,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[te,/ower/,"",qe]],[/(sun4\w)[;\)]/i],[[te,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[te,qe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[F,[M,ze],[T,se]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[F,[M,ze],[T,ue]],[/\((ip(?:hone|od)[\w ]*);/i],[F,[M,x],[T,ue]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[F,[M,x],[T,se]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[F,[M,"Huawei"],[T,se]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[F,[M,"Huawei"],[T,ue]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[F,/_/g," "],[M,"Xiaomi"],[T,ue]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[F,/_/g," "],[M,"Xiaomi"],[T,se]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[F,[M,"OPPO"],[T,ue]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[F,[M,"Vivo"],[T,ue]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[F,[M,"Realme"],[T,ue]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[F,[M,Lt],[T,ue]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[F,[M,Lt],[T,se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[F,[M,"LG"],[T,se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[F,[M,"LG"],[T,ue]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[F,[M,"Lenovo"],[T,se]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[F,/_/g," "],[M,"Nokia"],[T,ue]],[/(pixel c)\b/i],[F,[M,yt],[T,se]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[F,[M,yt],[T,ue]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[F,[M,mt],[T,ue]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[F,"Xperia Tablet"],[M,mt],[T,se]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[F,[M,"OnePlus"],[T,ue]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[F,[M,xe],[T,se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[F,/(.+)/g,"Fire Phone $1"],[M,xe],[T,ue]],[/(playbook);[-\w\),; ]+(rim)/i],[F,M,[T,se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[F,[M,he],[T,ue]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[F,[M,"ASUS"],[T,se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[F,[M,"ASUS"],[T,ue]],[/(nexus 9)/i],[F,[M,"HTC"],[T,se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[M,[F,/_/g," "],[T,ue]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[F,[M,"Acer"],[T,se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[F,[M,"Meizu"],[T,ue]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[F,[M,"Sharp"],[T,ue]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[M,F,[T,ue]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[M,F,[T,se]],[/(surface duo)/i],[F,[M,Le],[T,se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[F,[M,"Fairphone"],[T,ue]],[/(u304aa)/i],[F,[M,"AT&T"],[T,ue]],[/\bsie-(\w*)/i],[F,[M,"Siemens"],[T,ue]],[/\b(rct\w+) b/i],[F,[M,"RCA"],[T,se]],[/\b(venue[\d ]{2,7}) b/i],[F,[M,"Dell"],[T,se]],[/\b(q(?:mv|ta)\w+) b/i],[F,[M,"Verizon"],[T,se]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[F,[M,"Barnes & Noble"],[T,se]],[/\b(tm\d{3}\w+) b/i],[F,[M,"NuVision"],[T,se]],[/\b(k88) b/i],[F,[M,"ZTE"],[T,se]],[/\b(nx\d{3}j) b/i],[F,[M,"ZTE"],[T,ue]],[/\b(gen\d{3}) b.+49h/i],[F,[M,"Swiss"],[T,ue]],[/\b(zur\d{3}) b/i],[F,[M,"Swiss"],[T,se]],[/\b((zeki)?tb.*\b) b/i],[F,[M,"Zeki"],[T,se]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[M,"Dragon Touch"],F,[T,se]],[/\b(ns-?\w{0,9}) b/i],[F,[M,"Insignia"],[T,se]],[/\b((nxa|next)-?\w{0,9}) b/i],[F,[M,"NextBook"],[T,se]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[M,"Voice"],F,[T,ue]],[/\b(lvtel\-)?(v1[12]) b/i],[[M,"LvTel"],F,[T,ue]],[/\b(ph-1) /i],[F,[M,"Essential"],[T,ue]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[F,[M,"Envizen"],[T,se]],[/\b(trio[-\w\. ]+) b/i],[F,[M,"MachSpeed"],[T,se]],[/\btu_(1491) b/i],[F,[M,"Rotor"],[T,se]],[/(shield[\w ]+) b/i],[F,[M,"Nvidia"],[T,se]],[/(sprint) (\w+)/i],[M,F,[T,ue]],[/(kin\.[onetw]{3})/i],[[F,/\./g," "],[M,Le],[T,ue]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[F,[M,Yt],[T,se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[F,[M,Yt],[T,ue]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[M,F,[T,ce]],[/droid.+; (shield) bui/i],[F,[M,"Nvidia"],[T,ce]],[/(playstation [345portablevi]+)/i],[F,[M,mt],[T,ce]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[F,[M,Le],[T,ce]],[/smart-tv.+(samsung)/i],[M,[T,Ne]],[/hbbtv.+maple;(\d+)/i],[[F,/^/,"SmartTV"],[M,ze],[T,Ne]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[M,"LG"],[T,Ne]],[/(apple) ?tv/i],[M,[F,x+" TV"],[T,Ne]],[/crkey/i],[[F,Me+"cast"],[M,yt],[T,Ne]],[/droid.+aft(\w)( bui|\))/i],[F,[M,xe],[T,Ne]],[/\(dtv[\);].+(aquos)/i],[F,[M,"Sharp"],[T,Ne]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[M,It],[F,It],[T,Ne]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[T,Ne]],[/((pebble))app/i],[M,F,[T,$]],[/droid.+; (glass) \d/i],[F,[M,yt],[T,$]],[/droid.+; (wt63?0{2,3})\)/i],[F,[M,Yt],[T,$]],[/(quest( 2)?)/i],[F,[M,Tt],[T,$]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[M,[T,be]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[F,[T,ue]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[F,[T,se]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[T,se]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[T,ue]],[/(android[-\w\. ]{0,9});.+buil/i],[F,[M,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[G,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[G,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[G,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,G]],os:[[/microsoft (windows) (vista|xp)/i],[G,O],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[G,[O,I,Z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[G,"Windows"],[O,I,Z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[G,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[G,"Mac OS"],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[O,G],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[G,O],[/\(bb(10);/i],[O,[G,he]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[G,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[G,ot+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[G,"webOS"]],[/crkey\/([\d\.]+)/i],[O,[G,Me+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[G,"Chromium OS"],O],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[G,O],[/(sunos) ?([\w\.\d]*)/i],[[G,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[G,O]]},Ce=function(At,it){if(typeof At===V&&(it=At,At=_),!(this instanceof Ce))return new Ce(At,it).getResult();var et=At||(typeof H!==k&&H.navigator&&H.navigator.userAgent?H.navigator.userAgent:""),rt=it?function(Et,Ot){var _n={};for(var Zt in Et)_n[Zt]=Ot[Zt]&&Ot[Zt].length%2==0?Ot[Zt].concat(Et[Zt]):Et[Zt];return _n}(q,it):q;return this.getBrowser=function(){var Et,Ot={};return Ot[G]=_,Ot[O]=_,N.call(Ot,et,rt.browser),Ot.major=typeof(Et=Ot.version)===w?Et.replace(/[^\d\.]/g,"").split(".")[0]:_,Ot},this.getCPU=function(){var Et={};return Et[te]=_,N.call(Et,et,rt.cpu),Et},this.getDevice=function(){var Et={};return Et[M]=_,Et[F]=_,Et[T]=_,N.call(Et,et,rt.device),Et},this.getEngine=function(){var Et={};return Et[G]=_,Et[O]=_,N.call(Et,et,rt.engine),Et},this.getOS=function(){var Et={};return Et[G]=_,Et[O]=_,N.call(Et,et,rt.os),Et},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return et},this.setUA=function(Et){return et=typeof Et===w&&Et.length>255?It(Et,255):Et,this},this.setUA(et),this};Ce.VERSION="1.0.2",Ce.BROWSER=Rt([G,O,"major"]),Ce.CPU=Rt([te]),Ce.DEVICE=Rt([F,M,T,ce,ue,Ne,se,$,be]),Ce.ENGINE=Ce.OS=Rt([G,O]),typeof $e!==k?(Ut.exports&&($e=Ut.exports=Ce),$e.UAParser=Ce):ne.amdO?(De=function(){return Ce}.call($e,ne,$e,Ut))===_||(Ut.exports=De):typeof H!==k&&(H.UAParser=Ce);var Ee=typeof H!==k&&(H.jQuery||H.Zepto);if(Ee&&!Ee.ua){var nt=new Ce;Ee.ua=nt.getResult(),Ee.ua.get=function(){return nt.getUA()},Ee.ua.set=function(At){nt.setUA(At);var it=nt.getResult();for(var et in it)Ee.ua[et]=it[et]}}}("object"==typeof window?window:this)},7839:function(Ut,$e,ne){function De(H){try{if(!ne.g.localStorage)return!1}catch{return!1}var _=ne.g.localStorage[H];return null!=_&&"true"===String(_).toLowerCase()}Ut.exports=function(H,_){if(De("noDeprecation"))return H;var E=!1;return function(){if(!E){if(De("throwDeprecation"))throw new Error(_);De("traceDeprecation")?console.trace(_):console.warn(_),E=!0}return H.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(Ut){"use strict";Ut.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(Ut){"use strict";Ut.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(Ut){"use strict";Ut.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(Ut){"use strict";Ut.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(Ut){"use strict";Ut.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(Ut){"use strict";Ut.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},Ti={};function Er(Ut){var $e=Ti[Ut];if(void 0!==$e)return $e.exports;var ne=Ti[Ut]={exports:{}};return Jr[Ut].call(ne.exports,ne,ne.exports,Er),ne.exports}Er.amdO={},Er.n=function(Ut){var $e=Ut&&Ut.__esModule?function(){return Ut.default}:function(){return Ut};return Er.d($e,{a:$e}),$e},Er.d=function(Ut,$e){for(var ne in $e)Er.o($e,ne)&&!Er.o(Ut,ne)&&Object.defineProperty(Ut,ne,{enumerable:!0,get:$e[ne]})},Er.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),Er.o=function(Ut,$e){return Object.prototype.hasOwnProperty.call(Ut,$e)};var fr={};return function(){"use strict";Er.d(fr,{default:function(){return V}}),Er(8416);var Ut,$e=Er(1715),ne=Er(8080),De=Er(1737),H=Er(7688),_=function(){var w,F="application/dash+xml";function G(M,O,te){if(!M||!/^VIDEO$/i.test(M.nodeName))return null;if(M._dashjs_player)return M._dashjs_player;var ce,ue=M.id||M.name||"video element";if(!(O=O||[].slice.call(M.querySelectorAll("source")).filter(function(se){return se.type==F})[0])&&M.src)(O=document.createElement("source")).src=M.src;else if(!O&&!M.src)return null;return(ce=(0,H.Z)(te=te||{}).create()).initialize(M,O.src,M.autoplay),w||(w=ce.getDebug().getLogger()),w.debug("Converted "+ue+" to dash.js player and added content: "+O.src),M._dashjs_player=ce,ce}function T(M){return/^VIDEO$/i.test(M.nodeName)?M:T(M.parentNode)}return{create:G,createAll:function(M,O){var te=[];M=M||"[data-dashjs-player]";for(var ce=(O=O||document).querySelectorAll(M),ue=0;ue<ce.length;ue++){var se=G(ce[ue],null);te.push(se)}for(var Ne=O.querySelectorAll('source[type="'+F+'"]'),$=0;$<Ne.length;$++){var be=G(T(Ne[$]),null);te.push(be)}return te}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?_.createAll():Ut=window.setInterval(function(){window.dashjs&&(window.clearInterval(Ut),_.createAll())},500):window.addEventListener("load",function w(){window.removeEventListener("load",w),_.createAll()}));var E=_,k=Er(6398);dashjs.Protection=De.default,dashjs.MetricsReporting=ne.default,dashjs.MediaPlayerFactory=E,dashjs.Debug=k.Z,dashjs.supportsMediaSource=$e.B;var V=dashjs}(),fr.default}()},857:Ra=>{!function Jr(Ti){Ra.exports=function(){"use strict";function Er(g,d){var c=Object.keys(g);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(g);d&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(g,o).enumerable})),c.push.apply(c,i)}return c}function fr(g){for(var d=1;d<arguments.length;d++){var c=null!=arguments[d]?arguments[d]:{};d%2?Er(Object(c),!0).forEach(function(i){H(g,i,c[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(c)):Er(Object(c)).forEach(function(i){Object.defineProperty(g,i,Object.getOwnPropertyDescriptor(c,i))})}return g}function $e(g){var d=function Ut(g,d){if("object"!=typeof g||!g)return g;var c=g[Symbol.toPrimitive];if(void 0!==c){var i=c.call(g,d||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===d?String:Number)(g)}(g,"string");return"symbol"==typeof d?d:String(d)}function ne(g,d){for(var c=0;c<d.length;c++){var i=d[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(g,$e(i.key),i)}}function De(g,d,c){return d&&ne(g.prototype,d),c&&ne(g,c),Object.defineProperty(g,"prototype",{writable:!1}),g}function H(g,d,c){return(d=$e(d))in g?Object.defineProperty(g,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):g[d]=c,g}function _(){return _=Object.assign?Object.assign.bind():function(g){for(var d=1;d<arguments.length;d++){var c=arguments[d];for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&(g[i]=c[i])}return g},_.apply(this,arguments)}function E(g,d){g.prototype=Object.create(d.prototype),g.prototype.constructor=g,V(g,d)}function k(g){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)})(g)}function V(g,d){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i})(g,d)}function F(g,d,c){return(F=function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(o,u,h){var p=[null];p.push.apply(p,u);var y=new(Function.bind.apply(o,p));return h&&V(y,h.prototype),y}).apply(null,arguments)}function T(g){var d="function"==typeof Map?new Map:void 0;return T=function(i){if(null===i||!function G(g){try{return-1!==Function.toString.call(g).indexOf("[native code]")}catch{return"function"==typeof g}}(i))return i;if("function"!=typeof i)throw new TypeError("Super expression must either be null or a function");if(typeof d<"u"){if(d.has(i))return d.get(i);d.set(i,o)}function o(){return F(i,arguments,k(this).constructor)}return o.prototype=Object.create(i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),V(o,i)},T(g)}function te(g,d){(null==d||d>g.length)&&(d=g.length);for(var c=0,i=new Array(d);c<d;c++)i[c]=g[c];return i}function ce(g,d){var c=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(c)return(c=c.call(g)).next.bind(c);if(Array.isArray(g)||(c=function O(g,d){if(g){if("string"==typeof g)return te(g,d);var c=Object.prototype.toString.call(g).slice(8,-1);if("Object"===c&&g.constructor&&(c=g.constructor.name),"Map"===c||"Set"===c)return Array.from(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return te(g,d)}}(g))||d&&g&&"number"==typeof g.length){c&&(g=c);var i=0;return function(){return i>=g.length?{done:!0}:{done:!1,value:g[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ue(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var i,o,u,h,p,se={exports:{}};i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,o=/^(?=([^\/?#]*))\1([^]*)$/,u=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,se.exports=p={buildAbsoluteURL:function(v,y,A){if(A=A||{},v=v.trim(),!(y=y.trim())){if(!A.alwaysNormalize)return v;var D=p.parseURL(v);if(!D)throw new Error("Error trying to parse base URL.");return D.path=p.normalizePath(D.path),p.buildURLFromParts(D)}var B=p.parseURL(y);if(!B)throw new Error("Error trying to parse relative URL.");if(B.scheme)return A.alwaysNormalize?(B.path=p.normalizePath(B.path),p.buildURLFromParts(B)):y;var ee=p.parseURL(v);if(!ee)throw new Error("Error trying to parse base URL.");if(!ee.netLoc&&ee.path&&"/"!==ee.path[0]){var re=o.exec(ee.path);ee.netLoc=re[1],ee.path=re[2]}ee.netLoc&&!ee.path&&(ee.path="/");var ye={scheme:ee.scheme,netLoc:B.netLoc,path:null,params:B.params,query:B.query,fragment:B.fragment};if(!B.netLoc&&(ye.netLoc=ee.netLoc,"/"!==B.path[0]))if(B.path){var we=ee.path,Ye=we.substring(0,we.lastIndexOf("/")+1)+B.path;ye.path=p.normalizePath(Ye)}else ye.path=ee.path,B.params||(ye.params=ee.params,B.query||(ye.query=ee.query));return null===ye.path&&(ye.path=A.alwaysNormalize?p.normalizePath(B.path):B.path),p.buildURLFromParts(ye)},parseURL:function(v){var y=i.exec(v);return y?{scheme:y[1]||"",netLoc:y[2]||"",path:y[3]||"",params:y[4]||"",query:y[5]||"",fragment:y[6]||""}:null},normalizePath:function(v){for(v=v.split("").reverse().join("").replace(u,"");v.length!==(v=v.replace(h,"")).length;);return v.split("").reverse().join("")},buildURLFromParts:function(v){return v.scheme+v.netLoc+v.path+v.params+v.query+v.fragment}};var Ne=se.exports,$=Number.isFinite||function(g){return"number"==typeof g&&isFinite(g)},be=Number.isSafeInteger||function(g){return"number"==typeof g&&Math.abs(g)<=xe},xe=Number.MAX_SAFE_INTEGER||9007199254740991,x=function(g){return g.MEDIA_ATTACHING="hlsMediaAttaching",g.MEDIA_ATTACHED="hlsMediaAttached",g.MEDIA_DETACHING="hlsMediaDetaching",g.MEDIA_DETACHED="hlsMediaDetached",g.BUFFER_RESET="hlsBufferReset",g.BUFFER_CODECS="hlsBufferCodecs",g.BUFFER_CREATED="hlsBufferCreated",g.BUFFER_APPENDING="hlsBufferAppending",g.BUFFER_APPENDED="hlsBufferAppended",g.BUFFER_EOS="hlsBufferEos",g.BUFFER_FLUSHING="hlsBufferFlushing",g.BUFFER_FLUSHED="hlsBufferFlushed",g.MANIFEST_LOADING="hlsManifestLoading",g.MANIFEST_LOADED="hlsManifestLoaded",g.MANIFEST_PARSED="hlsManifestParsed",g.LEVEL_SWITCHING="hlsLevelSwitching",g.LEVEL_SWITCHED="hlsLevelSwitched",g.LEVEL_LOADING="hlsLevelLoading",g.LEVEL_LOADED="hlsLevelLoaded",g.LEVEL_UPDATED="hlsLevelUpdated",g.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",g.LEVELS_UPDATED="hlsLevelsUpdated",g.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",g.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",g.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",g.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",g.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",g.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",g.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",g.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",g.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",g.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",g.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",g.CUES_PARSED="hlsCuesParsed",g.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",g.INIT_PTS_FOUND="hlsInitPtsFound",g.FRAG_LOADING="hlsFragLoading",g.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",g.FRAG_LOADED="hlsFragLoaded",g.FRAG_DECRYPTED="hlsFragDecrypted",g.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",g.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",g.FRAG_PARSING_METADATA="hlsFragParsingMetadata",g.FRAG_PARSED="hlsFragParsed",g.FRAG_BUFFERED="hlsFragBuffered",g.FRAG_CHANGED="hlsFragChanged",g.FPS_DROP="hlsFpsDrop",g.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",g.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",g.ERROR="hlsError",g.DESTROYING="hlsDestroying",g.KEY_LOADING="hlsKeyLoading",g.KEY_LOADED="hlsKeyLoaded",g.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",g.BACK_BUFFER_REACHED="hlsBackBufferReached",g.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",g}({}),_e=function(g){return g.NETWORK_ERROR="networkError",g.MEDIA_ERROR="mediaError",g.KEY_SYSTEM_ERROR="keySystemError",g.MUX_ERROR="muxError",g.OTHER_ERROR="otherError",g}({}),he=function(g){return g.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",g.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",g.KEY_SYSTEM_NO_SESSION="keySystemNoSession",g.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",g.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",g.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",g.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",g.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",g.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",g.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",g.MANIFEST_LOAD_ERROR="manifestLoadError",g.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",g.MANIFEST_PARSING_ERROR="manifestParsingError",g.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",g.LEVEL_EMPTY_ERROR="levelEmptyError",g.LEVEL_LOAD_ERROR="levelLoadError",g.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",g.LEVEL_PARSING_ERROR="levelParsingError",g.LEVEL_SWITCH_ERROR="levelSwitchError",g.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",g.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",g.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",g.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",g.FRAG_LOAD_ERROR="fragLoadError",g.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",g.FRAG_DECRYPT_ERROR="fragDecryptError",g.FRAG_PARSING_ERROR="fragParsingError",g.FRAG_GAP="fragGap",g.REMUX_ALLOC_ERROR="remuxAllocError",g.KEY_LOAD_ERROR="keyLoadError",g.KEY_LOAD_TIMEOUT="keyLoadTimeOut",g.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",g.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",g.BUFFER_APPEND_ERROR="bufferAppendError",g.BUFFER_APPENDING_ERROR="bufferAppendingError",g.BUFFER_STALLED_ERROR="bufferStalledError",g.BUFFER_FULL_ERROR="bufferFullError",g.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",g.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",g.INTERNAL_EXCEPTION="internalException",g.INTERNAL_ABORTED="aborted",g.UNKNOWN="unknown",g}({}),Je=function(){},Me={trace:Je,debug:Je,log:Je,warn:Je,info:Je,error:Je},ot=Me;function Dt(g){for(var d=arguments.length,c=new Array(d>1?d-1:0),i=1;i<d;i++)c[i-1]=arguments[i];c.forEach(function(o){ot[o]=g[o]?g[o].bind(g):function yt(g){var d=self.console[g];return d?d.bind(self.console,"["+g+"] >"):Je}(o)})}function Qe(g,d){if("object"==typeof console&&!0===g||"object"==typeof g){Dt(g,"debug","log","info","warn","error");try{ot.log('Debug logs enabled for "'+d+'" in hls.js version 1.5.5')}catch{ot=Me}}else ot=Me}var Le=ot,Lt=/^(\d+)x(\d+)$/,Vt=/(.+?)=(".*?"|.*?)(?:,|$)/g,ze=function(){function g(c){"string"==typeof c&&(c=g.parseAttrList(c)),_(this,c)}var d=g.prototype;return d.decimalInteger=function(i){var o=parseInt(this[i],10);return o>Number.MAX_SAFE_INTEGER?1/0:o},d.hexadecimalInteger=function(i){if(this[i]){var o=(this[i]||"0x").slice(2);o=(1&o.length?"0":"")+o;for(var u=new Uint8Array(o.length/2),h=0;h<o.length/2;h++)u[h]=parseInt(o.slice(2*h,2*h+2),16);return u}return null},d.hexadecimalIntegerAsNumber=function(i){var o=parseInt(this[i],16);return o>Number.MAX_SAFE_INTEGER?1/0:o},d.decimalFloatingPoint=function(i){return parseFloat(this[i])},d.optionalFloat=function(i,o){var u=this[i];return u?parseFloat(u):o},d.enumeratedString=function(i){return this[i]},d.bool=function(i){return"YES"===this[i]},d.decimalResolution=function(i){var o=Lt.exec(this[i]);if(null!==o)return{width:parseInt(o[1],10),height:parseInt(o[2],10)}},g.parseAttrList=function(i){var o,u={};for(Vt.lastIndex=0;null!==(o=Vt.exec(i));){var p=o[2];0===p.indexOf('"')&&p.lastIndexOf('"')===p.length-1&&(p=p.slice(1,-1)),u[o[1].trim()]=p}return u},De(g,[{key:"clientAttrs",get:function(){return Object.keys(this).filter(function(i){return"X-"===i.substring(0,2)})}}]),g}();function mt(g){return"ID"!==g&&"CLASS"!==g&&"START-DATE"!==g&&"DURATION"!==g&&"END-DATE"!==g&&"END-ON-NEXT"!==g}function fn(g){return"SCTE35-OUT"===g||"SCTE35-IN"===g}var Yt=function(){function g(d,c){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,c){var i=c.attr;for(var o in i)if(Object.prototype.hasOwnProperty.call(d,o)&&d[o]!==i[o]){Le.warn('DATERANGE tag attribute: "'+o+'" does not match for tags with ID: "'+d.ID+'"'),this._badValueForSameId=o;break}d=_(new ze({}),i,d)}if(this.attr=d,this._startDate=new Date(d["START-DATE"]),"END-DATE"in this.attr){var u=new Date(this.attr["END-DATE"]);$(u.getTime())&&(this._endDate=u)}}return De(g,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var c=this.duration;return null!==c?new Date(this._startDate.getTime()+1e3*c):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var c=this.attr.decimalFloatingPoint("DURATION");if($(c))return c}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&$(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),g}(),Tt=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},Rt_AUDIO="audio",Rt_VIDEO="video",Rt_AUDIOVIDEO="audiovideo",Ze=function(){function g(c){var i;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((i={})[Rt_AUDIO]=null,i[Rt_VIDEO]=null,i[Rt_AUDIOVIDEO]=null,i),this.baseurl=c}return g.prototype.setByteRange=function(i,o){var h,u=i.split("@",2);h=1===u.length?o?.byteRangeEndOffset||0:parseInt(u[1]),this._byteRange=[h,parseInt(u[0])+h]},De(g,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ne.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(i){this._url=i}}]),g}(),qe=function(g){function d(i,o){var u;return(u=g.call(this,o)||this)._decryptdata=null,u.rawProgramDateTime=null,u.programDateTime=null,u.tagList=[],u.duration=0,u.sn=0,u.levelkeys=void 0,u.type=void 0,u.loader=null,u.keyLoader=null,u.level=-1,u.cc=0,u.startPTS=void 0,u.endPTS=void 0,u.startDTS=void 0,u.endDTS=void 0,u.start=0,u.deltaPTS=void 0,u.maxStartPTS=void 0,u.minEndPTS=void 0,u.stats=new Tt,u.data=void 0,u.bitrateTest=!1,u.title=null,u.initSegment=null,u.endList=void 0,u.gap=void 0,u.urlId=0,u.type=i,u}E(d,g);var c=d.prototype;return c.setKeyFormat=function(o){if(this.levelkeys){var u=this.levelkeys[o];u&&!this._decryptdata&&(this._decryptdata=u.getDecryptData(this.sn))}},c.abortRequests=function(){var o,u;null==(o=this.loader)||o.abort(),null==(u=this.keyLoader)||u.abort()},c.setElementaryStreamInfo=function(o,u,h,p,v,y){void 0===y&&(y=!1);var A=this.elementaryStreams,D=A[o];D?(D.startPTS=Math.min(D.startPTS,u),D.endPTS=Math.max(D.endPTS,h),D.startDTS=Math.min(D.startDTS,p),D.endDTS=Math.max(D.endDTS,v)):A[o]={startPTS:u,endPTS:h,startDTS:p,endDTS:v,partial:y}},c.clearElementaryStreamInfo=function(){var o=this.elementaryStreams;o[Rt_AUDIO]=null,o[Rt_VIDEO]=null,o[Rt_AUDIOVIDEO]=null},De(d,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var u=this.levelkeys.identity;if(u)this._decryptdata=u.getDecryptData(this.sn);else{var h=Object.keys(this.levelkeys);if(1===h.length)return this._decryptdata=this.levelkeys[h[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!$(this.programDateTime))return null;var o=$(this.duration)?this.duration:0;return this.programDateTime+1e3*o}},{key:"encrypted",get:function(){var o;if(null!=(o=this._decryptdata)&&o.encrypted)return!0;if(this.levelkeys){var u=Object.keys(this.levelkeys),h=u.length;if(h>1||1===h&&this.levelkeys[u[0]].encrypted)return!0}return!1}}]),d}(Ze),It=function(g){function d(c,i,o,u,h){var p;(p=g.call(this,o)||this).fragOffset=0,p.duration=0,p.gap=!1,p.independent=!1,p.relurl=void 0,p.fragment=void 0,p.index=void 0,p.stats=new Tt,p.duration=c.decimalFloatingPoint("DURATION"),p.gap=c.bool("GAP"),p.independent=c.bool("INDEPENDENT"),p.relurl=c.enumeratedString("URI"),p.fragment=i,p.index=u;var v=c.enumeratedString("BYTERANGE");return v&&p.setByteRange(v,h),h&&(p.fragOffset=h.fragOffset+h.duration),p}return E(d,g),De(d,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var i=this.elementaryStreams;return!!(i.audio||i.video||i.audiovideo)}}]),d}(Ze),I=function(){function g(c){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=c}return g.prototype.reloaded=function(i){if(!i)return this.advanced=!0,void(this.updated=!0);var o=this.lastPartSn-i.lastPartSn,u=this.lastPartIndex-i.lastPartIndex;this.updated=this.endSN!==i.endSN||!!u||!!o||!this.live,this.advanced=this.endSN>i.endSN||o>0||0===o&&u>0,this.misses=this.updated||this.advanced?Math.floor(.6*i.misses):i.misses+1,this.availabilityDelay=i.availabilityDelay},De(g,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&$(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var i=this.driftEndTime-this.driftStartTime;return i>0?1e3*(this.driftEnd-this.driftStart)/i:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var i;return null!=(i=this.partList)&&i.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var i;return null!=(i=this.fragments)&&i.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var i;return null!=(i=this.partList)&&i.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var i;return null!=(i=this.partList)&&i.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),g}();function Z(g){return Uint8Array.from(atob(g),function(d){return d.charCodeAt(0)})}function Ee(g){var d=g.split(":"),c=null;if("data"===d[0]&&2===d.length){var i=d[1].split(";"),o=i[i.length-1].split(",");if(2===o.length){var h=o[1];"base64"===o[0]?(i.splice(-1,1),c=Z(h)):c=function q(g){var d=nt(g).subarray(0,16),c=new Uint8Array(16);return c.set(d,16-d.length),c}(h)}}return c}function nt(g){return Uint8Array.from(unescape(encodeURIComponent(g)),function(d){return d.charCodeAt(0)})}var At=typeof self<"u"?self:void 0,it={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},et_CLEARKEY="org.w3.clearkey",et_FAIRPLAY="com.apple.streamingkeydelivery",et_PLAYREADY="com.microsoft.playready",et_WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function rt(g){switch(g){case et_FAIRPLAY:return it.FAIRPLAY;case et_PLAYREADY:return it.PLAYREADY;case et_WIDEVINE:return it.WIDEVINE;case et_CLEARKEY:return it.CLEARKEY}}var Et_WIDEVINE="edef8ba979d64acea3c827dcd51d21ed";function _n(g){switch(g){case it.FAIRPLAY:return et_FAIRPLAY;case it.PLAYREADY:return et_PLAYREADY;case it.WIDEVINE:return et_WIDEVINE;case it.CLEARKEY:return et_CLEARKEY}}function Zt(g){var d=g.drmSystems,c=g.widevineLicenseUrl,i=d?[it.FAIRPLAY,it.WIDEVINE,it.PLAYREADY,it.CLEARKEY].filter(function(o){return!!d[o]}):[];return!i[it.WIDEVINE]&&c&&i.push(it.WIDEVINE),i}var g,xn=null!=At&&null!=(g=At.navigator)&&g.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Xn(g,d,c){return Uint8Array.prototype.slice?g.slice(d,c):new Uint8Array(Array.prototype.slice.call(g,d,c))}var cn,Ir=function(d,c){return c+10<=d.length&&73===d[c]&&68===d[c+1]&&51===d[c+2]&&d[c+3]<255&&d[c+4]<255&&d[c+6]<128&&d[c+7]<128&&d[c+8]<128&&d[c+9]<128},Yr=function(d,c){return c+10<=d.length&&51===d[c]&&68===d[c+1]&&73===d[c+2]&&d[c+3]<255&&d[c+4]<255&&d[c+6]<128&&d[c+7]<128&&d[c+8]<128&&d[c+9]<128},Li=function(d,c){for(var i=c,o=0;Ir(d,c);)o+=10,o+=ei(d,c+6),Yr(d,c+10)&&(o+=10),c+=o;if(o>0)return d.subarray(i,i+o)},ei=function(d,c){var i=0;return i=(127&d[c])<<21,i|=(127&d[c+1])<<14,(i|=(127&d[c+2])<<7)|127&d[c+3]},gi=function(d,c){return Ir(d,c)&&ei(d,c+6)+10<=d.length-c},Xi=function(d){for(var c=Bi(d),i=0;i<c.length;i++){var o=c[i];if(ti(o))return ha(o)}},ti=function(d){return d&&"PRIV"===d.key&&"com.apple.streaming.transportStreamTimestamp"===d.info},Mo=function(d){var c=String.fromCharCode(d[0],d[1],d[2],d[3]),i=ei(d,4);return{type:c,size:i,data:d.subarray(10,10+i)}},Bi=function(d){for(var c=0,i=[];Ir(d,c);){for(var o=ei(d,c+6),u=(c+=10)+o;c+8<u;){var h=Mo(d.subarray(c)),p=Eo(h);p&&i.push(p),c+=h.size+10}Yr(d,c)&&(c+=10)}return i},Eo=function(d){return"PRIV"===d.type?Zo(d):"W"===d.type[0]?ea(d):_o(d)},Zo=function(d){if(!(d.size<2)){var c=Io(d.data,!0),i=new Uint8Array(d.data.subarray(c.length+1));return{key:d.type,info:c,data:i.buffer}}},_o=function(d){if(!(d.size<2)){if("TXXX"===d.type){var c=1,i=Io(d.data.subarray(c),!0),o=Io(d.data.subarray(c+=i.length+1));return{key:d.type,info:i,data:o}}var u=Io(d.data.subarray(1));return{key:d.type,data:u}}},ea=function(d){if("WXXX"===d.type){if(d.size<2)return;var c=1,i=Io(d.data.subarray(c),!0),o=Io(d.data.subarray(c+=i.length+1));return{key:d.type,info:i,data:o}}var u=Io(d.data);return{key:d.type,data:u}},ha=function(d){if(8===d.data.byteLength){var c=new Uint8Array(d.data),o=(c[4]<<23)+(c[5]<<15)+(c[6]<<7)+c[7];return o/=45,1&c[3]&&(o+=47721858.84),Math.round(o)}},Io=function(d,c){void 0===c&&(c=!1);var i=function un(){if(!navigator.userAgent.includes("PlayStation 4"))return!cn&&typeof self.TextDecoder<"u"&&(cn=new self.TextDecoder("utf-8")),cn}();if(i){var o=i.decode(d);if(c){var u=o.indexOf("\0");return-1!==u?o.substring(0,u):o}return o.replace(/\0/g,"")}for(var p,v,y,h=d.length,A="",D=0;D<h;){if(0===(p=d[D++])&&c)return A;if(0!==p&&3!==p)switch(p>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:A+=String.fromCharCode(p);break;case 12:case 13:v=d[D++],A+=String.fromCharCode((31&p)<<6|63&v);break;case 14:v=d[D++],y=d[D++],A+=String.fromCharCode((15&p)<<12|(63&v)<<6|(63&y)<<0)}}return A};var rn_hexDump=function(d){for(var c="",i=0;i<d.length;i++){var o=d[i].toString(16);o.length<2&&(o="0"+o),c+=o}return c},Ct=Math.pow(2,32)-1,$t=[].push,xt={video:1,audio:2,id3:3,text:4};function kt(g){return String.fromCharCode.apply(null,g)}function bn(g,d){var c=g[d]<<8|g[d+1];return c<0?65536+c:c}function zt(g,d){var c=Wn(g,d);return c<0?4294967296+c:c}function On(g,d){var c=zt(g,d);return(c*=Math.pow(2,32))+zt(g,d+4)}function Wn(g,d){return g[d]<<24|g[d+1]<<16|g[d+2]<<8|g[d+3]}function In(g,d,c){g[d]=c>>24,g[d+1]=c>>16&255,g[d+2]=c>>8&255,g[d+3]=255&c}function gn(g,d){var c=[];if(!d.length)return c;for(var i=g.byteLength,o=0;o<i;){var u=zt(g,o),p=u>1?o+u:i;if(kt(g.subarray(o+4,o+8))===d[0])if(1===d.length)c.push(g.subarray(o+8,p));else{var v=gn(g.subarray(o+8,p),d.slice(1));v.length&&$t.apply(c,v)}o=p}return c}function Vn(g){var d=[],c=g[0],i=8,o=zt(g,i);i+=4;var u=0,h=0;0===c?(u=zt(g,i+=4),h=zt(g,i+=4)):(u=On(g,i+=8),h=On(g,i+=8));var p=g.length+h,v=bn(g,i+=2);i+=2;for(var y=0;y<v;y++){var A=i,D=zt(g,A);A+=4;var B=2147483647&D;if(1==(2147483648&D)>>>31)return Le.warn("SIDX has hierarchical references (not supported)"),null;var re=zt(g,A);A+=4,d.push({referenceSize:B,subsegmentDuration:re,info:{duration:re/o,start:p,end:p+B-1}}),p+=B,i=A+=4}return{earliestPresentationTime:u,timescale:o,version:c,referencesCount:v,references:d}}function sr(g){for(var d=[],c=gn(g,["moov","trak"]),i=0;i<c.length;i++){var o=c[i],u=gn(o,["tkhd"])[0];if(u){var h=u[0],p=zt(u,0===h?12:20),v=gn(o,["mdia","mdhd"])[0];if(v){var y=zt(v,0===(h=v[0])?12:20),A=gn(o,["mdia","hdlr"])[0];if(A){var D=kt(A.subarray(8,12)),B={soun:Rt_AUDIO,vide:Rt_VIDEO}[D];if(B){var re=Dr(gn(o,["mdia","minf","stbl","stsd"])[0]);d[p]={timescale:y,type:B},d[B]=fr({timescale:y,id:p},re)}}}}}return gn(g,["moov","mvex","trex"]).forEach(function(we){var Ye=zt(we,4),Ue=d[Ye];Ue&&(Ue.default={duration:zt(we,12),flags:zt(we,20)})}),d}function Dr(g){var d=g.subarray(8),c=d.subarray(86),i=kt(d.subarray(4,8)),o=i,u="enca"===i||"encv"===i;if(u){var h=gn(d,[i])[0];gn(h.subarray("enca"===i?28:78),["sinf"]).forEach(function(ao){var Jo=gn(ao,["schm"])[0];if(Jo){var no=kt(Jo.subarray(4,8));if("cbcs"===no||"cenc"===no){var Ms=gn(ao,["frma"])[0];Ms&&(o=kt(Ms))}}})}switch(o){case"avc1":case"avc2":case"avc3":case"avc4":var y=gn(c,["avcC"])[0];o+="."+tr(y[1])+tr(y[2])+tr(y[3]);break;case"mp4a":var A=gn(d,[i])[0],D=gn(A.subarray(28),["esds"])[0];if(D&&D.length>12){var B=4;if(3!==D[B++])break;B=Vr(D,B),B+=2;var ee=D[B++];if(128&ee&&(B+=2),64&ee&&(B+=D[B++]),4!==D[B++])break;B=Vr(D,B);var re=D[B++];if(64!==re)break;if(o+="."+tr(re),B+=12,5!==D[B++])break;B=Vr(D,B);var ye=D[B++],we=(248&ye)>>3;31===we&&(we+=1+((7&ye)<<3)+((224&D[B])>>5)),o+="."+we}break;case"hvc1":case"hev1":var Ye=gn(c,["hvcC"])[0],Ue=Ye[1],Xe=["","A","B","C"][Ue>>6],vt=31&Ue,wt=zt(Ye,2),jt=(32&Ue)>>5?"H":"L",Ht=Ye[12],Nt=Ye.subarray(6,12);o+="."+Xe+vt,o+="."+wt.toString(16).toUpperCase(),o+="."+jt+Ht;for(var en="",tn=Nt.length;tn--;){var yn=Nt[tn];(yn||en)&&(en="."+yn.toString(16).toUpperCase()+en)}o+=en;break;case"dvh1":case"dvhe":var $n=gn(c,["dvcC"])[0],nr=$n[2]<<5&32|$n[3]>>3&31;o+="."+nn($n[2]>>1&127)+"."+nn(nr);break;case"vp09":var Hr=gn(c,["vpcC"])[0],ni=Hr[5],Qr=Hr[6]>>4&15;o+="."+nn(Hr[4])+"."+nn(ni)+"."+nn(Qr);break;case"av01":var Br=gn(c,["av1C"])[0],ki=Br[1]>>>5,io=Br[2]>>>7?"H":"M",oo=(64&Br[2])>>6,bi=2===ki&&oo?(32&Br[2])>>5?12:10:oo?10:8,Ui=(16&Br[2])>>4,ba=(8&Br[2])>>3,Qo=(4&Br[2])>>2,_i=3&Br[2];o+="."+ki+"."+nn(31&Br[1])+io+"."+nn(bi)+"."+Ui+"."+ba+Qo+_i+"."+nn(1)+"."+nn(1)+"."+nn(1)+".0"}return{codec:o,encrypted:u}}function Vr(g,d){for(var c=d+5;128&g[d++]&&d<c;);return d}function tr(g){return("0"+g.toString(16).toUpperCase()).slice(-2)}function nn(g){return(g<10?"0":"")+g}function Cn(g){var d=gn(g,["schm"])[0];if(d){var c=kt(d.subarray(4,8));if("cbcs"===c||"cenc"===c)return gn(g,["schi","tenc"])[0]}return Le.error("[eme] missing 'schm' box"),null}function jr(g){var d=zt(g,0),c=8;1&d&&(c+=4),4&d&&(c+=4);for(var i=0,o=zt(g,4),u=0;u<o;u++)256&d&&(i+=zt(g,c),c+=4),512&d&&(c+=4),1024&d&&(c+=4),2048&d&&(c+=4);return i}function ci(g,d){var c=new Uint8Array(g.length+d.length);return c.set(g),c.set(d,g.length),c}function pi(g,d){var c=[],i=d.samples,o=d.timescale,u=d.id,h=!1;return gn(i,["moof"]).map(function(v){var y=v.byteOffset-8;gn(v,["traf"]).map(function(D){var B=gn(D,["tfdt"]).map(function(ee){var re=ee[0],ye=zt(ee,4);return 1===re&&(ye*=Math.pow(2,32),ye+=zt(ee,8)),ye/o})[0];return void 0!==B&&(g=B),gn(D,["tfhd"]).map(function(ee){var re=zt(ee,4),ye=16777215&zt(ee,0),Xe=0,vt=0!=(16&ye),wt=0,jt=0!=(32&ye),Ht=8;re===u&&(0!=(1&ye)&&(Ht+=8),0!=(2&ye)&&(Ht+=4),0!=(8&ye)&&(Xe=zt(ee,Ht),Ht+=4),vt&&(wt=zt(ee,Ht),Ht+=4),jt&&(Ht+=4),"video"===d.type&&(h=function Vi(g){if(!g)return!1;var d=g.indexOf("."),c=d<0?g:g.substring(0,d);return"hvc1"===c||"hev1"===c||"dvh1"===c||"dvhe"===c}(d.codec)),gn(D,["trun"]).map(function(Nt){var en=Nt[0],tn=16777215&zt(Nt,0),yn=0!=(1&tn),An=0,$n=0!=(4&tn),vr=0!=(256&tn),nr=0,Hr=0!=(512&tn),Nr=0,ni=0!=(1024&tn),Qr=0!=(2048&tn),Br=0,ki=zt(Nt,4),vi=8;yn&&(An=zt(Nt,vi),vi+=4),$n&&(vi+=4);for(var io=An+y,oo=0;oo<ki;oo++){if(vr?(nr=zt(Nt,vi),vi+=4):nr=Xe,Hr?(Nr=zt(Nt,vi),vi+=4):Nr=wt,ni&&(vi+=4),Qr&&(Br=0===en?zt(Nt,vi):Wn(Nt,vi),vi+=4),d.type===Rt_VIDEO)for(var Fo=0;Fo<Nr;){var bi=zt(i,io);Ii(h,i[io+=4])&&lo(i.subarray(io,io+bi),h?2:1,g+Br/o,c),io+=bi,Fo+=bi+4}g+=nr/o}}))})})}),c}function Ii(g,d){if(g){var c=d>>1&63;return 39===c||40===c}return 6==(31&d)}function lo(g,d,c,i){var o=Qa(g),u=0;u+=d;for(var h=0,p=0,v=0;u<o.length;){h=0;do{if(u>=o.length)break;h+=v=o[u++]}while(255===v);p=0;do{if(u>=o.length)break;p+=v=o[u++]}while(255===v);var y=o.length-u,A=u;if(p<y)u+=p;else if(p>y){Le.error("Malformed SEI payload. "+p+" is too small, only "+y+" bytes left to parse.");break}if(4===h){if(181===o[A++]){var B=bn(o,A);if(A+=2,49===B){var ee=zt(o,A);if(A+=4,1195456820===ee){var re=o[A++];if(3===re){var ye=o[A++],Ye=64&ye,Ue=Ye?2+3*(31&ye):0,Xe=new Uint8Array(Ue);if(Ye){Xe[0]=ye;for(var vt=1;vt<Ue;vt++)Xe[vt]=o[A++]}i.push({type:re,payloadType:h,pts:c,bytes:Xe})}}}}}else if(5===h&&p>16){for(var wt=[],jt=0;jt<16;jt++){var Ht=o[A++].toString(16);wt.push(1==Ht.length?"0"+Ht:Ht),(3===jt||5===jt||7===jt||9===jt)&&wt.push("-")}for(var Nt=p-16,en=new Uint8Array(Nt),tn=0;tn<Nt;tn++)en[tn]=o[A++];i.push({payloadType:h,pts:c,uuid:wt.join(""),userData:Io(en),userDataBytes:en})}}}function Qa(g){for(var d=g.byteLength,c=[],i=1;i<d-2;)0===g[i]&&0===g[i+1]&&3===g[i+2]?(c.push(i+2),i+=2):i++;if(0===c.length)return g;var o=d-c.length,u=new Uint8Array(o),h=0;for(i=0;i<o;h++,i++)h===c[0]&&(h++,c.shift()),u[i]=g[h];return u}function To(g,d,c){if(16!==g.byteLength)throw new RangeError("Invalid system id");var i,o,p;if(d){i=1,o=new Uint8Array(16*d.length);for(var u=0;u<d.length;u++){var h=d[u];if(16!==h.byteLength)throw new RangeError("Invalid key");o.set(h,16*u)}}else i=0,o=new Uint8Array;i>0?(p=new Uint8Array(4),d.length>0&&new DataView(p.buffer).setUint32(0,d.length,!1)):p=new Uint8Array;var v=new Uint8Array(4);return c&&c.byteLength>0&&new DataView(v.buffer).setUint32(0,c.byteLength,!1),function ta(g){for(var d=arguments.length,c=new Array(d>1?d-1:0),i=1;i<d;i++)c[i-1]=arguments[i];for(var o=c.length,u=8,h=o;h--;)u+=c[h].byteLength;var p=new Uint8Array(u);for(p[0]=u>>24&255,p[1]=u>>16&255,p[2]=u>>8&255,p[3]=255&u,p.set(g,4),h=0,u=8;h<o;h++)p.set(c[h],u),u+=c[h].byteLength;return p}([112,115,115,104],new Uint8Array([i,0,0,0]),g,p,o,v,c||new Uint8Array)}var vs={},Ma=function(){function g(c,i,o,u,h){void 0===u&&(u=[1]),void 0===h&&(h=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=c,this.uri=i,this.keyFormat=o,this.keyFormatVersions=u,this.iv=h,this.encrypted=!!c&&"NONE"!==c,this.isCommonEncryption=this.encrypted&&"AES-128"!==c}g.clearKeyUriToKeyIdMap=function(){vs={}};var d=g.prototype;return d.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case et_FAIRPLAY:case et_WIDEVINE:case et_PLAYREADY:case et_CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},d.getDecryptData=function(i){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof i&&("AES-128"===this.method&&!this.iv&&Le.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),i=0);var o=function ml(g){for(var d=new Uint8Array(16),c=12;c<16;c++)d[c]=g>>8*(15-c)&255;return d}(i);return new g(this.method,this.uri,"identity",this.keyFormatVersions,o)}var h=Ee(this.uri);if(h)switch(this.keyFormat){case et_WIDEVINE:this.pssh=h,h.length>=22&&(this.keyId=h.subarray(h.length-22,h.length-6));break;case et_PLAYREADY:var p=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=To(p,null,h);var v=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/2),y=String.fromCharCode.apply(null,Array.from(v)),A=y.substring(y.indexOf("<"),y.length),ee=(new DOMParser).parseFromString(A,"text/xml").getElementsByTagName("KID")[0];if(ee){var re=ee.childNodes[0]?ee.childNodes[0].nodeValue:ee.getAttribute("VALUE");if(re){var ye=Z(re).subarray(0,16);(function Ce(g){var d=function(i,o,u){var h=i[o];i[o]=i[u],i[u]=h};d(g,0,3),d(g,1,2),d(g,4,5),d(g,6,7)})(ye),this.keyId=ye}}break;default:var we=h.subarray(0,16);if(16!==we.length){var Ye=new Uint8Array(16);Ye.set(we,16-we.length),we=Ye}this.keyId=we}if(!this.keyId||16!==this.keyId.byteLength){var Ue=vs[this.uri];if(!Ue){var Xe=Object.keys(vs).length%Number.MAX_SAFE_INTEGER;Ue=new Uint8Array(16),new DataView(Ue.buffer,12,4).setUint32(0,Xe),vs[this.uri]=Ue}this.keyId=Ue}return this},g}();var Us=/\{\$([a-zA-Z0-9-_]+)\}/g;function es(g){return Us.test(g)}function pn(g,d,c){if(null!==g.variableList||g.hasVariableRefs)for(var i=c.length;i--;){var o=c[i],u=d[o];u&&(d[o]=Qn(g,u))}}function Qn(g,d){if(null!==g.variableList||g.hasVariableRefs){var c=g.variableList;return d.replace(Us,function(i){var o=i.substring(2,i.length-1),u=c?.[o];return void 0===u?(g.playlistParsingError||(g.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+o+'"')),i):u})}return d}function Sr(g,d,c){var o,u,i=g.variableList;if(i||(g.variableList=i={}),"QUERYPARAM"in d){o=d.QUERYPARAM;try{var h=new self.URL(c).searchParams;if(!h.has(o))throw new Error('"'+o+'" does not match any query parameter in URI: "'+c+'"');u=h.get(o)}catch(p){g.playlistParsingError||(g.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+p.message))}}else o=d.NAME,u=d.VALUE;o in i?g.playlistParsingError||(g.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+o+'"')):i[o]=u||""}function Oi(g,d,c){var i=d.IMPORT;if(c&&i in c){var o=g.variableList;o||(g.variableList=o={}),o[i]=c[i]}else g.playlistParsingError||(g.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+i+'"'))}function fi(g){if(void 0===g&&(g=!0),!(typeof self>"u"))return(g||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}var _r={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function qr(g,d,c){return void 0===c&&(c=!0),!g.split(",").some(function(i){return!Di(i,d,c)})}function Di(g,d,c){var i;void 0===c&&(c=!0);var o=fi(c);return null!=(i=o?.isTypeSupported(li(g,d)))&&i}function li(g,d){return d+'/mp4;codecs="'+g+'"'}function Kr(g){if(g){var d=g.substring(0,4);return _r.video[d]}return 2}function or(g){return g.split(",").reduce(function(d,c){var i=_r.video[c];return i?(2*i+d)/(d?3:2):(_r.audio[c]+d)/(d?2:1)},0)}var jo={};var ys=/flac|opus/i;function qo(g,d){return void 0===d&&(d=!0),g.replace(ys,function(c){return function No(g,d){if(void 0===d&&(d=!0),jo[g])return jo[g];for(var c={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[g],i=0;i<c.length;i++)if(Di(c[i],"audio",d))return jo[g]=c[i],c[i];return g}(c.toLowerCase(),d)})}function Zn(g,d){return g&&"mp4a"!==g?g:d}var br=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,ii=/#EXT-X-MEDIA:(.*)/g,Yl=/^#EXT(?:INF|-X-TARGETDURATION):/m,zl=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Uu=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),ga=function(){function g(){}return g.findGroup=function(c,i){for(var o=0;o<c.length;o++){var u=c[o];if(u.id===i)return u}},g.resolve=function(c,i){return Ne.buildAbsoluteURL(i,c,{alwaysNormalize:!0})},g.isMediaPlaylist=function(c){return Yl.test(c)},g.parseMasterPlaylist=function(c,i){var p,u={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:es(c)},h=[];for(br.lastIndex=0;null!=(p=br.exec(c));)if(p[1]){var v,y=new ze(p[1]);pn(u,y,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var A=Qn(u,p[2]),D={attrs:y,bitrate:y.decimalInteger("BANDWIDTH")||y.decimalInteger("AVERAGE-BANDWIDTH"),name:y.NAME,url:g.resolve(A,i)},B=y.decimalResolution("RESOLUTION");B&&(D.width=B.width,D.height=B.height),Bu(y.CODECS,D),null!=(v=D.unknownCodecs)&&v.length||h.push(D),u.levels.push(D)}else if(p[3]){var re=p[4];switch(p[3]){case"SESSION-DATA":var ye=new ze(re);pn(u,ye,["DATA-ID","LANGUAGE","VALUE","URI"]);var we=ye["DATA-ID"];we&&(null===u.sessionData&&(u.sessionData={}),u.sessionData[we]=ye);break;case"SESSION-KEY":var Ye=So(re,i,u);Ye.encrypted&&Ye.isSupported()?(null===u.sessionKeys&&(u.sessionKeys=[]),u.sessionKeys.push(Ye)):Le.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+re+'"');break;case"DEFINE":var Ue=new ze(re);pn(u,Ue,["NAME","VALUE","QUERYPARAM"]),Sr(u,Ue,i);break;case"CONTENT-STEERING":var Xe=new ze(re);pn(u,Xe,["SERVER-URI","PATHWAY-ID"]),u.contentSteering={uri:g.resolve(Xe["SERVER-URI"],i),pathwayId:Xe["PATHWAY-ID"]||"."};break;case"START":u.startTimeOffset=vl(re)}}return u.levels=h.length>0&&h.length<u.levels.length?h:u.levels,0===u.levels.length&&(u.playlistParsingError=new Error("no levels found in manifest")),u},g.parseMasterPlaylistMedia=function(c,i,o){var u,h={},p=o.levels,v={AUDIO:p.map(function(wt){return{id:wt.attrs.AUDIO,audioCodec:wt.audioCodec}}),SUBTITLES:p.map(function(wt){return{id:wt.attrs.SUBTITLES,textCodec:wt.textCodec}}),"CLOSED-CAPTIONS":[]},y=0;for(ii.lastIndex=0;null!==(u=ii.exec(c));){var A=new ze(u[1]),D=A.TYPE;if(D){var B=v[D],ee=h[D]||[];h[D]=ee,pn(o,A,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var re=A.LANGUAGE,ye=A["ASSOC-LANGUAGE"],we=A.CHANNELS,Ye=A.CHARACTERISTICS,Ue=A["INSTREAM-ID"],Xe={attrs:A,bitrate:0,id:y++,groupId:A["GROUP-ID"]||"",name:A.NAME||re||"",type:D,default:A.bool("DEFAULT"),autoselect:A.bool("AUTOSELECT"),forced:A.bool("FORCED"),lang:re,url:A.URI?g.resolve(A.URI,i):""};if(ye&&(Xe.assocLang=ye),we&&(Xe.channels=we),Ye&&(Xe.characteristics=Ye),Ue&&(Xe.instreamId=Ue),null!=B&&B.length){var vt=g.findGroup(B,Xe.groupId)||B[0];Wl(Xe,vt,"audioCodec"),Wl(Xe,vt,"textCodec")}ee.push(Xe)}}return h},g.parseLevelPlaylist=function(c,i,o,u,h,p){var Ye,Ue,Xe,v=new I(i),y=v.fragments,A=null,D=0,B=0,ee=0,re=0,ye=null,we=new qe(u,i),vt=-1,wt=!1,jt=null;for(zl.lastIndex=0,v.m3u8=c,v.hasVariableRefs=es(c);null!==(Ye=zl.exec(c));){wt&&(wt=!1,(we=new qe(u,i)).start=ee,we.sn=D,we.cc=re,we.level=o,A&&(we.initSegment=A,we.rawProgramDateTime=A.rawProgramDateTime,A.rawProgramDateTime=null,jt&&(we.setByteRange(jt),jt=null)));var Ht=Ye[1];if(Ht){we.duration=parseFloat(Ht);var Nt=(" "+Ye[2]).slice(1);we.title=Nt||null,we.tagList.push(Nt?["INF",Ht,Nt]:["INF",Ht])}else if(Ye[3]){if($(we.duration)){we.start=ee,Xe&&ts(we,Xe,v),we.sn=D,we.level=o,we.cc=re,y.push(we);var en=(" "+Ye[3]).slice(1);we.relurl=Qn(v,en),Vu(we,ye),ye=we,ee+=we.duration,D++,B=0,wt=!0}}else if(Ye[4]){var tn=(" "+Ye[4]).slice(1);ye?we.setByteRange(tn,ye):we.setByteRange(tn)}else if(Ye[5])we.rawProgramDateTime=(" "+Ye[5]).slice(1),we.tagList.push(["PROGRAM-DATE-TIME",we.rawProgramDateTime]),-1===vt&&(vt=y.length);else{if(!(Ye=Ye[0].match(Uu))){Le.warn("No matches on slow regex match for level playlist!");continue}for(Ue=1;Ue<Ye.length&&!(typeof Ye[Ue]<"u");Ue++);var yn=(" "+Ye[Ue]).slice(1),An=(" "+Ye[Ue+1]).slice(1),$n=Ye[Ue+2]?(" "+Ye[Ue+2]).slice(1):"";switch(yn){case"PLAYLIST-TYPE":v.type=An.toUpperCase();break;case"MEDIA-SEQUENCE":D=v.startSN=parseInt(An);break;case"SKIP":var vr=new ze(An);pn(v,vr,["RECENTLY-REMOVED-DATERANGES"]);var nr=vr.decimalInteger("SKIPPED-SEGMENTS");if($(nr)){v.skippedSegments=nr;for(var Hr=nr;Hr--;)y.unshift(null);D+=nr}var Nr=vr.enumeratedString("RECENTLY-REMOVED-DATERANGES");Nr&&(v.recentlyRemovedDateranges=Nr.split("\t"));break;case"TARGETDURATION":v.targetduration=Math.max(parseInt(An),1);break;case"VERSION":v.version=parseInt(An);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"#":(An||$n)&&we.tagList.push($n?[An,$n]:[An]);break;case"DISCONTINUITY":re++,we.tagList.push(["DIS"]);break;case"GAP":we.gap=!0,we.tagList.push([yn]);break;case"BITRATE":we.tagList.push([yn,An]);break;case"DATERANGE":var ni=new ze(An);pn(v,ni,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),pn(v,ni,ni.clientAttrs);var Qr=new Yt(ni,v.dateRanges[ni.ID]);Qr.isValid||v.skippedSegments?v.dateRanges[Qr.id]=Qr:Le.warn('Ignoring invalid DATERANGE tag: "'+An+'"'),we.tagList.push(["EXT-X-DATERANGE",An]);break;case"DEFINE":var Br=new ze(An);pn(v,Br,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in Br?Oi(v,Br,p):Sr(v,Br,i);break;case"DISCONTINUITY-SEQUENCE":re=parseInt(An);break;case"KEY":var ki=So(An,i,v);if(ki.isSupported()){if("NONE"===ki.method){Xe=void 0;break}Xe||(Xe={}),Xe[ki.keyFormat]&&(Xe=_({},Xe)),Xe[ki.keyFormat]=ki}else Le.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+An+'"');break;case"START":v.startTimeOffset=vl(An);break;case"MAP":var vi=new ze(An);if(pn(v,vi,["BYTERANGE","URI"]),we.duration){var io=new qe(u,i);yi(io,vi,o,Xe),we.initSegment=A=io,A.rawProgramDateTime&&!we.rawProgramDateTime&&(we.rawProgramDateTime=A.rawProgramDateTime)}else{var oo=we.byteRangeEndOffset;if(oo){var Fo=we.byteRangeStartOffset;jt=oo-Fo+"@"+Fo}else jt=null;yi(we,vi,o,Xe),A=we,wt=!0}break;case"SERVER-CONTROL":var bi=new ze(An);v.canBlockReload=bi.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=bi.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&bi.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=bi.optionalFloat("PART-HOLD-BACK",0),v.holdBack=bi.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Ui=new ze(An);v.partTarget=Ui.decimalFloatingPoint("PART-TARGET");break;case"PART":var ba=v.partList;ba||(ba=v.partList=[]);var Qo=B>0?ba[ba.length-1]:void 0,_i=B++,ko=new ze(An);pn(v,ko,["BYTERANGE","URI"]);var la=new It(ko,we,i,_i,Qo);ba.push(la),we.duration+=la.duration;break;case"PRELOAD-HINT":var ji=new ze(An);pn(v,ji,["URI"]),v.preloadHint=ji;break;case"RENDITION-REPORT":var to=new ze(An);pn(v,to,["URI"]),v.renditionReports=v.renditionReports||[],v.renditionReports.push(to);break;default:Le.warn("line parsed but not handled: "+Ye)}}}ye&&!ye.relurl?(y.pop(),ee-=ye.duration,v.partList&&(v.fragmentHint=ye)):v.partList&&(Vu(we,ye),we.cc=re,v.fragmentHint=we,Xe&&ts(we,Xe,v));var ao=y.length,Jo=y[0],no=y[ao-1];if((ee+=v.skippedSegments*v.targetduration)>0&&ao&&no){v.averagetargetduration=ee/ao;var Ms=no.sn;v.endSN="initSegment"!==Ms?Ms:0,v.live||(no.endList=!0),Jo&&(v.startCC=Jo.cc)}else v.endSN=0,v.startCC=0;return v.fragmentHint&&(ee+=v.fragmentHint.duration),v.totalduration=ee,v.endCC=re,vt>0&&function xa(g,d){for(var c=g[d],i=d;i--;){var o=g[i];if(!o)return;o.programDateTime=c.programDateTime-1e3*o.duration,c=o}}(y,vt),v},g}();function So(g,d,c){var i,o,u=new ze(g);pn(c,u,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var h=null!=(i=u.METHOD)?i:"",p=u.URI,v=u.hexadecimalInteger("IV"),y=u.KEYFORMATVERSIONS,A=null!=(o=u.KEYFORMAT)?o:"identity";p&&u.IV&&!v&&Le.error("Invalid IV: "+u.IV);var D=p?ga.resolve(p,d):"",B=(y||"1").split("/").map(Number).filter(Number.isFinite);return new Ma(h,D,A,B,v)}function vl(g){var c=new ze(g).decimalFloatingPoint("TIME-OFFSET");return $(c)?c:null}function Bu(g,d){var c=(g||"").split(/[ ,]+/).filter(function(i){return i});["video","audio","text"].forEach(function(i){var o=c.filter(function(u){return function si(g,d){var c=_r[d];return!!c&&!!c[g.slice(0,4)]}(u,i)});o.length&&(d[i+"Codec"]=o.join(","),c=c.filter(function(u){return-1===o.indexOf(u)}))}),d.unknownCodecs=c}function Wl(g,d,c){var i=d[c];i&&(g[c]=i)}function Vu(g,d){g.rawProgramDateTime?g.programDateTime=Date.parse(g.rawProgramDateTime):null!=d&&d.programDateTime&&(g.programDateTime=d.endProgramDateTime),$(g.programDateTime)||(g.programDateTime=null,g.rawProgramDateTime=null)}function yi(g,d,c,i){g.relurl=d.URI,d.BYTERANGE&&g.setByteRange(d.BYTERANGE),g.level=c,g.sn="initSegment",i&&(g.levelkeys=i),g.initSegment=null}function ts(g,d,c){g.levelkeys=d;var i=c.encryptedFragments;(!i.length||i[i.length-1].levelkeys!==d)&&Object.keys(d).some(function(o){return d[o].isCommonEncryption})&&i.push(g)}var Gr_MANIFEST="manifest",Gr_LEVEL="level",Gr_AUDIO_TRACK="audioTrack",Gr_SUBTITLE_TRACK="subtitleTrack",mr_MAIN="main",mr_AUDIO="audio",mr_SUBTITLE="subtitle";function Hu(g){switch(g.type){case Gr_AUDIO_TRACK:return mr_AUDIO;case Gr_SUBTITLE_TRACK:return mr_SUBTITLE;default:return mr_MAIN}}function Ko(g,d){var c=g.url;return(void 0===c||0===c.indexOf("data:"))&&(c=d.url),c}var Gu=function(){function g(c){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=c,this.registerListeners()}var d=g.prototype;return d.startLoad=function(i){},d.stopLoad=function(){this.destroyInternalLoaders()},d.registerListeners=function(){var i=this.hls;i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.LEVEL_LOADING,this.onLevelLoading,this),i.on(x.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),i.on(x.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},d.unregisterListeners=function(){var i=this.hls;i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.LEVEL_LOADING,this.onLevelLoading,this),i.off(x.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),i.off(x.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},d.createInternalLoader=function(i){var o=this.hls.config,v=new(o.pLoader||o.loader)(o);return this.loaders[i.type]=v,v},d.getInternalLoader=function(i){return this.loaders[i.type]},d.resetInternalLoader=function(i){this.loaders[i]&&delete this.loaders[i]},d.destroyInternalLoaders=function(){for(var i in this.loaders){var o=this.loaders[i];o&&o.destroy(),this.resetInternalLoader(i)}},d.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},d.onManifestLoading=function(i,o){var u=o.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Gr_MANIFEST,url:u,deliveryDirectives:null})},d.onLevelLoading=function(i,o){this.load({id:o.id,level:o.level,pathwayId:o.pathwayId,responseType:"text",type:Gr_LEVEL,url:o.url,deliveryDirectives:o.deliveryDirectives})},d.onAudioTrackLoading=function(i,o){this.load({id:o.id,groupId:o.groupId,level:null,responseType:"text",type:Gr_AUDIO_TRACK,url:o.url,deliveryDirectives:o.deliveryDirectives})},d.onSubtitleTrackLoading=function(i,o){this.load({id:o.id,groupId:o.groupId,level:null,responseType:"text",type:Gr_SUBTITLE_TRACK,url:o.url,deliveryDirectives:o.deliveryDirectives})},d.load=function(i){var o,y,A,u=this,h=this.hls.config,p=this.getInternalLoader(i);if(p){var v=p.context;if(v&&v.url===i.url&&v.level===i.level)return void Le.trace("[playlist-loader]: playlist request ongoing");Le.log("[playlist-loader]: aborting previous loader for type: "+i.type),p.abort()}if(y=i.type===Gr_MANIFEST?h.manifestLoadPolicy.default:_({},h.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),p=this.createInternalLoader(i),$(null==(o=i.deliveryDirectives)?void 0:o.part)&&(i.type===Gr_LEVEL&&null!==i.level?A=this.hls.levels[i.level].details:i.type===Gr_AUDIO_TRACK&&null!==i.id?A=this.hls.audioTracks[i.id].details:i.type===Gr_SUBTITLE_TRACK&&null!==i.id&&(A=this.hls.subtitleTracks[i.id].details),A)){var D=A.partTarget,B=A.targetduration;if(D&&B){var ee=1e3*Math.max(3*D,.8*B);y=_({},y,{maxTimeToFirstByteMs:Math.min(ee,y.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(ee,y.maxTimeToFirstByteMs)})}}var re=y.errorRetry||y.timeoutRetry||{};p.load(i,{loadPolicy:y,timeout:y.maxLoadTimeMs,maxRetry:re.maxNumRetry||0,retryDelay:re.retryDelayMs||0,maxRetryDelay:re.maxRetryDelayMs||0},{onSuccess:function(Ue,Xe,vt,wt){var jt=u.getInternalLoader(vt);u.resetInternalLoader(vt.type);var Ht=Ue.data;0===Ht.indexOf("#EXTM3U")?(Xe.parsing.start=performance.now(),ga.isMediaPlaylist(Ht)?u.handleTrackOrLevelPlaylist(Ue,Xe,vt,wt||null,jt):u.handleMasterPlaylist(Ue,Xe,vt,wt)):u.handleManifestParsingError(Ue,vt,new Error("no EXTM3U delimiter"),wt||null,Xe)},onError:function(Ue,Xe,vt,wt){u.handleNetworkError(Xe,vt,!1,Ue,wt)},onTimeout:function(Ue,Xe,vt){u.handleNetworkError(Xe,vt,!0,void 0,Ue)}})},d.handleMasterPlaylist=function(i,o,u,h){var p=this.hls,v=i.data,y=Ko(i,u),A=ga.parseMasterPlaylist(v,y);if(A.playlistParsingError)this.handleManifestParsingError(i,u,A.playlistParsingError,h,o);else{var D=A.contentSteering,B=A.levels,ee=A.sessionData,re=A.sessionKeys,ye=A.startTimeOffset,we=A.variableList;this.variableList=we;var Ye=ga.parseMasterPlaylistMedia(v,y,A),Ue=Ye.AUDIO,Xe=void 0===Ue?[]:Ue,vt=Ye.SUBTITLES,wt=Ye["CLOSED-CAPTIONS"];Xe.length&&!Xe.some(function(Ht){return!Ht.url})&&B[0].audioCodec&&!B[0].attrs.AUDIO&&(Le.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),Xe.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ze({}),bitrate:0,url:""})),p.trigger(x.MANIFEST_LOADED,{levels:B,audioTracks:Xe,subtitles:vt,captions:wt,contentSteering:D,url:y,stats:o,networkDetails:h,sessionData:ee,sessionKeys:re,startTimeOffset:ye,variableList:we})}},d.handleTrackOrLevelPlaylist=function(i,o,u,h,p){var v=this.hls,y=u.id,A=u.level,D=u.type,B=Ko(i,u),re=$(A)?A:$(y)?y:0,ye=Hu(u),we=ga.parseLevelPlaylist(i.data,B,re,ye,0,this.variableList);if(D===Gr_MANIFEST){var Ye={attrs:new ze({}),bitrate:0,details:we,name:"",url:B};v.trigger(x.MANIFEST_LOADED,{levels:[Ye],audioTracks:[],url:B,stats:o,networkDetails:h,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}o.parsing.end=performance.now(),u.levelDetails=we,this.handlePlaylistLoaded(we,i,o,u,h,p)},d.handleManifestParsingError=function(i,o,u,h,p){this.hls.trigger(x.ERROR,{type:_e.NETWORK_ERROR,details:he.MANIFEST_PARSING_ERROR,fatal:o.type===Gr_MANIFEST,url:i.url,err:u,error:u,reason:u.message,response:i,context:o,networkDetails:h,stats:p})},d.handleNetworkError=function(i,o,u,h,p){void 0===u&&(u=!1);var v="A network "+(u?"timeout":"error"+(h?" (status "+h.code+")":""))+" occurred while loading "+i.type;i.type===Gr_LEVEL?v+=": "+i.level+" id: "+i.id:(i.type===Gr_AUDIO_TRACK||i.type===Gr_SUBTITLE_TRACK)&&(v+=" id: "+i.id+' group-id: "'+i.groupId+'"');var y=new Error(v);Le.warn("[playlist-loader]: "+v);var A=he.UNKNOWN,D=!1,B=this.getInternalLoader(i);switch(i.type){case Gr_MANIFEST:A=u?he.MANIFEST_LOAD_TIMEOUT:he.MANIFEST_LOAD_ERROR,D=!0;break;case Gr_LEVEL:A=u?he.LEVEL_LOAD_TIMEOUT:he.LEVEL_LOAD_ERROR,D=!1;break;case Gr_AUDIO_TRACK:A=u?he.AUDIO_TRACK_LOAD_TIMEOUT:he.AUDIO_TRACK_LOAD_ERROR,D=!1;break;case Gr_SUBTITLE_TRACK:A=u?he.SUBTITLE_TRACK_LOAD_TIMEOUT:he.SUBTITLE_LOAD_ERROR,D=!1}B&&this.resetInternalLoader(i.type);var ee={type:_e.NETWORK_ERROR,details:A,fatal:D,url:i.url,loader:B,context:i,error:y,networkDetails:o,stats:p};h&&(ee.response=fr({url:o?.url||i.url,data:void 0},h)),this.hls.trigger(x.ERROR,ee)},d.handlePlaylistLoaded=function(i,o,u,h,p,v){var y=this.hls,A=h.type,D=h.level,B=h.id,ee=h.groupId,re=h.deliveryDirectives,ye=Ko(o,h),we=Hu(h),Ye="number"==typeof h.level&&we===mr_MAIN?D:void 0;if(i.fragments.length){i.targetduration||(i.playlistParsingError=new Error("Missing Target Duration"));var Xe=i.playlistParsingError;if(Xe)y.trigger(x.ERROR,{type:_e.NETWORK_ERROR,details:he.LEVEL_PARSING_ERROR,fatal:!1,url:ye,error:Xe,reason:Xe.message,response:o,context:h,level:Ye,parent:we,networkDetails:p,stats:u});else switch(i.live&&v&&(v.getCacheAge&&(i.ageHeader=v.getCacheAge()||0),(!v.getCacheAge||isNaN(i.ageHeader))&&(i.ageHeader=0)),A){case Gr_MANIFEST:case Gr_LEVEL:y.trigger(x.LEVEL_LOADED,{details:i,level:Ye||0,id:B||0,stats:u,networkDetails:p,deliveryDirectives:re});break;case Gr_AUDIO_TRACK:y.trigger(x.AUDIO_TRACK_LOADED,{details:i,id:B||0,groupId:ee||"",stats:u,networkDetails:p,deliveryDirectives:re});break;case Gr_SUBTITLE_TRACK:y.trigger(x.SUBTITLE_TRACK_LOADED,{details:i,id:B||0,groupId:ee||"",stats:u,networkDetails:p,deliveryDirectives:re})}}else{var Ue=new Error("No Segments found in Playlist");y.trigger(x.ERROR,{type:_e.NETWORK_ERROR,details:he.LEVEL_EMPTY_ERROR,fatal:!1,url:ye,error:Ue,reason:Ue.message,response:o,context:h,level:Ye,parent:we,networkDetails:p,stats:u})}},g}();function Yi(g,d){var c;try{c=new Event("addtrack")}catch{(c=document.createEvent("Event")).initEvent("addtrack",!1,!1)}c.track=g,d.dispatchEvent(c)}function yr(g,d){var c=g.mode;if("disabled"===c&&(g.mode="hidden"),g.cues&&!g.cues.getCueById(d.id))try{if(g.addCue(d),!g.cues.getCueById(d.id))throw new Error("addCue is failed for: "+d)}catch(o){Le.debug("[texttrack-utils]: "+o);try{var i=new self.TextTrackCue(d.startTime,d.endTime,d.text);i.id=d.id,g.addCue(i)}catch(u){Le.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+u)}}"disabled"===c&&(g.mode=c)}function yl(g){var d=g.mode;if("disabled"===d&&(g.mode="hidden"),g.cues)for(var c=g.cues.length;c--;)g.removeCue(g.cues[c]);"disabled"===d&&(g.mode=d)}function Zu(g,d,c,i){var o=g.mode;if("disabled"===o&&(g.mode="hidden"),g.cues&&g.cues.length>0)for(var u=function Wr(g,d,c){var i=[],o=function lh(g,d){if(d<g[0].startTime)return 0;var c=g.length-1;if(d>g[c].endTime)return-1;for(var i=0,o=c;i<=o;){var u=Math.floor((o+i)/2);if(d<g[u].startTime)o=u-1;else{if(!(d>g[u].startTime&&i<c))return u;i=u+1}}return g[i].startTime-d<d-g[o].startTime?i:o}(g,d);if(o>-1)for(var u=o,h=g.length;u<h;u++){var p=g[u];if(p.startTime>=d&&p.endTime<=c)i.push(p);else if(p.startTime>c)return i}return i}(g.cues,d,c),h=0;h<u.length;h++)(!i||i(u[h]))&&g.removeCue(u[h]);"disabled"===o&&(g.mode=o)}function ju(g){for(var d=[],c=0;c<g.length;c++){var i=g[c];("subtitles"===i.kind||"captions"===i.kind)&&i.label&&d.push(g[c])}return d}var Ri_audioId3="org.id3",Ri_dateRange="com.apple.quicktime.HLS",Ri_emsg="https://aomedia.org/emsg/ID3";function qu(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function $l(g,d,c,i,o){var u=new g(d,c,"");try{u.value=i,o&&(u.type=o)}catch{u=new g(d,c,JSON.stringify(o?fr({type:o},i):i))}return u}var El=function(){var g=qu();try{g&&new g(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Vs(g,d){return g.getTime()/1e3-d}function _l(g){return Uint8Array.from(g.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var Ku=function(){function g(c){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=c,this._registerListeners()}var d=g.prototype;return d.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},d._registerListeners=function(){var i=this.hls;i.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),i.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.on(x.LEVEL_UPDATED,this.onLevelUpdated,this)},d._unregisterListeners=function(){var i=this.hls;i.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),i.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.off(x.LEVEL_UPDATED,this.onLevelUpdated,this)},d.onMediaAttached=function(i,o){this.media=o.media},d.onMediaDetaching=function(){this.id3Track&&(yl(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},d.onManifestLoading=function(){this.dateRangeCuesAppended={}},d.createTrack=function(i){var o=this.getID3Track(i.textTracks);return o.mode="hidden",o},d.getID3Track=function(i){if(this.media){for(var o=0;o<i.length;o++){var u=i[o];if("metadata"===u.kind&&"id3"===u.label)return Yi(u,this.media),u}return this.media.addTextTrack("metadata","id3")}},d.onFragParsingMetadata=function(i,o){if(this.media){var u=this.hls.config,h=u.enableEmsgMetadataCues,p=u.enableID3MetadataCues;if(h||p){var v=o.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));var y=qu();if(y)for(var A=0;A<v.length;A++){var D=v[A].type;if((D!==Ri_emsg||h)&&p){var B=Bi(v[A].data);if(B){var ee=v[A].pts,re=ee+v[A].duration;re>El&&(re=El),re-ee<=0&&(re=ee+.25);for(var we=0;we<B.length;we++){var Ye=B[we];if(!ti(Ye)){this.updateId3CueEnds(ee,D);var Ue=$l(y,ee,re,Ye,D);Ue&&this.id3Track.addCue(Ue)}}}}}}}},d.updateId3CueEnds=function(i,o){var u,h=null==(u=this.id3Track)?void 0:u.cues;if(h)for(var p=h.length;p--;){var v=h[p];v.type===o&&v.startTime<i&&v.endTime===El&&(v.endTime=i)}},d.onBufferFlushing=function(i,o){var p=o.type,v=this.id3Track,y=this.hls;if(y){var A=y.config,D=A.enableEmsgMetadataCues,B=A.enableID3MetadataCues;v&&(D||B)&&Zu(v,o.startOffset,o.endOffset,"audio"===p?function(ye){return ye.type===Ri_audioId3&&B}:"video"===p?function(ye){return ye.type===Ri_emsg&&D}:function(ye){return ye.type===Ri_audioId3&&B||ye.type===Ri_emsg&&D})}},d.onLevelUpdated=function(i,o){var u=this,h=o.details;if(this.media&&h.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var p=this.dateRangeCuesAppended,v=this.id3Track,y=h.dateRanges,A=Object.keys(y);if(v)for(var D=Object.keys(p).filter(function(Xe){return!A.includes(Xe)}),B=function(){var vt=D[ee];Object.keys(p[vt].cues).forEach(function(wt){v.removeCue(p[vt].cues[wt])}),delete p[vt]},ee=D.length;ee--;)B();var re=h.fragments[h.fragments.length-1];if(0!==A.length&&$(re?.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var ye=re.programDateTime/1e3-re.start,we=qu(),Ye=function(){var vt=A[Ue],wt=y[vt],jt=Vs(wt.startDate,ye),Ht=p[vt],Nt=Ht?.cues||{},en=Ht?.durationKnown||!1,tn=El,yn=wt.endDate;if(yn)tn=Vs(yn,ye),en=!0;else if(wt.endOnNext&&!en){var An=A.reduce(function(Qr,Br){if(Br!==wt.id){var ki=y[Br];if(ki.class===wt.class&&ki.startDate>wt.startDate&&(!Qr||wt.startDate<Qr.startDate))return ki}return Qr},null);An&&(tn=Vs(An.startDate,ye),en=!0)}for(var $n=Object.keys(wt.attr),vr=0;vr<$n.length;vr++){var nr=$n[vr];if(mt(nr)){var Hr=Nt[nr];if(Hr)en&&!Ht.durationKnown&&(Hr.endTime=tn);else if(we){var Nr=wt.attr[nr];fn(nr)&&(Nr=_l(Nr));var ni=$l(we,jt,tn,{key:nr,data:Nr},Ri_dateRange);ni&&(ni.id=vt,u.id3Track.addCue(ni),Nt[nr]=ni)}}}p[vt]={cues:Nt,dateRange:wt,durationKnown:en}},Ue=0;Ue<A.length;Ue++)Ye()}}},g}(),wc=function(){function g(c){var i=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return i.timeupdate()},this.hls=c,this.config=c.config,this.registerListeners()}var d=g.prototype;return d.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},d.registerListeners=function(){this.hls.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(x.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(x.ERROR,this.onError,this)},d.unregisterListeners=function(){this.hls.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(x.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(x.ERROR,this.onError,this)},d.onMediaAttached=function(i,o){this.media=o.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},d.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},d.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},d.onLevelUpdated=function(i,o){var u=o.details;this.levelDetails=u,u.advanced&&this.timeupdate(),!u.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},d.onError=function(i,o){var u;o.details===he.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(u=this.levelDetails)&&u.live&&Le.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},d.timeupdate=function(){var i=this.media,o=this.levelDetails;if(i&&o){this.currentTime=i.currentTime;var u=this.computeLatency();if(null!==u){this._latency=u;var h=this.config,v=h.maxLiveSyncPlaybackRate;if(h.lowLatencyMode&&1!==v&&o.live){var y=this.targetLatency;if(null!==y){var A=u-y;if(A<Math.min(this.maxLatency,y+o.targetduration)&&A>.05&&this.forwardBufferLength>1){var ee=Math.min(2,Math.max(1,v)),re=Math.round(2/(1+Math.exp(-.75*A-this.edgeStalled))*20)/20;i.playbackRate=Math.min(ee,Math.max(1,re))}else 1!==i.playbackRate&&0!==i.playbackRate&&(i.playbackRate=1)}}}}},d.estimateLiveEdge=function(){var i=this.levelDetails;return null===i?null:i.edge+i.age},d.computeLatency=function(){var i=this.estimateLiveEdge();return null===i?null:i-this.currentTime},De(g,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var i=this.config,o=this.levelDetails;return void 0!==i.liveMaxLatencyDuration?i.liveMaxLatencyDuration:o?i.liveMaxLatencyDurationCount*o.targetduration:0}},{key:"targetLatency",get:function(){var i=this.levelDetails;if(null===i)return null;var h=i.targetduration,p=this.config,v=p.liveSyncDuration,D=this.hls.userConfig,B=p.lowLatencyMode&&i.partHoldBack||i.holdBack;return(D.liveSyncDuration||D.liveSyncDurationCount||0===B)&&(B=void 0!==v?v:p.liveSyncDurationCount*h),B+Math.min(1*this.stallCount,h)}},{key:"liveSyncPosition",get:function(){var i=this.estimateLiveEdge(),o=this.targetLatency,u=this.levelDetails;if(null===i||null===o||null===u)return null;var h=u.edge,y=h-(this.config.lowLatencyMode&&u.partTarget||u.targetduration);return Math.min(Math.max(h-u.totalduration,i-o-this.edgeStalled),y)}},{key:"drift",get:function(){var i=this.levelDetails;return null===i?1:i.drift}},{key:"edgeStalled",get:function(){var i=this.levelDetails;return null===i?0:Math.max(i.age-3*(this.config.lowLatencyMode&&i.partTarget||i.targetduration),0)}},{key:"forwardBufferLength",get:function(){var i=this.media,o=this.levelDetails;if(!i||!o)return 0;var u=i.buffered.length;return(u?i.buffered.end(u-1):o.edge)-this.currentTime}}]),g}(),Xl=["NONE","TYPE-0","TYPE-1",null];var Es=["SDR","PQ","HLG"];var uo_No="",uo_Yes="YES",uo_v2="v2";var Mc=function(){function g(c,i,o){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=c,this.part=i,this.skip=o}return g.prototype.addDirectives=function(i){var o=new self.URL(i);return void 0!==this.msn&&o.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&o.searchParams.set("_HLS_part",this.part.toString()),this.skip&&o.searchParams.set("_HLS_skip",this.skip),o.href},g}(),ui=function(){function g(c){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[c.url],this._attrs=[c.attrs],this.bitrate=c.bitrate,c.details&&(this.details=c.details),this.id=c.id||0,this.name=c.name,this.width=c.width||0,this.height=c.height||0,this.frameRate=c.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=c.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=c.audioCodec,this.videoCodec=c.videoCodec,this.codecSet=[c.videoCodec,c.audioCodec].filter(function(i){return!!i}).map(function(i){return i.substring(0,4)}).join(","),this.addGroupId("audio",c.attrs.AUDIO),this.addGroupId("text",c.attrs.SUBTITLES)}var d=g.prototype;return d.hasAudioGroup=function(i){return Nc(this._audioGroups,i)},d.hasSubtitleGroup=function(i){return Nc(this._subtitleGroups,i)},d.addGroupId=function(i,o){if(o)if("audio"===i){var u=this._audioGroups;u||(u=this._audioGroups=[]),-1===u.indexOf(o)&&u.push(o)}else if("text"===i){var h=this._subtitleGroups;h||(h=this._subtitleGroups=[]),-1===h.indexOf(o)&&h.push(o)}},d.addFallback=function(){},De(g,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[0]}},{key:"codecs",get:function(){return this.attrs.CODECS||""}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"videoRange",get:function(){return this.attrs["VIDEO-RANGE"]||"SDR"}},{key:"score",get:function(){return this.attrs.optionalFloat("SCORE",0)}},{key:"uri",get:function(){return this.url[0]||""}},{key:"audioGroups",get:function(){return this._audioGroups}},{key:"subtitleGroups",get:function(){return this._subtitleGroups}},{key:"urlId",get:function(){return 0},set:function(i){}},{key:"audioGroupIds",get:function(){return this.audioGroups?[this.audioGroupId]:void 0}},{key:"textGroupIds",get:function(){return this.subtitleGroups?[this.textGroupId]:void 0}},{key:"audioGroupId",get:function(){var i;return null==(i=this.audioGroups)?void 0:i[0]}},{key:"textGroupId",get:function(){var i;return null==(i=this.subtitleGroups)?void 0:i[0]}}]),g}();function Nc(g,d){return!(!d||!g)&&-1!==g.indexOf(d)}function xc(g,d){var c=d.startPTS;if($(c)){var o,i=0;d.sn>g.sn?(i=c-g.start,o=g):(i=g.start-c,o=d),o.duration!==i&&(o.duration=i)}else d.start=d.sn>g.sn?g.cc===d.cc&&g.minEndPTS?g.start+(g.minEndPTS-g.start):g.start+g.duration:Math.max(g.start-d.duration,0)}function lr(g,d,c,i,o,u){i-c<=0&&(Le.warn("Fragment should have a positive duration",d),i=c+d.duration,u=o+d.duration);var p=c,v=i,y=d.startPTS,A=d.endPTS;if($(y)){var D=Math.abs(y-c);d.deltaPTS=$(d.deltaPTS)?Math.max(D,d.deltaPTS):D,p=Math.max(c,y),c=Math.min(c,y),o=Math.min(o,d.startDTS),v=Math.min(i,A),i=Math.max(i,A),u=Math.max(u,d.endDTS)}var B=c-d.start;0!==d.start&&(d.start=c),d.duration=i-d.start,d.startPTS=c,d.maxStartPTS=p,d.startDTS=o,d.endPTS=i,d.minEndPTS=v,d.endDTS=u;var ee=d.sn;if(!g||ee<g.startSN||ee>g.endSN)return 0;var re,ye=ee-g.startSN,we=g.fragments;for(we[ye]=d,re=ye;re>0;re--)xc(we[re],we[re-1]);for(re=ye;re<we.length-1;re++)xc(we[re],we[re+1]);return g.fragmentHint&&xc(we[we.length-1],g.fragmentHint),g.PTSKnown=g.alignedSliding=!0,B}function Ql(g,d){for(var c=null,i=g.fragments,o=i.length-1;o>=0;o--){var u=i[o].initSegment;if(u){c=u;break}}g.fragmentHint&&delete g.fragmentHint.endPTS;var p,h=0;if(function eu(g,d,c){for(var i=d.skippedSegments,o=Math.max(g.startSN,d.startSN)-d.startSN,u=(g.fragmentHint?1:0)+(i?d.endSN:Math.min(g.endSN,d.endSN))-d.startSN,h=d.startSN-g.startSN,p=d.fragmentHint?d.fragments.concat(d.fragmentHint):d.fragments,v=g.fragmentHint?g.fragments.concat(g.fragmentHint):g.fragments,y=o;y<=u;y++){var A=v[h+y],D=p[y];i&&!D&&y<i&&(D=d.fragments[y]=A),A&&D&&c(A,D)}}(g,d,function(re,ye){re.relurl&&(h=re.cc-ye.cc),$(re.startPTS)&&$(re.endPTS)&&(ye.start=ye.startPTS=re.startPTS,ye.startDTS=re.startDTS,ye.maxStartPTS=re.maxStartPTS,ye.endPTS=re.endPTS,ye.endDTS=re.endDTS,ye.minEndPTS=re.minEndPTS,ye.duration=re.endPTS-re.startPTS,ye.duration&&(p=ye),d.PTSKnown=d.alignedSliding=!0),ye.elementaryStreams=re.elementaryStreams,ye.loader=re.loader,ye.stats=re.stats,re.initSegment&&(ye.initSegment=re.initSegment,c=re.initSegment)}),c&&(d.fragmentHint?d.fragments.concat(d.fragmentHint):d.fragments).forEach(function(re){var ye;re&&(!re.initSegment||re.initSegment.relurl===(null==(ye=c)?void 0:ye.relurl))&&(re.initSegment=c)}),d.skippedSegments)if(d.deltaUpdateFailed=d.fragments.some(function(re){return!re}),d.deltaUpdateFailed){Le.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var y=d.skippedSegments;y--;)d.fragments.shift();d.startSN=d.fragments[0].sn,d.startCC=d.fragments[0].cc}else d.canSkipDateRanges&&(d.dateRanges=function Jl(g,d,c){var i=_({},g);return c&&c.forEach(function(o){delete i[o]}),Object.keys(d).forEach(function(o){var u=new Yt(d[o].attr,i[o]);u.isValid?i[o]=u:Le.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(d[o].attr)+'"')}),i}(g.dateRanges,d.dateRanges,d.recentlyRemovedDateranges));var A=d.fragments;if(h){Le.warn("discontinuity sliding from playlist, take drift into account");for(var D=0;D<A.length;D++)A[D].cc+=h}d.skippedSegments&&(d.startCC=d.fragments[0].cc),function Lc(g,d,c){if(g&&d)for(var i=0,o=0,u=g.length;o<=u;o++){var h=g[o],p=d[o+i];h&&p&&h.index===p.index&&h.fragment.sn===p.fragment.sn?c(h,p):i--}}(g.partList,d.partList,function(re,ye){ye.elementaryStreams=re.elementaryStreams,ye.stats=re.stats}),p?lr(d,p,p.startPTS,p.endPTS,p.startDTS,p.endDTS):Oc(g,d),A.length&&(d.totalduration=d.edge-A[0].start),d.driftStartTime=g.driftStartTime,d.driftStart=g.driftStart;var B=d.advancedDateTime;if(d.advanced&&B){var ee=d.edge;d.driftStart||(d.driftStartTime=B,d.driftStart=ee),d.driftEndTime=B,d.driftEnd=ee}else d.driftEndTime=g.driftEndTime,d.driftEnd=g.driftEnd,d.advancedDateTime=g.advancedDateTime}function Oc(g,d){var c=d.startSN+d.skippedSegments-g.startSN,i=g.fragments;c<0||c>=i.length||Hs(d,i[c].start)}function Hs(g,d){if(d){for(var c=g.fragments,i=g.skippedSegments;i<c.length;i++)c[i].start+=d;g.fragmentHint&&(g.fragmentHint.start+=d)}}function Gf(g,d,c){var i;return null!=g&&g.details?Pc(null==(i=g.details)?void 0:i.partList,d,c):null}function Pc(g,d,c){if(g)for(var i=g.length;i--;){var o=g[i];if(o.index===c&&o.fragment.sn===d)return o}return null}function Zf(g){g.forEach(function(d,c){var i=d.details;null!=i&&i.fragments&&i.fragments.forEach(function(o){o.level=c})})}function ja(g){switch(g.details){case he.FRAG_LOAD_TIMEOUT:case he.KEY_LOAD_TIMEOUT:case he.LEVEL_LOAD_TIMEOUT:case he.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function tu(g,d){var c=ja(d);return g.default[(c?"timeout":"error")+"Retry"]}function ns(g,d){var c="linear"===g.backoff?1:Math.pow(2,d);return Math.min(c*g.retryDelayMs,g.maxRetryDelayMs)}function nu(g){return fr(fr({},g),{errorRetry:null,timeoutRetry:null})}function ru(g,d,c,i){if(!g)return!1;var o=i?.code,u=d<g.maxNumRetry&&(function iu(g){return 0===g&&!1===navigator.onLine||!!g&&(g<400||g>499)}(o)||!!c);return g.shouldRetry?g.shouldRetry(g,d,c,i,u):u}var ou_search=function(d,c){for(var i=0,o=d.length-1,u=null,h=null;i<=o;){var p=c(h=d[u=(i+o)/2|0]);if(p>0)i=u+1;else{if(!(p<0))return h;o=u-1}}return null};function au(g,d,c,i){void 0===c&&(c=0),void 0===i&&(i=0);var o=null;if(g){o=d[g.sn-d[0].sn+1]||null;var u=g.endDTS-c;u>0&&u<15e-7&&(c+=15e-7)}else 0===c&&0===d[0].start&&(o=d[0]);if(o&&(!g||g.level===o.level)&&0===pa(c,i,o))return o;var h=ou_search(d,pa.bind(null,c,i));return!h||h===g&&o?o:h}function pa(g,d,c){if(void 0===g&&(g=0),void 0===d&&(d=0),c.start<=g&&c.start+c.duration>g)return 0;var i=Math.min(d,c.duration+(c.deltaPTS?c.deltaPTS:0));return c.start+c.duration-i<=g?1:c.start-i>g&&c.start?-1:0}function Gs(g,d,c){var i=1e3*Math.min(d,c.duration+(c.deltaPTS?c.deltaPTS:0));return(c.endProgramDateTime||0)-i>g}var co_DoNothing=0,co_SendAlternateToPenaltyBox=2,co_RemoveAlternatePermanently=3,co_RetryRequest=5,Mr_None=0,Mr_MoveAllAlternatesMatchingHost=1,Mr_MoveAllAlternatesMatchingHDCP=2,Sl=function(){function g(c){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=c,this.log=Le.log.bind(Le,"[info]:"),this.warn=Le.warn.bind(Le,"[warning]:"),this.error=Le.error.bind(Le,"[error]:"),this.registerListeners()}var d=g.prototype;return d.registerListeners=function(){var i=this.hls;i.on(x.ERROR,this.onError,this),i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.LEVEL_UPDATED,this.onLevelUpdated,this)},d.unregisterListeners=function(){var i=this.hls;i&&(i.off(x.ERROR,this.onError,this),i.off(x.ERROR,this.onErrorOut,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.LEVEL_UPDATED,this.onLevelUpdated,this))},d.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},d.startLoad=function(i){},d.stopLoad=function(){this.playlistError=0},d.getVariantLevelIndex=function(i){return i?.type===mr_MAIN?i.level:this.hls.loadLevel},d.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},d.onLevelUpdated=function(){this.playlistError=0},d.onError=function(i,o){var u,h;if(!o.fatal){var p=this.hls,v=o.context;switch(o.details){case he.FRAG_LOAD_ERROR:case he.FRAG_LOAD_TIMEOUT:case he.KEY_LOAD_ERROR:case he.KEY_LOAD_TIMEOUT:return void(o.errorAction=this.getFragRetryOrSwitchAction(o));case he.FRAG_PARSING_ERROR:if(null!=(u=o.frag)&&u.gap)return void(o.errorAction={action:co_DoNothing,flags:Mr_None});case he.FRAG_GAP:case he.FRAG_DECRYPT_ERROR:return o.errorAction=this.getFragRetryOrSwitchAction(o),void(o.errorAction.action=co_SendAlternateToPenaltyBox);case he.LEVEL_EMPTY_ERROR:case he.LEVEL_PARSING_ERROR:var y,A,D=o.parent===mr_MAIN?o.level:p.loadLevel;return void(o.details===he.LEVEL_EMPTY_ERROR&&null!=(y=o.context)&&null!=(A=y.levelDetails)&&A.live?o.errorAction=this.getPlaylistRetryOrSwitchAction(o,D):(o.levelRetry=!1,o.errorAction=this.getLevelSwitchAction(o,D)));case he.LEVEL_LOAD_ERROR:case he.LEVEL_LOAD_TIMEOUT:return void("number"==typeof v?.level&&(o.errorAction=this.getPlaylistRetryOrSwitchAction(o,v.level)));case he.AUDIO_TRACK_LOAD_ERROR:case he.AUDIO_TRACK_LOAD_TIMEOUT:case he.SUBTITLE_LOAD_ERROR:case he.SUBTITLE_TRACK_LOAD_TIMEOUT:if(v){var B=p.levels[p.loadLevel];if(B&&(v.type===Gr_AUDIO_TRACK&&B.hasAudioGroup(v.groupId)||v.type===Gr_SUBTITLE_TRACK&&B.hasSubtitleGroup(v.groupId)))return o.errorAction=this.getPlaylistRetryOrSwitchAction(o,p.loadLevel),o.errorAction.action=co_SendAlternateToPenaltyBox,void(o.errorAction.flags=Mr_MoveAllAlternatesMatchingHost)}return;case he.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var ee=p.levels[p.loadLevel],re=ee?.attrs["HDCP-LEVEL"];return void(re?o.errorAction={action:co_SendAlternateToPenaltyBox,flags:Mr_MoveAllAlternatesMatchingHDCP,hdcpLevel:re}:this.keySystemError(o));case he.BUFFER_ADD_CODEC_ERROR:case he.REMUX_ALLOC_ERROR:case he.BUFFER_APPEND_ERROR:return void(o.errorAction=this.getLevelSwitchAction(o,null!=(h=o.level)?h:p.loadLevel));case he.INTERNAL_EXCEPTION:case he.BUFFER_APPENDING_ERROR:case he.BUFFER_FULL_ERROR:case he.LEVEL_SWITCH_ERROR:case he.BUFFER_STALLED_ERROR:case he.BUFFER_SEEK_OVER_HOLE:case he.BUFFER_NUDGE_ON_STALL:return void(o.errorAction={action:co_DoNothing,flags:Mr_None})}o.type===_e.KEY_SYSTEM_ERROR&&this.keySystemError(o)}},d.keySystemError=function(i){var o=this.getVariantLevelIndex(i.frag);i.levelRetry=!1,i.errorAction=this.getLevelSwitchAction(i,o)},d.getPlaylistRetryOrSwitchAction=function(i,o){var h=tu(this.hls.config.playlistLoadPolicy,i),p=this.playlistError++;if(ru(h,p,ja(i),i.response))return{action:co_RetryRequest,flags:Mr_None,retryConfig:h,retryCount:p};var y=this.getLevelSwitchAction(i,o);return h&&(y.retryConfig=h,y.retryCount=p),y},d.getFragRetryOrSwitchAction=function(i){var o=this.hls,u=this.getVariantLevelIndex(i.frag),h=o.levels[u],p=o.config,v=p.fragLoadPolicy,y=p.keyLoadPolicy,A=tu(i.details.startsWith("key")?y:v,i),D=o.levels.reduce(function(re,ye){return re+ye.fragmentError},0);if(h&&(i.details!==he.FRAG_GAP&&h.fragmentError++,ru(A,D,ja(i),i.response)))return{action:co_RetryRequest,flags:Mr_None,retryConfig:A,retryCount:D};var ee=this.getLevelSwitchAction(i,u);return A&&(ee.retryConfig=A,ee.retryCount=D),ee},d.getLevelSwitchAction=function(i,o){var u=this.hls;null==o&&(o=u.loadLevel);var h=this.hls.levels[o];if(h){var p,v,y=i.details;h.loadError++,y===he.BUFFER_APPEND_ERROR&&h.fragmentError++;var A=-1,D=u.levels,B=u.loadLevel,ee=u.minAutoLevel,re=u.maxAutoLevel;u.autoLevelEnabled||(u.loadLevel=-1);for(var Nt,ye=null==(p=i.frag)?void 0:p.type,Ye=(ye===mr_AUDIO&&y===he.FRAG_PARSING_ERROR||"audio"===i.sourceBufferName&&(y===he.BUFFER_ADD_CODEC_ERROR||y===he.BUFFER_APPEND_ERROR))&&D.some(function(tn){return h.audioCodec!==tn.audioCodec}),Xe="video"===i.sourceBufferName&&(y===he.BUFFER_ADD_CODEC_ERROR||y===he.BUFFER_APPEND_ERROR)&&D.some(function(tn){return h.codecSet!==tn.codecSet&&h.audioCodec===tn.audioCodec}),vt=null!=(v=i.context)?v:{},wt=vt.type,jt=vt.groupId,Ht=function(){var yn=(en+B)%D.length;if(yn!==B&&yn>=ee&&yn<=re&&0===D[yn].loadError){var An,$n,vr=D[yn];if(y===he.FRAG_GAP&&i.frag){var nr=D[yn].details;if(nr){var Hr=au(i.frag,nr.fragments,i.frag.start);if(null!=Hr&&Hr.gap)return 0}}else{if(wt===Gr_AUDIO_TRACK&&vr.hasAudioGroup(jt)||wt===Gr_SUBTITLE_TRACK&&vr.hasSubtitleGroup(jt))return 0;if(ye===mr_AUDIO&&null!=(An=h.audioGroups)&&An.some(function(Nr){return vr.hasAudioGroup(Nr)})||ye===mr_SUBTITLE&&null!=($n=h.subtitleGroups)&&$n.some(function(Nr){return vr.hasSubtitleGroup(Nr)})||Ye&&h.audioCodec===vr.audioCodec||!Ye&&h.audioCodec!==vr.audioCodec||Xe&&h.codecSet===vr.codecSet)return 0}return A=yn,1}},en=D.length;en--&&(0===(Nt=Ht())||1!==Nt););if(A>-1&&u.loadLevel!==A)return i.levelRetry=!0,this.playlistError=0,{action:co_SendAlternateToPenaltyBox,flags:Mr_None,nextAutoLevel:A}}return{action:co_SendAlternateToPenaltyBox,flags:Mr_MoveAllAlternatesMatchingHost}},d.onErrorOut=function(i,o){var u;switch(null==(u=o.errorAction)?void 0:u.action){case co_DoNothing:break;case co_SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(o),o.errorAction.resolved||o.details===he.FRAG_GAP?/MediaSource readyState: ended/.test(o.error.message)&&(this.warn('MediaSource ended after "'+o.sourceBufferName+'" sourceBuffer append error. Attempting to recover from media error.'),this.hls.recoverMediaError()):o.fatal=!0}o.fatal&&this.hls.stopLoad()},d.sendAlternateToPenaltyBox=function(i){var o=this.hls,u=i.errorAction;if(u){var p=u.hdcpLevel,v=u.nextAutoLevel;switch(u.flags){case Mr_None:this.switchLevel(i,v);break;case Mr_MoveAllAlternatesMatchingHDCP:p&&(o.maxHdcpLevel=Xl[Xl.indexOf(p)-1],u.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+o.maxHdcpLevel+'" or lower')}u.resolved||this.switchLevel(i,v)}},d.switchLevel=function(i,o){void 0!==o&&i.errorAction&&(this.warn("switching to level "+o+" after "+i.details),this.hls.nextAutoLevel=o,i.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},g}(),bl=function(){function g(c,i){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Le.log.bind(Le,i+":"),this.warn=Le.warn.bind(Le,i+":"),this.hls=c}var d=g.prototype;return d.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},d.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},d.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},d.stopLoad=function(){this.canLoad=!1,this.clearTimer()},d.switchParams=function(i,o){var u=o?.renditionReports;if(u){for(var h=-1,p=0;p<u.length;p++){var v=u[p],y=void 0;try{y=new self.URL(v.URI,o.url).href}catch(re){Le.warn("Could not construct new URL for Rendition Report: "+re),y=v.URI||""}if(y===i){h=p;break}y===i.substring(0,y.length)&&(h=p)}if(-1!==h){var A=u[h],D=parseInt(A["LAST-MSN"])||o?.lastPartSn,B=parseInt(A["LAST-PART"])||o?.lastPartIndex;if(this.hls.config.lowLatencyMode){var ee=Math.min(o.age-o.partTarget,o.targetduration);B>=0&&ee>o.partTarget&&(B+=1)}return new Mc(D,B>=0?B:void 0,uo_No)}}},d.loadPlaylist=function(i){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},d.shouldLoadPlaylist=function(i){return this.canLoad&&!!i&&!!i.url&&(!i.details||i.details.live)},d.shouldReloadPlaylist=function(i){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(i)},d.playlistLoaded=function(i,o,u){var h=this,p=o.details,v=o.stats,y=self.performance.now(),A=v.loading.first?Math.max(0,y-v.loading.first):0;if(p.advancedDateTime=Date.now()-A,p.live||null!=u&&u.live){if(p.reloaded(u),u&&this.log("live playlist "+i+" "+(p.advanced?"REFRESHED "+p.lastPartSn+"-"+p.lastPartIndex:p.updated?"UPDATED":"MISSED")),u&&p.fragments.length>0&&Ql(u,p),!this.canLoad||!p.live)return;var D,B=void 0,ee=void 0;if(p.canBlockReload&&p.endSN&&p.advanced){var re=this.hls.config.lowLatencyMode,ye=p.lastPartSn,we=p.endSN,Ye=p.lastPartIndex,Xe=ye===we;-1!==Ye?(B=Xe?we+1:ye,ee=Xe?re?0:Ye:Ye+1):B=we+1;var wt=p.age,Ht=Math.min(wt+p.ageHeader-p.partTarget,1.5*p.targetduration);if(Ht>0){if(u&&Ht>u.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+u.tuneInGoal+" to: "+Ht+" with playlist age: "+p.age),Ht=0;else{var Nt=Math.floor(Ht/p.targetduration);B+=Nt,void 0!==ee&&(ee+=Math.round(Ht%p.targetduration/p.partTarget)),this.log("CDN Tune-in age: "+p.ageHeader+"s last advanced "+wt.toFixed(2)+"s goal: "+Ht+" skip sn "+Nt+" to part "+ee)}p.tuneInGoal=Ht}if(D=this.getDeliveryDirectives(p,o.deliveryDirectives,B,ee),re||!Xe)return void this.loadPlaylist(D)}else(p.canBlockReload||p.canSkipUntil)&&(D=this.getDeliveryDirectives(p,o.deliveryDirectives,B,ee));var tn=this.hls.mainForwardBufferInfo,$n=function uh(g,d){void 0===d&&(d=1/0);var c=1e3*g.targetduration;if(g.updated){var i=g.fragments;if(i.length&&4*c>d){var u=1e3*i[i.length-1].duration;u<c&&(c=u)}}else c/=2;return Math.round(c)}(p,1e3*(p.edge-(tn?tn.end-tn.len:0)));p.updated&&y>this.requestScheduled+$n&&(this.requestScheduled=v.loading.start),void 0!==B&&p.canBlockReload?this.requestScheduled=v.loading.first+$n-(1e3*p.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+$n<y?this.requestScheduled=y:this.requestScheduled-y<=0&&(this.requestScheduled+=$n);var vr=this.requestScheduled-y;vr=Math.max(0,vr),this.log("reload live playlist "+i+" in "+Math.round(vr)+" ms"),this.timer=self.setTimeout(function(){return h.loadPlaylist(D)},vr)}else this.clearTimer()},d.getDeliveryDirectives=function(i,o,u,h){var p=function Tl(g,d){var c=g.canSkipUntil;return c&&(void 0!==d?d-g.endSN:0)<c?g.canSkipDateRanges?uo_v2:uo_Yes:uo_No}(i,u);return null!=o&&o.skip&&i.deltaUpdateFailed&&(u=o.msn,h=o.part,p=uo_No),new Mc(u,h,p)},d.checkRetry=function(i){var o=this,u=i.details,h=ja(i),p=i.errorAction,v=p||{},y=v.action,A=v.retryCount,D=void 0===A?0:A,B=v.retryConfig,ee=!!p&&!!B&&(y===co_RetryRequest||!p.resolved&&y===co_SendAlternateToPenaltyBox);if(ee){var re;if(this.requestScheduled=-1,D>=B.maxNumRetry)return!1;if(h&&null!=(re=i.context)&&re.deliveryDirectives)this.warn("Retrying playlist loading "+(D+1)+"/"+B.maxNumRetry+' after "'+u+'" without delivery-directives'),this.loadPlaylist();else{var ye=ns(B,D);this.timer=self.setTimeout(function(){return o.loadPlaylist()},ye),this.warn("Retrying playlist loading "+(D+1)+"/"+B.maxNumRetry+' after "'+u+'" in '+ye+"ms")}i.levelRetry=!0,p.resolved=!0}return ee},g}(),La=function(){function g(c,i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=c,this.alpha_=c?Math.exp(Math.log(.5)/c):0,this.estimate_=i,this.totalWeight_=o}var d=g.prototype;return d.sample=function(i,o){var u=Math.pow(this.alpha_,i);this.estimate_=o*(1-u)+u*this.estimate_,this.totalWeight_+=i},d.getTotalWeight=function(){return this.totalWeight_},d.getEstimate=function(){if(this.alpha_){var i=1-Math.pow(this.alpha_,this.totalWeight_);if(i)return this.estimate_/i}return this.estimate_},g}(),Al=function(){function g(c,i,o,u){void 0===u&&(u=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new La(c),this.fast_=new La(i),this.defaultTTFB_=u,this.ttfb_=new La(c)}var d=g.prototype;return d.update=function(i,o){var u=this.slow_,h=this.fast_,p=this.ttfb_;u.halfLife!==i&&(this.slow_=new La(i,u.getEstimate(),u.getTotalWeight())),h.halfLife!==o&&(this.fast_=new La(o,h.getEstimate(),h.getTotalWeight())),p.halfLife!==i&&(this.ttfb_=new La(i,p.getEstimate(),p.getTotalWeight()))},d.sample=function(i,o){var h=(i=Math.max(i,this.minDelayMs_))/1e3,p=8*o/h;this.fast_.sample(h,p),this.slow_.sample(h,p)},d.sampleTTFB=function(i){var o=i/1e3,u=Math.sqrt(2)*Math.exp(-Math.pow(o,2)/2);this.ttfb_.sample(u,Math.max(i,5))},d.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},d.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},d.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},d.destroy=function(){},g}(),su={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},mi={};function lu(g,d,c){var i=g.videoCodec,o=g.audioCodec;if(!i||!o||!c)return Promise.resolve(su);var u={width:g.width,height:g.height,bitrate:Math.ceil(Math.max(.9*g.bitrate,g.averageBitrate)),framerate:g.frameRate||30},h=g.videoRange;"SDR"!==h&&(u.transferFunction=h.toLowerCase());var p=i.split(",").map(function(v){return{type:"media-source",video:fr(fr({},u),{},{contentType:li(v,"video")})}});return o&&g.audioGroups&&g.audioGroups.forEach(function(v){var y;v&&(null==(y=d.groups[v])||y.tracks.forEach(function(A){if(A.groupId===v){var B=parseFloat(A.channels||"");$(B)&&B>2&&p.push.apply(p,o.split(",").map(function(ee){return{type:"media-source",audio:{contentType:li(ee,"audio"),channels:""+B}}}))}}))}),Promise.all(p.map(function(v){var y=function Bo(g){var d=g.audio,c=g.video,i=c||d;if(i){var o=i.contentType.split('"')[1];if(c)return"r"+c.height+"x"+c.width+"f"+Math.ceil(c.framerate)+(c.transferFunction||"sd")+"_"+o+"_"+Math.ceil(c.bitrate/1e5);if(d)return"c"+d.channels+(d.spatialRendering?"s":"n")+"_"+o}return""}(v);return mi[y]||(mi[y]=c.decodingInfo(v))})).then(function(v){return{supported:!v.some(function(y){return!y.supported}),configurations:p,decodingInfoResults:v}}).catch(function(v){return{supported:!1,configurations:p,decodingInfoResults:[],error:v}})}function oi(g,d){var c=!1,i=[];return g&&(c="SDR"!==g,i=[g]),d&&(i=d.allowedVideoRanges||Es.slice(0),i=(c=void 0!==d.preferHDR?d.preferHDR:function Oa(){if("function"==typeof matchMedia){var g=matchMedia("(dynamic-range: high)"),d=matchMedia("bad query");if(g.media!==d.media)return!0===g.matches}return!1}())?i.filter(function(o){return"SDR"!==o}):["SDR"]),{preferHDR:c,allowedVideoRanges:i}}function va(g,d){Le.log('[abr] start candidates with "'+g+'" ignored because '+d)}function fo(g,d,c){if("attrs"in g){var i=d.indexOf(g);if(-1!==i)return i}for(var o=0;o<d.length;o++)if(na(g,d[o],c))return o;return-1}function na(g,d,c){var i=g.groupId,o=g.name,u=g.lang,p=g.characteristics,v=g.default,y=g.forced;return(void 0===i||d.groupId===i)&&(void 0===o||d.name===o)&&(void 0===u||d.lang===u)&&(void 0===u||d.assocLang===g.assocLang)&&(void 0===v||d.default===v)&&(void 0===y||d.forced===y)&&(void 0===p||function uu(g,d){void 0===d&&(d="");var c=g.split(","),i=d.split(",");return c.length===i.length&&!c.some(function(o){return-1===i.indexOf(o)})}(p,d.characteristics))&&(void 0===c||c(g,d))}function Ts(g,d){var c=g.audioCodec,i=g.channels;return!(void 0!==c&&(d.audioCodec||"").substring(0,4)!==c.substring(0,4)||void 0!==i&&i!==(d.channels||"2"))}function cu(g,d,c){for(var i=d;i;i--)if(c(g[i]))return i;for(var o=d+1;o<g.length;o++)if(c(g[o]))return o;return-1}var Fc=function(){function g(c){var i=this;this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=function(){var o=i.fragCurrent,u=i.partCurrent,h=i.hls,p=h.autoLevelEnabled,v=h.media;if(o&&v){var y=performance.now(),A=u?u.stats:o.stats,D=u?u.duration:o.duration,B=y-A.loading.start,ee=h.minAutoLevel;if(A.aborted||A.loaded&&A.loaded===A.total||o.level<=ee)return i.clearTimer(),void(i._nextAutoLevel=-1);if(p&&!v.paused&&v.playbackRate&&v.readyState){var re=h.mainForwardBufferInfo;if(null!==re){var ye=i.bwEstimator.getEstimateTTFB(),we=Math.abs(v.playbackRate);if(!(B<=Math.max(ye,D/(2*we)*1e3))){var Ye=re.len/we,Ue=A.loading.first?A.loading.first-A.loading.start:-1,Xe=A.loaded&&Ue>-1,vt=i.getBwEstimate(),wt=h.levels,Ht=A.total||Math.max(A.loaded,Math.round(D*wt[o.level].averageBitrate/8)),Nt=Xe?B-Ue:B;Nt<1&&Xe&&(Nt=Math.min(B,8*A.loaded/vt));var en=Xe?1e3*A.loaded/Nt:0,tn=en?(Ht-A.loaded)/en:8*Ht/vt+ye/1e3;if(!(tn<=Ye)){var $n,yn=en?8*en:vt,An=Number.POSITIVE_INFINITY;for($n=o.level-1;$n>ee&&!((An=i.getTimeToLoadFrag(ye/1e3,yn,D*wt[$n].maxBitrate,!wt[$n].details))<Ye);$n--);if(!(An>=tn||An>10*D)){h.nextLoadLevel=h.nextAutoLevel=$n,Xe?i.bwEstimator.sample(B-Math.min(ye,Ue),A.loaded):i.bwEstimator.sampleTTFB(B);var nr=wt[$n].maxBitrate;i.getBwEstimate()*i.hls.config.abrBandWidthUpFactor>nr&&i.resetEstimator(nr),i.clearTimer(),Le.warn("[abr] Fragment "+o.sn+(u?" part "+u.index:"")+" of level "+o.level+" is loading too slowly;\n      Time to underbuffer: "+Ye.toFixed(3)+" s\n      Estimated load time for current fragment: "+tn.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+An.toFixed(3)+" s\n      TTFB estimate: "+(0|Ue)+" ms\n      Current BW estimate: "+($(vt)?0|vt:"Unknown")+" bps\n      New BW estimate: "+(0|i.getBwEstimate())+" bps\n      Switching to level "+$n+" @ "+(0|nr)+" bps"),h.trigger(x.FRAG_LOAD_EMERGENCY_ABORTED,{frag:o,part:u,stats:A})}}}}}}},this.hls=c,this.bwEstimator=this.initEstimator(),this.registerListeners()}var d=g.prototype;return d.resetEstimator=function(i){i&&(Le.log("setting initial bwe to "+i),this.hls.config.abrEwmaDefaultEstimate=i),this.firstSelection=-1,this.bwEstimator=this.initEstimator()},d.initEstimator=function(){var i=this.hls.config;return new Al(i.abrEwmaSlowVoD,i.abrEwmaFastVoD,i.abrEwmaDefaultEstimate)},d.registerListeners=function(){var i=this.hls;i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.FRAG_LOADING,this.onFragLoading,this),i.on(x.FRAG_LOADED,this.onFragLoaded,this),i.on(x.FRAG_BUFFERED,this.onFragBuffered,this),i.on(x.LEVEL_SWITCHING,this.onLevelSwitching,this),i.on(x.LEVEL_LOADED,this.onLevelLoaded,this),i.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.on(x.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),i.on(x.ERROR,this.onError,this)},d.unregisterListeners=function(){var i=this.hls;i&&(i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.FRAG_LOADING,this.onFragLoading,this),i.off(x.FRAG_LOADED,this.onFragLoaded,this),i.off(x.FRAG_BUFFERED,this.onFragBuffered,this),i.off(x.LEVEL_SWITCHING,this.onLevelSwitching,this),i.off(x.LEVEL_LOADED,this.onLevelLoaded,this),i.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.off(x.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),i.off(x.ERROR,this.onError,this))},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null},d.onManifestLoading=function(i,o){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()},d.onLevelsUpdated=function(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null},d.onMaxAutoLevelUpdated=function(){this.firstSelection=-1,this.nextAutoLevelKey=""},d.onFragLoading=function(i,o){var h,u=o.frag;this.ignoreFragment(u)||(u.bitrateTest||(this.fragCurrent=u,this.partCurrent=null!=(h=o.part)?h:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))},d.onLevelSwitching=function(i,o){this.clearTimer()},d.onError=function(i,o){if(!o.fatal)switch(o.details){case he.BUFFER_ADD_CODEC_ERROR:case he.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case he.FRAG_LOAD_TIMEOUT:var u=o.frag,h=this.fragCurrent,p=this.partCurrent;if(u&&h&&u.sn===h.sn&&u.level===h.level){var v=performance.now(),y=p?p.stats:u.stats,A=v-y.loading.start,D=y.loading.first?y.loading.first-y.loading.start:-1;if(y.loaded&&D>-1){var ee=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(A-Math.min(ee,D),y.loaded)}else this.bwEstimator.sampleTTFB(A)}}},d.getTimeToLoadFrag=function(i,o,u,h){return i+u/o+(h?this.lastLevelLoadSec:0)},d.onLevelLoaded=function(i,o){var u=this.hls.config,h=o.stats.loading,p=h.end-h.start;$(p)&&(this.lastLevelLoadSec=p/1e3),o.details.live?this.bwEstimator.update(u.abrEwmaSlowLive,u.abrEwmaFastLive):this.bwEstimator.update(u.abrEwmaSlowVoD,u.abrEwmaFastVoD)},d.onFragLoaded=function(i,o){var u=o.frag,h=o.part,p=h?h.stats:u.stats;if(u.type===mr_MAIN&&this.bwEstimator.sampleTTFB(p.loading.first-p.loading.start),!this.ignoreFragment(u)){if(this.clearTimer(),u.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){var y=this.hls.levels[u.level],A=(y.loaded?y.loaded.bytes:0)+p.loaded,D=(y.loaded?y.loaded.duration:0)+(h?h.duration:u.duration);y.loaded={bytes:A,duration:D},y.realBitrate=Math.round(8*A/D)}u.bitrateTest?(this.onFragBuffered(x.FRAG_BUFFERED,{stats:p,frag:u,part:h,id:u.type}),u.bitrateTest=!1):this.lastLoadedFragLevel=u.level}},d.onFragBuffered=function(i,o){var u=o.frag,h=o.part,p=null!=h&&h.stats.loaded?h.stats:u.stats;if(!p.aborted&&!this.ignoreFragment(u)){var v=p.parsing.end-p.loading.start-Math.min(p.loading.first-p.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(v,p.loaded),p.bwEstimate=this.getBwEstimate(),this.bitrateTestDelay=u.bitrateTest?v/1e3:0}},d.ignoreFragment=function(i){return i.type!==mr_MAIN||"initSegment"===i.sn},d.clearTimer=function(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)},d.getAutoLevelKey=function(){var i;return this.getBwEstimate()+"_"+(null==(i=this.hls.mainForwardBufferInfo)?void 0:i.len)},d.getNextABRAutoLevel=function(){var i=this.fragCurrent,o=this.partCurrent,u=this.hls,h=u.maxAutoLevel,p=u.config,v=u.minAutoLevel,y=u.media,A=o?o.duration:i?i.duration:0,D=y&&0!==y.playbackRate?Math.abs(y.playbackRate):1,B=this.getBwEstimate(),ee=u.mainForwardBufferInfo,re=(ee?ee.len:0)/D,ye=p.abrBandWidthFactor,we=p.abrBandWidthUpFactor;if(re){var Ye=this.findBestLevel(B,v,h,re,0,ye,we);if(Ye>=0)return Ye}var Ue=A?Math.min(A,p.maxStarvationDelay):p.maxStarvationDelay;if(!re){var Xe=this.bitrateTestDelay;Xe&&(Ue=(A?Math.min(A,p.maxLoadingDelay):p.maxLoadingDelay)-Xe,Le.info("[abr] bitrate test took "+Math.round(1e3*Xe)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*Ue)+" ms"),ye=we=1)}var wt=this.findBestLevel(B,v,h,re,Ue,ye,we);if(Le.info("[abr] "+(re?"rebuffering expected":"buffer is empty")+", optimal quality level "+wt),wt>-1)return wt;var jt=u.levels[v],Ht=u.levels[u.loadLevel];return jt?.bitrate<Ht?.bitrate?v:u.loadLevel},d.getBwEstimate=function(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},d.findBestLevel=function(i,o,u,h,p,v,y){var A,D=this,B=h+p,ee=this.lastLoadedFragLevel,re=-1===ee?this.hls.firstLevel:ee,ye=this.fragCurrent,we=this.partCurrent,Ye=this.hls,Ue=Ye.levels,Xe=Ye.allAudioTracks,vt=Ye.loadLevel,wt=Ye.config;if(1===Ue.length)return 0;var en,jt=Ue[re],Ht=!(null==jt||null==(A=jt.details)||!A.live),Nt=-1===vt||-1===ee,tn="SDR",yn=jt?.frameRate||0,An=wt.audioPreference,$n=wt.videoPreference,vr=this.audioTracksByGroup||(this.audioTracksByGroup=function js(g){return g.reduce(function(d,c){var i=d.groups[c.groupId];i||(i=d.groups[c.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(c);var o=c.channels||"2";return i.channels[o]=(i.channels[o]||0)+1,i.hasDefault=i.hasDefault||c.default,i.hasAutoSelect=i.hasAutoSelect||c.autoselect,i.hasDefault&&(d.hasDefaultAudio=!0),i.hasAutoSelect&&(d.hasAutoSelectAudio=!0),d},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(Xe));if(Nt){if(-1!==this.firstSelection)return this.firstSelection;var Hr=function Zs(g,d,c,i,o){for(var u=Object.keys(g),h=i?.channels,p=i?.audioCodec,v=h&&2===parseInt(h),y=!0,A=!1,D=1/0,B=1/0,ee=1/0,re=0,ye=[],we=oi(d,o),Ye=we.preferHDR,Ue=we.allowedVideoRanges,Xe=function(){var en=g[u[vt]];y=en.channels[2]>0,D=Math.min(D,en.minHeight),B=Math.min(B,en.minFramerate),ee=Math.min(ee,en.minBitrate);var tn=Ue.filter(function(yn){return en.videoRanges[yn]>0});tn.length>0&&(A=!0,ye=tn)},vt=u.length;vt--;)Xe();D=$(D)?D:0,B=$(B)?B:0;var wt=Math.max(1080,D),jt=Math.max(30,B);return ee=$(ee)?ee:c,c=Math.max(ee,c),A||(d=void 0,ye=[]),{codecSet:u.reduce(function(Nt,en){var tn=g[en];if(en===Nt)return Nt;if(tn.minBitrate>c)return va(en,"min bitrate of "+tn.minBitrate+" > current estimate of "+c),Nt;if(!tn.hasDefaultAudio)return va(en,"no renditions with default or auto-select sound found"),Nt;if(p&&en.indexOf(p.substring(0,4))%5!=0)return va(en,'audio codec preference "'+p+'" not found'),Nt;if(h&&!v){if(!tn.channels[h])return va(en,"no renditions with "+h+" channel sound found (channels options: "+Object.keys(tn.channels)+")"),Nt}else if((!p||v)&&y&&0===tn.channels[2])return va(en,"no renditions with stereo sound found"),Nt;return tn.minHeight>wt?(va(en,"min resolution of "+tn.minHeight+" > maximum of "+wt),Nt):tn.minFramerate>jt?(va(en,"min framerate of "+tn.minFramerate+" > maximum of "+jt),Nt):ye.some(function(yn){return tn.videoRanges[yn]>0})?tn.maxScore<re?(va(en,"max score of "+tn.maxScore+" < selected max of "+re),Nt):Nt&&(or(en)>=or(Nt)||tn.fragmentError>g[Nt].fragmentError)?Nt:(re=tn.maxScore,en):(va(en,"no variants with VIDEO-RANGE of "+JSON.stringify(ye)+" found"),Nt)},void 0),videoRanges:ye,preferHDR:Ye,minFramerate:B,minBitrate:ee}}(this.codecTiers||(this.codecTiers=function Yu(g,d,c,i){return g.slice(c,i+1).reduce(function(o,u){if(!u.codecSet)return o;var h=u.audioGroups,p=o[u.codecSet];p||(o[u.codecSet]=p={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!h,fragmentError:0}),p.minBitrate=Math.min(p.minBitrate,u.bitrate);var v=Math.min(u.height,u.width);return p.minHeight=Math.min(p.minHeight,v),p.minFramerate=Math.min(p.minFramerate,u.frameRate),p.maxScore=Math.max(p.maxScore,u.score),p.fragmentError+=u.fragmentError,p.videoRanges[u.videoRange]=(p.videoRanges[u.videoRange]||0)+1,h&&h.forEach(function(y){if(y){var A=d.groups[y];p.hasDefaultAudio=p.hasDefaultAudio||d.hasDefaultAudio?A.hasDefault:A.hasAutoSelect||!d.hasDefaultAudio&&!d.hasAutoSelectAudio,Object.keys(A.channels).forEach(function(D){p.channels[D]=(p.channels[D]||0)+A.channels[D]})}}),o},{})}(Ue,vr,o,u)),tn,i,An,$n),ni=Hr.videoRanges;en=Hr.codecSet,tn=Hr.preferHDR?ni[ni.length-1]:ni[0],yn=Hr.minFramerate,i=Math.max(i,Hr.minBitrate),Le.log("[abr] picked start tier "+JSON.stringify(Hr))}else en=jt?.codecSet,tn=jt?.videoRange;for(var bi,vi=we?we.duration:ye?ye.duration:0,io=this.bwEstimator.getEstimateTTFB()/1e3,oo=[],Fo=function(){var Qo,_i=Ue[Ui],ko=Ui>re;if(!_i)return 0;if(wt.useMediaCapabilities&&!_i.supportedResult&&!_i.supportedPromise){var la=navigator.mediaCapabilities;"function"==typeof la?.decodingInfo&&function ma(g,d,c,i,o,u){var h=g.audioCodec?g.audioGroups:null,p=u?.audioCodec,v=u?.channels,y=v?parseInt(v):p?1/0:2,A=null;if(null!=h&&h.length)try{A=1===h.length&&h[0]?d.groups[h[0]].channels:h.reduce(function(D,B){if(B){var ee=d.groups[B];if(!ee)throw new Error("Audio track group "+B+" not found");Object.keys(ee.channels).forEach(function(re){D[re]=(D[re]||0)+ee.channels[re]})}return D},{2:0})}catch{return!0}return void 0!==g.videoCodec&&(g.width>1920&&g.height>1088||g.height>1920&&g.width>1088||g.frameRate>Math.max(i,30)||"SDR"!==g.videoRange&&g.videoRange!==c||g.bitrate>Math.max(o,8e6))||!!A&&$(y)&&Object.keys(A).some(function(D){return parseInt(D)>y})}(_i,vr,tn,yn,i,An)?(_i.supportedPromise=lu(_i,vr,la),_i.supportedPromise.then(function(Ba){_i.supportedResult=Ba;var bu=D.hls.levels,Ns=bu.indexOf(_i);Ba.error?Le.warn('[abr] MediaCapabilities decodingInfo error: "'+Ba.error+'" for level '+Ns+" "+JSON.stringify(Ba)):Ba.supported||(Le.warn("[abr] Unsupported MediaCapabilities decodingInfo result for level "+Ns+" "+JSON.stringify(Ba)),Ns>-1&&bu.length>1&&(Le.log("[abr] Removing unsupported level "+Ns),D.hls.removeLevel(Ns)))})):_i.supportedResult=su}if(en&&_i.codecSet!==en||tn&&_i.videoRange!==tn||ko&&yn>_i.frameRate||!ko&&yn>0&&yn<_i.frameRate||_i.supportedResult&&(null==(Qo=_i.supportedResult.decodingInfoResults)||!Qo[0].smooth))return oo.push(Ui),0;var ao,ji=_i.details,to=(we?ji?.partTarget:ji?.averagetargetduration)||vi,Jo=vi&&h>=2*vi&&0===p?Ue[Ui].averageBitrate:Ue[Ui].maxBitrate,no=D.getTimeToLoadFrag(io,ao=ko?y*i:v*i,Jo*to,void 0===ji);if(ao>=Jo&&(Ui===ee||0===_i.loadError&&0===_i.fragmentError)&&(no<=io||!$(no)||Ht&&!D.bitrateTestDelay||no<B)){var hs=D.forcedAutoLevel;return Ui!==vt&&(-1===hs||hs!==vt)&&(oo.length&&Le.trace("[abr] Skipped level(s) "+oo.join(",")+" of "+u+' max with CODECS and VIDEO-RANGE:"'+Ue[oo[0]].codecs+'" '+Ue[oo[0]].videoRange+'; not compatible with "'+jt.codecs+'" '+tn),Le.info("[abr] switch candidate:"+re+"->"+Ui+" adjustedbw("+Math.round(ao)+")-bitrate="+Math.round(ao-Jo)+" ttfb:"+io.toFixed(1)+" avgDuration:"+to.toFixed(1)+" maxFetchDuration:"+B.toFixed(1)+" fetchDuration:"+no.toFixed(1)+" firstSelection:"+Nt+" codecSet:"+en+" videoRange:"+tn+" hls.loadLevel:"+vt)),Nt&&(D.firstSelection=Ui),{v:Ui}}},Ui=u;Ui>=o;Ui--)if(0!==(bi=Fo())&&bi)return bi.v;return-1},De(g,[{key:"firstAutoLevel",get:function(){var i=this.hls,o=i.maxAutoLevel,u=i.minAutoLevel,h=this.getBwEstimate(),v=this.findBestLevel(h,u,o,0,this.hls.config.maxStarvationDelay,1,1);if(v>-1)return v;var y=this.hls.firstLevel,A=Math.min(Math.max(y,u),o);return Le.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist "+y+" clamped to "+A),A}},{key:"forcedAutoLevel",get:function(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}},{key:"nextAutoLevel",get:function(){var i=this.forcedAutoLevel,u=this.bwEstimator.canEstimate(),h=this.lastLoadedFragLevel>-1;if(!(-1===i||u&&h&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return i;var p=u&&h?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==i){var v=this.hls.levels;if(v.length>Math.max(i,p)&&v[i].loadError<=v[p].loadError)return i}return this._nextAutoLevel=p,this.nextAutoLevelKey=this.getAutoLevelKey(),p},set:function(i){var o=this.hls,u=o.maxAutoLevel,p=Math.min(Math.max(i,o.minAutoLevel),u);this._nextAutoLevel!==p&&(this.nextAutoLevelKey="",this._nextAutoLevel=p)}}]),g}(),Ss=function(){function g(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var d=g.prototype;return d.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},d.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},d.onHandlerDestroyed=function(){},d.hasInterval=function(){return!!this._tickInterval},d.hasNextTick=function(){return!!this._tickTimer},d.setInterval=function(i){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,i),!0)},d.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},d.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},d.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},d.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},d.doTick=function(){},g}(),Qi_NOT_LOADED="NOT_LOADED",Qi_APPENDING="APPENDING",Qi_PARTIAL="PARTIAL",Qi_OK="OK",kc=function(){function g(c){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=c,this._registerListeners()}var d=g.prototype;return d._registerListeners=function(){var i=this.hls;i.on(x.BUFFER_APPENDED,this.onBufferAppended,this),i.on(x.FRAG_BUFFERED,this.onFragBuffered,this),i.on(x.FRAG_LOADED,this.onFragLoaded,this)},d._unregisterListeners=function(){var i=this.hls;i.off(x.BUFFER_APPENDED,this.onBufferAppended,this),i.off(x.FRAG_BUFFERED,this.onFragBuffered,this),i.off(x.FRAG_LOADED,this.onFragLoaded,this)},d.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},d.getAppendedFrag=function(i,o){var u=this.activePartLists[o];if(u)for(var h=u.length;h--;){var p=u[h];if(!p)break;var v=p.end;if(p.start<=i&&null!==v&&i<=v)return p}return this.getBufferedFrag(i,o)},d.getBufferedFrag=function(i,o){for(var u=this.fragments,h=Object.keys(u),p=h.length;p--;){var v=u[h[p]];if(v?.body.type===o&&v.buffered){var y=v.body;if(y.start<=i&&i<=y.end)return y}}return null},d.detectEvictedFragments=function(i,o,u,h){var p=this;this.timeRanges&&(this.timeRanges[i]=o);var v=h?.fragment.sn||-1;Object.keys(this.fragments).forEach(function(y){var A=p.fragments[y];if(A&&!(v>=A.body.sn)){if(!A.buffered&&!A.loaded)return void(A.body.type===u&&p.removeFragment(A.body));var D=A.range[i];D&&D.time.some(function(B){var ee=!p.isTimeBuffered(B.startPTS,B.endPTS,o);return ee&&p.removeFragment(A.body),ee})}})},d.detectPartialFragments=function(i){var o=this,u=this.timeRanges,h=i.frag,p=i.part;if(u&&"initSegment"!==h.sn){var v=As(h),y=this.fragments[v];if(!(!y||y.buffered&&h.gap)){var A=!h.relurl;Object.keys(u).forEach(function(B){var ee=h.elementaryStreams[B];ee&&(y.range[B]=o.getBufferedTimes(h,p,A||!0===ee.partial,u[B]))}),y.loaded=null,Object.keys(y.range).length?(y.buffered=!0,(y.body.endList=h.endList||y.body.endList)&&(this.endListFragments[y.body.type]=y),bs(y)||this.removeParts(h.sn-1,h.type)):this.removeFragment(y.body)}}},d.removeParts=function(i,o){var u=this.activePartLists[o];u&&(this.activePartLists[o]=u.filter(function(h){return h.fragment.sn>=i}))},d.fragBuffered=function(i,o){var u=As(i),h=this.fragments[u];!h&&o&&(h=this.fragments[u]={body:i,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},i.gap&&(this.hasGaps=!0)),h&&(h.loaded=null,h.buffered=!0)},d.getBufferedTimes=function(i,o,u,h){for(var p={time:[],partial:u},v=i.start,y=i.end,A=i.minEndPTS||y,D=i.maxStartPTS||v,B=0;B<h.length;B++){var ee=h.start(B)-this.bufferPadding,re=h.end(B)+this.bufferPadding;if(D>=ee&&A<=re){p.time.push({startPTS:Math.max(v,h.start(B)),endPTS:Math.min(y,h.end(B))});break}if(v<re&&y>ee){var ye=Math.max(v,h.start(B)),we=Math.min(y,h.end(B));we>ye&&(p.partial=!0,p.time.push({startPTS:ye,endPTS:we}))}else if(y<=ee)break}return p},d.getPartialFragment=function(i){var u,h,p,o=null,v=0,y=this.bufferPadding,A=this.fragments;return Object.keys(A).forEach(function(D){var B=A[D];B&&bs(B)&&(p=B.body.end+y,i>=(h=B.body.start-y)&&i<=p&&(u=Math.min(i-h,p-i),v<=u&&(o=B.body,v=u)))}),o},d.isEndListAppended=function(i){var o=this.endListFragments[i];return void 0!==o&&(o.buffered||bs(o))},d.getState=function(i){var o=As(i),u=this.fragments[o];return u?u.buffered?bs(u)?Qi_PARTIAL:Qi_OK:Qi_APPENDING:Qi_NOT_LOADED},d.isTimeBuffered=function(i,o,u){for(var h,p,v=0;v<u.length;v++){if(h=u.start(v)-this.bufferPadding,p=u.end(v)+this.bufferPadding,i>=h&&o<=p)return!0;if(o<=h)return!1}return!1},d.onFragLoaded=function(i,o){var u=o.frag;if("initSegment"!==u.sn&&!u.bitrateTest){var p=o.part?null:o,v=As(u);this.fragments[v]={body:u,appendedPTS:null,loaded:p,buffered:!1,range:Object.create(null)}}},d.onBufferAppended=function(i,o){var u=this,h=o.frag,p=o.part,v=o.timeRanges;if("initSegment"!==h.sn){var y=h.type;if(p){var A=this.activePartLists[y];A||(this.activePartLists[y]=A=[]),A.push(p)}this.timeRanges=v,Object.keys(v).forEach(function(D){u.detectEvictedFragments(D,v[D],y,p)})}},d.onFragBuffered=function(i,o){this.detectPartialFragments(o)},d.hasFragment=function(i){var o=As(i);return!!this.fragments[o]},d.hasParts=function(i){var o;return!(null==(o=this.activePartLists[i])||!o.length)},d.removeFragmentsInRange=function(i,o,u,h,p){var v=this;h&&!this.hasGaps||Object.keys(this.fragments).forEach(function(y){var A=v.fragments[y];if(A){var D=A.body;D.type!==u||h&&!D.gap||D.start<o&&D.end>i&&(A.buffered||p)&&v.removeFragment(D)}})},d.removeFragment=function(i){var o=As(i);i.stats.loaded=0,i.clearElementaryStreamInfo();var u=this.activePartLists[i.type];if(u){var h=i.sn;this.activePartLists[i.type]=u.filter(function(p){return p.fragment.sn!==h})}delete this.fragments[o],i.endList&&delete this.endListFragments[i.type]},d.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},g}();function bs(g){var d,c,i;return g.buffered&&(g.body.gap||(null==(d=g.range.video)?void 0:d.partial)||(null==(c=g.range.audio)?void 0:c.partial)||(null==(i=g.range.audiovideo)?void 0:i.partial))}function As(g){return g.type+"_"+g.level+"_"+g.sn}var jf={length:0,start:function(){return 0},end:function(){return 0}},Mi=function(){function g(){}return g.isBuffered=function(c,i){try{if(c)for(var o=g.getBuffered(c),u=0;u<o.length;u++)if(i>=o.start(u)&&i<=o.end(u))return!0}catch{}return!1},g.bufferInfo=function(c,i,o){try{if(c){var p,u=g.getBuffered(c),h=[];for(p=0;p<u.length;p++)h.push({start:u.start(p),end:u.end(p)});return this.bufferedInfo(h,i,o)}}catch{}return{len:0,start:i,end:i,nextStart:void 0}},g.bufferedInfo=function(c,i,o){i=Math.max(0,i),c.sort(function(we,Ye){return we.start-Ye.start||Ye.end-we.end});var u=[];if(o)for(var h=0;h<c.length;h++){var p=u.length;if(p){var v=u[p-1].end;c[h].start-v<o?c[h].end>v&&(u[p-1].end=c[h].end):u.push(c[h])}else u.push(c[h])}else u=c;for(var A,y=0,D=i,B=i,ee=0;ee<u.length;ee++){var re=u[ee].start,ye=u[ee].end;if(i+o>=re&&i<ye)D=re,y=(B=ye)-i;else if(i+o<re){A=re;break}}return{len:y,start:D||0,end:B||0,nextStart:A}},g.getBuffered=function(c){try{return c.buffered}catch(i){return Le.log("failed to get media.buffered",i),jf}},g}(),bo=function(d,c,i,o,u,h){void 0===o&&(o=0),void 0===u&&(u=-1),void 0===h&&(h=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=d,this.sn=c,this.id=i,this.size=o,this.part=u,this.partial=h};function Cl(g,d){for(var c=0,i=g.length;c<i;c++){var o;if((null==(o=g[c])?void 0:o.cc)===d)return g[c]}return null}function Uc(g,d){if(g){var c=g.start+d;g.start=g.startPTS=c,g.endPTS=c+g.duration}}function Bc(g,d){for(var c=d.fragments,i=0,o=c.length;i<o;i++)Uc(c[i],g);d.fragmentHint&&Uc(d.fragmentHint,g),d.alignedSliding=!0}function Vc(g,d,c){d&&(function Ys(g,d,c){if(function fu(g,d,c){return!(!d||!(c.endCC>c.startCC||g&&g.cc<c.startCC))}(g,c,d)){var i=function qf(g,d){var c=g.fragments,i=d.fragments;if(i.length&&c.length){var o=Cl(c,i[0].cc);if(o&&(!o||o.startPTS))return o;Le.log("No frag in previous level to align on")}else Le.log("No fragments to align")}(c,d);i&&$(i.start)&&(Le.log("Adjusting PTS using last level due to CC increase within current level "+d.url),Bc(i.start,d))}}(g,c,d),!c.alignedSliding&&d&&zs(c,d),!c.alignedSliding&&d&&!c.skippedSegments&&Oc(d,c))}function zs(g,d){if(g.hasProgramDateTime&&d.hasProgramDateTime){var c=g.fragments,i=d.fragments;if(c.length&&i.length){var o,u,h=Math.min(d.endCC,g.endCC);d.startCC<h&&g.startCC<h&&(o=Cl(i,h),u=Cl(c,h)),(!o||!u)&&(u=Cl(c,(o=i[Math.floor(i.length/2)]).cc)||c[Math.floor(c.length/2)]);var p=o.programDateTime,v=u.programDateTime;p&&v&&Bc((v-p)/1e3-(u.start-o.start),g)}}}var du=Math.pow(2,17),Cs=function(){function g(c){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=c}var d=g.prototype;return d.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},d.abort=function(){this.loader&&this.loader.abort()},d.load=function(i,o){var u=this,h=i.url;if(!h)return Promise.reject(new ya({type:_e.NETWORK_ERROR,details:he.FRAG_LOAD_ERROR,fatal:!1,frag:i,error:new Error("Fragment does not have a "+(h?"part list":"url")),networkDetails:null}));this.abort();var p=this.config,v=p.fLoader,y=p.loader;return new Promise(function(A,D){if(u.loader&&u.loader.destroy(),i.gap){if(i.tagList.some(function(we){return"GAP"===we[0]}))return void D(Hc(i));i.gap=!1}var B=u.loader=i.loader=v?new v(p):new y(p),ee=Il(i),re=nu(p.fragLoadPolicy.default),ye={loadPolicy:re,timeout:re.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===i.sn?1/0:du};i.stats=B.stats,B.load(ee,ye,{onSuccess:function(Ye,Ue,Xe,vt){u.resetLoader(i,B);var wt=Ye.data;Xe.resetIV&&i.decryptdata&&(i.decryptdata.iv=new Uint8Array(wt.slice(0,16)),wt=wt.slice(16)),A({frag:i,part:null,payload:wt,networkDetails:vt})},onError:function(Ye,Ue,Xe,vt){u.resetLoader(i,B),D(new ya({type:_e.NETWORK_ERROR,details:he.FRAG_LOAD_ERROR,fatal:!1,frag:i,response:fr({url:h,data:void 0},Ye),error:new Error("HTTP Error "+Ye.code+" "+Ye.text),networkDetails:Xe,stats:vt}))},onAbort:function(Ye,Ue,Xe){u.resetLoader(i,B),D(new ya({type:_e.NETWORK_ERROR,details:he.INTERNAL_ABORTED,fatal:!1,frag:i,error:new Error("Aborted"),networkDetails:Xe,stats:Ye}))},onTimeout:function(Ye,Ue,Xe){u.resetLoader(i,B),D(new ya({type:_e.NETWORK_ERROR,details:he.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i,error:new Error("Timeout after "+ye.timeout+"ms"),networkDetails:Xe,stats:Ye}))},onProgress:function(Ye,Ue,Xe,vt){o&&o({frag:i,part:null,payload:Xe,networkDetails:vt})}})})},d.loadPart=function(i,o,u){var h=this;this.abort();var p=this.config,v=p.fLoader,y=p.loader;return new Promise(function(A,D){if(h.loader&&h.loader.destroy(),i.gap||o.gap)D(Hc(i,o));else{var B=h.loader=i.loader=v?new v(p):new y(p),ee=Il(i,o),re=nu(p.fragLoadPolicy.default),ye={loadPolicy:re,timeout:re.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:du};o.stats=B.stats,B.load(ee,ye,{onSuccess:function(Ye,Ue,Xe,vt){h.resetLoader(i,B),h.updateStatsFromPart(i,o);var wt={frag:i,part:o,payload:Ye.data,networkDetails:vt};u(wt),A(wt)},onError:function(Ye,Ue,Xe,vt){h.resetLoader(i,B),D(new ya({type:_e.NETWORK_ERROR,details:he.FRAG_LOAD_ERROR,fatal:!1,frag:i,part:o,response:fr({url:ee.url,data:void 0},Ye),error:new Error("HTTP Error "+Ye.code+" "+Ye.text),networkDetails:Xe,stats:vt}))},onAbort:function(Ye,Ue,Xe){i.stats.aborted=o.stats.aborted,h.resetLoader(i,B),D(new ya({type:_e.NETWORK_ERROR,details:he.INTERNAL_ABORTED,fatal:!1,frag:i,part:o,error:new Error("Aborted"),networkDetails:Xe,stats:Ye}))},onTimeout:function(Ye,Ue,Xe){h.resetLoader(i,B),D(new ya({type:_e.NETWORK_ERROR,details:he.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i,part:o,error:new Error("Timeout after "+ye.timeout+"ms"),networkDetails:Xe,stats:Ye}))}})}})},d.updateStatsFromPart=function(i,o){var u=i.stats,h=o.stats,p=h.total;if(u.loaded+=h.loaded,p){var v=Math.round(i.duration/o.duration),y=Math.min(Math.round(u.loaded/p),v),D=(v-y)*Math.round(u.loaded/y);u.total=u.loaded+D}else u.total=Math.max(u.loaded,u.total);var B=u.loading,ee=h.loading;B.start?B.first+=ee.first-ee.start:(B.start=ee.start,B.first=ee.first),B.end=ee.end},d.resetLoader=function(i,o){i.loader=null,this.loader===o&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),o.destroy()},g}();function Il(g,d){void 0===d&&(d=null);var c=d||g,i={frag:g,part:d,responseType:"arraybuffer",url:c.url,headers:{},rangeStart:0,rangeEnd:0},o=c.byteRangeStartOffset,u=c.byteRangeEndOffset;if($(o)&&$(u)){var h,p=o,v=u;if("initSegment"===g.sn&&"AES-128"===(null==(h=g.decryptdata)?void 0:h.method)){var y=u-o;y%16&&(v=u+(16-y%16)),0!==o&&(i.resetIV=!0,p=o-16)}i.rangeStart=p,i.rangeEnd=v}return i}function Hc(g,d){var c=new Error("GAP "+(g.gap?"tag":"attribute")+" found"),i={type:_e.MEDIA_ERROR,details:he.FRAG_GAP,fatal:!1,frag:g,error:c,networkDetails:null};return d&&(i.part=d),(d||g).stats.aborted=!0,new ya(i)}var ya=function(g){function d(c){var i;return(i=g.call(this,c.error.message)||this).data=void 0,i.data=c,i}return E(d,g),d}(T(Error)),Ea=function(){function g(c,i){this.subtle=void 0,this.aesIV=void 0,this.subtle=c,this.aesIV=i}return g.prototype.decrypt=function(i,o){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},o,i)},g}(),Kf=function(){function g(c,i){this.subtle=void 0,this.key=void 0,this.subtle=c,this.key=i}return g.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},g}();var Pr=function(){function g(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var d=g.prototype;return d.uint8ArrayToUint32Array_=function(i){for(var o=new DataView(i),u=new Uint32Array(4),h=0;h<4;h++)u[h]=o.getUint32(4*h);return u},d.initTable=function(){var i=this.sBox,o=this.invSBox,u=this.subMix,h=u[0],p=u[1],v=u[2],y=u[3],A=this.invSubMix,D=A[0],B=A[1],ee=A[2],re=A[3],ye=new Uint32Array(256),we=0,Ye=0,Ue=0;for(Ue=0;Ue<256;Ue++)ye[Ue]=Ue<128?Ue<<1:Ue<<1^283;for(Ue=0;Ue<256;Ue++){var Xe=Ye^Ye<<1^Ye<<2^Ye<<3^Ye<<4;i[we]=Xe=Xe>>>8^255&Xe^99,o[Xe]=we;var vt=ye[we],wt=ye[vt],jt=ye[wt],Ht=257*ye[Xe]^16843008*Xe;h[we]=Ht<<24|Ht>>>8,p[we]=Ht<<16|Ht>>>16,v[we]=Ht<<8|Ht>>>24,y[we]=Ht,D[Xe]=(Ht=16843009*jt^65537*wt^257*vt^16843008*we)<<24|Ht>>>8,B[Xe]=Ht<<16|Ht>>>16,ee[Xe]=Ht<<8|Ht>>>24,re[Xe]=Ht,we?(we=vt^ye[ye[ye[jt^vt]]],Ye^=ye[ye[Ye]]):we=Ye=1}},d.expandKey=function(i){for(var o=this.uint8ArrayToUint32Array_(i),u=!0,h=0;h<o.length&&u;)u=o[h]===this.key[h],h++;if(!u){this.key=o;var p=this.keySize=o.length;if(4!==p&&6!==p&&8!==p)throw new Error("Invalid aes key size="+p);var y,A,vt,wt,v=this.ksRows=4*(p+6+1),D=this.keySchedule=new Uint32Array(v),B=this.invKeySchedule=new Uint32Array(v),ee=this.sBox,re=this.rcon,ye=this.invSubMix,we=ye[0],Ye=ye[1],Ue=ye[2],Xe=ye[3];for(y=0;y<v;y++)y<p?vt=D[y]=o[y]:(wt=vt,y%p==0?(wt=ee[(wt=wt<<8|wt>>>24)>>>24]<<24|ee[wt>>>16&255]<<16|ee[wt>>>8&255]<<8|ee[255&wt],wt^=re[y/p|0]<<24):p>6&&y%p==4&&(wt=ee[wt>>>24]<<24|ee[wt>>>16&255]<<16|ee[wt>>>8&255]<<8|ee[255&wt]),D[y]=vt=(D[y-p]^wt)>>>0);for(A=0;A<v;A++)y=v-A,wt=3&A?D[y]:D[y-4],B[A]=A<4||y<=4?wt:we[ee[wt>>>24]]^Ye[ee[wt>>>16&255]]^Ue[ee[wt>>>8&255]]^Xe[ee[255&wt]],B[A]=B[A]>>>0}},d.networkToHostOrderSwap=function(i){return i<<24|(65280&i)<<8|(16711680&i)>>8|i>>>24},d.decrypt=function(i,o,u){for(var jt,Ht,Nt,en,tn,yn,An,$n,vr,nr,Hr,Nr,ni,h=this.keySize+6,p=this.invKeySchedule,v=this.invSBox,y=this.invSubMix,A=y[0],D=y[1],B=y[2],ee=y[3],re=this.uint8ArrayToUint32Array_(u),ye=re[0],we=re[1],Ye=re[2],Ue=re[3],Xe=new Int32Array(i),vt=new Int32Array(Xe.length),Qr=this.networkToHostOrderSwap;o<Xe.length;){for($n=Qr(Xe[o]),vr=Qr(Xe[o+1]),nr=Qr(Xe[o+2]),Hr=Qr(Xe[o+3]),en=$n^p[0],tn=Hr^p[1],yn=nr^p[2],An=vr^p[3],Nr=4,ni=1;ni<h;ni++)jt=A[tn>>>24]^D[yn>>16&255]^B[An>>8&255]^ee[255&en]^p[Nr+1],Ht=A[yn>>>24]^D[An>>16&255]^B[en>>8&255]^ee[255&tn]^p[Nr+2],Nt=A[An>>>24]^D[en>>16&255]^B[tn>>8&255]^ee[255&yn]^p[Nr+3],en=A[en>>>24]^D[tn>>16&255]^B[yn>>8&255]^ee[255&An]^p[Nr],tn=jt,yn=Ht,An=Nt,Nr+=4;jt=v[tn>>>24]<<24^v[yn>>16&255]<<16^v[An>>8&255]<<8^v[255&en]^p[Nr+1],Ht=v[yn>>>24]<<24^v[An>>16&255]<<16^v[en>>8&255]<<8^v[255&tn]^p[Nr+2],Nt=v[An>>>24]<<24^v[en>>16&255]<<16^v[tn>>8&255]<<8^v[255&yn]^p[Nr+3],vt[o]=Qr(v[en>>>24]<<24^v[tn>>16&255]<<16^v[yn>>8&255]<<8^v[255&An]^p[Nr]^ye),vt[o+1]=Qr(Nt^we),vt[o+2]=Qr(Ht^Ye),vt[o+3]=Qr(jt^Ue),ye=$n,we=vr,Ye=nr,Ue=Hr,o+=4}return vt.buffer},g}(),Xr=function(){function g(c,i){var u=(void 0===i?{}:i).removePKCS7Padding,h=void 0===u||u;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=c.enableSoftwareAES,this.removePKCS7Padding=h,h)try{var p=self.crypto;p&&(this.subtle=p.subtle||p.webkitSubtle)}catch{}null===this.subtle&&(this.useSoftware=!0)}var d=g.prototype;return d.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},d.isSync=function(){return this.useSoftware},d.flush=function(){var i=this.currentResult;if(!i||this.remainderData)return this.reset(),null;var u=new Uint8Array(i);return this.reset(),this.removePKCS7Padding?function Dl(g){var d=g.byteLength,c=d&&new DataView(g.buffer).getUint8(d-1);return c?Xn(g,0,d-c):g}(u):u},d.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},d.decrypt=function(i,o,u){var h=this;return this.useSoftware?new Promise(function(p,v){h.softwareDecrypt(new Uint8Array(i),o,u);var y=h.flush();y?p(y.buffer):v(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(i),o,u)},d.softwareDecrypt=function(i,o,u){var h=this.currentIV,p=this.currentResult,v=this.remainderData;this.logOnce("JS AES decrypt"),v&&(i=ci(v,i),this.remainderData=null);var y=this.getValidChunk(i);if(!y.length)return null;h&&(u=h);var A=this.softwareDecrypter;A||(A=this.softwareDecrypter=new Pr),A.expandKey(o);var D=p;return this.currentResult=A.decrypt(y.buffer,0,u),this.currentIV=Xn(y,-16).buffer,D||null},d.webCryptoDecrypt=function(i,o,u){var h=this,p=this.subtle;return(this.key!==o||!this.fastAesKey)&&(this.key=o,this.fastAesKey=new Kf(p,o)),this.fastAesKey.expandKey().then(function(v){return p?(h.logOnce("WebCrypto AES decrypt"),new Ea(p,new Uint8Array(u)).decrypt(i.buffer,v)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(v){return Le.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+v.name+": "+v.message),h.onWebCryptoError(i,o,u)})},d.onWebCryptoError=function(i,o,u){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(i,o,u);var h=this.flush();if(h)return h.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},d.getValidChunk=function(i){var o=i,u=i.length-i.length%16;return u!==i.length&&(o=Xn(i,0,u),this.remainderData=Xn(i,u)),o},d.logOnce=function(i){this.logEnabled&&(Le.log("[decrypter]: "+i),this.logEnabled=!1)},g}(),ho_toString=function(d){for(var c="",i=d.length,o=0;o<i;o++)c+="["+d.start(o).toFixed(3)+"-"+d.end(o).toFixed(3)+"]";return c},En_STOPPED="STOPPED",En_IDLE="IDLE",En_KEY_LOADING="KEY_LOADING",En_FRAG_LOADING="FRAG_LOADING",En_FRAG_LOADING_WAITING_RETRY="FRAG_LOADING_WAITING_RETRY",En_WAITING_TRACK="WAITING_TRACK",En_PARSING="PARSING",En_PARSED="PARSED",En_ENDED="ENDED",En_ERROR="ERROR",En_WAITING_INIT_PTS="WAITING_INIT_PTS",En_WAITING_LEVEL="WAITING_LEVEL",rs=function(g){function d(i,o,u,h,p){var v;return(v=g.call(this)||this).hls=void 0,v.fragPrevious=null,v.fragCurrent=null,v.fragmentTracker=void 0,v.transmuxer=null,v._state=En_STOPPED,v.playlistType=void 0,v.media=null,v.mediaBuffer=null,v.config=void 0,v.bitrateTest=!1,v.lastCurrentTime=0,v.nextLoadPosition=0,v.startPosition=0,v.startTimeOffset=null,v.loadedmetadata=!1,v.retryDate=0,v.levels=null,v.fragmentLoader=void 0,v.keyLoader=void 0,v.levelLastLoaded=null,v.startFragRequested=!1,v.decrypter=void 0,v.initPTS=[],v.onvseeking=null,v.onvended=null,v.logPrefix="",v.log=void 0,v.warn=void 0,v.playlistType=p,v.logPrefix=h,v.log=Le.log.bind(Le,h+":"),v.warn=Le.warn.bind(Le,h+":"),v.hls=i,v.fragmentLoader=new Cs(i.config),v.keyLoader=u,v.fragmentTracker=o,v.config=i.config,v.decrypter=new Xr(i.config),i.on(x.MANIFEST_LOADED,v.onManifestLoaded,function M(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(v)),v}E(d,g);var c=d.prototype;return c.doTick=function(){this.onTickEnd()},c.onTickEnd=function(){},c.startLoad=function(o){},c.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var o=this.fragCurrent;null!=o&&o.loader&&(o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=En_STOPPED},c._streamEnded=function(o,u){if(u.live||o.nextStart||!o.end||!this.media)return!1;var h=u.partList;if(null!=h&&h.length){var p=h[h.length-1];return Mi.isBuffered(this.media,p.start+p.duration/2)}return this.fragmentTracker.isEndListAppended(u.fragments[u.fragments.length-1].type)},c.getLevelDetails=function(){var o;if(this.levels&&null!==this.levelLastLoaded)return null==(o=this.levelLastLoaded)?void 0:o.details},c.onMediaAttached=function(o,u){var h=this.media=this.mediaBuffer=u.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),h.addEventListener("seeking",this.onvseeking),h.addEventListener("ended",this.onvended);var p=this.config;this.levels&&p.autoStartLoad&&this.state===En_STOPPED&&this.startLoad(p.startPosition)},c.onMediaDetaching=function(){var o=this.media;null!=o&&o.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),o&&this.onvseeking&&this.onvended&&(o.removeEventListener("seeking",this.onvseeking),o.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},c.onMediaSeeking=function(){var o=this.config,u=this.fragCurrent,h=this.media,v=this.state,y=h?h.currentTime:0,A=Mi.bufferInfo(this.mediaBuffer||h,y,o.maxBufferHole);if(this.log("media seeking to "+($(y)?y.toFixed(3):y)+", state: "+v),this.state===En_ENDED)this.resetLoadingState();else if(u){var D=o.maxFragLookUpTolerance,B=u.start-D,ee=u.start+u.duration+D;if(!A.len||ee<A.start||B>A.end){var re=y>ee;(y<B||re)&&(re&&u.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),u.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}h&&(this.fragmentTracker.removeFragmentsInRange(y,1/0,this.playlistType,!0),this.lastCurrentTime=y),!this.loadedmetadata&&!A.len&&(this.nextLoadPosition=this.startPosition=y),this.tickImmediate()},c.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},c.onManifestLoaded=function(o,u){this.startTimeOffset=u.startTimeOffset,this.initPTS=[]},c.onHandlerDestroying=function(){this.hls.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),g.prototype.onHandlerDestroying.call(this),this.hls=null},c.onHandlerDestroyed=function(){this.state=En_STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,g.prototype.onHandlerDestroyed.call(this)},c.loadFragment=function(o,u,h){this._loadFragForPlayback(o,u,h)},c._loadFragForPlayback=function(o,u,h){var p=this;this._doFragLoad(o,u,h,function(A){if(p.fragContextChanged(o))return p.warn("Fragment "+o.sn+(A.part?" p: "+A.part.index:"")+" of level "+o.level+" was dropped during download."),void p.fragmentTracker.removeFragment(o);o.stats.chunkCount++,p._handleFragmentLoadProgress(A)}).then(function(y){if(y){var A=p.state;if(p.fragContextChanged(o))return void((A===En_FRAG_LOADING||!p.fragCurrent&&A===En_PARSING)&&(p.fragmentTracker.removeFragment(o),p.state=En_IDLE));"payload"in y&&(p.log("Loaded fragment "+o.sn+" of level "+o.level),p.hls.trigger(x.FRAG_LOADED,y)),p._handleFragmentLoadComplete(y)}}).catch(function(y){p.state===En_STOPPED||p.state===En_ERROR||(p.warn(y),p.resetFragmentLoading(o))})},c.clearTrackerIfNeeded=function(o){var u,h=this.fragmentTracker;if(h.getState(o)===Qi_APPENDING){var y=this.getFwdBufferInfo(this.mediaBuffer,o.type),A=Math.max(o.duration,y?y.len:this.config.maxBufferLength);this.reduceMaxBufferLength(A)&&h.removeFragment(o)}else 0===(null==(u=this.mediaBuffer)?void 0:u.buffered.length)?h.removeAllFragments():h.hasParts(o.type)&&(h.detectPartialFragments({frag:o,part:null,stats:o.stats,id:o.type}),h.getState(o)===Qi_PARTIAL&&h.removeFragment(o))},c.checkLiveUpdate=function(o){if(o.updated&&!o.live){var u=o.fragments[o.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:u,part:null,stats:u.stats,id:u.type})}o.fragments[0]||(o.deltaUpdateFailed=!0)},c.flushMainBuffer=function(o,u,h){void 0===h&&(h=null),o-u&&this.hls.trigger(x.BUFFER_FLUSHING,{startOffset:o,endOffset:u,type:h})},c._loadInitSegment=function(o,u){var h=this;this._doFragLoad(o,u).then(function(p){if(!p||h.fragContextChanged(o)||!h.levels)throw new Error("init load aborted");return p}).then(function(p){var v=h.hls,y=p.payload,A=o.decryptdata;if(y&&y.byteLength>0&&null!=A&&A.key&&A.iv&&"AES-128"===A.method){var D=self.performance.now();return h.decrypter.decrypt(new Uint8Array(y),A.key.buffer,A.iv.buffer).catch(function(B){throw v.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_DECRYPT_ERROR,fatal:!1,error:B,reason:B.message,frag:o}),B}).then(function(B){var ee=self.performance.now();return v.trigger(x.FRAG_DECRYPTED,{frag:o,payload:B,stats:{tstart:D,tdecrypt:ee}}),p.payload=B,h.completeInitSegmentLoad(p)})}return h.completeInitSegmentLoad(p)}).catch(function(p){h.state===En_STOPPED||h.state===En_ERROR||(h.warn(p),h.resetFragmentLoading(o))})},c.completeInitSegmentLoad=function(o){if(!this.levels)throw new Error("init load aborted, missing levels");var h=o.frag.stats;this.state=En_IDLE,o.frag.data=new Uint8Array(o.payload),h.parsing.start=h.buffering.start=self.performance.now(),h.parsing.end=h.buffering.end=self.performance.now(),this.tick()},c.fragContextChanged=function(o){var u=this.fragCurrent;return!o||!u||o.sn!==u.sn||o.level!==u.level},c.fragBufferedComplete=function(o,u){var h,p,v,y,A=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered "+o.type+" sn: "+o.sn+(u?" part: "+u.index:"")+" of "+(this.playlistType===mr_MAIN?"level":"track")+" "+o.level+" (frag:["+(null!=(h=o.startPTS)?h:NaN).toFixed(3)+"-"+(null!=(p=o.endPTS)?p:NaN).toFixed(3)+"] > buffer:"+(A?ho_toString(Mi.getBuffered(A)):"(detached)")+")"),"initSegment"!==o.sn){var D;if(o.type!==mr_SUBTITLE){var B=o.elementaryStreams;if(!Object.keys(B).some(function(re){return!!B[re]}))return void(this.state=En_IDLE)}var ee=null==(D=this.levels)?void 0:D[o.level];null!=ee&&ee.fragmentError&&(this.log("Resetting level fragment error count of "+ee.fragmentError+" on frag buffered"),ee.fragmentError=0)}this.state=En_IDLE,A&&(!this.loadedmetadata&&o.type==mr_MAIN&&A.buffered.length&&(null==(v=this.fragCurrent)?void 0:v.sn)===(null==(y=this.fragPrevious)?void 0:y.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},c.seekToStartPos=function(){},c._handleFragmentLoadComplete=function(o){var u=this.transmuxer;if(u){var h=o.frag,p=o.part,v=o.partsLoaded,y=!v||0===v.length||v.some(function(D){return!D}),A=new bo(h.level,h.sn,h.stats.chunkCount+1,0,p?p.index:-1,!y);u.flush(A)}},c._handleFragmentLoadProgress=function(o){},c._doFragLoad=function(o,u,h,p){var v,y=this;void 0===h&&(h=null);var A=u?.details;if(!this.levels||!A)throw new Error("frag load aborted, missing level"+(A?"":" detail")+"s");var D=null;if(!o.encrypted||null!=(v=o.decryptdata)&&v.key?!o.encrypted&&A.encryptedFragments.length&&this.keyLoader.loadClear(o,A.encryptedFragments):(this.log("Loading key for "+o.sn+" of ["+A.startSN+"-"+A.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+o.level),this.state=En_KEY_LOADING,this.fragCurrent=o,D=this.keyLoader.load(o).then(function(Ue){if(!y.fragContextChanged(Ue.frag))return y.hls.trigger(x.KEY_LOADED,Ue),y.state===En_KEY_LOADING&&(y.state=En_IDLE),Ue}),this.hls.trigger(x.KEY_LOADING,{frag:o}),null===this.fragCurrent&&(D=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),h=Math.max(o.start,h||0),this.config.lowLatencyMode&&"initSegment"!==o.sn){var B=A.partList;if(B&&p){h>o.end&&A.fragmentHint&&(o=A.fragmentHint);var ee=this.getNextPart(B,o,h);if(ee>-1){var ye,re=B[ee];return this.log("Loading part sn: "+o.sn+" p: "+re.index+" cc: "+o.cc+" of playlist ["+A.startSN+"-"+A.endSN+"] parts [0-"+ee+"-"+(B.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+o.level+", target: "+parseFloat(h.toFixed(3))),this.nextLoadPosition=re.start+re.duration,this.state=En_FRAG_LOADING,ye=D?D.then(function(Ue){return!Ue||y.fragContextChanged(Ue.frag)?null:y.doFragPartsLoad(o,re,u,p)}).catch(function(Ue){return y.handleFragLoadError(Ue)}):this.doFragPartsLoad(o,re,u,p).catch(function(Ue){return y.handleFragLoadError(Ue)}),this.hls.trigger(x.FRAG_LOADING,{frag:o,part:re,targetBufferTime:h}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):ye}if(!o.url||this.loadedEndOfParts(B,h))return Promise.resolve(null)}}this.log("Loading fragment "+o.sn+" cc: "+o.cc+" "+(A?"of ["+A.startSN+"-"+A.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+o.level+", target: "+parseFloat(h.toFixed(3))),$(o.sn)&&!this.bitrateTest&&(this.nextLoadPosition=o.start+o.duration),this.state=En_FRAG_LOADING;var Ye,we=this.config.progressive;return Ye=we&&D?D.then(function(Ue){return!Ue||y.fragContextChanged(Ue?.frag)?null:y.fragmentLoader.load(o,p)}).catch(function(Ue){return y.handleFragLoadError(Ue)}):Promise.all([this.fragmentLoader.load(o,we?p:void 0),D]).then(function(Ue){var Xe=Ue[0];return!we&&Xe&&p&&p(Xe),Xe}).catch(function(Ue){return y.handleFragLoadError(Ue)}),this.hls.trigger(x.FRAG_LOADING,{frag:o,targetBufferTime:h}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):Ye},c.doFragPartsLoad=function(o,u,h,p){var v=this;return new Promise(function(y,A){var D,B=[],ee=null==(D=h.details)?void 0:D.partList;!function ye(we){v.fragmentLoader.loadPart(o,we,p).then(function(Ye){B[we.index]=Ye;var Ue=Ye.part;v.hls.trigger(x.FRAG_LOADED,Ye);var Xe=Gf(h,o.sn,we.index+1)||Pc(ee,o.sn,we.index+1);if(!Xe)return y({frag:o,part:Ue,partsLoaded:B});ye(Xe)}).catch(A)}(u)})},c.handleFragLoadError=function(o){if("data"in o){var u=o.data;o.data&&u.details===he.INTERNAL_ABORTED?this.handleFragLoadAborted(u.frag,u.part):this.hls.trigger(x.ERROR,u)}else this.hls.trigger(x.ERROR,{type:_e.OTHER_ERROR,details:he.INTERNAL_EXCEPTION,err:o,error:o,fatal:!0});return null},c._handleTransmuxerFlush=function(o){var u=this.getCurrentContext(o);if(u&&this.state===En_PARSING){var h=u.frag,p=u.part,v=u.level,y=self.performance.now();h.stats.parsing.end=y,p&&(p.stats.parsing.end=y),this.updateLevelTiming(h,p,v,o.partial)}else!this.fragCurrent&&this.state!==En_STOPPED&&this.state!==En_ERROR&&(this.state=En_IDLE)},c.getCurrentContext=function(o){var u=this.levels,h=this.fragCurrent,p=o.level,v=o.sn,y=o.part;if(null==u||!u[p])return this.warn("Levels object was unset while buffering fragment "+v+" of level "+p+". The current chunk will not be buffered."),null;var A=u[p],D=y>-1?Gf(A,v,y):null,B=D?D.fragment:function Hf(g,d,c){if(null==g||!g.details)return null;var i=g.details,o=i.fragments[d-i.startSN];return o||(o=i.fragmentHint)&&o.sn===d?o:d<i.startSN&&c&&c.sn===d?c:null}(A,v,h);return B?(h&&h!==B&&(B.stats=h.stats),{frag:B,part:D,level:A}):null},c.bufferFragmentData=function(o,u,h,p,v){var y;if(o&&this.state===En_PARSING){var A=o.data1,D=o.data2,B=A;if(A&&D&&(B=ci(A,D)),null!=(y=B)&&y.length&&(this.hls.trigger(x.BUFFER_APPENDING,{type:o.type,frag:u,part:h,chunkMeta:p,parent:u.type,data:B}),o.dropped&&o.independent&&!h)){if(v)return;this.flushBufferGap(u)}}},c.flushBufferGap=function(o){var u=this.media;if(u){if(!Mi.isBuffered(u,u.currentTime))return void this.flushMainBuffer(0,o.start);var h=u.currentTime,p=Mi.bufferInfo(u,h,0),y=Math.min(2*this.config.maxFragLookUpTolerance,.25*o.duration),A=Math.max(Math.min(o.start-y,p.end-y),h+y);o.start-A>y&&this.flushMainBuffer(A,o.start)}},c.getFwdBufferInfo=function(o,u){var h=this.getLoadPosition();return $(h)?this.getFwdBufferInfoAtPos(o,h,u):null},c.getFwdBufferInfoAtPos=function(o,u,h){var p=this.config.maxBufferHole,v=Mi.bufferInfo(o,u,p);if(0===v.len&&void 0!==v.nextStart){var y=this.fragmentTracker.getBufferedFrag(u,h);if(y&&v.nextStart<y.end)return Mi.bufferInfo(o,u,Math.max(v.nextStart,p))}return v},c.getMaxBufferLength=function(o){var h,u=this.config;return h=o?Math.max(8*u.maxBufferSize/o,u.maxBufferLength):u.maxBufferLength,Math.min(h,u.maxMaxBufferLength)},c.reduceMaxBufferLength=function(o){var u=this.config;return u.maxMaxBufferLength>=(o||u.maxBufferLength)&&(u.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+u.maxMaxBufferLength+"s"),!0)},c.getAppendedFrag=function(o,u){var h=this.fragmentTracker.getAppendedFrag(o,mr_MAIN);return h&&"fragment"in h?h.fragment:h},c.getNextFragment=function(o,u){var h=u.fragments,p=h.length;if(!p)return null;var A,v=this.config,y=h[0].start;if(u.live){var D=v.initialLiveManifestSize;if(p<D)return this.warn("Not enough fragments to start playback (have: "+p+", need: "+D+")"),null;(!u.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||o<y)&&(A=this.getInitialLiveFragment(u,h),this.startPosition=this.nextLoadPosition=A?this.hls.liveSyncPosition||A.start:o)}else o<=y&&(A=h[0]);return A||(A=this.getFragmentAtPosition(o,v.lowLatencyMode?u.partEnd:u.fragmentEnd,u)),this.mapToInitFragWhenRequired(A)},c.isLoopLoading=function(o,u){var h=this.fragmentTracker.getState(o);return(h===Qi_OK||h===Qi_PARTIAL&&!!o.gap)&&this.nextLoadPosition>u},c.getNextFragmentLoopLoading=function(o,u,h,p,v){var y=o.gap,A=this.getNextFragment(this.nextLoadPosition,u);if(null===A)return A;if(o=A,y&&o&&!o.gap&&h.nextStart){var D=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,h.nextStart,p);if(null!==D&&h.len+D.len>=v)return this.log('buffer full after gaps in "'+p+'" playlist starting at sn: '+o.sn),null}return o},c.mapToInitFragWhenRequired=function(o){return null==o||!o.initSegment||null!=o&&o.initSegment.data||this.bitrateTest?o:o.initSegment},c.getNextPart=function(o,u,h){for(var p=-1,v=!1,y=!0,A=0,D=o.length;A<D;A++){var B=o[A];if(y=y&&!B.independent,p>-1&&h<B.start)break;var ee=B.loaded;ee?p=-1:(v||B.independent||y)&&B.fragment===u&&(p=A),v=ee}return p},c.loadedEndOfParts=function(o,u){var h=o[o.length-1];return h&&u>h.start&&h.loaded},c.getInitialLiveFragment=function(o,u){var h=this.fragPrevious,p=null;if(h){if(o.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+h.programDateTime),p=function _s(g,d,c){if(null===d||!Array.isArray(g)||!g.length||!$(d))return null;if(d<(g[0].programDateTime||0))return null;if(d>=(g[g.length-1].endProgramDateTime||0))return null;c=c||0;for(var u=0;u<g.length;++u){var h=g[u];if(Gs(d,c,h))return h}return null}(u,h.endProgramDateTime,this.config.maxFragLookUpTolerance)),!p){var v=h.sn+1;if(v>=o.startSN&&v<=o.endSN){var y=u[v-o.startSN];h.cc===y.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(p=y).sn)}p||(p=function Fr(g,d){return ou_search(g,function(c){return c.cc<d?1:c.cc>d?-1:0})}(u,h.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+p.sn)}}else{var A=this.hls.liveSyncPosition;null!==A&&(p=this.getFragmentAtPosition(A,this.bitrateTest?o.fragmentEnd:o.edge,o))}return p},c.getFragmentAtPosition=function(o,u,h){var ye,p=this.config,v=this.fragPrevious,y=h.fragments,A=h.endSN,D=h.fragmentHint,B=p.maxFragLookUpTolerance,ee=h.partList,re=!!(p.lowLatencyMode&&null!=ee&&ee.length&&D);if(re&&D&&!this.bitrateTest&&(y=y.concat(D),A=D.sn),ye=o<u?au(v,y,o,o>u-B?0:B):y[y.length-1]){var Ye=ye.sn-h.startSN,Ue=this.fragmentTracker.getState(ye);if((Ue===Qi_OK||Ue===Qi_PARTIAL&&ye.gap)&&(v=ye),v&&ye.sn===v.sn&&(!re||ee[0].fragment.sn>ye.sn)&&v&&ye.level===v.level){var vt=y[Ye+1];ye=ye.sn<A&&this.fragmentTracker.getState(vt)!==Qi_OK?vt:null}}return ye},c.synchronizeToLiveEdge=function(o){var u=this.config,h=this.media;if(h){var p=this.hls.liveSyncPosition,v=h.currentTime,A=o.edge,D=v>=o.fragments[0].start-u.maxFragLookUpTolerance&&v<=A;null!==p&&h.duration>p&&(v<p||!D)&&(!D&&h.readyState<4||v<A-(void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*o.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=p),h.readyState&&(this.warn("Playback: "+v.toFixed(3)+" is located too far from the end of live sliding playlist: "+A+", reset currentTime to : "+p.toFixed(3)),h.currentTime=p))}},c.alignPlaylists=function(o,u,h){var p=o.fragments.length;if(!p)return this.warn("No fragments in live playlist"),0;var v=o.fragments[0].start,y=!u,A=o.alignedSliding&&$(v);if(y||!A&&!v){var D=this.fragPrevious;Vc(D,h,o);var B=o.fragments[0].start;return this.log("Live playlist sliding: "+B.toFixed(2)+" start-sn: "+(u?u.startSN:"na")+"->"+o.startSN+" prev-sn: "+(D?D.sn:"na")+" fragments: "+p),B}return v},c.waitForCdnTuneIn=function(o){return o.live&&o.canBlockReload&&o.partTarget&&o.tuneInGoal>Math.max(o.partHoldBack,3*o.partTarget)},c.setStartPosition=function(o,u){var h=this.startPosition;if(h<u&&(h=-1),-1===h||-1===this.lastCurrentTime){var p=null!==this.startTimeOffset,v=p?this.startTimeOffset:o.startTimeOffset;null!==v&&$(v)?(h=u+v,v<0&&(h+=o.totalduration),h=Math.min(Math.max(u,h),u+o.totalduration),this.log("Start time offset "+v+" found in "+(p?"multivariant":"media")+" playlist, adjust startPosition to "+h),this.startPosition=h):o.live?h=this.hls.liveSyncPosition||u:this.startPosition=h=0,this.lastCurrentTime=h}this.nextLoadPosition=h},c.getLoadPosition=function(){var o=this.media,u=0;return this.loadedmetadata&&o?u=o.currentTime:this.nextLoadPosition&&(u=this.nextLoadPosition),u},c.handleFragLoadAborted=function(o,u){this.transmuxer&&"initSegment"!==o.sn&&o.stats.aborted&&(this.warn("Fragment "+o.sn+(u?" part "+u.index:"")+" of level "+o.level+" was aborted"),this.resetFragmentLoading(o))},c.resetFragmentLoading=function(o){(!this.fragCurrent||!this.fragContextChanged(o)&&this.state!==En_FRAG_LOADING_WAITING_RETRY)&&(this.state=En_IDLE)},c.onFragmentOrKeyLoadError=function(o,u){if(u.chunkMeta&&!u.frag){var h=this.getCurrentContext(u.chunkMeta);h&&(u.frag=h.frag)}var p=u.frag;if(p&&p.type===o&&this.levels){var v;if(this.fragContextChanged(p))return void this.warn("Frag load error must match current frag to retry "+p.url+" > "+(null==(v=this.fragCurrent)?void 0:v.url));var y=u.details===he.FRAG_GAP;y&&this.fragmentTracker.fragBuffered(p,!0);var A=u.errorAction,D=A||{},B=D.action,ee=D.retryCount,re=void 0===ee?0:ee,ye=D.retryConfig;if(A&&B===co_RetryRequest&&ye){this.resetStartWhenNotLoaded(this.levelLastLoaded);var we=ns(ye,re);this.warn("Fragment "+p.sn+" of "+o+" "+p.level+" errored with "+u.details+", retrying loading "+(re+1)+"/"+ye.maxNumRetry+" in "+we+"ms"),A.resolved=!0,this.retryDate=self.performance.now()+we,this.state=En_FRAG_LOADING_WAITING_RETRY}else if(ye&&A){if(this.resetFragmentErrors(o),!(re<ye.maxNumRetry))return void Le.warn(u.details+" reached or exceeded max retry ("+re+")");!y&&B!==co_RemoveAlternatePermanently&&(A.resolved=!0)}else this.state=A?.action===co_SendAlternateToPenaltyBox?En_WAITING_LEVEL:En_ERROR;this.tickImmediate()}},c.reduceLengthAndFlushBuffer=function(o){if(this.state===En_PARSING||this.state===En_PARSED){var u=o.parent,h=this.getFwdBufferInfo(this.mediaBuffer,u),p=h&&h.len>.5;p&&this.reduceMaxBufferLength(h.len);var v=!p;return v&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+u+" buffer"),o.frag&&(this.fragmentTracker.removeFragment(o.frag),this.nextLoadPosition=o.frag.start),this.resetLoadingState(),v}return!1},c.resetFragmentErrors=function(o){o===mr_AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==En_STOPPED&&(this.state=En_IDLE)},c.afterBufferFlushed=function(o,u,h){if(o){var p=Mi.getBuffered(o);this.fragmentTracker.detectEvictedFragments(u,p,h),this.state===En_ENDED&&this.resetLoadingState()}},c.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=En_IDLE},c.resetStartWhenNotLoaded=function(o){if(!this.loadedmetadata){this.startFragRequested=!1;var u=o?o.details:null;null!=u&&u.live?(this.startPosition=-1,this.setStartPosition(u,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},c.resetWhenMissingContext=function(o){this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()},c.removeUnbufferedFrags=function(o){void 0===o&&(o=0),this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!1,!0)},c.updateLevelTiming=function(o,u,h,p){var y,v=this,A=h.details;if(A){if(!Object.keys(o.elementaryStreams).reduce(function(ee,re){var ye=o.elementaryStreams[re];if(ye){var we=ye.endPTS-ye.startPTS;if(we<=0)return v.warn("Could not parse fragment "+o.sn+" "+re+" duration reliably ("+we+")"),ee||!1;var Ye=p?0:lr(A,o,ye.startPTS,ye.endPTS,ye.startDTS,ye.endDTS);return v.hls.trigger(x.LEVEL_PTS_UPDATED,{details:A,level:h,drift:Ye,type:re,frag:o,start:ye.startPTS,end:ye.endPTS}),!0}return ee},!1)&&null===(null==(y=this.transmuxer)?void 0:y.error)){var B=new Error("Found no media in fragment "+o.sn+" of level "+o.level+" resetting transmuxer to fallback to playlist timing");if(0===h.fragmentError&&(h.fragmentError++,o.gap=!0,this.fragmentTracker.removeFragment(o),this.fragmentTracker.fragBuffered(o,!0)),this.warn(B.message),this.hls.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,fatal:!1,error:B,frag:o,reason:"Found no media in msn "+o.sn+' of level "'+h.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=En_PARSED,this.hls.trigger(x.FRAG_PARSED,{frag:o,part:u})}else this.warn("level.details undefined")},c.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},c.recoverWorkerError=function(o){"demuxerWorker"===o.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())},De(d,[{key:"state",get:function(){return this._state},set:function(o){var u=this._state;u!==o&&(this._state=o,this.log(u+"->"+o))}}]),d}(Ss),Vo=function(){function g(){this.chunks=[],this.dataLength=0}var d=g.prototype;return d.push=function(i){this.chunks.push(i),this.dataLength+=i.length},d.flush=function(){var u,i=this.chunks;return i.length?(u=1===i.length?i[0]:function zu(g,d){for(var c=new Uint8Array(d),i=0,o=0;o<g.length;o++){var u=g[o];c.set(u,i),i+=u.length}return c}(i,this.dataLength),this.reset(),u):new Uint8Array(0)},d.reset=function(){this.chunks.length=0,this.dataLength=0},g}();function ra(g,d){return void 0===g&&(g=""),void 0===d&&(d=9e4),{type:g,id:-1,pid:-1,inputTimeScale:d,sequenceNumber:-1,samples:[],dropped:0}}var Ws=function(){function g(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var d=g.prototype;return d.resetInitSegment=function(i,o,u,h){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},d.resetTimeStamp=function(i){this.initPTS=i,this.resetContiguity()},d.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},d.canParse=function(i,o){return!1},d.appendFrame=function(i,o,u){},d.demux=function(i,o){this.cachedData&&(i=ci(this.cachedData,i),this.cachedData=null);var p,u=Li(i,0),h=u?u.length:0,v=this._audioTrack,y=this._id3Track,A=u?Xi(u):void 0,D=i.length;for((null===this.basePTS||0===this.frameIndex&&$(A))&&(this.basePTS=Yf(A,o,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),u&&u.length>0&&y.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:Ri_audioId3,duration:Number.POSITIVE_INFINITY});h<D;){if(this.canParse(i,h)){var B=this.appendFrame(v,i,h);B?(this.frameIndex++,this.lastPTS=B.sample.pts,p=h+=B.length):h=D}else gi(i,h)?(u=Li(i,h),y.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:Ri_audioId3,duration:Number.POSITIVE_INFINITY}),p=h+=u.length):h++;if(h===D&&p!==D){var ee=Xn(i,p);this.cachedData=this.cachedData?ci(this.cachedData,ee):ee}}return{audioTrack:v,videoTrack:ra(),id3Track:y,textTrack:ra()}},d.demuxSampleAes=function(i,o,u){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},d.flush=function(i){var o=this.cachedData;return o&&(this.cachedData=null,this.demux(o,0)),{audioTrack:this._audioTrack,videoTrack:ra(),id3Track:this._id3Track,textTrack:ra()}},d.destroy=function(){},g}(),Yf=function(d,c,i){return $(d)?90*d:9e4*c+(i?9e4*i.baseTime/i.timescale:0)};function Hi(g,d){return 255===g[d]&&240==(246&g[d+1])}function Jn(g,d){return 1&g[d+1]?7:9}function xr(g,d){return(3&g[d+3])<<11|g[d+4]<<3|(224&g[d+5])>>>5}function Lo(g,d){return d+1<g.length&&Hi(g,d)}function Do(g,d){if(Lo(g,d)){var c=Jn(g,d);if(d+c>=g.length)return!1;var i=xr(g,d);if(i<=c)return!1;var o=d+i;return o===g.length||Lo(g,o)}return!1}function is(g,d,c,i,o){if(!g.samplerate){var u=function Gc(g,d,c,i){var o,u,h,p,v=navigator.userAgent.toLowerCase(),y=i,A=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&d[c+2])>>>6);var D=(60&d[c+2])>>>2;if(!(D>A.length-1))return h=(1&d[c+2])<<2,h|=(192&d[c+3])>>>6,Le.log("manifest codec:"+i+", ADTS type:"+o+", samplingIndex:"+D),/firefox/i.test(v)?D>=6?(o=5,p=new Array(4),u=D-3):(o=2,p=new Array(2),u=D):-1!==v.indexOf("android")?(o=2,p=new Array(2),u=D):(o=5,p=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&D>=6?u=D-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(D>=6&&1===h||/vivaldi/i.test(v))||!i&&1===h)&&(o=2,p=new Array(2)),u=D)),p[0]=o<<3,p[0]|=(14&D)>>1,p[1]|=(1&D)<<7,p[1]|=h<<3,5===o&&(p[1]|=(14&u)>>1,p[2]=(1&u)<<7,p[2]|=8,p[3]=0),{config:p,samplerate:A[D],channelCount:h,codec:"mp4a.40."+o,manifestCodec:y};var B=new Error("invalid ADTS sampling index:"+D);g.emit(x.ERROR,x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,fatal:!0,error:B,reason:B.message})}(d,c,i,o);if(!u)return;g.config=u.config,g.samplerate=u.samplerate,g.channelCount=u.channelCount,g.codec=u.codec,g.manifestCodec=u.manifestCodec,Le.log("parsed codec:"+g.codec+", rate:"+u.samplerate+", channels:"+u.channelCount)}}function Gi(g){return 9216e4/g}function os(g,d,c,i,o){var v,h=i+o*Gi(g.samplerate),p=function _a(g,d){var c=Jn(g,d);if(d+c<=g.length){var i=xr(g,d)-c;if(i>0)return{headerLength:c,frameLength:i}}}(d,c);if(p){var A=p.headerLength,D=A+p.frameLength,B=Math.max(0,c+D-d.length);B?(v=new Uint8Array(D-A)).set(d.subarray(c+A,d.length),0):v=d.subarray(c+A,c+D);var ee={unit:v,pts:h};return B||g.samples.push(ee),{sample:ee,length:D,missing:B}}var re=d.length-c;return(v=new Uint8Array(re)).set(d.subarray(c,d.length),0),{sample:{unit:v,pts:h},length:re,missing:-1}}var Rr=null,$s=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Zc=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Is=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Ji=[0,1,1,4];function as(g,d,c,i,o){if(!(c+24>d.length)){var u=qa(d,c);if(u&&c+u.frameLength<=d.length){var p=i+o*(9e4*u.samplesPerFrame/u.sampleRate),v={unit:d.subarray(c,c+u.frameLength),pts:p,dts:p};return g.config=[],g.channelCount=u.channelCount,g.samplerate=u.sampleRate,g.samples.push(v),{sample:v,length:u.frameLength,missing:0}}}}function qa(g,d){var c=g[d+1]>>3&3,i=g[d+1]>>1&3,o=g[d+2]>>4&15,u=g[d+2]>>2&3;if(1!==c&&0!==o&&15!==o&&3!==u){var p=g[d+3]>>6,y=1e3*$s[14*(3===c?3-i:3===i?3:4)+o-1],D=Zc[3*(3===c?0:2===c?1:2)+u],B=3===p?1:2,ee=Is[c][i],re=Ji[i],ye=8*ee*re,we=Math.floor(ee*y/D+(g[d+2]>>1&1))*re;if(null===Rr){var Ue=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Rr=Ue?parseInt(Ue[1]):0}return!!Rr&&Rr<=87&&2===i&&y>=224e3&&0===p&&(g[d+3]=128|g[d+3]),{sampleRate:D,channelCount:B,frameLength:we,samplesPerFrame:ye}}}function ia(g,d){return 255===g[d]&&224==(224&g[d+1])&&0!=(6&g[d+1])}function Xs(g,d){return d+1<g.length&&ia(g,d)}function Ka(g,d){if(d+1<g.length&&ia(g,d)){var i=qa(g,d),o=4;null!=i&&i.frameLength&&(o=i.frameLength);var u=d+o;return u===g.length||Xs(g,u)}return!1}var Ya=function(g){function d(i,o){var u;return(u=g.call(this)||this).observer=void 0,u.config=void 0,u.observer=i,u.config=o,u}E(d,g);var c=d.prototype;return c.resetInitSegment=function(o,u,h,p){g.prototype.resetInitSegment.call(this,o,u,h,p),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:u,duration:p,inputTimeScale:9e4,dropped:0}},d.probe=function(o){if(!o)return!1;var u=Li(o,0),h=u?.length||0;if(Ka(o,h))return!1;for(var p=o.length;h<p;h++)if(Do(o,h))return Le.log("ADTS sync word found !"),!0;return!1},c.canParse=function(o,u){return function wl(g,d){return function wi(g,d){return d+5<g.length}(g,d)&&Hi(g,d)&&xr(g,d)<=g.length-d}(o,u)},c.appendFrame=function(o,u,h){is(o,this.observer,u,h,o.manifestCodec);var p=os(o,u,h,this.basePTS,this.frameIndex);if(p&&0===p.missing)return p},d}(Ws),Qs=/\/emsg[-/]ID3/i,Js=function(){function g(c,i){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=i}var d=g.prototype;return d.resetTimeStamp=function(){},d.resetInitSegment=function(i,o,u,h){var p=this.videoTrack=ra("video",1),v=this.audioTrack=ra("audio",1),y=this.txtTrack=ra("text",1);if(this.id3Track=ra("id3",1),this.timeOffset=0,null!=i&&i.byteLength){var A=sr(i);if(A.video){var D=A.video,ee=D.timescale,re=D.codec;p.id=D.id,p.timescale=y.timescale=ee,p.codec=re}if(A.audio){var ye=A.audio,Ye=ye.timescale,Ue=ye.codec;v.id=ye.id,v.timescale=Ye,v.codec=Ue}y.id=xt.text,p.sampleDuration=0,p.duration=v.duration=h}},d.resetContiguity=function(){this.remainderData=null},g.probe=function(i){return function ln(g){for(var d=g.byteLength,c=0;c<d;){var i=zt(g,c);if(i>8&&109===g[c+4]&&111===g[c+5]&&111===g[c+6]&&102===g[c+7])return!0;c=i>1?c+i:d}return!1}(i)},d.demux=function(i,o){this.timeOffset=o;var u=i,h=this.videoTrack,p=this.txtTrack;if(this.config.progressive){this.remainderData&&(u=ci(this.remainderData,i));var v=function so(g){var d={valid:null,remainder:null},c=gn(g,["moof"]);if(c.length<2)return d.remainder=g,d;var i=c[c.length-1];return d.valid=Xn(g,0,i.byteOffset-8),d.remainder=Xn(g,i.byteOffset-8),d}(u);this.remainderData=v.remainder,h.samples=v.valid||new Uint8Array}else h.samples=u;var y=this.extractID3Track(h,o);return p.samples=pi(o,h),{videoTrack:h,audioTrack:this.audioTrack,id3Track:y,textTrack:this.txtTrack}},d.flush=function(){var i=this.timeOffset,o=this.videoTrack,u=this.txtTrack;o.samples=this.remainderData||new Uint8Array,this.remainderData=null;var h=this.extractID3Track(o,this.timeOffset);return u.samples=pi(i,o),{videoTrack:o,audioTrack:ra(),id3Track:h,textTrack:ra()}},d.extractID3Track=function(i,o){var u=this.id3Track;if(i.samples.length){var h=gn(i.samples,["emsg"]);h&&h.forEach(function(p){var v=function Ja(g){var d=g[0],c="",i="",o=0,u=0,h=0,p=0,v=0,y=0;if(0===d){for(;"\0"!==kt(g.subarray(y,y+1));)c+=kt(g.subarray(y,y+1)),y+=1;for(c+=kt(g.subarray(y,y+1)),y+=1;"\0"!==kt(g.subarray(y,y+1));)i+=kt(g.subarray(y,y+1)),y+=1;i+=kt(g.subarray(y,y+1)),y+=1,o=zt(g,12),u=zt(g,16),p=zt(g,20),v=zt(g,24),y=28}else if(1===d){o=zt(g,y+=4);var A=zt(g,y+=4),D=zt(g,y+=4);for(y+=4,h=Math.pow(2,32)*A+D,be(h)||(h=Number.MAX_SAFE_INTEGER,Le.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),p=zt(g,y),v=zt(g,y+=4),y+=4;"\0"!==kt(g.subarray(y,y+1));)c+=kt(g.subarray(y,y+1)),y+=1;for(c+=kt(g.subarray(y,y+1)),y+=1;"\0"!==kt(g.subarray(y,y+1));)i+=kt(g.subarray(y,y+1)),y+=1;i+=kt(g.subarray(y,y+1)),y+=1}return{schemeIdUri:c,value:i,timeScale:o,presentationTime:h,presentationTimeDelta:u,eventDuration:p,id:v,payload:g.subarray(y,g.byteLength)}}(p);if(Qs.test(v.schemeIdUri)){var y=$(v.presentationTime)?v.presentationTime/v.timeScale:o+v.presentationTimeDelta/v.timeScale,A=4294967295===v.eventDuration?Number.POSITIVE_INFINITY:v.eventDuration/v.timeScale;A<=.001&&(A=Number.POSITIVE_INFINITY);var D=v.payload;u.samples.push({data:D,len:D.byteLength,dts:y,pts:y,type:Ri_emsg,duration:A})}})}return u},d.demuxSampleAes=function(i,o,u){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},d.destroy=function(){},g}(),kr=function(d,c){var i=0,o=5;c+=o;for(var u=new Uint32Array(1),h=new Uint32Array(1),p=new Uint8Array(1);o>0;){p[0]=d[c];var v=Math.min(o,8),y=8-v;h[0]=4278190080>>>24+y<<y,u[0]=(p[0]&h[0])>>y,i=i?i<<v|u[0]:u[0],c+=1,o-=v}return i},zf=function(g){function d(i){var o;return(o=g.call(this)||this).observer=void 0,o.observer=i,o}E(d,g);var c=d.prototype;return c.resetInitSegment=function(o,u,h,p){g.prototype.resetInitSegment.call(this,o,u,h,p),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:u,duration:p,inputTimeScale:9e4,dropped:0}},c.canParse=function(o,u){return u+64<o.length},c.appendFrame=function(o,u,h){var p=Rl(o,u,h,this.basePTS,this.frameIndex);if(-1!==p)return{sample:o.samples[o.samples.length-1],length:p,missing:0}},d.probe=function(o){if(!o)return!1;var u=Li(o,0);if(!u)return!1;var h=u.length;return 11===o[h]&&119===o[h+1]&&void 0!==Xi(u)&&kr(o,h)<16},d}(Ws);function Rl(g,d,c,i,o){if(c+8>d.length||11!==d[c]||119!==d[c+1])return-1;var u=d[c+4]>>6;if(u>=3)return-1;var p=[48e3,44100,32e3][u],v=63&d[c+4],A=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*v+u];if(c+A>d.length)return-1;var D=d[c+6]>>5,B=0;2===D?B+=2:(1&D&&1!==D&&(B+=2),4&D&&(B+=2));var ee=(d[c+6]<<8|d[c+7])>>12-B&1,ye=[2,1,2,3,3,4,4,5][D]+ee,Ye=7&d[c+5],Ue=new Uint8Array([u<<6|d[c+5]>>3<<1|Ye>>2,(3&Ye)<<6|D<<3|ee<<2|v>>4,v<<4&224]),vt=i+o*(1536/p*9e4),wt=d.subarray(c,c+A);return g.config=Ue,g.channelCount=ye,g.samplerate=p,g.samples.push({unit:wt,pts:vt}),A}var $u=function(){function g(){this.VideoSample=null}var d=g.prototype;return d.createVideoSample=function(i,o,u,h){return{key:i,frame:!1,pts:o,dts:u,units:[],debug:h,length:0}},d.getLastNalUnit=function(i){var o,h,u=this.VideoSample;if((!u||0===u.units.length)&&(u=i[i.length-1]),null!=(o=u)&&o.units){var p=u.units;h=p[p.length-1]}return h},d.pushAccessUnit=function(i,o){if(i.units.length&&i.frame){if(void 0===i.pts){var u=o.samples,h=u.length;if(!h)return void o.dropped++;var p=u[h-1];i.pts=p.pts,i.dts=p.dts}o.samples.push(i)}i.debug.length&&Le.log(i.pts+"/"+i.dts+":"+i.debug)},g}(),Ta=function(){function g(c){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=c,this.bytesAvailable=c.byteLength,this.word=0,this.bitsAvailable=0}var d=g.prototype;return d.loadWord=function(){var i=this.data,o=this.bytesAvailable,u=i.byteLength-o,h=new Uint8Array(4),p=Math.min(4,o);if(0===p)throw new Error("no bytes available");h.set(i.subarray(u,u+p)),this.word=new DataView(h.buffer).getUint32(0),this.bitsAvailable=8*p,this.bytesAvailable-=p},d.skipBits=function(i){var o;i=Math.min(i,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>i?(this.word<<=i,this.bitsAvailable-=i):(i-=this.bitsAvailable,i-=(o=i>>3)<<3,this.bytesAvailable-=o,this.loadWord(),this.word<<=i,this.bitsAvailable-=i)},d.readBits=function(i){var o=Math.min(this.bitsAvailable,i),u=this.word>>>32-o;if(i>32&&Le.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=o,this.bitsAvailable>0)this.word<<=o;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(o=i-o)>0&&this.bitsAvailable?u<<o|this.readBits(o):u},d.skipLZ=function(){var i;for(i=0;i<this.bitsAvailable;++i)if(this.word&2147483648>>>i)return this.word<<=i,this.bitsAvailable-=i,i;return this.loadWord(),i+this.skipLZ()},d.skipUEG=function(){this.skipBits(1+this.skipLZ())},d.skipEG=function(){this.skipBits(1+this.skipLZ())},d.readUEG=function(){var i=this.skipLZ();return this.readBits(i+1)-1},d.readEG=function(){var i=this.readUEG();return 1&i?1+i>>>1:-1*(i>>>1)},d.readBoolean=function(){return 1===this.readBits(1)},d.readUByte=function(){return this.readBits(8)},d.readUShort=function(){return this.readBits(16)},d.readUInt=function(){return this.readBits(32)},d.skipScalingList=function(i){for(var o=8,u=8,p=0;p<i;p++)0!==u&&(u=(o+this.readEG()+256)%256),o=0===u?o:u},d.readSPS=function(){var p,v,y,i=0,o=0,u=0,h=0,A=this.readUByte.bind(this),D=this.readBits.bind(this),B=this.readUEG.bind(this),ee=this.readBoolean.bind(this),re=this.skipBits.bind(this),ye=this.skipEG.bind(this),we=this.skipUEG.bind(this),Ye=this.skipScalingList.bind(this);A();var Ue=A();if(D(5),re(3),A(),we(),100===Ue||110===Ue||122===Ue||244===Ue||44===Ue||83===Ue||86===Ue||118===Ue||128===Ue){var Xe=B();if(3===Xe&&re(1),we(),we(),re(1),ee())for(v=3!==Xe?8:12,y=0;y<v;y++)ee()&&Ye(y<6?16:64)}we();var vt=B();if(0===vt)B();else if(1===vt)for(re(1),ye(),ye(),p=B(),y=0;y<p;y++)ye();we(),re(1);var wt=B(),jt=B(),Ht=D(1);0===Ht&&re(1),re(1),ee()&&(i=B(),o=B(),u=B(),h=B());var Nt=[1,1];if(ee()&&ee())switch(A()){case 1:Nt=[1,1];break;case 2:Nt=[12,11];break;case 3:Nt=[10,11];break;case 4:Nt=[16,11];break;case 5:Nt=[40,33];break;case 6:Nt=[24,11];break;case 7:Nt=[20,11];break;case 8:Nt=[32,11];break;case 9:Nt=[80,33];break;case 10:Nt=[18,11];break;case 11:Nt=[15,11];break;case 12:Nt=[64,33];break;case 13:Nt=[160,99];break;case 14:Nt=[4,3];break;case 15:Nt=[3,2];break;case 16:Nt=[2,1];break;case 255:Nt=[A()<<8|A(),A()<<8|A()]}return{width:Math.ceil(16*(wt+1)-2*i-2*o),height:(2-Ht)*(jt+1)*16-(Ht?2:4)*(u+h),pixelRatio:Nt}},d.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},g}(),hu=function(g){function d(){return g.apply(this,arguments)||this}E(d,g);var c=d.prototype;return c.parseAVCPES=function(o,u,h,p,v){var B,y=this,A=this.parseAVCNALu(o,h.data),D=this.VideoSample,ee=!1;h.data=null,D&&A.length&&!o.audFound&&(this.pushAccessUnit(D,o),D=this.VideoSample=this.createVideoSample(!1,h.pts,h.dts,"")),A.forEach(function(re){var ye;switch(re.type){case 1:var we=!1;B=!0;var Xe,Ye=re.data;if(ee&&Ye.length>4){var Ue=new Ta(Ye).readSliceType();(2===Ue||4===Ue||7===Ue||9===Ue)&&(we=!0)}we&&null!=(Xe=D)&&Xe.frame&&!D.key&&(y.pushAccessUnit(D,o),D=y.VideoSample=null),D||(D=y.VideoSample=y.createVideoSample(!0,h.pts,h.dts,"")),D.frame=!0,D.key=we;break;case 5:B=!0,null!=(ye=D)&&ye.frame&&!D.key&&(y.pushAccessUnit(D,o),D=y.VideoSample=null),D||(D=y.VideoSample=y.createVideoSample(!0,h.pts,h.dts,"")),D.key=!0,D.frame=!0;break;case 6:B=!0,lo(re.data,1,h.pts,u.samples);break;case 7:var vt,wt;B=!0,ee=!0;var jt=re.data,Nt=new Ta(jt).readSPS();if(!o.sps||o.width!==Nt.width||o.height!==Nt.height||(null==(vt=o.pixelRatio)?void 0:vt[0])!==Nt.pixelRatio[0]||(null==(wt=o.pixelRatio)?void 0:wt[1])!==Nt.pixelRatio[1]){o.width=Nt.width,o.height=Nt.height,o.pixelRatio=Nt.pixelRatio,o.sps=[jt],o.duration=v;for(var en=jt.subarray(1,4),tn="avc1.",yn=0;yn<3;yn++){var An=en[yn].toString(16);An.length<2&&(An="0"+An),tn+=An}o.codec=tn}break;case 8:B=!0,o.pps=[re.data];break;case 9:B=!0,o.audFound=!0,D&&y.pushAccessUnit(D,o),D=y.VideoSample=y.createVideoSample(!1,h.pts,h.dts,"");break;case 12:B=!0;break;default:B=!1,D&&(D.debug+="unknown NAL "+re.type+" ")}D&&B&&D.units.push(re)}),p&&D&&(this.pushAccessUnit(D,o),this.VideoSample=null)},c.parseAVCNALu=function(o,u){var D,B,h=u.byteLength,p=o.naluState||0,v=p,y=[],A=0,re=-1,ye=0;for(-1===p&&(re=0,ye=31&u[0],p=0,A=1);A<h;)if(D=u[A++],p)if(1!==p)if(D)if(1===D){if(B=A-p-1,re>=0){var we={data:u.subarray(re,B),type:ye};y.push(we)}else{var Ye=this.getLastNalUnit(o.samples);Ye&&(v&&A<=4-v&&Ye.state&&(Ye.data=Ye.data.subarray(0,Ye.data.byteLength-v)),B>0&&(Ye.data=ci(Ye.data,u.subarray(0,B)),Ye.state=0))}A<h?(re=A,ye=31&u[A],p=0):p=-1}else p=0;else p=3;else p=D?0:2;else p=D?0:1;if(re>=0&&p>=0){var Ue={data:u.subarray(re,h),type:ye,state:p};y.push(Ue)}if(0===y.length){var Xe=this.getLastNalUnit(o.samples);Xe&&(Xe.data=ci(Xe.data,u))}return o.naluState=p,y},d}($u),Ds=function(){function g(c,i,o){this.keyData=void 0,this.decrypter=void 0,this.keyData=o,this.decrypter=new Xr(i,{removePKCS7Padding:!1})}var d=g.prototype;return d.decryptBuffer=function(i){return this.decrypter.decrypt(i,this.keyData.key.buffer,this.keyData.iv.buffer)},d.decryptAacSample=function(i,o,u){var h=this,p=i[o].unit;if(!(p.length<=16)){var v=p.subarray(16,p.length-p.length%16),y=v.buffer.slice(v.byteOffset,v.byteOffset+v.length);this.decryptBuffer(y).then(function(A){var D=new Uint8Array(A);p.set(D,16),h.decrypter.isSync()||h.decryptAacSamples(i,o+1,u)})}},d.decryptAacSamples=function(i,o,u){for(;;o++){if(o>=i.length)return void u();if(!(i[o].unit.length<32||(this.decryptAacSample(i,o,u),this.decrypter.isSync())))return}},d.getAvcEncryptedData=function(i){for(var o=16*Math.floor((i.length-48)/160)+16,u=new Int8Array(o),h=0,p=32;p<i.length-16;p+=160,h+=16)u.set(i.subarray(p,p+16),h);return u},d.getAvcDecryptedUnit=function(i,o){for(var u=new Uint8Array(o),h=0,p=32;p<i.length-16;p+=160,h+=16)i.set(u.subarray(h,h+16),p);return i},d.decryptAvcSample=function(i,o,u,h,p){var v=this,y=Qa(p.data),A=this.getAvcEncryptedData(y);this.decryptBuffer(A.buffer).then(function(D){p.data=v.getAvcDecryptedUnit(y,D),v.decrypter.isSync()||v.decryptAvcSamples(i,o,u+1,h)})},d.decryptAvcSamples=function(i,o,u,h){if(i instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;o++,u=0){if(o>=i.length)return void h();for(var p=i[o].units;!(u>=p.length);u++){var v=p[u];if(!(v.data.length<=48||1!==v.type&&5!==v.type||(this.decryptAvcSample(i,o,u,h,v),this.decrypter.isSync())))return}}},g}(),Zi=188,Ao=function(){function g(c,i,o){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=c,this.config=i,this.typeSupported=o,this.videoParser=new hu}g.probe=function(i){var o=g.syncOffset(i);return o>0&&Le.warn("MPEG2-TS detected but first sync word found @ offset "+o),-1!==o},g.syncOffset=function(i){for(var o=i.length,u=Math.min(940,o-Zi)+1,h=0;h<u;){for(var p=!1,v=-1,y=0,A=h;A<o;A+=Zi){if(71!==i[A]||o-A!==Zi&&71!==i[A+Zi]){if(y)return-1;break}if(y++,-1===v&&0!==(v=A)&&(u=Math.min(v+18612,i.length-Zi)+1),p||(p=0===Xu(i,A)),p&&y>1&&(0===v&&y>2||A+Zi>u))return v}h++}return-1},g.createTrack=function(i,o){return{container:"video"===i||"audio"===i?"video/mp2t":void 0,type:i,id:xt[i],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===i?o:void 0}};var d=g.prototype;return d.resetInitSegment=function(i,o,u,h){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=g.createTrack("video"),this._audioTrack=g.createTrack("audio",h),this._id3Track=g.createTrack("id3"),this._txtTrack=g.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=o,this.videoCodec=u,this._duration=h},d.resetTimeStamp=function(){},d.resetContiguity=function(){var i=this._audioTrack,o=this._videoTrack,u=this._id3Track;i&&(i.pesData=null),o&&(o.pesData=null),u&&(u.pesData=null),this.aacOverFlow=null,this.remainderData=null},d.demux=function(i,o,u,h){void 0===u&&(u=!1),void 0===h&&(h=!1),u||(this.sampleAes=null);var p,v=this._videoTrack,y=this._audioTrack,A=this._id3Track,D=this._txtTrack,B=v.pid,ee=v.pesData,re=y.pid,ye=A.pid,we=y.pesData,Ye=A.pesData,Ue=null,Xe=this.pmtParsed,vt=this._pmtId,wt=i.length;if(this.remainderData&&(wt=(i=ci(this.remainderData,i)).length,this.remainderData=null),wt<Zi&&!h)return this.remainderData=i,{audioTrack:y,videoTrack:v,id3Track:A,textTrack:D};var jt=Math.max(0,g.syncOffset(i));(wt-=(wt-jt)%Zi)<i.byteLength&&!h&&(this.remainderData=new Uint8Array(i.buffer,wt,i.buffer.byteLength-wt));for(var Ht=0,Nt=jt;Nt<wt;Nt+=Zi)if(71===i[Nt]){var en=!!(64&i[Nt+1]),tn=Xu(i,Nt),An=void 0;if((48&i[Nt+3])>>4>1){if((An=Nt+5+i[Nt+4])===Nt+Zi)continue}else An=Nt+4;switch(tn){case B:en&&(ee&&(p=Yo(ee))&&this.videoParser.parseAVCPES(v,D,p,!1,this._duration),ee={data:[],size:0}),ee&&(ee.data.push(i.subarray(An,Nt+Zi)),ee.size+=Nt+Zi-An);break;case re:if(en){if(we&&(p=Yo(we)))switch(y.segmentCodec){case"aac":this.parseAACPES(y,p);break;case"mp3":this.parseMPEGPES(y,p);break;case"ac3":this.parseAC3PES(y,p)}we={data:[],size:0}}we&&(we.data.push(i.subarray(An,Nt+Zi)),we.size+=Nt+Zi-An);break;case ye:en&&(Ye&&(p=Yo(Ye))&&this.parseID3PES(A,p),Ye={data:[],size:0}),Ye&&(Ye.data.push(i.subarray(An,Nt+Zi)),Ye.size+=Nt+Zi-An);break;case 0:en&&(An+=i[An]+1),vt=this._pmtId=Oo(i,An);break;case vt:en&&(An+=i[An]+1);var $n=wo(i,An,this.typeSupported,u);(B=$n.videoPid)>0&&(v.pid=B,v.segmentCodec=$n.segmentVideoCodec),(re=$n.audioPid)>0&&(y.pid=re,y.segmentCodec=$n.segmentAudioCodec),(ye=$n.id3Pid)>0&&(A.pid=ye),null!==Ue&&!Xe&&(Le.warn("MPEG-TS PMT found at "+Nt+" after unknown PID '"+Ue+"'. Backtracking to sync byte @"+jt+" to parse all TS packets."),Ue=null,Nt=jt-188),Xe=this.pmtParsed=!0;break;case 17:case 8191:break;default:Ue=tn}}else Ht++;if(Ht>0){var vr=new Error("Found "+Ht+" TS packet/s that do not start with 0x47");this.observer.emit(x.ERROR,x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,fatal:!1,error:vr,reason:vr.message})}v.pesData=ee,y.pesData=we,A.pesData=Ye;var nr={audioTrack:y,videoTrack:v,id3Track:A,textTrack:D};return h&&this.extractRemainingSamples(nr),nr},d.flush=function(){var o,i=this.remainderData;return this.remainderData=null,o=i?this.demux(i,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(o),this.sampleAes?this.decrypt(o,this.sampleAes):o},d.extractRemainingSamples=function(i){var D,o=i.audioTrack,u=i.videoTrack,h=i.id3Track,p=i.textTrack,v=u.pesData,y=o.pesData,A=h.pesData;if(v&&(D=Yo(v))?(this.videoParser.parseAVCPES(u,p,D,!0,this._duration),u.pesData=null):u.pesData=v,y&&(D=Yo(y))){switch(o.segmentCodec){case"aac":this.parseAACPES(o,D);break;case"mp3":this.parseMPEGPES(o,D);break;case"ac3":this.parseAC3PES(o,D)}o.pesData=null}else null!=y&&y.size&&Le.log("last AAC PES packet truncated,might overlap between fragments"),o.pesData=y;A&&(D=Yo(A))?(this.parseID3PES(h,D),h.pesData=null):h.pesData=A},d.demuxSampleAes=function(i,o,u){var h=this.demux(i,u,!0,!this.config.progressive),p=this.sampleAes=new Ds(this.observer,this.config,o);return this.decrypt(h,p)},d.decrypt=function(i,o){return new Promise(function(u){var h=i.audioTrack,p=i.videoTrack;h.samples&&"aac"===h.segmentCodec?o.decryptAacSamples(h.samples,0,function(){p.samples?o.decryptAvcSamples(p.samples,0,0,function(){u(i)}):u(i)}):p.samples&&o.decryptAvcSamples(p.samples,0,0,function(){u(i)})})},d.destroy=function(){this._duration=0},d.parseAACPES=function(i,o){var D,B,we,u=0,h=this.aacOverFlow,p=o.data;if(h){this.aacOverFlow=null;var v=h.missing,y=h.sample.unit.byteLength;if(-1===v)p=ci(h.sample.unit,p);else{var A=y-v;h.sample.unit.set(p.subarray(0,v),A),i.samples.push(h.sample),u=h.missing}}for(D=u,B=p.length;D<B-1&&!Lo(p,D);D++);if(D!==u){var ee,re=D<B-1;ee=re?"AAC PES did not start with ADTS header,offset:"+D:"No ADTS header found in AAC PES";var ye=new Error(ee);if(Le.warn("parsing error: "+ee),this.observer.emit(x.ERROR,x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,fatal:!1,levelRetry:re,error:ye,reason:ee}),!re)return}if(is(i,this.observer,p,D,this.audioCodec),void 0!==o.pts)we=o.pts;else{if(!h)return void Le.warn("[tsdemuxer]: AAC PES unknown PTS");var Ye=Gi(i.samplerate);we=h.sample.pts+Ye}for(var Xe,Ue=0;D<B;){if(D+=(Xe=os(i,p,D,we,Ue)).length,Xe.missing){this.aacOverFlow=Xe;break}for(Ue++;D<B-1&&!Lo(p,D);D++);}},d.parseMPEGPES=function(i,o){var u=o.data,h=u.length,p=0,v=0,y=o.pts;if(void 0!==y)for(;v<h;)if(Xs(u,v)){var A=as(i,u,v,y,p);if(!A)break;v+=A.length,p++}else v++;else Le.warn("[tsdemuxer]: MPEG PES unknown PTS")},d.parseAC3PES=function(i,o){var u=o.data,h=o.pts;if(void 0!==h)for(var A,p=u.length,v=0,y=0;y<p&&(A=Rl(i,u,y,h,v++))>0;)y+=A;else Le.warn("[tsdemuxer]: AC3 PES unknown PTS")},d.parseID3PES=function(i,o){if(void 0!==o.pts){var u=_({},o,{type:this._videoTrack?Ri_emsg:Ri_audioId3,duration:Number.POSITIVE_INFINITY});i.samples.push(u)}else Le.warn("[tsdemuxer]: ID3 PES unknown PTS")},g}();function Xu(g,d){return((31&g[d+1])<<8)+g[d+2]}function Oo(g,d){return(31&g[d+10])<<8|g[d+11]}function wo(g,d,c,i){var o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},h=d+3+((15&g[d+1])<<8|g[d+2])-4;for(d+=12+((15&g[d+10])<<8|g[d+11]);d<h;){var v=Xu(g,d),y=(15&g[d+3])<<8|g[d+4];switch(g[d]){case 207:if(!i){Ml("ADTS AAC");break}case 15:-1===o.audioPid&&(o.audioPid=v);break;case 21:-1===o.id3Pid&&(o.id3Pid=v);break;case 219:if(!i){Ml("H.264");break}case 27:-1===o.videoPid&&(o.videoPid=v,o.segmentVideoCodec="avc");break;case 3:case 4:c.mpeg||c.mp3?-1===o.audioPid&&(o.audioPid=v,o.segmentAudioCodec="mp3"):Le.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){Ml("AC-3");break}case 129:c.ac3?-1===o.audioPid&&(o.audioPid=v,o.segmentAudioCodec="ac3"):Le.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===o.audioPid&&y>0)for(var A=d+5,D=y;D>2;){106===g[A]&&(!0!==c.ac3?Le.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=v,o.segmentAudioCodec="ac3"));var ee=g[A+1]+2;A+=ee,D-=ee}break;case 194:case 135:Le.warn("Unsupported EC-3 in M2TS found");break;case 36:Le.warn("Unsupported HEVC in M2TS found")}d+=y+5}return o}function Ml(g){Le.log(g+" with AES-128-CBC encryption found in unencrypted stream")}function Yo(g){var c,i,o,u,h,d=0,p=g.data;if(!g||0===g.size)return null;for(;p[0].length<19&&p.length>1;)p[0]=ci(p[0],p[1]),p.splice(1,1);if(1===((c=p[0])[0]<<16)+(c[1]<<8)+c[2]){if((i=(c[4]<<8)+c[5])&&i>g.size-6)return null;var y=c[7];192&y&&(u=536870912*(14&c[9])+4194304*(255&c[10])+16384*(254&c[11])+128*(255&c[12])+(254&c[13])/2,64&y?u-(h=536870912*(14&c[14])+4194304*(255&c[15])+16384*(254&c[16])+128*(255&c[17])+(254&c[18])/2)>54e5&&(Le.warn(Math.round((u-h)/9e4)+"s delta between PTS and DTS, align them"),u=h):h=u);var A=(o=c[8])+9;if(g.size<=A)return null;g.size-=A;for(var D=new Uint8Array(g.size),B=0,ee=p.length;B<ee;B++){var re=(c=p[B]).byteLength;if(A){if(A>re){A-=re;continue}c=c.subarray(A),re-=A,A=0}D.set(c,d),d+=re}return i&&(i-=o+3),{data:D,pts:u,dts:h,len:i}}return null}var gu=function(g){function d(){return g.apply(this,arguments)||this}E(d,g);var c=d.prototype;return c.resetInitSegment=function(o,u,h,p){g.prototype.resetInitSegment.call(this,o,u,h,p),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:u,duration:p,inputTimeScale:9e4,dropped:0}},d.probe=function(o){if(!o)return!1;var u=Li(o,0),h=u?.length||0;if(u&&11===o[h]&&119===o[h+1]&&void 0!==Xi(u)&&kr(o,h)<=16)return!1;for(var p=o.length;h<p;h++)if(Ka(o,h))return Le.log("MPEG Audio sync word found !"),!0;return!1},c.canParse=function(o,u){return function Wu(g,d){return ia(g,d)&&4<=g.length-d}(o,u)},c.appendFrame=function(o,u,h){if(null!==this.basePTS)return as(o,u,h,this.basePTS,this.frameIndex)},d}(Ws),zo=function(){function g(){}return g.getSilentFrame=function(c,i){if("mp4a.40.2"===c){if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},g}(),oa=Math.pow(2,32)-1,go=function(){function g(){}return g.init=function(){var c;for(c in g.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})g.types.hasOwnProperty(c)&&(g.types[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),o=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);g.HDLR_TYPES={video:i,audio:o};var u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new Uint8Array([0,0,0,0,0,0,0,0]);g.STTS=g.STSC=g.STCO=h,g.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),g.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),g.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),g.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var p=new Uint8Array([105,115,111,109]),v=new Uint8Array([97,118,99,49]),y=new Uint8Array([0,0,0,1]);g.FTYP=g.box(g.types.ftyp,p,y,p,v),g.DINF=g.box(g.types.dinf,g.box(g.types.dref,u))},g.box=function(c){for(var i=8,o=arguments.length,u=new Array(o>1?o-1:0),h=1;h<o;h++)u[h-1]=arguments[h];for(var p=u.length,v=p;p--;)i+=u[p].byteLength;var y=new Uint8Array(i);for(y[0]=i>>24&255,y[1]=i>>16&255,y[2]=i>>8&255,y[3]=255&i,y.set(c,4),p=0,i=8;p<v;p++)y.set(u[p],i),i+=u[p].byteLength;return y},g.hdlr=function(c){return g.box(g.types.hdlr,g.HDLR_TYPES[c])},g.mdat=function(c){return g.box(g.types.mdat,c)},g.mdhd=function(c,i){i*=c;var o=Math.floor(i/(oa+1)),u=Math.floor(i%(oa+1));return g.box(g.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,c>>24&255,c>>16&255,c>>8&255,255&c,o>>24,o>>16&255,o>>8&255,255&o,u>>24,u>>16&255,u>>8&255,255&u,85,196,0,0]))},g.mdia=function(c){return g.box(g.types.mdia,g.mdhd(c.timescale,c.duration),g.hdlr(c.type),g.minf(c))},g.mfhd=function(c){return g.box(g.types.mfhd,new Uint8Array([0,0,0,0,c>>24,c>>16&255,c>>8&255,255&c]))},g.minf=function(c){return g.box(g.types.minf,"audio"===c.type?g.box(g.types.smhd,g.SMHD):g.box(g.types.vmhd,g.VMHD),g.DINF,g.stbl(c))},g.moof=function(c,i,o){return g.box(g.types.moof,g.mfhd(c),g.traf(o,i))},g.moov=function(c){for(var i=c.length,o=[];i--;)o[i]=g.trak(c[i]);return g.box.apply(null,[g.types.moov,g.mvhd(c[0].timescale,c[0].duration)].concat(o).concat(g.mvex(c)))},g.mvex=function(c){for(var i=c.length,o=[];i--;)o[i]=g.trex(c[i]);return g.box.apply(null,[g.types.mvex].concat(o))},g.mvhd=function(c,i){i*=c;var o=Math.floor(i/(oa+1)),u=Math.floor(i%(oa+1)),h=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,c>>24&255,c>>16&255,c>>8&255,255&c,o>>24,o>>16&255,o>>8&255,255&o,u>>24,u>>16&255,u>>8&255,255&u,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return g.box(g.types.mvhd,h)},g.sdtp=function(c){var u,h,i=c.samples||[],o=new Uint8Array(4+i.length);for(u=0;u<i.length;u++)o[u+4]=(h=i[u].flags).dependsOn<<4|h.isDependedOn<<2|h.hasRedundancy;return g.box(g.types.sdtp,o)},g.stbl=function(c){return g.box(g.types.stbl,g.stsd(c),g.box(g.types.stts,g.STTS),g.box(g.types.stsc,g.STSC),g.box(g.types.stsz,g.STSZ),g.box(g.types.stco,g.STCO))},g.avc1=function(c){var u,h,p,i=[],o=[];for(u=0;u<c.sps.length;u++)i.push((p=(h=c.sps[u]).byteLength)>>>8&255),i.push(255&p),i=i.concat(Array.prototype.slice.call(h));for(u=0;u<c.pps.length;u++)o.push((p=(h=c.pps[u]).byteLength)>>>8&255),o.push(255&p),o=o.concat(Array.prototype.slice.call(h));var v=g.box(g.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|c.sps.length].concat(i).concat([c.pps.length]).concat(o))),y=c.width,A=c.height,D=c.pixelRatio[0],B=c.pixelRatio[1];return g.box(g.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,y>>8&255,255&y,A>>8&255,255&A,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),v,g.box(g.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),g.box(g.types.pasp,new Uint8Array([D>>24,D>>16&255,D>>8&255,255&D,B>>24,B>>16&255,B>>8&255,255&B])))},g.esds=function(c){var i=c.config.length;return new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(c.config).concat([6,1,2]))},g.audioStsd=function(c){var i=c.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0])},g.mp4a=function(c){return g.box(g.types.mp4a,g.audioStsd(c),g.box(g.types.esds,g.esds(c)))},g.mp3=function(c){return g.box(g.types[".mp3"],g.audioStsd(c))},g.ac3=function(c){return g.box(g.types["ac-3"],g.audioStsd(c),g.box(g.types.dac3,c.config))},g.stsd=function(c){return g.box(g.types.stsd,g.STSD,"audio"===c.type?"mp3"===c.segmentCodec&&"mp3"===c.codec?g.mp3(c):"ac3"===c.segmentCodec?g.ac3(c):g.mp4a(c):g.avc1(c))},g.tkhd=function(c){var i=c.id,o=c.duration*c.timescale,u=c.width,h=c.height,p=Math.floor(o/(oa+1)),v=Math.floor(o%(oa+1));return g.box(g.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,p>>24,p>>16&255,p>>8&255,255&p,v>>24,v>>16&255,v>>8&255,255&v,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,u>>8&255,255&u,0,0,h>>8&255,255&h,0,0]))},g.traf=function(c,i){var o=g.sdtp(c),u=c.id,h=Math.floor(i/(oa+1)),p=Math.floor(i%(oa+1));return g.box(g.types.traf,g.box(g.types.tfhd,new Uint8Array([0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u])),g.box(g.types.tfdt,new Uint8Array([1,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,p>>24,p>>16&255,p>>8&255,255&p])),g.trun(c,o.length+16+20+8+16+8+8),o)},g.trak=function(c){return c.duration=c.duration||4294967295,g.box(g.types.trak,g.tkhd(c),g.mdia(c))},g.trex=function(c){var i=c.id;return g.box(g.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},g.trun=function(c,i){var v,y,A,D,B,ee,o=c.samples||[],u=o.length,h=12+16*u,p=new Uint8Array(h);for(p.set(["video"===c.type?1:0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,(i+=8+h)>>>24&255,i>>>16&255,i>>>8&255,255&i],0),v=0;v<u;v++)p.set([(A=(y=o[v]).duration)>>>24&255,A>>>16&255,A>>>8&255,255&A,(D=y.size)>>>24&255,D>>>16&255,D>>>8&255,255&D,(B=y.flags).isLeading<<2|B.dependsOn,B.isDependedOn<<6|B.hasRedundancy<<4|B.paddingValue<<1|B.isNonSync,61440&B.degradPrio,15&B.degradPrio,(ee=y.cts)>>>24&255,ee>>>16&255,ee>>>8&255,255&ee],12+16*v);return g.box(g.types.trun,p)},g.initSegment=function(c){g.types||g.init();var i=g.moov(c);return ci(g.FTYP,i)},g}();go.types=void 0,go.HDLR_TYPES=void 0,go.STTS=void 0,go.STSC=void 0,go.STCO=void 0,go.STSZ=void 0,go.VMHD=void 0,go.SMHD=void 0,go.STSD=void 0,go.FTYP=void 0,go.DINF=void 0;var jc=9e4;function qc(g,d,c,i){void 0===c&&(c=1),void 0===i&&(i=!1);var o=g*d*c;return i?Math.round(o):o}function Nl(g,d){return void 0===d&&(d=!1),qc(g,1e3,1/jc,d)}var xl=null,Kc=null,Qu=function(){function g(c,i,o,u){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=c,this.config=i,this.typeSupported=o,this.ISGenerated=!1,null===xl){var p=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);xl=p?parseInt(p[1]):0}if(null===Kc){var v=navigator.userAgent.match(/Safari\/(\d+)/i);Kc=v?parseInt(v[1]):0}}var d=g.prototype;return d.destroy=function(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null},d.resetTimeStamp=function(i){Le.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=i},d.resetNextTimestamp=function(){Le.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},d.resetInitSegment=function(){Le.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0},d.getVideoStartPts=function(i){var o=!1,u=i.reduce(function(h,p){var v=p.pts-h;return v<-4294967296?(o=!0,Sa(h,p.pts)):v>0?h:p.pts},i[0].pts);return o&&Le.debug("PTS rollover detected"),u},d.remux=function(i,o,u,h,p,v,y,A){var D,B,ee,re,ye,we,Ye=p,Ue=p,vt=o.pid>-1,wt=o.samples.length,jt=i.samples.length>0,Ht=y&&wt>0||wt>1;if((!(i.pid>-1)||jt)&&(!vt||Ht)||this.ISGenerated||y){if(this.ISGenerated){var en,tn,yn,An,$n=this.videoTrackConfig;$n&&(o.width!==$n.width||o.height!==$n.height||(null==(en=o.pixelRatio)?void 0:en[0])!==(null==(tn=$n.pixelRatio)?void 0:tn[0])||(null==(yn=o.pixelRatio)?void 0:yn[1])!==(null==(An=$n.pixelRatio)?void 0:An[1]))&&this.resetInitSegment()}else ee=this.generateIS(i,o,p,v);var Hr,vr=this.isVideoContiguous,nr=-1;if(Ht&&(nr=function dh(g){for(var d=0;d<g.length;d++)if(g[d].key)return d;return-1}(o.samples),!vr&&this.config.forceKeyFrameOnDiscontinuity))if(we=!0,nr>0){Le.warn("[mp4-remuxer]: Dropped "+nr+" out of "+wt+" video samples due to a missing keyframe");var Nr=this.getVideoStartPts(o.samples);o.samples=o.samples.slice(nr),o.dropped+=nr,Hr=Ue+=(o.samples[0].pts-Nr)/o.inputTimeScale}else-1===nr&&(Le.warn("[mp4-remuxer]: No keyframe found out of "+wt+" video samples"),we=!1);if(this.ISGenerated){if(jt&&Ht){var ni=this.getVideoStartPts(o.samples),Br=(Sa(i.samples[0].pts,ni)-ni)/o.inputTimeScale;Ye+=Math.max(0,Br),Ue+=Math.max(0,-Br)}if(jt){if(i.samplerate||(Le.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),ee=this.generateIS(i,o,p,v)),B=this.remuxAudio(i,Ye,this.isAudioContiguous,v,vt||Ht||A===mr_AUDIO?Ue:void 0),Ht){var ki=B?B.endPTS-B.startPTS:0;o.inputTimeScale||(Le.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),ee=this.generateIS(i,o,p,v)),D=this.remuxVideo(o,Ue,vr,ki)}}else Ht&&(D=this.remuxVideo(o,Ue,vr,0));D&&(D.firstKeyFrame=nr,D.independent=-1!==nr,D.firstKeyFramePTS=Hr)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(u.samples.length&&(ye=Jf(u,p,this._initPTS,this._initDTS)),h.samples.length&&(re=ed(h,p,this._initPTS))),{audio:B,video:D,initSegment:ee,independent:we,text:re,id3:ye}},d.generateIS=function(i,o,u,h){var re,ye,we,p=i.samples,v=o.samples,y=this.typeSupported,A={},D=this._initPTS,B=!D||h,ee="audio/mp4";if(B&&(re=ye=1/0),i.config&&p.length){switch(i.timescale=i.samplerate,i.segmentCodec){case"mp3":y.mpeg?(ee="audio/mpeg",i.codec=""):y.mp3&&(i.codec="mp3");break;case"ac3":i.codec="ac-3"}A.audio={id:"audio",container:ee,codec:i.codec,initSegment:"mp3"===i.segmentCodec&&y.mpeg?new Uint8Array(0):go.initSegment([i]),metadata:{channelCount:i.channelCount}},B&&(we=i.inputTimeScale,D&&we===D.timescale?B=!1:re=ye=p[0].pts-Math.round(we*u))}if(o.sps&&o.pps&&v.length){if(o.timescale=o.inputTimeScale,A.video={id:"main",container:"video/mp4",codec:o.codec,initSegment:go.initSegment([o]),metadata:{width:o.width,height:o.height}},B)if(we=o.inputTimeScale,D&&we===D.timescale)B=!1;else{var Ye=this.getVideoStartPts(v),Ue=Math.round(we*u);ye=Math.min(ye,Sa(v[0].dts,Ye)-Ue),re=Math.min(re,Ye-Ue)}this.videoTrackConfig={width:o.width,height:o.height,pixelRatio:o.pixelRatio}}if(Object.keys(A).length)return this.ISGenerated=!0,B?(this._initPTS={baseTime:re,timescale:we},this._initDTS={baseTime:ye,timescale:we}):re=we=void 0,{tracks:A,initPTS:re,timescale:we}},d.remuxVideo=function(i,o,u,h){var ye,we,p=i.inputTimeScale,v=i.samples,y=[],A=v.length,D=this._initPTS,B=this.nextAvcDts,ee=8,re=this.videoSampleDuration,Ye=Number.POSITIVE_INFINITY,Ue=Number.NEGATIVE_INFINITY,Xe=!1;if(!u||null===B){var vt=o*p,wt=v[0].pts-Sa(v[0].dts,v[0].pts);xl&&null!==B&&Math.abs(vt-wt-B)<15e3?u=!0:B=vt-wt}for(var jt=D.baseTime*p/D.timescale,Ht=0;Ht<A;Ht++){var Nt=v[Ht];Nt.pts=Sa(Nt.pts-jt,B),Nt.dts=Sa(Nt.dts-jt,B),Nt.dts<v[Ht>0?Ht-1:Ht].dts&&(Xe=!0)}Xe&&v.sort(function(Cu,_p){return Cu.dts-_p.dts||Cu.pts-_p.pts});var en=v[v.length-1].dts-(ye=v[0].dts),tn=en?Math.round(en/(A-1)):re||i.inputTimeScale/30;if(u){var yn=ye-B,An=yn>tn,$n=yn<-1;if((An||$n)&&(Le.warn(An?"AVC: "+Nl(yn,!0)+" ms ("+yn+"dts) hole between fragments detected at "+o.toFixed(3):"AVC: "+Nl(-yn,!0)+" ms ("+yn+"dts) overlapping between fragments detected at "+o.toFixed(3)),!$n||B>=v[0].pts||xl)){ye=B;var vr=v[0].pts-yn;if(An)v[0].dts=ye,v[0].pts=vr;else for(var nr=0;nr<v.length&&!(v[nr].dts>vr);nr++)v[nr].dts-=yn,v[nr].pts-=yn;Le.log("Video: Initial PTS/DTS adjusted: "+Nl(vr,!0)+"/"+Nl(ye,!0)+", delta: "+Nl(yn,!0)+" ms")}}for(var Hr=0,Nr=0,ni=ye=Math.max(0,ye),Qr=0;Qr<A;Qr++){for(var Br=v[Qr],ki=Br.units,vi=ki.length,io=0,oo=0;oo<vi;oo++)io+=ki[oo].data.length;Nr+=io,Hr+=vi,Br.length=io,Br.dts<ni?(Br.dts=ni,ni+=tn/4|0||1):ni=Br.dts,Ye=Math.min(Br.pts,Ye),Ue=Math.max(Br.pts,Ue)}we=v[A-1].dts;var bi,Fo=Nr+4*Hr+8;try{bi=new Uint8Array(Fo)}catch(Cu){return void this.observer.emit(x.ERROR,x.ERROR,{type:_e.MUX_ERROR,details:he.REMUX_ALLOC_ERROR,fatal:!1,error:Cu,bytes:Fo,reason:"fail allocating video mdat "+Fo})}var Ui=new DataView(bi.buffer);Ui.setUint32(0,Fo),bi.set(go.types.mdat,4);for(var ba=!1,Qo=Number.POSITIVE_INFINITY,_i=Number.POSITIVE_INFINITY,ko=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY,ji=0;ji<A;ji++){for(var to=v[ji],ao=to.units,Jo=0,no=0,Ms=ao.length;no<Ms;no++){var hs=ao[no],Ba=hs.data,bu=hs.data.byteLength;Ui.setUint32(ee,bu),bi.set(Ba,ee+=4),ee+=bu,Jo+=4+bu}var Ns=void 0;if(ji<A-1)re=v[ji+1].dts-to.dts,Ns=v[ji+1].pts-to.pts;else{var gd=this.config,lf=ji>0?to.dts-v[ji-1].dts:tn;if(Ns=ji>0?to.pts-v[ji-1].pts:tn,gd.stretchShortVideoTrack&&null!==this.nextAudioPts){var by=Math.floor(gd.maxBufferHole*p),pd=(h?Ye+h*p:this.nextAudioPts)-to.pts;pd>by?((re=pd-lf)<0?re=lf:ba=!0,Le.log("[mp4-remuxer]: It is approximately "+pd/90+" ms to the next segment; using duration "+re/90+" ms for the last video frame.")):re=lf}else re=lf}var vp=Math.round(to.pts-to.dts);Qo=Math.min(Qo,re),ko=Math.max(ko,re),_i=Math.min(_i,Ns),la=Math.max(la,Ns),y.push(new Ju(to.key,re,Jo,vp))}if(y.length)if(xl){if(xl<70){var Ah=y[0].flags;Ah.dependsOn=2,Ah.isNonSync=0}}else if(Kc&&la-_i<ko-Qo&&tn/ko<.025&&0===y[0].cts){Le.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Au=ye,Va=0,Ch=y.length;Va<Ch;Va++){var md=Au+y[Va].duration;y[Va].duration=Va<Ch-1?md+y[Va+1].cts-(Au+y[Va].cts):Va?y[Va-1].duration:tn,y[Va].cts=0,Au=md}}this.nextAvcDts=B=we+(re=ba||!re?tn:re),this.videoSampleDuration=re,this.isVideoContiguous=!0;var Ep={data1:go.moof(i.sequenceNumber++,ye,_({},i,{samples:y})),data2:bi,startPTS:Ye/p,endPTS:(Ue+re)/p,startDTS:ye/p,endDTS:B/p,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:i.dropped};return i.samples=[],i.dropped=0,Ep},d.getSamplesPerFrame=function(i){switch(i.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},d.remuxAudio=function(i,o,u,h,p){var v=i.inputTimeScale,A=v/(i.samplerate?i.samplerate:v),D=this.getSamplesPerFrame(i),B=D*A,ee=this._initPTS,re="mp3"===i.segmentCodec&&this.typeSupported.mpeg,ye=[],we=void 0!==p,Ye=i.samples,Ue=re?0:8,Xe=this.nextAudioPts||-1,vt=o*v,wt=ee.baseTime*v/ee.timescale;if(this.isAudioContiguous=u=u||Ye.length&&Xe>0&&(h&&Math.abs(vt-Xe)<9e3||Math.abs(Sa(Ye[0].pts-wt,vt)-Xe)<20*B),Ye.forEach(function(no){no.pts=Sa(no.pts-wt,vt)}),!u||Xe<0){if(!(Ye=Ye.filter(function(no){return no.pts>=0})).length)return;Xe=0===p?0:h&&!we?Math.max(0,vt):Ye[0].pts}if("aac"===i.segmentCodec)for(var jt=this.config.maxAudioFramesDrift,Ht=0,Nt=Xe;Ht<Ye.length;Ht++){var en=Ye[Ht],tn=en.pts,yn=tn-Nt,An=Math.abs(1e3*yn/v);if(yn<=-jt*B&&we)0===Ht&&(Le.warn("Audio frame @ "+(tn/v).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*yn/v)+" ms."),this.nextAudioPts=Xe=Nt=tn);else if(yn>=jt*B&&An<1e4&&we){var $n=Math.round(yn/B);(Nt=tn-$n*B)<0&&($n--,Nt+=B),0===Ht&&(this.nextAudioPts=Xe=Nt),Le.warn("[mp4-remuxer]: Injecting "+$n+" audio frame @ "+(Nt/v).toFixed(3)+"s due to "+Math.round(1e3*yn/v)+" ms gap.");for(var vr=0;vr<$n;vr++){var nr=Math.max(Nt,0),Hr=zo.getSilentFrame(i.manifestCodec||i.codec,i.channelCount);Hr||(Le.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Hr=en.unit.subarray()),Ye.splice(Ht,0,{unit:Hr,pts:nr}),Nt+=B,Ht++}}en.pts=Nt,Nt+=B}for(var Qr,Nr=null,ni=null,Br=0,ki=Ye.length;ki--;)Br+=Ye[ki].unit.byteLength;for(var vi=0,io=Ye.length;vi<io;vi++){var oo=Ye[vi],Fo=oo.unit,bi=oo.pts;if(null!==ni)ye[vi-1].duration=Math.round((bi-ni)/A);else{if(u&&"aac"===i.segmentCodec&&(bi=Xe),Nr=bi,!(Br>0))return;Br+=Ue;try{Qr=new Uint8Array(Br)}catch(no){return void this.observer.emit(x.ERROR,x.ERROR,{type:_e.MUX_ERROR,details:he.REMUX_ALLOC_ERROR,fatal:!1,error:no,bytes:Br,reason:"fail allocating audio mdat "+Br})}re||(new DataView(Qr.buffer).setUint32(0,Br),Qr.set(go.types.mdat,4))}Qr.set(Fo,Ue);var Qo=Fo.byteLength;Ue+=Qo,ye.push(new Ju(!0,D,Qo,0)),ni=bi}var _i=ye.length;if(_i){this.nextAudioPts=Xe=ni+A*ye[ye.length-1].duration;var la=re?new Uint8Array(0):go.moof(i.sequenceNumber++,Nr/A,_({},i,{samples:ye}));i.samples=[];var ji=Nr/v,to=Xe/v,Jo={data1:la,data2:Qr,startPTS:ji,endPTS:to,startDTS:ji,endDTS:to,type:"audio",hasAudio:!0,hasVideo:!1,nb:_i};return this.isAudioContiguous=!0,Jo}},d.remuxEmptyAudio=function(i,o,u,h){var p=i.inputTimeScale,A=this.nextAudioPts,D=this._initDTS,B=9e4*D.baseTime/D.timescale,ee=(null!==A?A:h.startDTS*p)+B,ye=p/(i.samplerate?i.samplerate:p)*1024,we=Math.ceil((h.endDTS*p+B-ee)/ye),Ye=zo.getSilentFrame(i.manifestCodec||i.codec,i.channelCount);if(Le.warn("[mp4-remuxer]: remux empty Audio"),Ye){for(var Ue=[],Xe=0;Xe<we;Xe++){var vt=ee+Xe*ye;Ue.push({unit:Ye,pts:vt,dts:vt})}return i.samples=Ue,this.remuxAudio(i,o,u,!1)}Le.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},g}();function Sa(g,d){var c;if(null===d)return g;for(c=d<g?-8589934592:8589934592;Math.abs(g-d)>4294967296;)g+=c;return g}function Jf(g,d,c,i){var o=g.samples.length;if(o){for(var u=g.inputTimeScale,h=0;h<o;h++){var p=g.samples[h];p.pts=Sa(p.pts-c.baseTime*u/c.timescale,d*u)/u,p.dts=Sa(p.dts-i.baseTime*u/i.timescale,d*u)/u}var v=g.samples;return g.samples=[],{samples:v}}}function ed(g,d,c){var i=g.samples.length;if(i){for(var o=g.inputTimeScale,u=0;u<i;u++){var h=g.samples[u];h.pts=Sa(h.pts-c.baseTime*o/c.timescale,d*o)/o}g.samples.sort(function(v,y){return v.pts-y.pts});var p=g.samples;return g.samples=[],{samples:p}}}var ss,Ju=function(d,c,i,o){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=c,this.size=i,this.cts=o,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:d?2:1,isNonSync:d?0:1}},pu=function(){function g(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var d=g.prototype;return d.destroy=function(){},d.resetTimeStamp=function(i){this.initPTS=i,this.lastEndTime=null},d.resetNextTimestamp=function(){this.lastEndTime=null},d.resetInitSegment=function(i,o,u,h){this.audioCodec=o,this.videoCodec=u,this.generateInitSegment(function hn(g,d){if(!g||!d)return g;var c=d.keyId;return c&&d.isCommonEncryption&&gn(g,["moov","trak"]).forEach(function(o){var h=gn(o,["mdia","minf","stbl","stsd"])[0].subarray(8),p=gn(h,["enca"]),v=p.length>0;v||(p=gn(h,["encv"])),p.forEach(function(y){gn(y.subarray(v?28:78),["sinf"]).forEach(function(B){var ee=Cn(B);if(ee){var re=ee.subarray(8,24);re.some(function(ye){return 0!==ye})||(Le.log("[eme] Patching keyId in 'enc"+(v?"a":"v")+">sinf>>tenc' box: "+rn_hexDump(re)+" -> "+rn_hexDump(c)),ee.set(c,8))}})})}),g}(i,h)),this.emitInitSegment=!0},d.generateInitSegment=function(i){var o=this.audioCodec,u=this.videoCodec;if(null==i||!i.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var h=this.initData=sr(i);h.audio&&(o=td(h.audio,Rt_AUDIO)),h.video&&(u=td(h.video,Rt_VIDEO));var p={};h.audio&&h.video?p.audiovideo={container:"video/mp4",codec:o+","+u,initSegment:i,id:"main"}:h.audio?p.audio={container:"audio/mp4",codec:o,initSegment:i,id:"audio"}:h.video?p.video={container:"video/mp4",codec:u,initSegment:i,id:"main"}:Le.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=p},d.remux=function(i,o,u,h,p,v){var y,A,D=this.initPTS,B=this.lastEndTime,ee={audio:void 0,video:void 0,text:h,id3:u,initSegment:void 0};$(B)||(B=this.lastEndTime=p||0);var re=o.samples;if(null==re||!re.length)return ee;var ye={initPTS:void 0,timescale:1},we=this.initData;if(null!=(y=we)&&y.length||(this.generateInitSegment(re),we=this.initData),null==(A=we)||!A.length)return Le.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),ee;this.emitInitSegment&&(ye.tracks=this.initTracks,this.emitInitSegment=!1);var Ye=function gr(g,d){for(var c=0,i=0,o=0,u=gn(g,["moof","traf"]),h=0;h<u.length;h++){var p=u[h],v=gn(p,["tfhd"])[0],A=d[zt(v,4)];if(A){var D=A.default,B=zt(v,0)|D?.flags,ee=D?.duration;8&B&&(ee=zt(v,2&B?12:8));for(var re=A.timescale||9e4,ye=gn(p,["trun"]),we=0;we<ye.length;we++)!(c=jr(ye[we]))&&ee&&(c=ee*zt(ye[we],4)),A.type===Rt_VIDEO?i+=c/re:A.type===Rt_AUDIO&&(o+=c/re)}}if(0===i&&0===o){for(var Ue=1/0,Xe=0,vt=0,wt=gn(g,["sidx"]),jt=0;jt<wt.length;jt++){var Ht=Vn(wt[jt]);if(null!=Ht&&Ht.references){Ue=Math.min(Ue,Ht.earliestPresentationTime/Ht.timescale);var Nt=Ht.references.reduce(function(en,tn){return en+tn.info.duration||0},0);vt=(Xe=Math.max(Xe,Nt+Ht.earliestPresentationTime/Ht.timescale))-Ue}}if(vt&&$(vt))return vt}return i||o}(re,we),Ue=function cr(g,d){return gn(d,["moof","traf"]).reduce(function(c,i){var o=gn(i,["tfdt"])[0],u=o[0],h=gn(i,["tfhd"]).reduce(function(p,v){var y=zt(v,4),A=g[y];if(A){var D=zt(o,4);if(1===u){if(D===Ct)return Le.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),p;D*=Ct+1,D+=zt(o,8)}var ee=D/(A.timescale||9e4);if($(ee)&&(null===p||ee<p))return ee}return p},null);return null!==h&&$(h)&&(null===c||h<c)?h:c},null)}(we,re),Xe=null===Ue?p:Ue;(function hh(g,d,c,i){if(null===g)return!0;var o=Math.max(i,1);return Math.abs(d-g.baseTime/g.timescale-c)>o}(D,Xe,p,Ye)||ye.timescale!==D.timescale&&v)&&(ye.initPTS=Xe-p,D&&1===D.timescale&&Le.warn("Adjusting initPTS by "+(ye.initPTS-D.baseTime)),this.initPTS=D={baseTime:ye.initPTS,timescale:1});var vt=i?Xe-D.baseTime/D.timescale:B,wt=vt+Ye;(function zr(g,d,c){gn(d,["moof","traf"]).forEach(function(i){gn(i,["tfhd"]).forEach(function(o){var u=zt(o,4),h=g[u];if(h){var p=h.timescale||9e4;gn(i,["tfdt"]).forEach(function(v){var y=v[0],A=c*p;if(A){var D=zt(v,4);if(0===y)D-=A,In(v,4,D=Math.max(D,0));else{D*=Math.pow(2,32),D+=zt(v,8),D-=A,D=Math.max(D,0);var B=Math.floor(D/(Ct+1)),ee=Math.floor(D%(Ct+1));In(v,4,B),In(v,8,ee)}}})}})})})(we,re,D.baseTime/D.timescale),Ye>0?this.lastEndTime=wt:(Le.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var jt=!!we.audio,Ht=!!we.video,Nt="";jt&&(Nt+="audio"),Ht&&(Nt+="video");var en={data1:re,startPTS:vt,startDTS:vt,endPTS:wt,endDTS:wt,type:Nt,hasAudio:jt,hasVideo:Ht,nb:1,dropped:0};return ee.audio="audio"===en.type?en:void 0,ee.video="audio"!==en.type?en:void 0,ee.initSegment=ye,ee.id3=Jf(u,p,D,D),h.samples.length&&(ee.text=ed(h,p,D)),ee},g}();function td(g,d){var c=g?.codec;if(c&&c.length>4)return c;if(d===Rt_AUDIO){if("ec-3"===c||"ac-3"===c||"alac"===c)return c;if("fLaC"===c||"Opus"===c)return qo(c,!1);var o="mp4a.40.5";return Le.info('Parsed audio codec "'+c+'" or audio object type not handled. Using "'+o+'"'),o}return Le.warn('Unhandled video codec "'+c+'"'),"hvc1"===c||"hev1"===c?"hvc1.1.6.L120.90":"av01"===c?"av01.0.04M.08":"avc1.42e01e"}try{ss=self.performance.now.bind(self.performance)}catch{Le.debug("Unable to use Performance API on this environment"),ss=At?.Date.now}var Pa=[{demux:Js,remux:pu},{demux:Ao,remux:Qu},{demux:Ya,remux:Qu},{demux:gu,remux:Qu}];Pa.splice(2,0,{demux:zf,remux:Qu});var Fa=function(){function g(c,i,o,u,h){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=c,this.typeSupported=i,this.config=o,this.vendor=u,this.id=h}var d=g.prototype;return d.configure=function(i){this.transmuxConfig=i,this.decrypter&&this.decrypter.reset()},d.push=function(i,o,u,h){var p=this,v=u.transmuxing;v.executeStart=ss();var y=new Uint8Array(i),A=this.currentTransmuxState,D=this.transmuxConfig;h&&(this.currentTransmuxState=h);var B=h||A,ee=B.contiguous,re=B.discontinuity,ye=B.trackSwitch,we=B.accurateTimeOffset,Ye=B.timeOffset,Ue=B.initSegmentChange,Xe=D.audioCodec,vt=D.videoCodec,wt=D.defaultInitPts,jt=D.duration,Ht=D.initSegmentData,Nt=function nd(g,d){var c=null;return g.byteLength>0&&null!=d?.key&&null!==d.iv&&null!=d.method&&(c=d),c}(y,o);if(Nt&&"AES-128"===Nt.method){var en=this.getDecrypter();if(!en.isSync())return this.decryptionPromise=en.webCryptoDecrypt(y,Nt.key.buffer,Nt.iv.buffer).then(function(Hr){var Nr=p.push(Hr,null,u);return p.decryptionPromise=null,Nr}),this.decryptionPromise;var tn=en.softwareDecrypt(y,Nt.key.buffer,Nt.iv.buffer);if(u.part>-1&&(tn=en.flush()),!tn)return v.executeEnd=ss(),Yc(u);y=new Uint8Array(tn)}var An=this.needsProbing(re,ye);if(An){var $n=this.configureTransmuxer(y);if($n)return Le.warn("[transmuxer] "+$n.message),this.observer.emit(x.ERROR,x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,fatal:!1,error:$n,reason:$n.message}),v.executeEnd=ss(),Yc(u)}(re||ye||Ue||An)&&this.resetInitSegment(Ht,Xe,vt,jt,o),(re||Ue||An)&&this.resetInitialTimestamp(wt),ee||this.resetContiguity();var vr=this.transmux(y,Nt,Ye,we,u),nr=this.currentTransmuxState;return nr.contiguous=!0,nr.discontinuity=!1,nr.trackSwitch=!1,v.executeEnd=ss(),vr},d.flush=function(i){var o=this,u=i.transmuxing;u.executeStart=ss();var h=this.decrypter,p=this.currentTransmuxState,v=this.decryptionPromise;if(v)return v.then(function(){return o.flush(i)});var y=[],A=p.timeOffset;if(h){var D=h.flush();D&&y.push(this.push(D,null,i))}var B=this.demuxer;if(!B||!this.remuxer)return u.executeEnd=ss(),[Yc(i)];var re=B.flush(A);return Pi(re)?re.then(function(ye){return o.flushRemux(y,ye,i),y}):(this.flushRemux(y,re,i),y)},d.flushRemux=function(i,o,u){var h=o.audioTrack,p=o.videoTrack,v=o.id3Track,y=o.textTrack,A=this.currentTransmuxState,D=A.accurateTimeOffset,B=A.timeOffset;Le.log("[transmuxer.ts]: Flushed fragment "+u.sn+(u.part>-1?" p: "+u.part:"")+" of level "+u.level);var ee=this.remuxer.remux(h,p,v,y,B,D,!0,this.id);i.push({remuxResult:ee,chunkMeta:u}),u.transmuxing.executeEnd=ss()},d.resetInitialTimestamp=function(i){var o=this.demuxer,u=this.remuxer;!o||!u||(o.resetTimeStamp(i),u.resetTimeStamp(i))},d.resetContiguity=function(){var i=this.demuxer,o=this.remuxer;!i||!o||(i.resetContiguity(),o.resetNextTimestamp())},d.resetInitSegment=function(i,o,u,h,p){var v=this.demuxer,y=this.remuxer;!v||!y||(v.resetInitSegment(i,o,u,h),y.resetInitSegment(i,o,u,p))},d.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},d.transmux=function(i,o,u,h,p){return o&&"SAMPLE-AES"===o.method?this.transmuxSampleAes(i,o,u,h,p):this.transmuxUnencrypted(i,u,h,p)},d.transmuxUnencrypted=function(i,o,u,h){var p=this.demuxer.demux(i,o,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(p.audioTrack,p.videoTrack,p.id3Track,p.textTrack,o,u,!1,this.id),chunkMeta:h}},d.transmuxSampleAes=function(i,o,u,h,p){var v=this;return this.demuxer.demuxSampleAes(i,o,u).then(function(y){return{remuxResult:v.remuxer.remux(y.audioTrack,y.videoTrack,y.id3Track,y.textTrack,u,h,!1,v.id),chunkMeta:p}})},d.configureTransmuxer=function(i){for(var v,o=this.config,u=this.observer,h=this.typeSupported,p=this.vendor,y=0,A=Pa.length;y<A;y++){var D;if(null!=(D=Pa[y].demux)&&D.probe(i)){v=Pa[y];break}}if(!v)return new Error("Failed to find demuxer by probing fragment data");var B=this.demuxer,ee=this.remuxer,re=v.remux,ye=v.demux;(!ee||!(ee instanceof re))&&(this.remuxer=new re(u,o,h,p)),(!B||!(B instanceof ye))&&(this.demuxer=new ye(u,o,h),this.probe=ye.probe)},d.needsProbing=function(i,o){return!this.demuxer||!this.remuxer||i||o},d.getDecrypter=function(){var i=this.decrypter;return i||(i=this.decrypter=new Xr(this.config)),i},g}();var Yc=function(d){return{remuxResult:{},chunkMeta:d}};function Pi(g){return"then"in g&&g.then instanceof Function}var mu=function(d,c,i,o,u){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=d,this.videoCodec=c,this.initSegmentData=i,this.duration=o,this.defaultInitPts=u||null},Wo=function(d,c,i,o,u,h){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=d,this.contiguous=c,this.accurateTimeOffset=i,this.trackSwitch=o,this.timeOffset=u,this.initSegmentChange=h},ec={exports:{}};!function(g){var d=Object.prototype.hasOwnProperty,c="~";function i(){}function o(v,y,A){this.fn=v,this.context=y,this.once=A||!1}function u(v,y,A,D,B){if("function"!=typeof A)throw new TypeError("The listener must be a function");var ee=new o(A,D||v,B),re=c?c+y:y;return v._events[re]?v._events[re].fn?v._events[re]=[v._events[re],ee]:v._events[re].push(ee):(v._events[re]=ee,v._eventsCount++),v}function h(v,y){0==--v._eventsCount?v._events=new i:delete v._events[y]}function p(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(c=!1)),p.prototype.eventNames=function(){var A,D,y=[];if(0===this._eventsCount)return y;for(D in A=this._events)d.call(A,D)&&y.push(c?D.slice(1):D);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(A)):y},p.prototype.listeners=function(y){var D=this._events[c?c+y:y];if(!D)return[];if(D.fn)return[D.fn];for(var B=0,ee=D.length,re=new Array(ee);B<ee;B++)re[B]=D[B].fn;return re},p.prototype.listenerCount=function(y){var D=this._events[c?c+y:y];return D?D.fn?1:D.length:0},p.prototype.emit=function(y,A,D,B,ee,re){var ye=c?c+y:y;if(!this._events[ye])return!1;var Ue,Xe,we=this._events[ye],Ye=arguments.length;if(we.fn){switch(we.once&&this.removeListener(y,we.fn,void 0,!0),Ye){case 1:return we.fn.call(we.context),!0;case 2:return we.fn.call(we.context,A),!0;case 3:return we.fn.call(we.context,A,D),!0;case 4:return we.fn.call(we.context,A,D,B),!0;case 5:return we.fn.call(we.context,A,D,B,ee),!0;case 6:return we.fn.call(we.context,A,D,B,ee,re),!0}for(Xe=1,Ue=new Array(Ye-1);Xe<Ye;Xe++)Ue[Xe-1]=arguments[Xe];we.fn.apply(we.context,Ue)}else{var wt,vt=we.length;for(Xe=0;Xe<vt;Xe++)switch(we[Xe].once&&this.removeListener(y,we[Xe].fn,void 0,!0),Ye){case 1:we[Xe].fn.call(we[Xe].context);break;case 2:we[Xe].fn.call(we[Xe].context,A);break;case 3:we[Xe].fn.call(we[Xe].context,A,D);break;case 4:we[Xe].fn.call(we[Xe].context,A,D,B);break;default:if(!Ue)for(wt=1,Ue=new Array(Ye-1);wt<Ye;wt++)Ue[wt-1]=arguments[wt];we[Xe].fn.apply(we[Xe].context,Ue)}}return!0},p.prototype.on=function(y,A,D){return u(this,y,A,D,!1)},p.prototype.once=function(y,A,D){return u(this,y,A,D,!0)},p.prototype.removeListener=function(y,A,D,B){var ee=c?c+y:y;if(!this._events[ee])return this;if(!A)return h(this,ee),this;var re=this._events[ee];if(re.fn)re.fn===A&&(!B||re.once)&&(!D||re.context===D)&&h(this,ee);else{for(var ye=0,we=[],Ye=re.length;ye<Ye;ye++)(re[ye].fn!==A||B&&!re[ye].once||D&&re[ye].context!==D)&&we.push(re[ye]);we.length?this._events[ee]=1===we.length?we[0]:we:h(this,ee)}return this},p.prototype.removeAllListeners=function(y){var A;return y?this._events[A=c?c+y:y]&&h(this,A):(this._events=new i,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=c,p.EventEmitter=p,g.exports=p}(ec);var ls=ue(ec.exports);function ws(g,d){if(function nc(g){return!(g.audio||g.video||g.text||g.id3||g.initSegment)}(d.remuxResult))return!1;var c=[],i=d.remuxResult,o=i.audio,u=i.video;return o&&tc(c,o),u&&tc(c,u),g.postMessage({event:"transmuxComplete",data:d},c),!0}function tc(g,d){d.data1&&g.push(d.data1.buffer),d.data2&&g.push(d.data2.buffer)}function Rs(g,d,c){var i=d.reduce(function(o,u){return ws(g,u)||o},!1);i||g.postMessage({event:"transmuxComplete",data:d[0]}),g.postMessage({event:"flush",data:c})}typeof Ti<"u"&&Ti&&function yu(g){var d=new ls,c=function(u,h){g.postMessage({event:u,data:h})};d.on(x.FRAG_DECRYPTED,c),d.on(x.ERROR,c),g.addEventListener("message",function(o){var u=o.data;switch(u.cmd){case"init":var h=JSON.parse(u.config);g.transmuxer=new Fa(d,u.typeSupported,h,u.vendor,u.id),Qe(h.debug,u.id),function(){var u=function(v){Le[v]=function(D){c("workerLog",{logType:v,message:D})}};for(var h in Le)u(h)}(),c("init",null);break;case"configure":g.transmuxer.configure(u.config);break;case"demux":var p=g.transmuxer.push(u.data,u.decryptdata,u.chunkMeta,u.state);Pi(p)?(g.transmuxer.async=!0,p.then(function(D){ws(g,D)}).catch(function(D){c(x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,chunkMeta:u.chunkMeta,fatal:!1,error:D,err:D,reason:"transmuxer-worker push error"})})):(g.transmuxer.async=!1,ws(g,p));break;case"flush":var v=u.chunkMeta,y=g.transmuxer.flush(v);Pi(y)||g.transmuxer.async?(Pi(y)||(y=Promise.resolve(y)),y.then(function(D){Rs(g,D,v)}).catch(function(D){c(x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,chunkMeta:u.chunkMeta,fatal:!1,error:D,err:D,reason:"transmuxer-worker flush error"})})):Rs(g,y,v)}})}(self);var el=function(){function g(c,i,o,u){var h=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var p=c.config;this.hls=c,this.id=i,this.useWorker=!!p.enableWorker,this.onTransmuxComplete=o,this.onFlush=u;var v=function(ye,we){(we=we||{}).frag=h.frag,we.id=h.id,ye===x.ERROR&&(h.error=we.error),h.hls.trigger(ye,we)};this.observer=new ls,this.observer.on(x.FRAG_DECRYPTED,v),this.observer.on(x.ERROR,v);var y=fi(p.preferManagedMediaSource)||{isTypeSupported:function(){return!1}},A={mpeg:y.isTypeSupported("audio/mpeg"),mp3:y.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:y.isTypeSupported('audio/mp4; codecs="ac-3"')},D=navigator.vendor;if(this.useWorker&&typeof Worker<"u")try{p.workerPath?(Le.log("loading Web Worker "+p.workerPath+' for "'+i+'"'),this.workerContext=function Wc(g){var d=new self.URL(g,self.location.href).href;return{worker:new self.Worker(d),scriptURL:d}}(p.workerPath)):(Le.log('injecting Web Worker for "'+i+'"'),this.workerContext=function rc(){var g=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+Jr.toString()+")(true);"],{type:"text/javascript"}),d=self.URL.createObjectURL(g);return{worker:new self.Worker(d),objectURL:d}}()),this.onwmsg=function(re){return h.onWorkerMessage(re)};var ee=this.workerContext.worker;ee.addEventListener("message",this.onwmsg),ee.onerror=function(re){var ye=new Error(re.message+"  ("+re.filename+":"+re.lineno+")");p.enableWorker=!1,Le.warn('Error in "'+i+'" Web Worker, fallback to inline'),h.hls.trigger(x.ERROR,{type:_e.OTHER_ERROR,details:he.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:ye})},ee.postMessage({cmd:"init",typeSupported:A,vendor:D,id:i,config:JSON.stringify(p)})}catch(re){Le.warn('Error setting up "'+i+'" Web Worker, fallback to inline',re),this.resetWorker(),this.error=null,this.transmuxer=new Fa(this.observer,A,p,D,i)}else this.transmuxer=new Fa(this.observer,A,p,D,i)}var d=g.prototype;return d.resetWorker=function(){if(this.workerContext){var i=this.workerContext,o=i.worker,u=i.objectURL;u&&self.URL.revokeObjectURL(u),o.removeEventListener("message",this.onwmsg),o.onerror=null,o.terminate(),this.workerContext=null}},d.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var i=this.transmuxer;i&&(i.destroy(),this.transmuxer=null)}var o=this.observer;o&&o.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},d.push=function(i,o,u,h,p,v,y,A,D,B){var ee,re,ye=this;D.transmuxing.start=self.performance.now();var we=this.transmuxer,Ye=v?v.start:p.start,Ue=p.decryptdata,Xe=this.frag,vt=!(Xe&&p.cc===Xe.cc),wt=!(Xe&&D.level===Xe.level),jt=Xe?D.sn-Xe.sn:-1,Ht=this.part?D.part-this.part.index:-1,en=!wt&&(1===jt||0===jt&&(1===Ht||0===jt&&D.id>1&&D.id===Xe?.stats.chunkCount&&Ht<=0)),tn=self.performance.now();(wt||jt||0===p.stats.parsing.start)&&(p.stats.parsing.start=tn),v&&(Ht||!en)&&(v.stats.parsing.start=tn);var yn=!(Xe&&(null==(ee=p.initSegment)?void 0:ee.url)===(null==(re=Xe.initSegment)?void 0:re.url)),An=new Wo(vt,en,A,wt,Ye,yn);if(!en||vt||yn){Le.log("[transmuxer-interface, "+p.type+"]: Starting new transmux session for sn: "+D.sn+" p: "+D.part+" level: "+D.level+" id: "+D.id+"\n        discontinuity: "+vt+"\n        trackSwitch: "+wt+"\n        contiguous: "+en+"\n        accurateTimeOffset: "+A+"\n        timeOffset: "+Ye+"\n        initSegmentChange: "+yn);var $n=new mu(u,h,o,y,B);this.configureTransmuxer($n)}if(this.frag=p,this.part=v,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:i,decryptdata:Ue,chunkMeta:D,state:An},i instanceof ArrayBuffer?[i]:[]);else if(we){var vr=we.push(i,Ue,D,An);Pi(vr)?(we.async=!0,vr.then(function(nr){ye.handleTransmuxComplete(nr)}).catch(function(nr){ye.transmuxerError(nr,D,"transmuxer-interface push error")})):(we.async=!1,this.handleTransmuxComplete(vr))}},d.flush=function(i){var o=this;i.transmuxing.start=self.performance.now();var u=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:i});else if(u){var h=u.flush(i);Pi(h)||u.async?(Pi(h)||(h=Promise.resolve(h)),h.then(function(v){o.handleFlushResult(v,i)}).catch(function(v){o.transmuxerError(v,i,"transmuxer-interface flush error")})):this.handleFlushResult(h,i)}},d.transmuxerError=function(i,o,u){this.hls&&(this.error=i,this.hls.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_PARSING_ERROR,chunkMeta:o,fatal:!1,error:i,err:i,reason:u}))},d.handleFlushResult=function(i,o){var u=this;i.forEach(function(h){u.handleTransmuxComplete(h)}),this.onFlush(o)},d.onWorkerMessage=function(i){var o=i.data,u=this.hls;switch(o.event){case"init":var h,p=null==(h=this.workerContext)?void 0:h.objectURL;p&&self.URL.revokeObjectURL(p);break;case"transmuxComplete":this.handleTransmuxComplete(o.data);break;case"flush":this.onFlush(o.data);break;case"workerLog":Le[o.data.logType]&&Le[o.data.logType](o.data.message);break;default:o.data=o.data||{},o.data.frag=this.frag,o.data.id=this.id,u.trigger(o.event,o.data)}},d.configureTransmuxer=function(i){var o=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:i}):o&&o.configure(i)},d.handleTransmuxComplete=function(i){i.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(i)},g}();function tl(g,d){if(g.length!==d.length)return!1;for(var c=0;c<g.length;c++)if(!$o(g[c].attrs,d[c].attrs))return!1;return!0}function $o(g,d,c){var i=g["STABLE-RENDITION-ID"];return i&&!c?i===d["STABLE-RENDITION-ID"]:!(c||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(function(o){return g[o]!==d[o]})}function Ll(g,d){return d.label.toLowerCase()===g.name.toLowerCase()&&(!d.language||d.language.toLowerCase()===(g.lang||"").toLowerCase())}var id=function(g){function d(i,o,u){var h;return(h=g.call(this,i,o,u,"[audio-stream-controller]",mr_AUDIO)||this).videoBuffer=null,h.videoTrackCC=-1,h.waitingVideoCC=-1,h.bufferedTrack=null,h.switchingTrack=null,h.trackId=-1,h.waitingData=null,h.mainDetails=null,h.flushing=!1,h.bufferFlushed=!1,h.cachedTrackLoadedData=null,h._registerListeners(),h}E(d,g);var c=d.prototype;return c.onHandlerDestroying=function(){this._unregisterListeners(),g.prototype.onHandlerDestroying.call(this),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},c._registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),o.on(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.on(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.on(x.ERROR,this.onError,this),o.on(x.BUFFER_RESET,this.onBufferReset,this),o.on(x.BUFFER_CREATED,this.onBufferCreated,this),o.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.on(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.on(x.INIT_PTS_FOUND,this.onInitPtsFound,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),o.off(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.off(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.off(x.ERROR,this.onError,this),o.off(x.BUFFER_RESET,this.onBufferReset,this),o.off(x.BUFFER_CREATED,this.onBufferCreated,this),o.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.off(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.off(x.INIT_PTS_FOUND,this.onInitPtsFound,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this)},c.onInitPtsFound=function(o,u){var h=u.frag,v=u.initPTS;if("main"===u.id){var A=h.cc;this.initPTS[h.cc]={baseTime:v,timescale:u.timescale},this.log("InitPTS for cc: "+A+" found from main: "+v),this.videoTrackCC=A,this.state===En_WAITING_INIT_PTS&&this.tick()}},c.startLoad=function(o){if(!this.levels)return this.startPosition=o,void(this.state=En_STOPPED);var u=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),u>0&&-1===o?(this.log("Override startPosition with lastCurrentTime @"+u.toFixed(3)),o=u,this.state=En_IDLE):(this.loadedmetadata=!1,this.state=En_WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()},c.doTick=function(){switch(this.state){case En_IDLE:this.doTickIdle();break;case En_WAITING_TRACK:var o,u=this.levels,p=null==u||null==(o=u[this.trackId])?void 0:o.details;if(p){if(this.waitForCdnTuneIn(p))break;this.state=En_WAITING_INIT_PTS}break;case En_FRAG_LOADING_WAITING_RETRY:var v,y=performance.now(),A=this.retryDate;if(!A||y>=A||null!=(v=this.media)&&v.seeking){var D=this.levels,B=this.trackId;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(D?.[B]||null),this.state=En_IDLE}break;case En_WAITING_INIT_PTS:var ee=this.waitingData;if(ee){var re=ee.frag,ye=ee.part,we=ee.cache,Ye=ee.complete;if(void 0!==this.initPTS[re.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=En_FRAG_LOADING;var Xe={frag:re,part:ye,payload:we.flush(),networkDetails:null};this._handleFragmentLoadProgress(Xe),Ye&&g.prototype._handleFragmentLoadComplete.call(this,Xe)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+re.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var vt=this.getLoadPosition(),wt=Mi.bufferInfo(this.mediaBuffer,vt,this.config.maxBufferHole);pa(wt.end,this.config.maxFragLookUpTolerance,re)<0&&(this.log("Waiting fragment cc ("+re.cc+") @ "+re.start+" cancelled because another fragment at "+wt.end+" is needed"),this.clearWaitingFragment())}}else this.state=En_IDLE}this.onTickEnd()},c.clearWaitingFragment=function(){var o=this.waitingData;o&&(this.fragmentTracker.removeFragment(o.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=En_IDLE)},c.resetLoadingState=function(){this.clearWaitingFragment(),g.prototype.resetLoadingState.call(this)},c.onTickEnd=function(){var o=this.media;null!=o&&o.readyState&&(this.lastCurrentTime=o.currentTime)},c.doTickIdle=function(){var o=this.hls,u=this.levels,h=this.media,p=this.trackId;if((h||!this.startFragRequested&&o.config.startFragPrefetch)&&null!=u&&u[p]){var y=u[p],A=y.details;if(!A||A.live&&this.levelLastLoaded!==y||this.waitForCdnTuneIn(A))return void(this.state=En_WAITING_TRACK);var D=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&D&&(this.bufferFlushed=!1,this.afterBufferFlushed(D,Rt_AUDIO,mr_AUDIO));var B=this.getFwdBufferInfo(D,mr_AUDIO);if(null!==B){var ee=this.bufferedTrack,re=this.switchingTrack;if(!re&&this._streamEnded(B,A))return o.trigger(x.BUFFER_EOS,{type:"audio"}),void(this.state=En_ENDED);var ye=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,mr_MAIN),we=B.len,Ye=this.getMaxBufferLength(ye?.len),Ue=A.fragments,Xe=Ue[0].start,vt=this.flushing?this.getLoadPosition():B.end;if(re&&h){var wt=this.getLoadPosition();ee&&!$o(re.attrs,ee.attrs)&&(vt=wt),A.PTSKnown&&wt<Xe&&(B.end>Xe||B.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),h.currentTime=Xe+.05)}if(!(we>=Ye&&!re&&vt<Ue[Ue.length-1].start)){var jt=this.getNextFragment(vt,A),Ht=!1;if(jt&&this.isLoopLoading(jt,vt)&&(Ht=!!jt.gap,jt=this.getNextFragmentLoopLoading(jt,A,B,mr_MAIN,Ye)),!jt)return void(this.bufferFlushed=!0);var Nt=ye&&jt.start>ye.end+A.targetduration;if(Nt||(null==ye||!ye.len)&&B.len){var en=this.getAppendedFrag(jt.start,mr_MAIN);if(null===en||(Ht||(Ht=!!en.gap||!!Nt&&0===ye.len),Nt&&!Ht||Ht&&B.nextStart&&B.nextStart<en.end))return}this.loadFragment(jt,y,vt)}}}},c.getMaxBufferLength=function(o){var u=g.prototype.getMaxBufferLength.call(this);return o?Math.min(Math.max(u,o),this.config.maxMaxBufferLength):u},c.onMediaDetaching=function(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,g.prototype.onMediaDetaching.call(this)},c.onAudioTracksUpdated=function(o,u){var h=u.audioTracks;this.resetTransmuxer(),this.levels=h.map(function(p){return new ui(p)})},c.onAudioTrackSwitching=function(o,u){var h=!!u.url;this.trackId=u.id;var p=this.fragCurrent;p&&(p.abortRequests(),this.removeUnbufferedFrags(p.start)),this.resetLoadingState(),h?this.setInterval(100):this.resetTransmuxer(),h?(this.switchingTrack=u,this.state=En_IDLE,this.flushAudioIfNeeded(u)):(this.switchingTrack=null,this.bufferedTrack=u,this.state=En_STOPPED),this.tick()},c.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},c.onLevelLoaded=function(o,u){this.mainDetails=u.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(x.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},c.onAudioTrackLoaded=function(o,u){var h;if(null!=this.mainDetails){var p=this.levels,v=u.details,y=u.id;if(p){this.log("Audio track "+y+" loaded ["+v.startSN+","+v.endSN+"]"+(v.lastPartSn?"[part-"+v.lastPartSn+"-"+v.lastPartIndex+"]":"")+",duration:"+v.totalduration);var A=p[y],D=0;if(v.live||null!=(h=A.details)&&h.live){this.checkLiveUpdate(v);var ee,B=this.mainDetails;if(v.deltaUpdateFailed||!B)return;!A.details&&v.hasProgramDateTime&&B.hasProgramDateTime?(zs(v,B),D=v.fragments[0].start):D=this.alignPlaylists(v,A.details,null==(ee=this.levelLastLoaded)?void 0:ee.details)}A.details=v,this.levelLastLoaded=A,!this.startFragRequested&&(this.mainDetails||!v.live)&&this.setStartPosition(this.mainDetails||v,D),this.state===En_WAITING_TRACK&&!this.waitForCdnTuneIn(v)&&(this.state=En_IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+y)}else this.cachedTrackLoadedData=u},c._handleFragmentLoadProgress=function(o){var u,h=o.frag,p=o.part,v=o.payload,y=this.config,A=this.trackId,D=this.levels;if(D){var B=D[A];if(B){var ee=B.details;if(!ee)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(h.start);var re=y.defaultAudioCodec||B.audioCodec||"mp4a.40.2",ye=this.transmuxer;ye||(ye=this.transmuxer=new el(this.hls,mr_AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var we=this.initPTS[h.cc],Ye=null==(u=h.initSegment)?void 0:u.data;if(void 0!==we){var Xe=p?p.index:-1,wt=new bo(h.level,h.sn,h.stats.chunkCount,v.byteLength,Xe,-1!==Xe);ye.push(v,Ye,re,"",h,p,ee.totalduration,!1,wt,we)}else this.log("Unknown video PTS for cc "+h.cc+", waiting for video PTS before demuxing audio frag "+h.sn+" of ["+ee.startSN+" ,"+ee.endSN+"],track "+A),(this.waitingData=this.waitingData||{frag:h,part:p,cache:new Vo,complete:!1}).cache.push(new Uint8Array(v)),this.waitingVideoCC=this.videoTrackCC,this.state=En_WAITING_INIT_PTS}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+h.sn+" of level "+h.level+" will not be buffered")},c._handleFragmentLoadComplete=function(o){this.waitingData?this.waitingData.complete=!0:g.prototype._handleFragmentLoadComplete.call(this,o)},c.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},c.onBufferCreated=function(o,u){var h=u.tracks.audio;h&&(this.mediaBuffer=h.buffer||null),u.tracks.video&&(this.videoBuffer=u.tracks.video.buffer||null)},c.onFragBuffered=function(o,u){var h=u.frag,p=u.part;if(h.type===mr_AUDIO)if(this.fragContextChanged(h))this.warn("Fragment "+h.sn+(p?" p: "+p.index:"")+" of level "+h.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==h.sn){this.fragPrevious=h;var A=this.switchingTrack;A&&(this.bufferedTrack=A,this.switchingTrack=null,this.hls.trigger(x.AUDIO_TRACK_SWITCHED,fr({},A)))}this.fragBufferedComplete(h,p)}else if(!this.loadedmetadata&&h.type===mr_MAIN){var v=this.videoBuffer||this.media;v&&Mi.getBuffered(v).length&&(this.loadedmetadata=!0)}},c.onError=function(o,u){var h;if(u.fatal)this.state=En_ERROR;else switch(u.details){case he.FRAG_GAP:case he.FRAG_PARSING_ERROR:case he.FRAG_DECRYPT_ERROR:case he.FRAG_LOAD_ERROR:case he.FRAG_LOAD_TIMEOUT:case he.KEY_LOAD_ERROR:case he.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(mr_AUDIO,u);break;case he.AUDIO_TRACK_LOAD_ERROR:case he.AUDIO_TRACK_LOAD_TIMEOUT:case he.LEVEL_PARSING_ERROR:!u.levelRetry&&this.state===En_WAITING_TRACK&&(null==(h=u.context)?void 0:h.type)===Gr_AUDIO_TRACK&&(this.state=En_IDLE);break;case he.BUFFER_APPEND_ERROR:case he.BUFFER_FULL_ERROR:if(!u.parent||"audio"!==u.parent)return;if(u.details===he.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(u)&&(this.bufferedTrack=null,g.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case he.INTERNAL_EXCEPTION:this.recoverWorkerError(u)}},c.onBufferFlushing=function(o,u){u.type!==Rt_VIDEO&&(this.flushing=!0)},c.onBufferFlushed=function(o,u){var h=u.type;if(h!==Rt_VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===En_ENDED&&(this.state=En_IDLE);var p=this.mediaBuffer||this.media;p&&(this.afterBufferFlushed(p,h,mr_AUDIO),this.tick())}},c._handleTransmuxComplete=function(o){var u,h="audio",p=this.hls,v=o.remuxResult,y=o.chunkMeta,A=this.getCurrentContext(y);if(A){var D=A.frag,B=A.part,ee=A.level,re=ee.details,ye=v.audio,we=v.text,Ye=v.id3,Ue=v.initSegment;if(!this.fragContextChanged(D)&&re){if(this.state=En_PARSING,this.switchingTrack&&ye&&this.completeAudioSwitch(this.switchingTrack),null!=Ue&&Ue.tracks){var Xe=D.initSegment||D;this._bufferInitSegment(ee,Ue.tracks,Xe,y),p.trigger(x.FRAG_PARSING_INIT_SEGMENT,{frag:Xe,id:h,tracks:Ue.tracks})}if(ye){var vt=ye.startPTS,wt=ye.endPTS,jt=ye.startDTS,Ht=ye.endDTS;B&&(B.elementaryStreams[Rt_AUDIO]={startPTS:vt,endPTS:wt,startDTS:jt,endDTS:Ht}),D.setElementaryStreamInfo(Rt_AUDIO,vt,wt,jt,Ht),this.bufferFragmentData(ye,D,B,y)}if(null!=Ye&&null!=(u=Ye.samples)&&u.length){var Nt=_({id:h,frag:D,details:re},Ye);p.trigger(x.FRAG_PARSING_METADATA,Nt)}if(we){var en=_({id:h,frag:D,details:re},we);p.trigger(x.FRAG_PARSING_USERDATA,en)}}else this.fragmentTracker.removeFragment(D)}else this.resetWhenMissingContext(y)},c._bufferInitSegment=function(o,u,h,p){if(this.state===En_PARSING){u.video&&delete u.video;var v=u.audio;if(v){v.id="audio";var y=o.audioCodec;this.log("Init audio buffer, container:"+v.container+", codecs[level/parsed]=["+y+"/"+v.codec+"]"),y&&1===y.split(",").length&&(v.levelCodec=y),this.hls.trigger(x.BUFFER_CODECS,u);var A=v.initSegment;null!=A&&A.byteLength&&this.hls.trigger(x.BUFFER_APPENDING,{type:"audio",frag:h,part:null,chunkMeta:p,parent:h.type,data:A}),this.tickImmediate()}}},c.loadFragment=function(o,u,h){var v,p=this.fragmentTracker.getState(o);if(this.fragCurrent=o,this.switchingTrack||p===Qi_NOT_LOADED||p===Qi_PARTIAL)if("initSegment"===o.sn)this._loadInitSegment(o,u);else if(null!=(v=u.details)&&v.live&&!this.initPTS[o.cc]){this.log("Waiting for video PTS in continuity counter "+o.cc+" of live stream before loading audio fragment "+o.sn+" of level "+this.trackId),this.state=En_WAITING_INIT_PTS;var y=this.mainDetails;y&&y.fragments[0].start!==u.details.fragments[0].start&&zs(u.details,y)}else this.startFragRequested=!0,g.prototype.loadFragment.call(this,o,u,h);else this.clearTrackerIfNeeded(o)},c.flushAudioIfNeeded=function(o){var u=this.media,h=this.bufferedTrack,p=h?.attrs;u&&p&&(p.CHANNELS!==o.attrs.CHANNELS||h.name!==o.name||h.lang!==o.lang)&&(this.log("Switching audio track : flushing all audio"),g.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)},c.completeAudioSwitch=function(o){var u=this.hls;this.flushAudioIfNeeded(o),this.bufferedTrack=o,this.switchingTrack=null,u.trigger(x.AUDIO_TRACK_SWITCHED,fr({},o))},d}(rs),gh=function(g){function d(i){var o;return(o=g.call(this,i,"[audio-track-controller]")||this).tracks=[],o.groupIds=null,o.tracksInGroup=[],o.trackId=-1,o.currentTrack=null,o.selectDefaultTrack=!0,o.registerListeners(),o}E(d,g);var c=d.prototype;return c.registerListeners=function(){var o=this.hls;o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_PARSED,this.onManifestParsed,this),o.on(x.LEVEL_LOADING,this.onLevelLoading,this),o.on(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.on(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.on(x.ERROR,this.onError,this)},c.unregisterListeners=function(){var o=this.hls;o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_PARSED,this.onManifestParsed,this),o.off(x.LEVEL_LOADING,this.onLevelLoading,this),o.off(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.off(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.off(x.ERROR,this.onError,this)},c.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,g.prototype.destroy.call(this)},c.onManifestLoading=function(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0},c.onManifestParsed=function(o,u){this.tracks=u.audioTracks||[]},c.onAudioTrackLoaded=function(o,u){var h=u.id,p=u.groupId,v=u.details,y=this.tracksInGroup[h];if(y&&y.groupId===p){var A=y.details;y.details=u.details,this.log("Audio track "+h+' "'+y.name+'" lang:'+y.lang+" group:"+p+" loaded ["+v.startSN+"-"+v.endSN+"]"),h===this.trackId&&this.playlistLoaded(h,u,A)}else this.warn("Audio track with id:"+h+" and group:"+p+" not found in active group "+y?.groupId)},c.onLevelLoading=function(o,u){this.switchLevel(u.level)},c.onLevelSwitching=function(o,u){this.switchLevel(u.level)},c.switchLevel=function(o){var u=this.hls.levels[o];if(u){var h=u.audioGroups||null,p=this.groupIds,v=this.currentTrack;if(!h||p?.length!==h?.length||null!=h&&h.some(function(Ue){return-1===p?.indexOf(Ue)})){this.groupIds=h,this.trackId=-1,this.currentTrack=null;var y=this.tracks.filter(function(Ue){return!h||-1!==h.indexOf(Ue.groupId)});if(y.length)this.selectDefaultTrack&&!y.some(function(Ue){return Ue.default})&&(this.selectDefaultTrack=!1),y.forEach(function(Ue,Xe){Ue.id=Xe});else if(!v&&!this.tracksInGroup.length)return;this.tracksInGroup=y;var A=this.hls.config.audioPreference;if(!v&&A){var D=fo(A,y,Ts);if(D>-1)v=y[D];else{var B=fo(A,this.tracks);v=this.tracks[B]}}var ee=this.findTrackId(v);-1===ee&&v&&(ee=this.findTrackId(null));var re={audioTracks:y};this.log("Updating audio tracks, "+y.length+" track(s) found in group(s): "+h?.join(",")),this.hls.trigger(x.AUDIO_TRACKS_UPDATED,re);var ye=this.trackId;if(-1!==ee&&-1===ye)this.setAudioTrack(ee);else if(y.length&&-1===ye){var we,Ye=new Error("No audio track selected for current audio group-ID(s): "+(null==(we=this.groupIds)?void 0:we.join(","))+" track count: "+y.length);this.warn(Ye.message),this.hls.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:Ye})}}else this.shouldReloadPlaylist(v)&&this.setAudioTrack(this.trackId)}},c.onError=function(o,u){u.fatal||!u.context||u.context.type===Gr_AUDIO_TRACK&&u.context.id===this.trackId&&(!this.groupIds||-1!==this.groupIds.indexOf(u.context.groupId))&&(this.requestScheduled=-1,this.checkRetry(u))},c.setAudioOption=function(o){var u=this.hls;if(u.config.audioPreference=o,o){var h=this.allAudioTracks;if(this.selectDefaultTrack=!1,h.length){var p=this.currentTrack;if(p&&na(o,p,Ts))return p;var v=fo(o,this.tracksInGroup,Ts);if(v>-1){var y=this.tracksInGroup[v];return this.setAudioTrack(v),y}if(p){var A=u.loadLevel;-1===A&&(A=u.firstAutoLevel);var D=function qs(g,d,c,i,o){var u=d[i],p=d.reduce(function(B,ee,re){var ye=ee.uri;return(B[ye]||(B[ye]=[])).push(re),B},{})[u.uri];p.length>1&&(i=Math.max.apply(Math,p));var v=u.videoRange,y=u.frameRate,A=u.codecSet.substring(0,4),D=cu(d,i,function(B){if(B.videoRange!==v||B.frameRate!==y||B.codecSet.substring(0,4)!==A)return!1;var ee=B.audioGroups,re=c.filter(function(ye){return!ee||-1!==ee.indexOf(ye.groupId)});return fo(g,re,o)>-1});return D>-1?D:cu(d,i,function(B){var ee=B.audioGroups,re=c.filter(function(ye){return!ee||-1!==ee.indexOf(ye.groupId)});return fo(g,re,o)>-1})}(o,u.levels,h,A,Ts);if(-1===D)return null;u.nextLoadLevel=D}if(o.channels||o.audioCodec){var B=fo(o,h);if(B>-1)return h[B]}}}return null},c.setAudioTrack=function(o){var u=this.tracksInGroup;if(o<0||o>=u.length)this.warn("Invalid audio track id: "+o);else{this.clearTimer(),this.selectDefaultTrack=!1;var h=this.currentTrack,p=u[o],v=p.details&&!p.details.live;if(!(o===this.trackId&&p===h&&v||(this.log("Switching to audio-track "+o+' "'+p.name+'" lang:'+p.lang+" group:"+p.groupId+" channels:"+p.channels),this.trackId=o,this.currentTrack=p,this.hls.trigger(x.AUDIO_TRACK_SWITCHING,fr({},p)),v))){var y=this.switchParams(p.url,h?.details);this.loadPlaylist(y)}}},c.findTrackId=function(o){for(var u=this.tracksInGroup,h=0;h<u.length;h++){var p=u[h];if((!this.selectDefaultTrack||p.default)&&(!o||na(o,p,Ts)))return h}if(o){for(var v=o.name,y=o.lang,A=o.assocLang,D=o.characteristics,B=o.audioCodec,ee=o.channels,re=0;re<u.length;re++)if(na({name:v,lang:y,assocLang:A,characteristics:D,audioCodec:B,channels:ee},u[re],Ts))return re;for(var we=0;we<u.length;we++)if($o(o.attrs,u[we].attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return we;for(var Ue=0;Ue<u.length;Ue++)if($o(o.attrs,u[Ue].attrs,["LANGUAGE"]))return Ue}return-1},c.loadPlaylist=function(o){var u=this.currentTrack;if(this.shouldLoadPlaylist(u)&&u){g.prototype.loadPlaylist.call(this);var h=u.id,p=u.groupId,v=u.url;if(o)try{v=o.addDirectives(v)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}this.log("loading audio-track playlist "+h+' "'+u.name+'" lang:'+u.lang+" group:"+p),this.clearTimer(),this.hls.trigger(x.AUDIO_TRACK_LOADING,{url:v,id:h,groupId:p,deliveryDirectives:o||null})}},De(d,[{key:"allAudioTracks",get:function(){return this.tracks}},{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(o){this.selectDefaultTrack=!1,this.setAudioTrack(o)}}]),d}(bl),od=function(g){function d(i,o,u){var h;return(h=g.call(this,i,o,u,"[subtitle-stream-controller]",mr_SUBTITLE)||this).currentTrackId=-1,h.tracksBuffered=[],h.mainDetails=null,h._registerListeners(),h}E(d,g);var c=d.prototype;return c.onHandlerDestroying=function(){this._unregisterListeners(),g.prototype.onHandlerDestroying.call(this),this.mainDetails=null},c._registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.ERROR,this.onError,this),o.on(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),o.on(x.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),o.on(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.on(x.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),o.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.ERROR,this.onError,this),o.off(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),o.off(x.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),o.off(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.off(x.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),o.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this)},c.startLoad=function(o){this.stopLoad(),this.state=En_IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()},c.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},c.onMediaDetaching=function(){this.tracksBuffered=[],g.prototype.onMediaDetaching.call(this)},c.onLevelLoaded=function(o,u){this.mainDetails=u.details},c.onSubtitleFragProcessed=function(o,u){var h=u.frag,p=u.success;if(this.fragPrevious=h,this.state=En_IDLE,p){var v=this.tracksBuffered[this.currentTrackId];if(v){for(var y,A=h.start,D=0;D<v.length;D++)if(A>=v[D].start&&A<=v[D].end){y=v[D];break}var B=h.start+h.duration;y?y.end=B:v.push(y={start:A,end:B}),this.fragmentTracker.fragBuffered(h),this.fragBufferedComplete(h,null)}}},c.onBufferFlushing=function(o,u){var h=u.startOffset,p=u.endOffset;if(0===h&&p!==Number.POSITIVE_INFINITY){var v=p-1;if(v<=0)return;u.endOffsetSubtitles=Math.max(0,v),this.tracksBuffered.forEach(function(y){for(var A=0;A<y.length;)if(y[A].end<=v)y.shift();else{if(!(y[A].start<v))break;y[A].start=v,A++}}),this.fragmentTracker.removeFragmentsInRange(h,v,mr_SUBTITLE)}},c.onFragBuffered=function(o,u){var h;this.loadedmetadata||u.frag.type!==mr_MAIN||null!=(h=this.media)&&h.buffered.length&&(this.loadedmetadata=!0)},c.onError=function(o,u){var h=u.frag;h?.type===mr_SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==En_STOPPED&&(this.state=En_IDLE))},c.onSubtitleTracksUpdated=function(o,u){var h=this,p=u.subtitleTracks;this.levels&&tl(this.levels,p)?this.levels=p.map(function(v){return new ui(v)}):(this.tracksBuffered=[],this.levels=p.map(function(v){var y=new ui(v);return h.tracksBuffered[y.id]=[],y}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,mr_SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null)},c.onSubtitleTrackSwitch=function(o,u){var h;if(this.currentTrackId=u.id,null!=(h=this.levels)&&h.length&&-1!==this.currentTrackId){var p=this.levels[this.currentTrackId];this.mediaBuffer=null!=p&&p.details?this.mediaBufferTimeRanges:null,p&&this.setInterval(500)}else this.clearInterval()},c.onSubtitleTrackLoaded=function(o,u){var h,p=this.currentTrackId,v=this.levels,y=u.details,A=u.id;if(v){var D=v[p];if(!(A>=v.length||A!==p)&&D){this.log("Subtitle track "+A+" loaded ["+y.startSN+","+y.endSN+"]"+(y.lastPartSn?"[part-"+y.lastPartSn+"-"+y.lastPartIndex+"]":"")+",duration:"+y.totalduration),this.mediaBuffer=this.mediaBufferTimeRanges;var B=0;if(y.live||null!=(h=D.details)&&h.live){var ee=this.mainDetails;if(y.deltaUpdateFailed||!ee)return;var ye,re=ee.fragments[0];D.details?0===(B=this.alignPlaylists(y,D.details,null==(ye=this.levelLastLoaded)?void 0:ye.details))&&re&&Hs(y,B=re.start):y.hasProgramDateTime&&ee.hasProgramDateTime?(zs(y,ee),B=y.fragments[0].start):re&&Hs(y,B=re.start)}D.details=y,this.levelLastLoaded=D,!this.startFragRequested&&(this.mainDetails||!y.live)&&this.setStartPosition(this.mainDetails||y,B),this.tick(),y.live&&!this.fragCurrent&&this.media&&this.state===En_IDLE&&(au(null,y.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),D.details=void 0))}}else this.warn("Subtitle tracks were reset while loading level "+A)},c._handleFragmentLoadComplete=function(o){var u=this,h=o.frag,p=o.payload,v=h.decryptdata,y=this.hls;if(!this.fragContextChanged(h)&&p&&p.byteLength>0&&null!=v&&v.key&&v.iv&&"AES-128"===v.method){var A=performance.now();this.decrypter.decrypt(new Uint8Array(p),v.key.buffer,v.iv.buffer).catch(function(D){throw y.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.FRAG_DECRYPT_ERROR,fatal:!1,error:D,reason:D.message,frag:h}),D}).then(function(D){var B=performance.now();y.trigger(x.FRAG_DECRYPTED,{frag:h,payload:D,stats:{tstart:A,tdecrypt:B}})}).catch(function(D){u.warn(D.name+": "+D.message),u.state=En_IDLE})}},c.doTick=function(){if(this.media){if(this.state===En_IDLE){var o=this.currentTrackId,u=this.levels,h=u?.[o];if(!h||!u.length||!h.details)return;var p=this.config,v=this.getLoadPosition(),y=Mi.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],v,p.maxBufferHole),A=y.end,D=y.len,B=this.getFwdBufferInfo(this.media,mr_MAIN),ee=h.details;if(D>this.getMaxBufferLength(B?.len)+ee.levelTargetDuration)return;var ye=ee.fragments,we=ye.length,Ye=ee.edge,Ue=null,Xe=this.fragPrevious;if(A<Ye){var vt=p.maxFragLookUpTolerance,wt=A>Ye-vt?0:vt;!(Ue=au(Xe,ye,Math.max(ye[0].start,A),wt))&&Xe&&Xe.start<ye[0].start&&(Ue=ye[0])}else Ue=ye[we-1];if(!Ue)return;if("initSegment"!==(Ue=this.mapToInitFragWhenRequired(Ue)).sn){var Ht=ye[Ue.sn-ee.startSN-1];Ht&&Ht.cc===Ue.cc&&this.fragmentTracker.getState(Ht)===Qi_NOT_LOADED&&(Ue=Ht)}this.fragmentTracker.getState(Ue)===Qi_NOT_LOADED&&this.loadFragment(Ue,h,A)}}else this.state=En_IDLE},c.getMaxBufferLength=function(o){var u=g.prototype.getMaxBufferLength.call(this);return o?Math.max(u,o):u},c.loadFragment=function(o,u,h){this.fragCurrent=o,"initSegment"===o.sn?this._loadInitSegment(o,u):(this.startFragRequested=!0,g.prototype.loadFragment.call(this,o,u,h))},De(d,[{key:"mediaBufferTimeRanges",get:function(){return new ad(this.tracksBuffered[this.currentTrackId]||[])}}]),d}(rs),ad=function(d){this.buffered=void 0;var c=function(o,u,h){if((u>>>=0)>h-1)throw new DOMException("Failed to execute '"+o+"' on 'TimeRanges': The index provided ("+u+") is greater than the maximum bound ("+h+")");return d[u][o]};this.buffered={get length(){return d.length},end:function(o){return c("end",o,d.length)},start:function(o){return c("start",o,d.length)}}},$c=function(g){function d(i){var o;return(o=g.call(this,i,"[subtitle-track-controller]")||this).media=null,o.tracks=[],o.groupIds=null,o.tracksInGroup=[],o.trackId=-1,o.currentTrack=null,o.selectDefaultTrack=!0,o.queuedDefaultTrack=-1,o.asyncPollTrackChange=function(){return o.pollTrackChange(0)},o.useTextTrackPolling=!1,o.subtitlePollingInterval=-1,o._subtitleDisplay=!0,o.onTextTracksChanged=function(){if(o.useTextTrackPolling||self.clearInterval(o.subtitlePollingInterval),o.media&&o.hls.config.renderTextTracksNatively){for(var u=null,h=ju(o.media.textTracks),p=0;p<h.length;p++)if("hidden"===h[p].mode)u=h[p];else if("showing"===h[p].mode){u=h[p];break}var v=o.findTrackForTextTrack(u);o.subtitleTrack!==v&&o.setSubtitleTrack(v)}},o.registerListeners(),o}E(d,g);var c=d.prototype;return c.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,g.prototype.destroy.call(this)},c.registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_PARSED,this.onManifestParsed,this),o.on(x.LEVEL_LOADING,this.onLevelLoading,this),o.on(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.on(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.on(x.ERROR,this.onError,this)},c.unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_PARSED,this.onManifestParsed,this),o.off(x.LEVEL_LOADING,this.onLevelLoading,this),o.off(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.off(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.off(x.ERROR,this.onError,this)},c.onMediaAttached=function(o,u){this.media=u.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},c.pollTrackChange=function(o){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,o)},c.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),ju(this.media.textTracks).forEach(function(u){yl(u)}),this.subtitleTrack=-1,this.media=null)},c.onManifestLoading=function(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},c.onManifestParsed=function(o,u){this.tracks=u.subtitleTracks},c.onSubtitleTrackLoaded=function(o,u){var h=u.id,p=u.groupId,v=u.details,y=this.tracksInGroup[h];if(y&&y.groupId===p){var A=y.details;y.details=u.details,this.log("Subtitle track "+h+' "'+y.name+'" lang:'+y.lang+" group:"+p+" loaded ["+v.startSN+"-"+v.endSN+"]"),h===this.trackId&&this.playlistLoaded(h,u,A)}else this.warn("Subtitle track with id:"+h+" and group:"+p+" not found in active group "+y?.groupId)},c.onLevelLoading=function(o,u){this.switchLevel(u.level)},c.onLevelSwitching=function(o,u){this.switchLevel(u.level)},c.switchLevel=function(o){var u=this.hls.levels[o];if(u){var h=u.subtitleGroups||null,p=this.groupIds,v=this.currentTrack;if(!h||p?.length!==h?.length||null!=h&&h.some(function(ye){return-1===p?.indexOf(ye)})){this.groupIds=h,this.trackId=-1,this.currentTrack=null;var y=this.tracks.filter(function(ye){return!h||-1!==h.indexOf(ye.groupId)});if(y.length)this.selectDefaultTrack&&!y.some(function(ye){return ye.default})&&(this.selectDefaultTrack=!1),y.forEach(function(ye,we){ye.id=we});else if(!v&&!this.tracksInGroup.length)return;this.tracksInGroup=y;var A=this.hls.config.subtitlePreference;if(!v&&A){this.selectDefaultTrack=!1;var D=fo(A,y);if(D>-1)v=y[D];else{var B=fo(A,this.tracks);v=this.tracks[B]}}var ee=this.findTrackId(v);-1===ee&&v&&(ee=this.findTrackId(null));var re={subtitleTracks:y};this.log("Updating subtitle tracks, "+y.length+' track(s) found in "'+h?.join(",")+'" group-id'),this.hls.trigger(x.SUBTITLE_TRACKS_UPDATED,re),-1!==ee&&-1===this.trackId&&this.setSubtitleTrack(ee)}else this.shouldReloadPlaylist(v)&&this.setSubtitleTrack(this.trackId)}},c.findTrackId=function(o){for(var u=this.tracksInGroup,h=this.selectDefaultTrack,p=0;p<u.length;p++){var v=u[p];if((!h||v.default)&&(h||o)&&(!o||na(v,o)))return p}if(o){for(var y=0;y<u.length;y++)if($o(o.attrs,u[y].attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return y;for(var D=0;D<u.length;D++)if($o(o.attrs,u[D].attrs,["LANGUAGE"]))return D}return-1},c.findTrackForTextTrack=function(o){if(o)for(var u=this.tracksInGroup,h=0;h<u.length;h++)if(Ll(u[h],o))return h;return-1},c.onError=function(o,u){u.fatal||!u.context||u.context.type===Gr_SUBTITLE_TRACK&&u.context.id===this.trackId&&(!this.groupIds||-1!==this.groupIds.indexOf(u.context.groupId))&&this.checkRetry(u)},c.setSubtitleOption=function(o){if(this.hls.config.subtitlePreference=o,o){var u=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,u.length){var h=this.currentTrack;if(h&&na(o,h))return h;var p=fo(o,this.tracksInGroup);if(p>-1){var v=this.tracksInGroup[p];return this.setSubtitleTrack(p),v}if(h)return null;var y=fo(o,u);if(y>-1)return u[y]}}return null},c.loadPlaylist=function(o){g.prototype.loadPlaylist.call(this);var u=this.currentTrack;if(this.shouldLoadPlaylist(u)&&u){var h=u.id,p=u.groupId,v=u.url;if(o)try{v=o.addDirectives(v)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}this.log("Loading subtitle playlist for id "+h),this.hls.trigger(x.SUBTITLE_TRACK_LOADING,{url:v,id:h,groupId:p,deliveryDirectives:o||null})}},c.toggleTrackModes=function(){var o=this.media;if(o){var p,u=ju(o.textTracks),h=this.currentTrack;if(h&&((p=u.filter(function(y){return Ll(h,y)})[0])||this.warn('Unable to find subtitle TextTrack with name "'+h.name+'" and language "'+h.lang+'"')),[].slice.call(u).forEach(function(y){"disabled"!==y.mode&&y!==p&&(y.mode="disabled")}),p){var v=this.subtitleDisplay?"showing":"hidden";p.mode!==v&&(p.mode=v)}}},c.setSubtitleTrack=function(o){var u=this.tracksInGroup;if(this.media)if(o<-1||o>=u.length||!$(o))this.warn("Invalid subtitle track id: "+o);else{this.clearTimer(),this.selectDefaultTrack=!1;var h=this.currentTrack,p=u[o]||null;if(this.trackId=o,this.currentTrack=p,this.toggleTrackModes(),p){if(o!==this.trackId||p!==h||!p.details||p.details.live){this.log("Switching to subtitle-track "+o+(p?' "'+p.name+'" lang:'+p.lang+" group:"+p.groupId:""));var A=p.groupId;this.hls.trigger(x.SUBTITLE_TRACK_SWITCH,{id:p.id,groupId:void 0===A?"":A,name:p.name,type:p.type,url:p.url});var ye=this.switchParams(p.url,h?.details);this.loadPlaylist(ye)}}else this.hls.trigger(x.SUBTITLE_TRACK_SWITCH,{id:o})}else this.queuedDefaultTrack=o},De(d,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(o){this._subtitleDisplay=o,this.trackId>-1&&this.toggleTrackModes()}},{key:"allSubtitleTracks",get:function(){return this.tracks}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(o){this.selectDefaultTrack=!1,this.setSubtitleTrack(o)}}]),d}(bl),Eu=function(){function g(c){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=c}var d=g.prototype;return d.append=function(i,o,u){var h=this.queues[o];h.push(i),1===h.length&&!u&&this.executeNext(o)},d.insertAbort=function(i,o){this.queues[o].unshift(i),this.executeNext(o)},d.appendBlocker=function(i){var o,u=new Promise(function(p){o=p});return this.append({execute:o,onStart:function(){},onComplete:function(){},onError:function(){}},i),u},d.executeNext=function(i){var o=this.queues[i];if(o.length){var u=o[0];try{u.execute()}catch(p){Le.warn('[buffer-operation-queue]: Exception executing "'+i+'" SourceBuffer operation: '+p),u.onError(p);var h=this.buffers[i];null!=h&&h.updating||this.shiftAndExecuteNext(i)}}},d.shiftAndExecuteNext=function(i){this.queues[i].shift(),this.executeNext(i)},d.current=function(i){return this.queues[i][0]},g}(),Xc=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,_u=function(){function g(c){var i=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=function(u){i.hls&&i.hls.pauseBuffering()},this._onStartStreaming=function(u){i.hls&&i.hls.resumeBuffering()},this._onMediaSourceOpen=function(){var u=i.media,h=i.mediaSource;i.log("Media source opened"),u&&(u.removeEventListener("emptied",i._onMediaEmptied),i.updateMediaElementDuration(),i.hls.trigger(x.MEDIA_ATTACHED,{media:u,mediaSource:h})),h&&h.removeEventListener("sourceopen",i._onMediaSourceOpen),i.checkPendingTracks()},this._onMediaSourceClose=function(){i.log("Media source closed")},this._onMediaSourceEnded=function(){i.log("Media source ended")},this._onMediaEmptied=function(){var u=i.mediaSrc,h=i._objectUrl;u!==h&&Le.error("Media element src was set while attaching MediaSource ("+h+" > "+u+")")},this.hls=c;var o="[buffer-controller]";this.appendSource=c.config.preferManagedMediaSource,this.log=Le.log.bind(Le,o),this.warn=Le.warn.bind(Le,o),this.error=Le.error.bind(Le,o),this._initSourceBuffer(),this.registerListeners()}var d=g.prototype;return d.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},d.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null},d.registerListeners=function(){var i=this.hls;i.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.MANIFEST_PARSED,this.onManifestParsed,this),i.on(x.BUFFER_RESET,this.onBufferReset,this),i.on(x.BUFFER_APPENDING,this.onBufferAppending,this),i.on(x.BUFFER_CODECS,this.onBufferCodecs,this),i.on(x.BUFFER_EOS,this.onBufferEos,this),i.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.on(x.LEVEL_UPDATED,this.onLevelUpdated,this),i.on(x.FRAG_PARSED,this.onFragParsed,this),i.on(x.FRAG_CHANGED,this.onFragChanged,this)},d.unregisterListeners=function(){var i=this.hls;i.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.MANIFEST_PARSED,this.onManifestParsed,this),i.off(x.BUFFER_RESET,this.onBufferReset,this),i.off(x.BUFFER_APPENDING,this.onBufferAppending,this),i.off(x.BUFFER_CODECS,this.onBufferCodecs,this),i.off(x.BUFFER_EOS,this.onBufferEos,this),i.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.off(x.LEVEL_UPDATED,this.onLevelUpdated,this),i.off(x.FRAG_PARSED,this.onFragParsed,this),i.off(x.FRAG_CHANGED,this.onFragChanged,this)},d._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Eu(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null},d.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},d.onManifestParsed=function(i,o){var u=2;(o.audio&&!o.video||!o.altAudio)&&(u=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=u,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},d.onMediaAttaching=function(i,o){var u=this.media=o.media,h=fi(this.appendSource);if(u&&h){var p,v=this.mediaSource=new h;this.log("created media source: "+(null==(p=v.constructor)?void 0:p.name)),v.addEventListener("sourceopen",this._onMediaSourceOpen),v.addEventListener("sourceended",this._onMediaSourceEnded),v.addEventListener("sourceclose",this._onMediaSourceClose),v.addEventListener("startstreaming",this._onStartStreaming),v.addEventListener("endstreaming",this._onEndStreaming);var y=this._objectUrl=self.URL.createObjectURL(v);if(this.appendSource)try{u.removeAttribute("src");var A=self.ManagedMediaSource;u.disableRemotePlayback=u.disableRemotePlayback||A&&v instanceof A,sd(u),function Qc(g,d){var c=self.document.createElement("source");c.type="video/mp4",c.src=d,g.appendChild(c)}(u,y),u.load()}catch{u.src=y}else u.src=y;u.addEventListener("emptied",this._onMediaEmptied)}},d.onMediaDetaching=function(){var i=this.media,o=this.mediaSource,u=this._objectUrl;if(o){if(this.log("media source detaching"),"open"===o.readyState)try{o.endOfStream()}catch(h){this.warn("onMediaDetaching: "+h.message+" while calling endOfStream")}this.onBufferReset(),o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),o.removeEventListener("startstreaming",this._onStartStreaming),o.removeEventListener("endstreaming",this._onEndStreaming),i&&(i.removeEventListener("emptied",this._onMediaEmptied),u&&self.URL.revokeObjectURL(u),this.mediaSrc===u?(i.removeAttribute("src"),this.appendSource&&sd(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(x.MEDIA_DETACHED,void 0)},d.onBufferReset=function(){var i=this;this.getSourceBufferTypes().forEach(function(o){i.resetBuffer(o)}),this._initSourceBuffer()},d.resetBuffer=function(i){var o=this.sourceBuffer[i];try{var u;o&&(this.removeBufferListeners(i),this.sourceBuffer[i]=void 0,null!=(u=this.mediaSource)&&u.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(o))}catch(h){this.warn("onBufferReset "+i,h)}},d.onBufferCodecs=function(i,o){var u=this,h=this.getSourceBufferTypes().length,p=Object.keys(o);if(p.forEach(function(y){if(h){var A=u.tracks[y];if(A&&"function"==typeof A.buffer.changeType){var D,B=o[y],ee=B.id,re=B.codec,ye=B.levelCodec,we=B.container,Ye=B.metadata,Ue=Zn(A.codec,A.levelCodec),Xe=Ue?.replace(Xc,"$1"),vt=Zn(re,ye),wt=null==(D=vt)?void 0:D.replace(Xc,"$1");vt&&Xe!==wt&&("audio"===y.slice(0,5)&&(vt=qo(vt,u.hls.config.preferManagedMediaSource)),u.appendChangeType(y,we+";codecs="+vt),u.log("switching codec "+Ue+" to "+vt),u.tracks[y]={buffer:A.buffer,codec:re,container:we,levelCodec:ye,metadata:Ye,id:ee})}}else u.pendingTracks[y]=o[y]}),!h){var v=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==v&&(this.log(v+" bufferCodec event(s) expected "+p.join(",")),this.bufferCodecEventsExpected=v),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}},d.appendChangeType=function(i,o){var u=this,h=this.operationQueue,p={execute:function(){var y=u.sourceBuffer[i];y&&(u.log("changing "+i+" sourceBuffer type to "+o),y.changeType(o)),h.shiftAndExecuteNext(i)},onStart:function(){},onComplete:function(){},onError:function(y){u.warn("Failed to change "+i+" SourceBuffer type",y)}};h.append(p,i,!!this.pendingTracks[i])},d.onBufferAppending=function(i,o){var u=this,h=this.hls,p=this.operationQueue,v=this.tracks,y=o.data,A=o.type,D=o.frag,B=o.part,ee=o.chunkMeta,re=ee.buffering[A],ye=self.performance.now();re.start=ye;var we=D.stats.buffering,Ye=B?B.stats.buffering:null;0===we.start&&(we.start=ye),Ye&&0===Ye.start&&(Ye.start=ye);var Ue=v.audio,Xe=!1;"audio"===A&&"audio/mpeg"===Ue?.container&&(Xe=!this.lastMpegAudioChunk||1===ee.id||this.lastMpegAudioChunk.sn!==ee.sn,this.lastMpegAudioChunk=ee);var vt=D.start;p.append({execute:function(){if(re.executeStart=self.performance.now(),Xe){var Ht=u.sourceBuffer[A];if(Ht){var Nt=vt-Ht.timestampOffset;Math.abs(Nt)>=.1&&(u.log("Updating audio SourceBuffer timestampOffset to "+vt+" (delta: "+Nt+") sn: "+D.sn+")"),Ht.timestampOffset=vt)}}u.appendExecutor(y,A)},onStart:function(){},onComplete:function(){var Ht=self.performance.now();re.executeEnd=re.end=Ht,0===we.first&&(we.first=Ht),Ye&&0===Ye.first&&(Ye.first=Ht);var Nt=u.sourceBuffer,en={};for(var tn in Nt)en[tn]=Mi.getBuffered(Nt[tn]);u.appendErrors[A]=0,"audio"===A||"video"===A?u.appendErrors.audiovideo=0:(u.appendErrors.audio=0,u.appendErrors.video=0),u.hls.trigger(x.BUFFER_APPENDED,{type:A,frag:D,part:B,chunkMeta:ee,parent:D.type,timeRanges:en})},onError:function(Ht){var Nt={type:_e.MEDIA_ERROR,parent:D.type,details:he.BUFFER_APPEND_ERROR,sourceBufferName:A,frag:D,part:B,chunkMeta:ee,error:Ht,err:Ht,fatal:!1};if(Ht.code===DOMException.QUOTA_EXCEEDED_ERR)Nt.details=he.BUFFER_FULL_ERROR;else{var en=++u.appendErrors[A];Nt.details=he.BUFFER_APPEND_ERROR,u.warn("Failed "+en+"/"+h.config.appendErrorMaxRetry+' times to append segment in "'+A+'" sourceBuffer'),en>=h.config.appendErrorMaxRetry&&(Nt.fatal=!0)}h.trigger(x.ERROR,Nt)}},A,!!this.pendingTracks[A])},d.onBufferFlushing=function(i,o){var u=this,h=this.operationQueue,p=function(y){return{execute:u.removeExecutor.bind(u,y,o.startOffset,o.endOffset),onStart:function(){},onComplete:function(){u.hls.trigger(x.BUFFER_FLUSHED,{type:y})},onError:function(D){u.warn("Failed to remove from "+y+" SourceBuffer",D)}}};o.type?h.append(p(o.type),o.type):this.getSourceBufferTypes().forEach(function(v){h.append(p(v),v)})},d.onFragParsed=function(i,o){var u=this,h=o.frag,p=o.part,v=[],y=p?p.elementaryStreams:h.elementaryStreams;y[Rt_AUDIOVIDEO]?v.push("audiovideo"):(y[Rt_AUDIO]&&v.push("audio"),y[Rt_VIDEO]&&v.push("video"));0===v.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+h.type+" level: "+h.level+" sn: "+h.sn),this.blockBuffers(function(){var B=self.performance.now();h.stats.buffering.end=B,p&&(p.stats.buffering.end=B),u.hls.trigger(x.FRAG_BUFFERED,{frag:h,part:p,stats:p?p.stats:h.stats,id:h.type})},v)},d.onFragChanged=function(i,o){this.trimBuffers()},d.onBufferEos=function(i,o){var u=this,h=this.getSourceBufferTypes().reduce(function(p,v){var y=u.sourceBuffer[v];return y&&(!o.type||o.type===v)&&(y.ending=!0,y.ended||(y.ended=!0,u.log(v+" sourceBuffer now EOS"))),p&&!(y&&!y.ended)},!0);h&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){u.getSourceBufferTypes().forEach(function(v){var y=u.sourceBuffer[v];y&&(y.ending=!1)});var p=u.mediaSource;p&&"open"===p.readyState?(u.log("Calling mediaSource.endOfStream()"),p.endOfStream()):p&&u.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+p.readyState)}))},d.onLevelUpdated=function(i,o){var u=o.details;u.fragments.length&&(this.details=u,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},d.trimBuffers=function(){var i=this.hls,o=this.details,u=this.media;if(u&&null!==o&&this.getSourceBufferTypes().length){var p=i.config,v=u.currentTime,y=o.levelTargetDuration,A=o.live&&null!==p.liveBackBufferLength?p.liveBackBufferLength:p.backBufferLength;if($(A)&&A>0){var D=Math.max(A,y),B=Math.floor(v/y)*y-D;this.flushBackBuffer(v,y,B)}if($(p.frontBufferFlushThreshold)&&p.frontBufferFlushThreshold>0){var ee=Math.max(p.maxBufferLength,p.frontBufferFlushThreshold),re=Math.max(ee,y),ye=Math.floor(v/y)*y+re;this.flushFrontBuffer(v,y,ye)}}},d.flushBackBuffer=function(i,o,u){var h=this,p=this.details,v=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(A){var D=v[A];if(D){var B=Mi.getBuffered(D);if(B.length>0&&u>B.start(0)){if(h.hls.trigger(x.BACK_BUFFER_REACHED,{bufferEnd:u}),null!=p&&p.live)h.hls.trigger(x.LIVE_BACK_BUFFER_REACHED,{bufferEnd:u});else if(D.ended&&B.end(B.length-1)-i<2*o)return void h.log("Cannot flush "+A+" back buffer while SourceBuffer is in ended state");h.hls.trigger(x.BUFFER_FLUSHING,{startOffset:0,endOffset:u,type:A})}}})},d.flushFrontBuffer=function(i,o,u){var h=this,p=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(y){var A=p[y];if(A){var D=Mi.getBuffered(A),B=D.length;if(B<2)return;var ee=D.start(B-1),re=D.end(B-1);if(u>ee||i>=ee&&i<=re)return;if(A.ended&&i-re<2*o)return void h.log("Cannot flush "+y+" front buffer while SourceBuffer is in ended state");h.hls.trigger(x.BUFFER_FLUSHING,{startOffset:ee,endOffset:1/0,type:y})}})},d.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var i=this.details,o=this.hls,h=this.mediaSource,p=i.fragments[0].start+i.totalduration,v=this.media.duration,y=$(h.duration)?h.duration:0;i.live&&o.config.liveDurationInfinity?(h.duration=1/0,this.updateSeekableRange(i)):(p>y&&p>v||!$(v))&&(this.log("Updating Media Source duration to "+p.toFixed(3)),h.duration=p)}},d.updateSeekableRange=function(i){var o=this.mediaSource,u=i.fragments;if(u.length&&i.live&&null!=o&&o.setLiveSeekableRange){var p=Math.max(0,u[0].start),v=Math.max(p,p+i.totalduration);this.log("Media Source duration is set to "+o.duration+". Setting seekable range to "+p+"-"+v+"."),o.setLiveSeekableRange(p,v)}},d.checkPendingTracks=function(){var i=this.bufferCodecEventsExpected,o=this.operationQueue,u=this.pendingTracks,h=Object.keys(u).length;if(h&&(!i||2===h||"audiovideo"in u)){this.createSourceBuffers(u),this.pendingTracks={};var p=this.getSourceBufferTypes();if(p.length)this.hls.trigger(x.BUFFER_CREATED,{tracks:this.tracks}),p.forEach(function(y){o.executeNext(y)});else{var v=new Error("could not create source buffer for media codec(s)");this.hls.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:v,reason:v.message})}}},d.createSourceBuffers=function(i){var o=this,u=this.sourceBuffer,h=this.mediaSource;if(!h)throw Error("createSourceBuffers called when mediaSource was null");var p=function(A){if(!u[A]){var D=i[A];if(!D)throw Error("source buffer exists for track "+A+", however track does not");var B=D.levelCodec||D.codec;B&&"audio"===A.slice(0,5)&&(B=qo(B,o.hls.config.preferManagedMediaSource));var ee=D.container+";codecs="+B;o.log("creating sourceBuffer("+ee+")");try{var re=u[A]=h.addSourceBuffer(ee),ye=A;o.addBufferListener(ye,"updatestart",o._onSBUpdateStart),o.addBufferListener(ye,"updateend",o._onSBUpdateEnd),o.addBufferListener(ye,"error",o._onSBUpdateError),o.addBufferListener(ye,"bufferedchange",function(we,Ye){var Ue=Ye.removedRanges;null!=Ue&&Ue.length&&o.hls.trigger(x.BUFFER_FLUSHED,{type:A})}),o.tracks[A]={buffer:re,codec:B,container:D.container,levelCodec:D.levelCodec,metadata:D.metadata,id:D.id}}catch(we){o.error("error while trying to add sourceBuffer: "+we.message),o.hls.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:we,sourceBufferName:A,mimeType:ee})}}};for(var v in i)p(v)},d._onSBUpdateStart=function(i){this.operationQueue.current(i).onStart()},d._onSBUpdateEnd=function(i){var o;if("closed"!==(null==(o=this.mediaSource)?void 0:o.readyState)){var u=this.operationQueue;u.current(i).onComplete(),u.shiftAndExecuteNext(i)}else this.resetBuffer(i)},d._onSBUpdateError=function(i,o){var u,h=new Error(i+" SourceBuffer error. MediaSource readyState: "+(null==(u=this.mediaSource)?void 0:u.readyState));this.error(""+h,o),this.hls.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.BUFFER_APPENDING_ERROR,sourceBufferName:i,error:h,fatal:!1});var p=this.operationQueue.current(i);p&&p.onError(h)},d.removeExecutor=function(i,o,u){var h=this.media,p=this.mediaSource,v=this.operationQueue,A=this.sourceBuffer[i];if(!h||!p||!A)return this.warn("Attempting to remove from the "+i+" SourceBuffer, but it does not exist"),void v.shiftAndExecuteNext(i);var D=$(h.duration)?h.duration:1/0,B=$(p.duration)?p.duration:1/0,ee=Math.max(0,o),re=Math.min(u,D,B);re>ee&&(!A.ending||A.ended)?(A.ended=!1,this.log("Removing ["+ee+","+re+"] from the "+i+" SourceBuffer"),A.remove(ee,re)):v.shiftAndExecuteNext(i)},d.appendExecutor=function(i,o){var u=this.sourceBuffer[o];if(u)u.ended=!1,u.appendBuffer(i);else if(!this.pendingTracks[o])throw new Error("Attempting to append to the "+o+" SourceBuffer, but it does not exist")},d.blockBuffers=function(i,o){var u=this;if(void 0===o&&(o=this.getSourceBufferTypes()),!o.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(i);var h=this.operationQueue,p=o.map(function(v){return h.appendBlocker(v)});Promise.all(p).then(function(){i(),o.forEach(function(v){var y=u.sourceBuffer[v];null!=y&&y.updating||h.shiftAndExecuteNext(v)})})},d.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},d.addBufferListener=function(i,o,u){var h=this.sourceBuffer[i];if(h){var p=u.bind(this,i);this.listeners[i].push({event:o,listener:p}),h.addEventListener(o,p)}},d.removeBufferListeners=function(i){var o=this.sourceBuffer[i];o&&this.listeners[i].forEach(function(u){o.removeEventListener(u.event,u.listener)})},De(g,[{key:"mediaSrc",get:function(){var i,o=(null==(i=this.media)?void 0:i.firstChild)||this.media;return o?.src}}]),g}();function sd(g){var d=g.querySelectorAll("source");[].slice.call(d).forEach(function(c){g.removeChild(c)})}var Ol={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},oc=function(d){var c=d;return Ol.hasOwnProperty(d)&&(c=Ol[d]),String.fromCharCode(c)},C=15,b=100,R={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},j={17:2,18:4,21:6,22:8,23:10,19:13,20:15},W={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},K={25:2,26:4,29:6,30:8,31:10,27:13,28:15},U=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],z=function(){function g(){this.time=null,this.verboseLevel=0}return g.prototype.log=function(i,o){if(this.verboseLevel>=i){var u="function"==typeof o?o():o;Le.log(this.time+" ["+i+"] "+u)}},g}(),le=function(d){for(var c=[],i=0;i<d.length;i++)c.push(d[i].toString(16));return c},ve=function(){function g(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}var d=g.prototype;return d.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},d.setStyles=function(i){for(var o=["foreground","underline","italics","background","flash"],u=0;u<o.length;u++){var h=o[u];i.hasOwnProperty(h)&&(this[h]=i[h])}},d.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},d.equals=function(i){return this.foreground===i.foreground&&this.underline===i.underline&&this.italics===i.italics&&this.background===i.background&&this.flash===i.flash},d.copy=function(i){this.foreground=i.foreground,this.underline=i.underline,this.italics=i.italics,this.background=i.background,this.flash=i.flash},d.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},g}(),fe=function(){function g(){this.uchar=" ",this.penState=new ve}var d=g.prototype;return d.reset=function(){this.uchar=" ",this.penState.reset()},d.setChar=function(i,o){this.uchar=i,this.penState.copy(o)},d.setPenState=function(i){this.penState.copy(i)},d.equals=function(i){return this.uchar===i.uchar&&this.penState.equals(i.penState)},d.copy=function(i){this.uchar=i.uchar,this.penState.copy(i.penState)},d.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},g}(),J=function(){function g(c){this.chars=[],this.pos=0,this.currPenState=new ve,this.cueStartTime=null,this.logger=void 0;for(var i=0;i<b;i++)this.chars.push(new fe);this.logger=c}var d=g.prototype;return d.equals=function(i){for(var o=0;o<b;o++)if(!this.chars[o].equals(i.chars[o]))return!1;return!0},d.copy=function(i){for(var o=0;o<b;o++)this.chars[o].copy(i.chars[o])},d.isEmpty=function(){for(var i=!0,o=0;o<b;o++)if(!this.chars[o].isEmpty()){i=!1;break}return i},d.setCursor=function(i){this.pos!==i&&(this.pos=i),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>b&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=b)},d.moveCursor=function(i){var o=this.pos+i;if(i>1)for(var u=this.pos+1;u<o+1;u++)this.chars[u].setPenState(this.currPenState);this.setCursor(o)},d.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},d.insertChar=function(i){var o=this;i>=144&&this.backSpace();var u=oc(i);this.pos>=b?this.logger.log(0,function(){return"Cannot insert "+i.toString(16)+" ("+u+") at position "+o.pos+". Skipping it!"}):(this.chars[this.pos].setChar(u,this.currPenState),this.moveCursor(1))},d.clearFromPos=function(i){var o;for(o=i;o<b;o++)this.chars[o].reset()},d.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},d.clearToEndOfRow=function(){this.clearFromPos(this.pos)},d.getTextString=function(){for(var i=[],o=!0,u=0;u<b;u++){var h=this.chars[u].uchar;" "!==h&&(o=!1),i.push(h)}return o?"":i.join("")},d.setPenStyles=function(i){this.currPenState.setStyles(i),this.chars[this.pos].setPenState(this.currPenState)},g}(),pe=function(){function g(c){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var i=0;i<C;i++)this.rows.push(new J(c));this.logger=c}var d=g.prototype;return d.reset=function(){for(var i=0;i<C;i++)this.rows[i].clear();this.currRow=14},d.equals=function(i){for(var o=!0,u=0;u<C;u++)if(!this.rows[u].equals(i.rows[u])){o=!1;break}return o},d.copy=function(i){for(var o=0;o<C;o++)this.rows[o].copy(i.rows[o])},d.isEmpty=function(){for(var i=!0,o=0;o<C;o++)if(!this.rows[o].isEmpty()){i=!1;break}return i},d.backSpace=function(){this.rows[this.currRow].backSpace()},d.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},d.insertChar=function(i){this.rows[this.currRow].insertChar(i)},d.setPen=function(i){this.rows[this.currRow].setPenStyles(i)},d.moveCursor=function(i){this.rows[this.currRow].moveCursor(i)},d.setCursor=function(i){this.logger.log(2,"setCursor: "+i),this.rows[this.currRow].setCursor(i)},d.setPAC=function(i){this.logger.log(2,function(){return"pacData = "+JSON.stringify(i)});var o=i.row-1;if(this.nrRollUpRows&&o<this.nrRollUpRows-1&&(o=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==o){for(var u=0;u<C;u++)this.rows[u].clear();var h=this.currRow+1-this.nrRollUpRows,p=this.lastOutputScreen;if(p){var v=p.rows[h].cueStartTime,y=this.logger.time;if(null!==v&&null!==y&&v<y)for(var A=0;A<this.nrRollUpRows;A++)this.rows[o-this.nrRollUpRows+A+1].copy(p.rows[h+A])}}this.currRow=o;var D=this.rows[this.currRow];if(null!==i.indent){var ee=Math.max(i.indent-1,0);D.setCursor(i.indent),i.color=D.chars[ee].penState.foreground}this.setPen({foreground:i.color,underline:i.underline,italics:i.italics,background:"black",flash:!1})},d.setBkgData=function(i){this.logger.log(2,function(){return"bkgData = "+JSON.stringify(i)}),this.backSpace(),this.setPen(i),this.insertChar(32)},d.setRollUpRows=function(i){this.nrRollUpRows=i},d.rollUp=function(){var i=this;if(null!==this.nrRollUpRows){this.logger.log(1,function(){return i.getDisplayText()});var u=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];u.clear(),this.rows.splice(this.currRow,0,u),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},d.getDisplayText=function(i){i=i||!1;for(var o=[],u="",p=0;p<C;p++){var v=this.rows[p].getTextString();v&&o.push(i?"Row "+(p+1)+": '"+v+"'":v.trim())}return o.length>0&&(u=i?"["+o.join(" | ")+"]":o.join("\n")),u},d.getTextAndFormat=function(){return this.rows},g}(),de=function(){function g(c,i,o){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=c,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new pe(o),this.nonDisplayedMemory=new pe(o),this.lastOutputScreen=new pe(o),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=o}var d=g.prototype;return d.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},d.getHandler=function(){return this.outputFilter},d.setHandler=function(i){this.outputFilter=i},d.setPAC=function(i){this.writeScreen.setPAC(i)},d.setBkgData=function(i){this.writeScreen.setBkgData(i)},d.setMode=function(i){i!==this.mode&&(this.mode=i,this.logger.log(2,function(){return"MODE="+i}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=i)},d.insertChars=function(i){for(var o=this,u=0;u<i.length;u++)this.writeScreen.insertChar(i[u]);var h=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,function(){return h+": "+o.writeScreen.getDisplayText(!0)}),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(1,function(){return"DISPLAYED: "+o.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},d.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},d.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},d.ccAOF=function(){},d.ccAON=function(){},d.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},d.ccRU=function(i){this.logger.log(2,"RU("+i+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(i)},d.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},d.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},d.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},d.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},d.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},d.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},d.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},d.ccEOC=function(){var i=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var o=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=o,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,function(){return"DISP: "+i.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},d.ccTO=function(i){this.logger.log(2,"TO("+i+") - Tab Offset"),this.writeScreen.moveCursor(i)},d.ccMIDROW=function(i){var o={flash:!1};if(o.underline=i%2==1,o.italics=i>=46,o.italics)o.foreground="white";else{var u=Math.floor(i/2)-16;o.foreground=["white","green","blue","cyan","red","yellow","magenta"][u]}this.logger.log(2,"MIDROW: "+JSON.stringify(o)),this.writeScreen.setPen(o)},d.outputDataUpdate=function(i){void 0===i&&(i=!1);var o=this.logger.time;null!==o&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,o,this.lastOutputScreen),i&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:o):this.cueStartTime=o,this.lastOutputScreen.copy(this.displayedMemory))},d.cueSplitAtTime=function(i){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,i,this.displayedMemory),this.cueStartTime=i))},g}(),Ke=function(){function g(c,i,o){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;var u=this.logger=new z;this.channels=[null,new de(c,i,u),new de(c+1,o,u)]}var d=g.prototype;return d.getHandler=function(i){return this.channels[i].getHandler()},d.setHandler=function(i,o){this.channels[i].setHandler(o)},d.addData=function(i,o){var u,h,p,v=!1;this.logger.time=i;for(var y=0;y<o.length;y+=2)if(p=127&o[y+1],0!=(h=127&o[y])||0!==p){if(this.logger.log(3,"["+le([o[y],o[y+1]])+"] -> ("+le([h,p])+")"),(u=this.parseCmd(h,p))||(u=this.parseMidrow(h,p)),u||(u=this.parsePAC(h,p)),u||(u=this.parseBackgroundAttributes(h,p)),!u&&(v=this.parseChars(h,p))){var A=this.currentChannel;A&&A>0?this.channels[A].insertChars(v):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!u&&!v&&this.logger.log(2,"Couldn't parse cleaned data "+le([h,p])+" orig: "+le([o[y],o[y+1]]))}},d.parseCmd=function(i,o){var u=this.cmdHistory;if(!((20===i||28===i||21===i||29===i)&&o>=32&&o<=47||(23===i||31===i)&&o>=33&&o<=35))return!1;if(je(i,o,u))return Oe(null,null,u),this.logger.log(3,"Repeated command ("+le([i,o])+") is dropped"),!0;var v=20===i||21===i||23===i?1:2,y=this.channels[v];return 20===i||21===i||28===i||29===i?32===o?y.ccRCL():33===o?y.ccBS():34===o?y.ccAOF():35===o?y.ccAON():36===o?y.ccDER():37===o?y.ccRU(2):38===o?y.ccRU(3):39===o?y.ccRU(4):40===o?y.ccFON():41===o?y.ccRDC():42===o?y.ccTR():43===o?y.ccRTD():44===o?y.ccEDM():45===o?y.ccCR():46===o?y.ccENM():47===o&&y.ccEOC():y.ccTO(o-32),Oe(i,o,u),this.currentChannel=v,!0},d.parseMidrow=function(i,o){var u=0;if((17===i||25===i)&&o>=32&&o<=47){if((u=17===i?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var h=this.channels[u];return!!h&&(h.ccMIDROW(o),this.logger.log(3,"MIDROW ("+le([i,o])+")"),!0)}return!1},d.parsePAC=function(i,o){var h=this.cmdHistory;if(!((i>=17&&i<=23||i>=25&&i<=31)&&o>=64&&o<=127||(16===i||24===i)&&o>=64&&o<=95))return!1;if(je(i,o,h))return Oe(null,null,h),!0;var y=i<=23?1:2,A=this.channels[y];return!!A&&(A.setPAC(this.interpretPAC(o>=64&&o<=95?1===y?R[i]:W[i]:1===y?j[i]:K[i],o)),Oe(i,o,h),this.currentChannel=y,!0)},d.interpretPAC=function(i,o){var u,h={color:null,italics:!1,indent:null,underline:!1,row:i};return h.underline=1==(1&(u=o>95?o-96:o-64)),u<=13?h.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(u/2)]:u<=15?(h.italics=!0,h.color="white"):h.indent=4*Math.floor((u-16)/2),h},d.parseChars=function(i,o){var u,v,h=null,p=null;if(i>=25?(u=2,p=i-8):(u=1,p=i),p>=17&&p<=19?(this.logger.log(2,"Special char '"+oc(v=17===p?o+80:18===p?o+112:o+144)+"' in channel "+u),h=[v]):i>=32&&i<=127&&(h=0===o?[i]:[i,o]),h){var y=le(h);this.logger.log(3,"Char codes =  "+y.join(",")),Oe(i,o,this.cmdHistory)}return h},d.parseBackgroundAttributes=function(i,o){if(!((16===i||24===i)&&o>=32&&o<=47||(23===i||31===i)&&o>=45&&o<=47))return!1;var p,v={};return 16===i||24===i?(p=Math.floor((o-32)/2),v.background=U[p],o%2==1&&(v.background=v.background+"_semi")):45===o?v.background="transparent":(v.foreground="black",47===o&&(v.underline=!0)),this.channels[i<=23?1:2].setBkgData(v),Oe(i,o,this.cmdHistory),!0},d.reset=function(){for(var i=0;i<Object.keys(this.channels).length;i++){var o=this.channels[i];o&&o.reset()}this.cmdHistory={a:null,b:null}},d.cueSplitAtTime=function(i){for(var o=0;o<this.channels.length;o++){var u=this.channels[o];u&&u.cueSplitAtTime(i)}},g}();function Oe(g,d,c){c.a=g,c.b=d}function je(g,d,c){return c.a===g&&c.b===d}var ge=function(){function g(c,i){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=c,this.trackName=i}var d=g.prototype;return d.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},d.newCue=function(i,o,u){(null===this.startTime||this.startTime>i)&&(this.startTime=i),this.endTime=o,this.screen=u,this.timelineController.createCaptionsTrack(this.trackName)},d.reset=function(){this.cueRanges=[],this.startTime=null},g}(),Pe=function(){if(null!=At&&At.VTTCue)return self.VTTCue;var g=["","lr","rl"],d=["start","middle","end","left","right"];function c(p,v){if("string"!=typeof v||!Array.isArray(p))return!1;var y=v.toLowerCase();return!!~p.indexOf(y)&&y}function o(p){return c(d,p)}function u(p){for(var v=arguments.length,y=new Array(v>1?v-1:0),A=1;A<v;A++)y[A-1]=arguments[A];for(var D=1;D<arguments.length;D++){var B=arguments[D];for(var ee in B)p[ee]=B[ee]}return p}function h(p,v,y){var A=this,D={enumerable:!0};A.hasBeenReset=!1;var B="",ee=!1,re=p,ye=v,we=y,Ye=null,Ue="",Xe=!0,vt="auto",wt="start",jt=50,Ht="middle",Nt=50,en="middle";Object.defineProperty(A,"id",u({},D,{get:function(){return B},set:function(yn){B=""+yn}})),Object.defineProperty(A,"pauseOnExit",u({},D,{get:function(){return ee},set:function(yn){ee=!!yn}})),Object.defineProperty(A,"startTime",u({},D,{get:function(){return re},set:function(yn){if("number"!=typeof yn)throw new TypeError("Start time must be set to a number.");re=yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"endTime",u({},D,{get:function(){return ye},set:function(yn){if("number"!=typeof yn)throw new TypeError("End time must be set to a number.");ye=yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"text",u({},D,{get:function(){return we},set:function(yn){we=""+yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"region",u({},D,{get:function(){return Ye},set:function(yn){Ye=yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"vertical",u({},D,{get:function(){return Ue},set:function(yn){var An=function i(p){return c(g,p)}(yn);if(!1===An)throw new SyntaxError("An invalid or illegal string was specified.");Ue=An,this.hasBeenReset=!0}})),Object.defineProperty(A,"snapToLines",u({},D,{get:function(){return Xe},set:function(yn){Xe=!!yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"line",u({},D,{get:function(){return vt},set:function(yn){if("number"!=typeof yn&&"auto"!==yn)throw new SyntaxError("An invalid number or illegal string was specified.");vt=yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"lineAlign",u({},D,{get:function(){return wt},set:function(yn){var An=o(yn);if(!An)throw new SyntaxError("An invalid or illegal string was specified.");wt=An,this.hasBeenReset=!0}})),Object.defineProperty(A,"position",u({},D,{get:function(){return jt},set:function(yn){if(yn<0||yn>100)throw new Error("Position must be between 0 and 100.");jt=yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"positionAlign",u({},D,{get:function(){return Ht},set:function(yn){var An=o(yn);if(!An)throw new SyntaxError("An invalid or illegal string was specified.");Ht=An,this.hasBeenReset=!0}})),Object.defineProperty(A,"size",u({},D,{get:function(){return Nt},set:function(yn){if(yn<0||yn>100)throw new Error("Size must be between 0 and 100.");Nt=yn,this.hasBeenReset=!0}})),Object.defineProperty(A,"align",u({},D,{get:function(){return en},set:function(yn){var An=o(yn);if(!An)throw new SyntaxError("An invalid or illegal string was specified.");en=An,this.hasBeenReset=!0}})),A.displayState=void 0}return h.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},h}(),Te=function(){function g(){}return g.prototype.decode=function(i,o){if(!i)return"";if("string"!=typeof i)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))},g}();function Be(g){function d(i,o,u,h){return 3600*(0|i)+60*(0|o)+(0|u)+parseFloat(h||0)}var c=g.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return c?parseFloat(c[2])>59?d(c[2],c[3],0,c[4]):d(c[1],c[2],c[3],c[4]):null}var P=function(){function g(){this.values=Object.create(null)}var d=g.prototype;return d.set=function(i,o){!this.get(i)&&""!==o&&(this.values[i]=o)},d.get=function(i,o,u){return u?this.has(i)?this.values[i]:o[u]:this.has(i)?this.values[i]:o},d.has=function(i){return i in this.values},d.alt=function(i,o,u){for(var h=0;h<u.length;++h)if(o===u[h]){this.set(i,o);break}},d.integer=function(i,o){/^-?\d+$/.test(o)&&this.set(i,parseInt(o,10))},d.percent=function(i,o){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(o)){var u=parseFloat(o);if(u>=0&&u<=100)return this.set(i,u),!0}return!1},g}();function ie(g,d,c,i){var o=i?g.split(i):[g];for(var u in o)if("string"==typeof o[u]){var h=o[u].split(c);2===h.length&&d(h[0],h[1])}}var oe=new Pe(0,0,""),X="middle"===oe.align?"middle":"center";function Q(g,d,c){var i=g;function o(){var p=Be(g);if(null===p)throw new Error("Malformed timestamp: "+i);return g=g.replace(/^[^\sa-zA-Z-]+/,""),p}function h(){g=g.replace(/^\s+/,"")}if(h(),d.startTime=o(),h(),"--\x3e"!==g.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);g=g.slice(3),h(),d.endTime=o(),h(),function u(p,v){var y=new P;ie(p,function(B,ee){var re;switch(B){case"region":for(var ye=c.length-1;ye>=0;ye--)if(c[ye].id===ee){y.set(B,c[ye].region);break}break;case"vertical":y.alt(B,ee,["rl","lr"]);break;case"line":re=ee.split(","),y.integer(B,re[0]),y.percent(B,re[0])&&y.set("snapToLines",!1),y.alt(B,re[0],["auto"]),2===re.length&&y.alt("lineAlign",re[1],["start",X,"end"]);break;case"position":re=ee.split(","),y.percent(B,re[0]),2===re.length&&y.alt("positionAlign",re[1],["start",X,"end","line-left","line-right","auto"]);break;case"size":y.percent(B,ee);break;case"align":y.alt(B,ee,["start",X,"end","left","right"])}},/:/,/\s/),v.region=y.get("region",null),v.vertical=y.get("vertical","");var A=y.get("line","auto");"auto"===A&&-1===oe.line&&(A=-1),v.line=A,v.lineAlign=y.get("lineAlign","start"),v.snapToLines=y.get("snapToLines",!0),v.size=y.get("size",100),v.align=y.get("align",X);var D=y.get("position","auto");"auto"===D&&50===oe.position&&(D="start"===v.align||"left"===v.align?0:"end"===v.align||"right"===v.align?100:50),v.position=D}(g,d)}function Ae(g){return g.replace(/<br(?: \/)?>/gi,"\n")}var me=function(){function g(){this.state="INITIAL",this.buffer="",this.decoder=new Te,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var d=g.prototype;return d.parse=function(i){var o=this;function u(){var D=o.buffer,B=0;for(D=Ae(D);B<D.length&&"\r"!==D[B]&&"\n"!==D[B];)++B;var ee=D.slice(0,B);return"\r"===D[B]&&++B,"\n"===D[B]&&++B,o.buffer=D.slice(B),ee}i&&(o.buffer+=o.decoder.decode(i,{stream:!0}));try{var p="";if("INITIAL"===o.state){if(!/\r\n|\n/.test(o.buffer))return this;var v=(p=u()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==v||!v[0])throw new Error("Malformed WebVTT signature.");o.state="HEADER"}for(var y=!1;o.buffer;){if(!/\r\n|\n/.test(o.buffer))return this;switch(y?y=!1:p=u(),o.state){case"HEADER":/:/.test(p)?ie(p,function(B,ee){},/:/):p||(o.state="ID");continue;case"NOTE":p||(o.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(p)){o.state="NOTE";break}if(!p)continue;if(o.cue=new Pe(0,0,""),o.state="CUE",-1===p.indexOf("--\x3e")){o.cue.id=p;continue}case"CUE":if(!o.cue){o.state="BADCUE";continue}try{Q(p,o.cue,o.regionList)}catch{o.cue=null,o.state="BADCUE";continue}o.state="CUETEXT";continue;case"CUETEXT":var A=-1!==p.indexOf("--\x3e");if(!p||A&&(y=!0)){o.oncue&&o.cue&&o.oncue(o.cue),o.cue=null,o.state="ID";continue}if(null===o.cue)continue;o.cue.text&&(o.cue.text+="\n"),o.cue.text+=p;continue;case"BADCUE":p||(o.state="ID")}}}catch{"CUETEXT"===o.state&&o.cue&&o.oncue&&o.oncue(o.cue),o.cue=null,o.state="INITIAL"===o.state?"BADWEBVTT":"BADCUE"}return this},d.flush=function(){var i=this;try{if((i.cue||"HEADER"===i.state)&&(i.buffer+="\n\n",i.parse()),"INITIAL"===i.state||"BADWEBVTT"===i.state)throw new Error("Malformed WebVTT signature.")}catch(o){i.onparsingerror&&i.onparsingerror(o)}return i.onflush&&i.onflush(),this},g}(),Fe=/\r\n|\n\r|\n|\r/g,Ie=function(d,c,i){return void 0===i&&(i=0),d.slice(i,i+c.length)===c},ke=function(d){for(var c=5381,i=d.length;i;)c=33*c^d.charCodeAt(--i);return(c>>>0).toString()};function We(g,d,c){return ke(g.toString())+ke(d.toString())+ke(c)}function ht(g,d,c,i,o,u,h){var re,p=new me,v=Io(new Uint8Array(g)).trim().replace(Fe,"\n").split("\n"),y=[],A=d?function ch(g,d){return void 0===d&&(d=1),qc(g,jc,1/d)}(d.baseTime,d.timescale):0,D="00:00.000",B=0,ee=0,ye=!0;p.oncue=function(we){var Ye=c[i],Ue=c.ccOffset,Xe=(B-A)/9e4;if(null!=Ye&&Ye.new&&(void 0!==ee?Ue=c.ccOffset=Ye.start:function(d,c,i){var o=d[c],u=d[o.prevCC];if(!u||!u.new&&o.new)return d.ccOffset=d.presentationOffset=o.start,void(o.new=!1);for(;null!=(h=u)&&h.new;){var h;d.ccOffset+=o.start-u.start,o.new=!1,u=d[(o=u).prevCC]}d.presentationOffset=i}(c,i,Xe)),Xe){if(!d)return void(re=new Error("Missing initPTS for VTT MPEGTS"));Ue=Xe-c.presentationOffset}var vt=we.endTime-we.startTime,wt=Sa(9e4*(we.startTime+Ue-ee),9e4*o)/9e4;we.startTime=Math.max(wt,0),we.endTime=Math.max(wt+vt,0);var jt=we.text.trim();we.text=decodeURIComponent(encodeURIComponent(jt)),we.id||(we.id=We(we.startTime,we.endTime,jt)),we.endTime>0&&y.push(we)},p.onparsingerror=function(we){re=we},p.onflush=function(){re?h(re):u(y)},v.forEach(function(we){if(ye){if(Ie(we,"X-TIMESTAMP-MAP=")){ye=!1,we.slice(16).split(",").forEach(function(Ye){Ie(Ye,"LOCAL:")?D=Ye.slice(6):Ie(Ye,"MPEGTS:")&&(B=parseInt(Ye.slice(7)))});try{ee=function(d){var c=parseInt(d.slice(-3)),i=parseInt(d.slice(-6,-4)),o=parseInt(d.slice(-9,-7)),u=d.length>9?parseInt(d.substring(0,d.indexOf(":"))):0;if(!($(c)&&$(i)&&$(o)&&$(u)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+d);return c+=1e3*i,(c+=6e4*o)+36e5*u}(D)/1e3}catch(Ye){re=Ye}return}""===we&&(ye=!1)}p.parse(we+"\n")}),p.flush()}var ft="stpp.ttml.im1t",lt=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,qt=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Kt={left:"start",center:"center",right:"end",start:"start",end:"end"};function _t(g,d,c,i){var o=gn(new Uint8Array(g),["mdat"]);if(0!==o.length){var u=o.map(function(p){return Io(p)}),h=function Wf(g,d,c,i){return void 0===c&&(c=1),void 0===i&&(i=!1),qc(g,d,1/c,i)}(d.baseTime,1,d.timescale);try{u.forEach(function(p){return c(function Bt(g,d){var o=(new DOMParser).parseFromString(g,"text/xml").getElementsByTagName("tt")[0];if(!o)throw new Error("Invalid ttml");var u={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},h=Object.keys(u).reduce(function(D,B){return D[B]=o.getAttribute("ttp:"+B)||u[B],D},{}),p="preserve"!==o.getAttribute("xml:space"),v=tt(wn(o,"styling","style")),y=tt(wn(o,"layout","region")),A=wn(o,"body","[begin]");return[].map.call(A,function(D){var B=St(D,p);if(!B||!D.hasAttribute("begin"))return null;var ee=ct(D.getAttribute("begin"),h),re=ct(D.getAttribute("dur"),h),ye=ct(D.getAttribute("end"),h);if(null===ee)throw ut(D);if(null===ye){if(null===re)throw ut(D);ye=ee+re}var we=new Pe(ee-d,ye-d,B);we.id=We(we.startTime,we.endTime,we.text);var Xe=function Jt(g,d,c){var i="http://www.w3.org/ns/ttml#styling",o=null,u=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],h=null!=g&&g.hasAttribute("style")?g.getAttribute("style"):null;return h&&c.hasOwnProperty(h)&&(o=c[h]),u.reduce(function(p,v){var y=Ve(d,i,v)||Ve(g,i,v)||Ve(o,i,v);return y&&(p[v]=y),p},{})}(y[D.getAttribute("region")],v[D.getAttribute("style")],v),vt=Xe.textAlign;if(vt){var wt=Kt[vt];wt&&(we.lineAlign=wt),we.align=vt}return _(we,Xe),we}).filter(function(D){return null!==D})}(p,h))})}catch(p){i(p)}}else i(new Error("Could not parse IMSC1 mdat"))}function wn(g,d,c){var i=g.getElementsByTagName(d)[0];return i?[].slice.call(i.querySelectorAll(c)):[]}function tt(g){return g.reduce(function(d,c){var i=c.getAttribute("xml:id");return i&&(d[i]=c),d},{})}function St(g,d){return[].slice.call(g.childNodes).reduce(function(c,i,o){var u;return"br"===i.nodeName&&o?c+"\n":null!=(u=i.childNodes)&&u.length?St(i,d):d?c+i.textContent.trim().replace(/\s+/g," "):c+i.textContent},"")}function Ve(g,d,c){return g&&g.hasAttributeNS(d,c)?g.getAttributeNS(d,c):null}function ut(g){return new Error("Could not parse ttml timestamp "+g)}function ct(g,d){if(!g)return null;var c=Be(g);return null===c&&(lt.test(g)?c=function pt(g,d){var c=lt.exec(g);return 3600*(0|c[1])+60*(0|c[2])+(0|c[3])+((0|c[4])+(0|c[5])/d.subFrameRate)/d.frameRate}(g,d):qt.test(g)&&(c=function Qt(g,d){var c=qt.exec(g),i=Number(c[1]);switch(c[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/d.frameRate;case"t":return i/d.tickRate}return i}(g,d))),c}var on=function(){function g(c){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=c,this.config=c.config,this.Cues=c.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},c.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this),c.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(x.MANIFEST_LOADING,this.onManifestLoading,this),c.on(x.MANIFEST_LOADED,this.onManifestLoaded,this),c.on(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.on(x.FRAG_LOADING,this.onFragLoading,this),c.on(x.FRAG_LOADED,this.onFragLoaded,this),c.on(x.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),c.on(x.FRAG_DECRYPTED,this.onFragDecrypted,this),c.on(x.INIT_PTS_FOUND,this.onInitPtsFound,this),c.on(x.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),c.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this)}var d=g.prototype;return d.destroy=function(){var i=this.hls;i.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),i.off(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),i.off(x.FRAG_LOADING,this.onFragLoading,this),i.off(x.FRAG_LOADED,this.onFragLoaded,this),i.off(x.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),i.off(x.FRAG_DECRYPTED,this.onFragDecrypted,this),i.off(x.INIT_PTS_FOUND,this.onInitPtsFound,this),i.off(x.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),i.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0},d.initCea608Parsers=function(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){var i=new ge(this,"textTrack1"),o=new ge(this,"textTrack2"),u=new ge(this,"textTrack3"),h=new ge(this,"textTrack4");this.cea608Parser1=new Ke(1,i,o),this.cea608Parser2=new Ke(3,u,h)}},d.addCues=function(i,o,u,h,p){for(var v=!1,y=p.length;y--;){var A=p[y],D=Dn(A[0],A[1],o,u);if(D>=0&&(A[0]=Math.min(A[0],o),A[1]=Math.max(A[1],u),v=!0,D/(u-o)>.5))return}if(v||p.push([o,u]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[i],o,u,h);else{var ee=this.Cues.newCue(null,o,u,h);this.hls.trigger(x.CUES_PARSED,{type:"captions",cues:ee,track:i})}},d.onInitPtsFound=function(i,o){var u=this,A=this.unparsedVttFrags;"main"===o.id&&(this.initPTS[o.frag.cc]={baseTime:o.initPTS,timescale:o.timescale}),A.length&&(this.unparsedVttFrags=[],A.forEach(function(D){u.onFragLoaded(x.FRAG_LOADED,D)}))},d.getExistingTrack=function(i,o){var u=this.media;if(u)for(var h=0;h<u.textTracks.length;h++){var p=u.textTracks[h];if(Mt(p,{name:i,lang:o,attrs:{}}))return p}return null},d.createCaptionsTrack=function(i){this.config.renderTextTracksNatively?this.createNativeTrack(i):this.createNonNativeTrack(i)},d.createNativeTrack=function(i){if(!this.captionsTracks[i]){var u=this.captionsTracks,h=this.media,p=this.captionsProperties[i],v=p.label,y=p.languageCode,A=this.getExistingTrack(v,y);if(A)u[i]=A,yl(u[i]),Yi(u[i],h);else{var D=this.createTextTrack("captions",v,y);D&&(D[i]=!0,u[i]=D)}}},d.createNonNativeTrack=function(i){if(!this.nonNativeCaptionsTracks[i]){var o=this.captionsProperties[i];if(o){var h={_id:i,label:o.label,kind:"captions",default:!!o.media&&!!o.media.default,closedCaptions:o.media};this.nonNativeCaptionsTracks[i]=h,this.hls.trigger(x.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[h]})}}},d.createTextTrack=function(i,o,u){var h=this.media;if(h)return h.addTextTrack(i,o,u)},d.onMediaAttaching=function(i,o){this.media=o.media,this._cleanTracks()},d.onMediaDetaching=function(){var i=this.captionsTracks;Object.keys(i).forEach(function(o){yl(i[o]),delete i[o]}),this.nonNativeCaptionsTracks={}},d.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},d._cleanTracks=function(){var i=this.media;if(i){var o=i.textTracks;if(o)for(var u=0;u<o.length;u++)yl(o[u])}},d.onSubtitleTracksUpdated=function(i,o){var u=this,h=o.subtitleTracks||[],p=h.some(function(ee){return ee.textCodec===ft});if(this.config.enableWebVTT||p&&this.config.enableIMSC1){if(tl(this.tracks,h))return void(this.tracks=h);if(this.textTracks=[],this.tracks=h,this.config.renderTextTracksNatively){var y=this.media,A=y?ju(y.textTracks):null;if(this.tracks.forEach(function(ee,re){var ye;if(A){for(var we=null,Ye=0;Ye<A.length;Ye++)if(A[Ye]&&Mt(A[Ye],ee)){we=A[Ye],A[Ye]=null;break}we&&(ye=we)}if(ye)yl(ye);else{var Ue=Sn(ee);(ye=u.createTextTrack(Ue,ee.name,ee.lang))&&(ye.mode="disabled")}ye&&u.textTracks.push(ye)}),null!=A&&A.length){var D=A.filter(function(ee){return null!==ee}).map(function(ee){return ee.label});D.length&&Le.warn("Media element contains unused subtitle tracks: "+D.join(", ")+". Replace media element for each source to clear TextTracks and captions menu.")}}else if(this.tracks.length){var B=this.tracks.map(function(ee){return{label:ee.name,kind:ee.type.toLowerCase(),default:ee.default,subtitleTrack:ee}});this.hls.trigger(x.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:B})}}},d.onManifestLoaded=function(i,o){var u=this;this.config.enableCEA708Captions&&o.captions&&o.captions.forEach(function(h){var p=/(?:CC|SERVICE)([1-4])/.exec(h.instreamId);if(p){var y=u.captionsProperties["textTrack"+p[1]];y&&(y.label=h.name,h.lang&&(y.languageCode=h.lang),y.media=h)}})},d.closedCaptionsForLevel=function(i){var o=this.hls.levels[i.level];return o?.attrs["CLOSED-CAPTIONS"]},d.onFragLoading=function(i,o){this.initCea608Parsers();var u=this.cea608Parser1,h=this.cea608Parser2,v=this.lastSn;if(this.enabled&&u&&h&&o.frag.type===mr_MAIN){var A,D,B=o.frag,ee=B.cc,re=B.sn,ye=null!=(A=null==o||null==(D=o.part)?void 0:D.index)?A:-1;re===v+1||re===v&&ye===this.lastPartIndex+1||ee===this.lastCc||(u.reset(),h.reset()),this.lastCc=ee,this.lastSn=re,this.lastPartIndex=ye}},d.onFragLoaded=function(i,o){var u=o.frag,h=o.payload;if(u.type===mr_SUBTITLE)if(h.byteLength){var p=u.decryptdata;if(null==p||!p.encrypted||"stats"in o){var y=this.tracks[u.level],A=this.vttCCs;A[u.cc]||(A[u.cc]={start:u.start,prevCC:this.prevCC,new:!0},this.prevCC=u.cc),y&&y.textCodec===ft?this._parseIMSC1(u,h):this._parseVTTs(o)}}else this.hls.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u,error:new Error("Empty subtitle payload")})},d._parseIMSC1=function(i,o){var u=this,h=this.hls;_t(o,this.initPTS[i.cc],function(p){u._appendCues(p,i.level),h.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},function(p){Le.log("Failed to parse IMSC1: "+p),h.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:p})})},d._parseVTTs=function(i){var o,u=this,h=i.frag,p=i.payload,v=this.initPTS,y=this.unparsedVttFrags,A=v.length-1;if(v[h.cc]||-1!==A){var D=this.hls;ht(null!=(o=h.initSegment)&&o.data?ci(h.initSegment.data,new Uint8Array(p)):p,this.initPTS[h.cc],this.vttCCs,h.cc,h.start,function(ee){u._appendCues(ee,h.level),D.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:h})},function(ee){var re="Missing initPTS for VTT MPEGTS"===ee.message;re?y.push(i):u._fallbackToIMSC1(h,p),Le.log("Failed to parse VTT cue: "+ee),!(re&&A>h.cc)&&D.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:ee})})}else y.push(i)},d._fallbackToIMSC1=function(i,o){var u=this,h=this.tracks[i.level];h.textCodec||_t(o,this.initPTS[i.cc],function(){h.textCodec=ft,u._parseIMSC1(i,o)},function(){h.textCodec="wvtt"})},d._appendCues=function(i,o){var u=this.hls;if(this.config.renderTextTracksNatively){var h=this.textTracks[o];if(!h||"disabled"===h.mode)return;i.forEach(function(y){return yr(h,y)})}else{var p=this.tracks[o];if(!p)return;u.trigger(x.CUES_PARSED,{type:"subtitles",cues:i,track:p.default?"default":"subtitles"+o})}},d.onFragDecrypted=function(i,o){o.frag.type===mr_SUBTITLE&&this.onFragLoaded(x.FRAG_LOADED,o)},d.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},d.onFragParsingUserdata=function(i,o){this.initCea608Parsers();var u=this.cea608Parser1,h=this.cea608Parser2;if(this.enabled&&u&&h){var p=o.frag,v=o.samples;if(p.type!==mr_MAIN||"NONE"!==this.closedCaptionsForLevel(p))for(var y=0;y<v.length;y++){var A=v[y].bytes;if(A){var D=this.extractCea608Data(A);u.addData(v[y].pts,D[0]),h.addData(v[y].pts,D[1])}}}},d.onBufferFlushing=function(i,o){var u=o.startOffset,h=o.endOffset,p=o.endOffsetSubtitles,v=o.type,y=this.media;if(y&&!(y.currentTime<h)){if(!v||"video"===v){var A=this.captionsTracks;Object.keys(A).forEach(function(B){return Zu(A[B],u,h)})}if(this.config.renderTextTracksNatively&&0===u&&void 0!==p){var D=this.textTracks;Object.keys(D).forEach(function(B){return Zu(D[B],u,p)})}}},d.extractCea608Data=function(i){for(var o=[[],[]],u=31&i[0],h=2,p=0;p<u;p++){var v=i[h++],y=127&i[h++],A=127&i[h++];if((0!==y||0!==A)&&0!=(4&v)){var B=3&v;(0===B||1===B)&&(o[B].push(y),o[B].push(A))}}return o},g}();function Sn(g){return g.characteristics&&/transcribes-spoken-dialog/gi.test(g.characteristics)&&/describes-music-and-sound/gi.test(g.characteristics)?"captions":"subtitles"}function Mt(g,d){return!!g&&g.kind===Sn(d)&&Ll(d,g)}function Dn(g,d,c,i){return Math.min(d,i)-Math.max(g,c)}var kn=function(){function g(c){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=c,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var d=g.prototype;return d.setStreamController=function(i){this.streamController=i},d.destroy=function(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},d.registerListeners=function(){var i=this.hls;i.on(x.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),i.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.on(x.MANIFEST_PARSED,this.onManifestParsed,this),i.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.on(x.BUFFER_CODECS,this.onBufferCodecs,this),i.on(x.MEDIA_DETACHING,this.onMediaDetaching,this)},d.unregisterListener=function(){var i=this.hls;i.off(x.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),i.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.off(x.MANIFEST_PARSED,this.onManifestParsed,this),i.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.off(x.BUFFER_CODECS,this.onBufferCodecs,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this)},d.onFpsDropLevelCapping=function(i,o){var u=this.hls.levels[o.droppedLevel];this.isLevelAllowed(u)&&this.restrictedLevels.push({bitrate:u.bitrate,height:u.height,width:u.width})},d.onMediaAttaching=function(i,o){this.media=o.media instanceof HTMLVideoElement?o.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()},d.onManifestParsed=function(i,o){var u=this.hls;this.restrictedLevels=[],this.firstLevel=o.firstLevel,u.config.capLevelToPlayerSize&&o.video&&this.startCapping()},d.onLevelsUpdated=function(i,o){this.timer&&$(this.autoLevelCapping)&&this.detectPlayerSize()},d.onBufferCodecs=function(i,o){this.hls.config.capLevelToPlayerSize&&o.video&&this.startCapping()},d.onMediaDetaching=function(){this.stopCapping()},d.detectPlayerSize=function(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);var i=this.hls.levels;if(i.length){var o=this.hls,u=this.getMaxLevel(i.length-1);u!==this.autoLevelCapping&&Le.log("Setting autoLevelCapping to "+u+": "+i[u].height+"p@"+i[u].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),o.autoLevelCapping=u,o.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=o.autoLevelCapping}}},d.getMaxLevel=function(i){var o=this,u=this.hls.levels;if(!u.length)return-1;var h=u.filter(function(p,v){return o.isLevelAllowed(p)&&v<=i});return this.clientRect=null,g.getMaxLevelByMediaSize(h,this.mediaWidth,this.mediaHeight)},d.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},d.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},d.getDimensions=function(){if(this.clientRect)return this.clientRect;var i=this.media,o={width:0,height:0};if(i){var u=i.getBoundingClientRect();o.width=u.width,o.height=u.height,!o.width&&!o.height&&(o.width=u.right-u.left||i.width||0,o.height=u.bottom-u.top||i.height||0)}return this.clientRect=o,o},d.isLevelAllowed=function(i){return!this.restrictedLevels.some(function(u){return i.bitrate===u.bitrate&&i.width===u.width&&i.height===u.height})},g.getMaxLevelByMediaSize=function(i,o,u){if(null==i||!i.length)return-1;for(var p=i.length-1,v=Math.max(o,u),y=0;y<i.length;y+=1){var A=i[y];if((A.width>=v||A.height>=v)&&(B=A,!(ee=i[y+1])||B.width!==ee.width||B.height!==ee.height)){p=y;break}}var B,ee;return p},De(g,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var i=1;if(!this.hls.config.ignoreDevicePixelRatio)try{i=self.devicePixelRatio}catch{}return i}}]),g}(),Kn=function(){function g(c){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=c,this.registerListeners()}var d=g.prototype;return d.setStreamController=function(i){this.streamController=i},d.registerListeners=function(){this.hls.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this)},d.unregisterListeners=function(){this.hls.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this)},d.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},d.onMediaAttaching=function(i,o){var u=this.hls.config;if(u.capLevelOnFPSDrop){var h=o.media instanceof self.HTMLVideoElement?o.media:null;this.media=h,h&&"function"==typeof h.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),u.fpsDroppedMonitoringPeriod)}},d.checkFPS=function(i,o,u){var h=performance.now();if(o){if(this.lastTime){var v=u-this.lastDroppedFrames,y=o-this.lastDecodedFrames,A=1e3*v/(h-this.lastTime),D=this.hls;if(D.trigger(x.FPS_DROP,{currentDropped:v,currentDecoded:y,totalDroppedFrames:u}),A>0&&v>D.config.fpsDroppedMonitoringThreshold*y){var B=D.currentLevel;Le.warn("drop FPS ratio greater than max allowed value for currentLevel: "+B),B>0&&(-1===D.autoLevelCapping||D.autoLevelCapping>=B)&&(D.trigger(x.FPS_DROP_LEVEL_CAPPING,{level:B-=1,droppedLevel:D.currentLevel}),D.autoLevelCapping=B,this.streamController.nextLevelSwitch())}}this.lastTime=h,this.lastDroppedFrames=u,this.lastDecodedFrames=o}},d.checkFPSInterval=function(){var i=this.media;if(i)if(this.isVideoPlaybackQualityAvailable){var o=i.getVideoPlaybackQuality();this.checkFPS(i,o.totalVideoFrames,o.droppedVideoFrames)}else this.checkFPS(i,i.webkitDecodedFrameCount,i.webkitDroppedFrameCount)},g}(),zn="[eme]",ar=function(){function g(c){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=g.CDMCleanupPromise?[g.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Le.debug.bind(Le,zn),this.log=Le.log.bind(Le,zn),this.warn=Le.warn.bind(Le,zn),this.error=Le.error.bind(Le,zn),this.hls=c,this.config=c.config,this.registerListeners()}var d=g.prototype;return d.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var i=this.config;i.requestMediaKeySystemAccessFunc=null,i.licenseXhrSetup=i.licenseResponseCallback=void 0,i.drmSystems=i.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},d.registerListeners=function(){this.hls.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(x.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(x.MANIFEST_LOADED,this.onManifestLoaded,this)},d.unregisterListeners=function(){this.hls.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(x.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(x.MANIFEST_LOADED,this.onManifestLoaded,this)},d.getLicenseServerUrl=function(i){var o=this.config,h=o.widevineLicenseUrl,p=o.drmSystems[i];if(p)return p.licenseUrl;if(i===it.WIDEVINE&&h)return h;throw new Error('no license server URL configured for key-system "'+i+'"')},d.getServerCertificateUrl=function(i){var u=this.config.drmSystems[i];if(u)return u.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+i+'"]')},d.attemptKeySystemAccess=function(i){var o=this,u=this.hls.levels,h=function(A,D,B){return!!A&&B.indexOf(A)===D},p=u.map(function(y){return y.audioCodec}).filter(h),v=u.map(function(y){return y.videoCodec}).filter(h);return p.length+v.length===0&&v.push("avc1.42e01e"),new Promise(function(y,A){!function B(ee){var re=ee.shift();o.getMediaKeysPromise(re,p,v).then(function(ye){return y({keySystem:re,mediaKeys:ye})}).catch(function(ye){ee.length?B(ee):A(ye instanceof er?ye:new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_NO_ACCESS,error:ye,fatal:!0},ye.message))})}(i)})},d.requestMediaKeySystemAccess=function(i,o){var u=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof u){var h="Configured requestMediaKeySystemAccess is not a function "+u;return null===xn&&"http:"===self.location.protocol&&(h="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(h))}return u(i,o)},d.getMediaKeysPromise=function(i,o,u){var h=this,p=function Rn(g,d,c,i){var o;switch(g){case it.FAIRPLAY:o=["cenc","sinf"];break;case it.WIDEVINE:case it.PLAYREADY:o=["cenc"];break;case it.CLEARKEY:o=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+g)}return function Mn(g,d,c,i){var o={initDataTypes:g,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:d.map(function(u){return{contentType:'audio/mp4; codecs="'+u+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}}),videoCapabilities:c.map(function(u){return{contentType:'video/mp4; codecs="'+u+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}})};return[o]}(o,d,c,i)}(i,o,u,this.config.drmSystemOptions),v=this.keySystemAccessPromises[i],y=v?.keySystemAccess;if(!y){this.log('Requesting encrypted media "'+i+'" key-system access with config: '+JSON.stringify(p)),y=this.requestMediaKeySystemAccess(i,p);var A=this.keySystemAccessPromises[i]={keySystemAccess:y};return y.catch(function(D){h.log('Failed to obtain access to key-system "'+i+'": '+D)}),y.then(function(D){h.log('Access for key-system "'+D.keySystem+'" obtained');var B=h.fetchServerCertificate(i);return h.log('Create media-keys for "'+i+'"'),A.mediaKeys=D.createMediaKeys().then(function(ee){return h.log('Media-keys created for "'+i+'"'),B.then(function(re){return re?h.setMediaKeysServerCertificate(ee,i,re):ee})}),A.mediaKeys.catch(function(ee){h.error('Failed to create media-keys for "'+i+'"}: '+ee)}),A.mediaKeys})}return y.then(function(){return v.mediaKeys})},d.createMediaKeySessionContext=function(i){var o=i.decryptdata,u=i.keySystem,h=i.mediaKeys;this.log('Creating key-system session "'+u+'" keyId: '+rn_hexDump(o.keyId||[]));var p=h.createSession(),v={decryptdata:o,keySystem:u,mediaKeys:h,mediaKeysSession:p,keyStatus:"status-pending"};return this.mediaKeySessions.push(v),v},d.renewKeySession=function(i){var o=i.decryptdata;if(o.pssh){var u=this.createMediaKeySessionContext(i),h=this.getKeyIdString(o);this.keyIdToKeySessionPromise[h]=this.generateRequestWithPreferredKeySession(u,"cenc",o.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(i)},d.getKeyIdString=function(i){if(!i)throw new Error("Could not read keyId of undefined decryptdata");if(null===i.keyId)throw new Error("keyId is null");return rn_hexDump(i.keyId)},d.updateKeySession=function(i,o){var u,h=i.mediaKeysSession;return this.log('Updating key-session "'+h.sessionId+'" for keyID '+rn_hexDump((null==(u=i.decryptdata)?void 0:u.keyId)||[])+"\n      } (data length: "+(o&&o.byteLength)+")"),h.update(o)},d.selectKeySystemFormat=function(i){var o=Object.keys(i.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+i.sn+" "+i.type+": "+i.level+") key formats "+o.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(o)),this.keyFormatPromise},d.getKeyFormatPromise=function(i){var o=this;return new Promise(function(u,h){var p=Zt(o.config),v=i.map(rt).filter(function(y){return!!y&&-1!==p.indexOf(y)});return o.getKeySystemSelectionPromise(v).then(function(y){var A=y.keySystem,D=_n(A);D?u(D):h(new Error('Unable to find format for key-system "'+A+'"'))}).catch(h)})},d.loadKey=function(i){var o=this,u=i.keyInfo.decryptdata,h=this.getKeyIdString(u),p="(keyId: "+h+' format: "'+u.keyFormat+'" method: '+u.method+" uri: "+u.uri+")";this.log("Starting session for key "+p);var v=this.keyIdToKeySessionPromise[h];return v||(v=this.keyIdToKeySessionPromise[h]=this.getKeySystemForKeyPromise(u).then(function(y){var A=y.keySystem,D=y.mediaKeys;return o.throwIfDestroyed(),o.log("Handle encrypted media sn: "+i.frag.sn+" "+i.frag.type+": "+i.frag.level+" using key "+p),o.attemptSetMediaKeys(A,D).then(function(){o.throwIfDestroyed();var B=o.createMediaKeySessionContext({keySystem:A,mediaKeys:D,decryptdata:u});return o.generateRequestWithPreferredKeySession(B,"cenc",u.pssh,"playlist-key")})})).catch(function(y){return o.handleError(y)}),v},d.throwIfDestroyed=function(i){if(!this.hls)throw new Error("invalid state")},d.handleError=function(i){this.hls&&(this.error(i.message),this.hls.trigger(x.ERROR,i instanceof er?i.data:{type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_NO_KEYS,error:i,fatal:!0}))},d.getKeySystemForKeyPromise=function(i){var o=this.getKeyIdString(i),u=this.keyIdToKeySessionPromise[o];if(!u){var h=rt(i.keyFormat),p=h?[h]:Zt(this.config);return this.attemptKeySystemAccess(p)}return u},d.getKeySystemSelectionPromise=function(i){if(i.length||(i=Zt(this.config)),0===i.length)throw new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(i)},d._onMediaEncrypted=function(i){var o=this,u=i.initDataType,h=i.initData;if(this.debug('"'+i.type+'" event: init data type: "'+u+'"'),null!==h){var p,v;if("sinf"===u&&this.config.drmSystems[it.FAIRPLAY]){var y=kt(new Uint8Array(h));try{var A=Z(JSON.parse(y).sinf),D=Cn(new Uint8Array(A));if(!D)return;p=D.subarray(8,24),v=it.FAIRPLAY}catch{return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var B=function Kl(g){if(!(g instanceof ArrayBuffer)||g.byteLength<32)return null;var d={version:0,systemId:"",kids:null,data:null},c=new DataView(g),i=c.getUint32(0);if(g.byteLength!==i&&i>44)return null;if(1886614376!==c.getUint32(4)||(d.version=c.getUint32(8)>>>24,d.version>1))return null;d.systemId=rn_hexDump(new Uint8Array(g,12,16));var u=c.getUint32(28);if(0===d.version){if(i-32<u)return null;d.data=new Uint8Array(g,32,u)}else if(1===d.version){d.kids=[];for(var h=0;h<u;h++)d.kids.push(new Uint8Array(g,32+16*h,16))}return d}(h);if(null===B)return;0===B.version&&B.systemId===Et_WIDEVINE&&B.data&&(p=B.data.subarray(8,24)),v=function Ot(g){if(g===Et_WIDEVINE)return it.WIDEVINE}(B.systemId)}if(v&&p){for(var Ue,ee=rn_hexDump(p),re=this.keyIdToKeySessionPromise,ye=this.mediaKeySessions,we=re[ee],Ye=function(){var wt=ye[Xe],jt=wt.decryptdata;if(jt.pssh||!jt.keyId)return 0;var Ht=rn_hexDump(jt.keyId);return ee===Ht||-1!==jt.uri.replace(/-/g,"").indexOf(ee)?(we=re[Ht],delete re[Ht],jt.pssh=new Uint8Array(h),jt.keyId=p,we=re[ee]=we.then(function(){return o.generateRequestWithPreferredKeySession(wt,u,h,"encrypted-event-key-match")}),1):void 0},Xe=0;Xe<ye.length&&(0===(Ue=Ye())||1!==Ue);Xe++);we||(we=re[ee]=this.getKeySystemSelectionPromise([v]).then(function(vt){var wt,jt=vt.keySystem,Ht=vt.mediaKeys;o.throwIfDestroyed();var Nt=new Ma("ISO-23001-7",ee,null!=(wt=_n(jt))?wt:"");return Nt.pssh=new Uint8Array(h),Nt.keyId=p,o.attemptSetMediaKeys(jt,Ht).then(function(){o.throwIfDestroyed();var en=o.createMediaKeySessionContext({decryptdata:Nt,keySystem:jt,mediaKeys:Ht});return o.generateRequestWithPreferredKeySession(en,u,h,"encrypted-event-no-match")})})),we.catch(function(vt){return o.handleError(vt)})}}},d._onWaitingForKey=function(i){this.log('"'+i.type+'" event')},d.attemptSetMediaKeys=function(i,o){var u=this,h=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+i+'"');var p=Promise.all(h).then(function(){if(!u.media)throw new Error("Attempted to set mediaKeys without media element attached");return u.media.setMediaKeys(o)});return this.setMediaKeysQueue.push(p),p.then(function(){u.log('Media-keys set for "'+i+'"'),h.push(p),u.setMediaKeysQueue=u.setMediaKeysQueue.filter(function(v){return-1===h.indexOf(v)})})},d.generateRequestWithPreferredKeySession=function(i,o,u,h){var p,v,y=this,A=null==(p=this.config.drmSystems)||null==(v=p[i.keySystem])?void 0:v.generateRequest;if(A)try{var D=A.call(this.hls,o,u,i);if(!D)throw new Error("Invalid response from configured generateRequest filter");o=D.initDataType,u=i.decryptdata.pssh=D.initData?new Uint8Array(D.initData):null}catch(Ue){var B;if(this.warn(Ue.message),null!=(B=this.hls)&&B.config.debug)throw Ue}if(null===u)return this.log('Skipping key-session request for "'+h+'" (no initData)'),Promise.resolve(i);var ee=this.getKeyIdString(i.decryptdata);this.log('Generating key-session request for "'+h+'": '+ee+" (init data type: "+o+" length: "+(u?u.byteLength:null)+")");var re=new ls,ye=i._onmessage=function(Ue){var Xe=i.mediaKeysSession;if(Xe){var vt=Ue.messageType,wt=Ue.message;y.log('"'+vt+'" message event for session "'+Xe.sessionId+'" message size: '+wt.byteLength),"license-request"===vt||"license-renewal"===vt?y.renewLicense(i,wt).catch(function(jt){y.handleError(jt),re.emit("error",jt)}):"license-release"===vt?i.keySystem===it.FAIRPLAY&&(y.updateKeySession(i,nt("acknowledged")),y.removeSession(i)):y.warn('unhandled media key message type "'+vt+'"')}else re.emit("error",new Error("invalid state"))},we=i._onkeystatuseschange=function(Ue){if(i.mediaKeysSession){y.onKeyStatusChange(i);var vt=i.keyStatus;re.emit("keyStatus",vt),"expired"===vt&&(y.warn(i.keySystem+" expired for key "+ee),y.renewKeySession(i))}else re.emit("error",new Error("invalid state"))};i.mediaKeysSession.addEventListener("message",ye),i.mediaKeysSession.addEventListener("keystatuseschange",we);var Ye=new Promise(function(Ue,Xe){re.on("error",Xe),re.on("keyStatus",function(vt){vt.startsWith("usable")?Ue():"output-restricted"===vt?Xe(new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===vt?Xe(new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+vt+'"')):"expired"===vt?Xe(new Error("key expired while generating request")):y.warn('unhandled key status change "'+vt+'"')})});return i.mediaKeysSession.generateRequest(o,u).then(function(){var Ue;y.log('Request generated for key-session "'+(null==(Ue=i.mediaKeysSession)?void 0:Ue.sessionId)+'" keyId: '+ee)}).catch(function(Ue){throw new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_NO_SESSION,error:Ue,fatal:!1},"Error generating key-session request: "+Ue)}).then(function(){return Ye}).catch(function(Ue){throw re.removeAllListeners(),y.removeSession(i),Ue}).then(function(){return re.removeAllListeners(),i})},d.onKeyStatusChange=function(i){var o=this;i.mediaKeysSession.keyStatuses.forEach(function(u,h){o.log('key status change "'+u+'" for keyStatuses keyId: '+rn_hexDump("buffer"in h?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h))+" session keyId: "+rn_hexDump(new Uint8Array(i.decryptdata.keyId||[]))+" uri: "+i.decryptdata.uri),i.keyStatus=u})},d.fetchServerCertificate=function(i){var o=this.config,h=new(0,o.loader)(o),p=this.getServerCertificateUrl(i);return p?(this.log('Fetching server certificate for "'+i+'"'),new Promise(function(v,y){var A={responseType:"arraybuffer",url:p},D=o.certLoadPolicy.default;h.load(A,{loadPolicy:D,timeout:D.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:function(ye,we,Ye,Ue){v(ye.data)},onError:function(ye,we,Ye,Ue){y(new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Ye,response:fr({url:A.url,data:void 0},ye)},'"'+i+'" certificate request failed ('+p+"). Status: "+ye.code+" ("+ye.text+")"))},onTimeout:function(ye,we,Ye){y(new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Ye,response:{url:A.url,data:void 0}},'"'+i+'" certificate request timed out ('+p+")"))},onAbort:function(ye,we,Ye){y(new Error("aborted"))}})})):Promise.resolve()},d.setMediaKeysServerCertificate=function(i,o,u){var h=this;return new Promise(function(p,v){i.setServerCertificate(u).then(function(y){h.log("setServerCertificate "+(y?"success":"not supported by CDM")+" ("+u?.byteLength+') on "'+o+'"'),p(i)}).catch(function(y){v(new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:y,fatal:!0},y.message))})})},d.renewLicense=function(i,o){var u=this;return this.requestLicense(i,new Uint8Array(o)).then(function(h){return u.updateKeySession(i,new Uint8Array(h)).catch(function(p){throw new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:p,fatal:!0},p.message)})})},d.unpackPlayReadyKeyMessage=function(i,o){var u=String.fromCharCode.apply(null,new Uint16Array(o.buffer));if(!u.includes("PlayReadyKeyMessage"))return i.setRequestHeader("Content-Type","text/xml; charset=utf-8"),o;var h=(new DOMParser).parseFromString(u,"application/xml"),p=h.querySelectorAll("HttpHeader");if(p.length>0)for(var v,y=0,A=p.length;y<A;y++){var D,B,ee=null==(D=(v=p[y]).querySelector("name"))?void 0:D.textContent,re=null==(B=v.querySelector("value"))?void 0:B.textContent;ee&&re&&i.setRequestHeader(ee,re)}var ye=h.querySelector("Challenge"),we=ye?.textContent;if(!we)throw new Error("Cannot find <Challenge> in key message");return nt(atob(we))},d.setupLicenseXHR=function(i,o,u,h){var p=this,v=this.config.licenseXhrSetup;return v?Promise.resolve().then(function(){if(!u.decryptdata)throw new Error("Key removed");return v.call(p.hls,i,o,u,h)}).catch(function(y){if(!u.decryptdata)throw y;return i.open("POST",o,!0),v.call(p.hls,i,o,u,h)}).then(function(y){return i.readyState||i.open("POST",o,!0),{xhr:i,licenseChallenge:y||h}}):(i.open("POST",o,!0),Promise.resolve({xhr:i,licenseChallenge:h}))},d.requestLicense=function(i,o){var u=this,h=this.config.keyLoadPolicy.default;return new Promise(function(p,v){var y=u.getLicenseServerUrl(i.keySystem);u.log("Sending license request to URL: "+y);var A=new XMLHttpRequest;A.responseType="arraybuffer",A.onreadystatechange=function(){if(!u.hls||!i.mediaKeysSession)return v(new Error("invalid state"));if(4===A.readyState)if(200===A.status){u._requestLicenseFailureCount=0;var D=A.response;u.log("License received "+(D instanceof ArrayBuffer?D.byteLength:D));var B=u.config.licenseResponseCallback;if(B)try{D=B.call(u.hls,A,y,i)}catch(we){u.error(we)}p(D)}else{var ee=h.errorRetry,re=ee?ee.maxNumRetry:0;u._requestLicenseFailureCount++,u._requestLicenseFailureCount>re||A.status>=400&&A.status<500?v(new er({type:_e.KEY_SYSTEM_ERROR,details:he.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:A,response:{url:y,data:void 0,code:A.status,text:A.statusText}},"License Request XHR failed ("+y+"). Status: "+A.status+" ("+A.statusText+")")):(u.warn("Retrying license request, "+(re-u._requestLicenseFailureCount+1)+" attempts left"),u.requestLicense(i,o).then(p,v))}},i.licenseXhr&&i.licenseXhr.readyState!==XMLHttpRequest.DONE&&i.licenseXhr.abort(),i.licenseXhr=A,u.setupLicenseXHR(A,y,i,o).then(function(D){var B=D.xhr,ee=D.licenseChallenge;i.keySystem==it.PLAYREADY&&(ee=u.unpackPlayReadyKeyMessage(B,ee)),B.send(ee)})})},d.onMediaAttached=function(i,o){if(this.config.emeEnabled){var u=o.media;this.media=u,u.addEventListener("encrypted",this.onMediaEncrypted),u.addEventListener("waitingforkey",this.onWaitingForKey)}},d.onMediaDetached=function(){var i=this,o=this.media,u=this.mediaKeySessions;o&&(o.removeEventListener("encrypted",this.onMediaEncrypted),o.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ma.clearKeyUriToKeyIdMap();var h=u.length;g.CDMCleanupPromise=Promise.all(u.map(function(p){return i.removeSession(p)}).concat(o?.setMediaKeys(null).catch(function(p){i.log("Could not clear media keys: "+p)}))).then(function(){h&&(i.log("finished closing key sessions and clearing media keys"),u.length=0)}).catch(function(p){i.log("Could not close sessions and clear media keys: "+p)})},d.onManifestLoading=function(){this.keyFormatPromise=null},d.onManifestLoaded=function(i,o){var u=o.sessionKeys;if(u&&this.config.emeEnabled&&!this.keyFormatPromise){var h=u.reduce(function(p,v){return-1===p.indexOf(v.keyFormat)&&p.push(v.keyFormat),p},[]);this.log("Selecting key-system from session-keys "+h.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(h)}},d.removeSession=function(i){var o=this,u=i.mediaKeysSession,h=i.licenseXhr;if(u){this.log("Remove licenses and keys and close session "+u.sessionId),i._onmessage&&(u.removeEventListener("message",i._onmessage),i._onmessage=void 0),i._onkeystatuseschange&&(u.removeEventListener("keystatuseschange",i._onkeystatuseschange),i._onkeystatuseschange=void 0),h&&h.readyState!==XMLHttpRequest.DONE&&h.abort(),i.mediaKeysSession=i.decryptdata=i.licenseXhr=void 0;var p=this.mediaKeySessions.indexOf(i);return p>-1&&this.mediaKeySessions.splice(p,1),u.remove().catch(function(v){o.log("Could not remove session: "+v)}).then(function(){return u.close()}).catch(function(v){o.log("Could not close session: "+v)})}},g}();ar.CDMCleanupPromise=void 0;var Un,er=function(g){function d(c,i){var o;return(o=g.call(this,i)||this).data=void 0,c.error||(c.error=new Error(i)),o.data=c,c.err=c.error,o}return E(d,g),d}(T(Error)),rr=function(g){return g.MANIFEST="m",g.AUDIO="a",g.VIDEO="v",g.MUXED="av",g.INIT="i",g.CAPTION="c",g.TIMED_TEXT="tt",g.KEY="k",g.OTHER="o",g}(rr||{}),Ar=function(g){return g.DASH="d",g.HLS="h",g.SMOOTH="s",g.OTHER="o",g}(Ar||{}),an=function(g){return g.OBJECT="CMCD-Object",g.REQUEST="CMCD-Request",g.SESSION="CMCD-Session",g.STATUS="CMCD-Status",g}(an||{}),Gn=((Un={})[an.OBJECT]=["br","d","ot","tb"],Un[an.REQUEST]=["bl","dl","mtp","nor","nrr","su"],Un[an.SESSION]=["cid","pr","sf","sid","st","v"],Un[an.STATUS]=["bs","rtp"],Un),Pn=function g(d,c){this.value=void 0,this.params=void 0,Array.isArray(d)&&(d=d.map(function(i){return i instanceof g?i:new g(i)})),this.value=d,this.params=c},Bn=function(d){this.description=void 0,this.description=d},Ft="Dict";function Gt(g,d,c,i){return new Error("failed to "+g+' "'+function dt(g){return Array.isArray(g)?JSON.stringify(g):g instanceof Map?"Map{}":g instanceof Set?"Set{}":"object"==typeof g?JSON.stringify(g):String(g)}(d)+'" as '+c,{cause:i})}var Re="Bare Item",at="Boolean",Xt="Byte Sequence",dn="Decimal",Ln="Integer";var di=/[\x00-\x1f\x7f]+/,Fi="Token",Si="Key";function Ni(g,d,c){return Gt("serialize",g,d,c)}function us(g){if(!1===ArrayBuffer.isView(g))throw Ni(g,Xt);return":"+function za(g){return btoa(String.fromCharCode.apply(String,g))}(g)+":"}function Wa(g){if(function pr(g){return g<-999999999999999||999999999999999<g}(g))throw Ni(g,Ln);return g.toString()}function sa(g,d){if(g<0)return-sa(-g,d);var c=Math.pow(10,d);if(Math.abs(g*c%1-.5)<Number.EPSILON){var o=Math.floor(g*c);return(o%2==0?o:o+1)/c}return Math.round(g*c)/c}function Po(g){var d=sa(g,3);if(Math.floor(Math.abs(d)).toString().length>12)throw Ni(g,dn);var c=d.toString();return c.includes(".")?c:c+".0"}var cs="String";function Ei(g){var d=function po(g){return g.description||g.toString().slice(7,-1)}(g);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(d))throw Ni(d,Fi);return d}function nl(g){switch(typeof g){case"number":if(!$(g))throw Ni(g,Re);return Number.isInteger(g)?Wa(g):Po(g);case"string":return function eo(g){if(di.test(g))throw Ni(g,cs);return'"'+g.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}(g);case"symbol":return Ei(g);case"boolean":return function zi(g){if("boolean"!=typeof g)throw Ni(g,at);return g?"?1":"?0"}(g);case"object":if(g instanceof Date)return function aa(g){return"@"+Wa(g.getTime()/1e3)}(g);if(g instanceof Uint8Array)return us(g);if(g instanceof Bn)return Ei(g);default:throw Ni(g,Re)}}function rl(g){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(g))throw Ni(g,Si);return g}function ka(g){return null==g?"":Object.entries(g).map(function(d){var c=d[0],i=d[1];return!0===i?";"+rl(c):";"+rl(c)+"="+nl(i)}).join("")}function Pl(g){return g instanceof Pn?""+nl(g.value)+ka(g.params):nl(g)}function Pt(g,d){var c;if(void 0===d&&(d={whitespace:!0}),"object"!=typeof g)throw Ni(g,Ft);var i=g instanceof Map?g.entries():Object.entries(g),o=null!=(c=d)&&c.whitespace?" ":"";return Array.from(i).map(function(u){var h=u[0],p=u[1];p instanceof Pn||(p=new Pn(p));var v=rl(h);return!0===p.value?v+=ka(p.params):(v+="=",Array.isArray(p.value)?v+=function fs(g){return"("+g.value.map(Pl).join(" ")+")"+ka(g.params)}(p):v+=Pl(p)),v}).join(","+o)}var Yn=function(d){return"ot"===d||"sf"===d||"st"===d},hr=function(d){return"number"==typeof d?$(d):null!=d&&""!==d&&!1!==d};var dr=function(d){return Math.round(d)},ai=function(d){return 100*dr(d/100)},Ua={br:dr,d:dr,bl:ai,dl:ai,mtp:ai,nor:function(d,c){return null!=c&&c.baseUrl&&(d=function Lr(g,d){var c=new URL(g),i=new URL(d);if(c.origin!==i.origin)return g;for(var o=c.pathname.split("/").slice(1),u=i.pathname.split("/").slice(1,-1);o[0]===u[0];)o.shift(),u.shift();for(;u.length;)u.shift(),o.unshift("..");return o.join("/")}(d,c.baseUrl)),encodeURIComponent(d)},rtp:ai,tb:dr};function Fl(g,d){return void 0===d&&(d={}),g?function vn(g,d){return Pt(g,d)}(function il(g,d){var c={};if(null==g||"object"!=typeof g)return c;var i=Object.keys(g).sort(),o=_({},Ua,d?.formatters),u=d?.filter;return i.forEach(function(h){if(null==u||!u(h)){var p=g[h],v=o[h];v&&(p=v(p,d)),("v"!==h||1!==p)&&("pr"==h&&1===p||hr(p)&&(Yn(h)&&"string"==typeof p&&(p=new Bn(p)),c[h]=p))}}),c}(g,d),_({whitespace:!1},d)):""}function ap(g,d,c){return _(g,function ac(g,d){var c;if(void 0===d&&(d={}),!g)return{};var i=Object.entries(g),o=Object.entries(Gn).concat(Object.entries((null==(c=d)?void 0:c.customHeaderMap)||{})),u=i.reduce(function(h,p){var v,A=p[0],D=p[1],B=(null==(v=o.find(function(ee){return ee[1].includes(A)}))?void 0:v[0])||an.REQUEST;return null!=h[B]||(h[B]={}),h[B][A]=D,h},{});return Object.entries(u).reduce(function(h,p){return h[p[0]]=Fl(p[1],d),h},{})}(d,c))}var _y="CMCD";var sp=/CMCD=[^&#]+/;function lp(g,d,c){var i=function ld(g,d){if(void 0===d&&(d={}),!g)return"";var c=Fl(g,d);return _y+"="+encodeURIComponent(c)}(d,c);if(!i)return g;if(sp.test(g))return g.replace(sp,i);var o=g.includes("?")?"&":"?";return""+g+o+i}var up=function(){function g(c){var i=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){i.initialized&&(i.starved=!0),i.buffering=!0},this.onPlaying=function(){i.initialized||(i.initialized=!0),i.buffering=!1},this.applyPlaylistData=function(h){try{i.apply(h,{ot:rr.MANIFEST,su:!i.initialized})}catch(p){Le.warn("Could not generate manifest CMCD data.",p)}},this.applyFragmentData=function(h){try{var p=h.frag,v=i.hls.levels[p.level],y=i.getObjectType(p),A={d:1e3*p.duration,ot:y};(y===rr.VIDEO||y===rr.AUDIO||y==rr.MUXED)&&(A.br=v.bitrate/1e3,A.tb=i.getTopBandwidth(y)/1e3,A.bl=i.getBufferLength(y)),i.apply(h,A)}catch(D){Le.warn("Could not generate segment CMCD data.",D)}},this.hls=c;var o=this.config=c.config,u=o.cmcd;null!=u&&(o.pLoader=this.createPlaylistLoader(),o.fLoader=this.createFragmentLoader(),this.sid=u.sessionId||function Ur(){try{return crypto.randomUUID()}catch{try{var g=URL.createObjectURL(new Blob),d=g.toString();return URL.revokeObjectURL(g),d.slice(d.lastIndexOf("/")+1)}catch{var c=(new Date).getTime(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var p=(c+16*Math.random())%16|0;return c=Math.floor(c/16),("x"==h?p:3&p|8).toString(16)});return i}}}(),this.cid=u.contentId,this.useHeaders=!0===u.useHeaders,this.includeKeys=u.includeKeys,this.registerListeners())}var d=g.prototype;return d.registerListeners=function(){var i=this.hls;i.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(x.MEDIA_DETACHED,this.onMediaDetached,this),i.on(x.BUFFER_CREATED,this.onBufferCreated,this)},d.unregisterListeners=function(){var i=this.hls;i.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(x.MEDIA_DETACHED,this.onMediaDetached,this),i.off(x.BUFFER_CREATED,this.onBufferCreated,this)},d.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null},d.onMediaAttached=function(i,o){this.media=o.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},d.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},d.onBufferCreated=function(i,o){var u,h;this.audioBuffer=null==(u=o.tracks.audio)?void 0:u.buffer,this.videoBuffer=null==(h=o.tracks.video)?void 0:h.buffer},d.createData=function(){var i;return{v:1,sf:Ar.HLS,sid:this.sid,cid:this.cid,pr:null==(i=this.media)?void 0:i.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},d.apply=function(i,o){void 0===o&&(o={}),_(o,this.createData()),this.starved&&(o.ot===rr.INIT||o.ot===rr.VIDEO||o.ot===rr.MUXED)&&(o.bs=!0,o.su=!0,this.starved=!1),null==o.su&&(o.su=this.buffering);var h=this.includeKeys;h&&(o=Object.keys(o).reduce(function(p,v){return h.includes(v)&&(p[v]=o[v]),p},{})),this.useHeaders?(i.headers||(i.headers={}),ap(i.headers,o)):i.url=lp(i.url,o)},d.getObjectType=function(i){var o=i.type;return"subtitle"===o?rr.TIMED_TEXT:"initSegment"===i.sn?rr.INIT:"audio"===o?rr.AUDIO:"main"===o?this.hls.audioTracks.length?rr.VIDEO:rr.MUXED:void 0},d.getTopBandwidth=function(i){var u,o=0,h=this.hls;if(i===rr.AUDIO)u=h.audioTracks;else{var p=h.maxAutoLevel;u=h.levels.slice(0,p>-1?p+1:h.levels.length)}for(var A,y=ce(u);!(A=y()).done;){var D=A.value;D.bitrate>o&&(o=D.bitrate)}return o>0?o:NaN},d.getBufferLength=function(i){var o=this.hls.media,u=i===rr.AUDIO?this.audioBuffer:this.videoBuffer;return u&&o?1e3*Mi.bufferInfo(u,o.currentTime,this.config.maxBufferHole).len:NaN},d.createPlaylistLoader=function(){var o=this.applyPlaylistData,u=this.config.pLoader||this.config.loader;return function(){function h(v){this.loader=void 0,this.loader=new u(v)}var p=h.prototype;return p.destroy=function(){this.loader.destroy()},p.abort=function(){this.loader.abort()},p.load=function(y,A,D){o(y),this.loader.load(y,A,D)},De(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},d.createFragmentLoader=function(){var o=this.applyFragmentData,u=this.config.fLoader||this.config.loader;return function(){function h(v){this.loader=void 0,this.loader=new u(v)}var p=h.prototype;return p.destroy=function(){this.loader.destroy()},p.abort=function(){this.loader.abort()},p.load=function(y,A,D){o(y),this.loader.load(y,A,D)},De(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},g}(),Sy=function(){function g(c){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=c,this.log=Le.log.bind(Le,"[content-steering]:"),this.registerListeners()}var d=g.prototype;return d.registerListeners=function(){var i=this.hls;i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.MANIFEST_LOADED,this.onManifestLoaded,this),i.on(x.MANIFEST_PARSED,this.onManifestParsed,this),i.on(x.ERROR,this.onError,this)},d.unregisterListeners=function(){var i=this.hls;i&&(i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),i.off(x.MANIFEST_PARSED,this.onManifestParsed,this),i.off(x.ERROR,this.onError,this))},d.startLoad=function(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){var i=1e3*this.timeToLoad-(performance.now()-this.updated);if(i>0)return void this.scheduleRefresh(this.uri,i)}this.loadSteeringManifest(this.uri)}},d.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},d.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},d.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},d.removeLevel=function(i){var o=this.levels;o&&(this.levels=o.filter(function(u){return u!==i}))},d.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},d.onManifestLoaded=function(i,o){var u=o.contentSteering;null!==u&&(this.pathwayId=u.pathwayId,this.uri=u.uri,this.started&&this.startLoad())},d.onManifestParsed=function(i,o){this.audioTracks=o.audioTracks,this.subtitleTracks=o.subtitleTracks},d.onError=function(i,o){var u=o.errorAction;if(u?.action===co_SendAlternateToPenaltyBox&&u.flags===Mr_MoveAllAlternatesMatchingHost){var h=this.levels,p=this.pathwayPriority,v=this.pathwayId;if(o.context){var y=o.context,A=y.groupId,D=y.pathwayId;A&&h?v=this.getPathwayForGroupId(A,y.type,v):D&&(v=D)}v in this.penalizedPathways||(this.penalizedPathways[v]=performance.now()),!p&&h&&(p=h.reduce(function(ee,re){return-1===ee.indexOf(re.pathwayId)&&ee.push(re.pathwayId),ee},[])),p&&p.length>1&&(this.updatePathwayPriority(p),u.resolved=this.pathwayId!==v),u.resolved||Le.warn("Could not resolve "+o.details+' ("'+o.error.message+'") with content-steering for Pathway: '+v+" levels: "+(h&&h.length)+" priorities: "+JSON.stringify(p)+" penalized: "+JSON.stringify(this.penalizedPathways))}},d.filterParsedLevels=function(i){this.levels=i;var o=this.getLevelsForPathway(this.pathwayId);if(0===o.length){var u=i[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+u+'"'),o=this.getLevelsForPathway(u),this.pathwayId=u}return o.length!==i.length?(this.log("Found "+o.length+"/"+i.length+' levels in Pathway "'+this.pathwayId+'"'),o):i},d.getLevelsForPathway=function(i){return null===this.levels?[]:this.levels.filter(function(o){return i===o.pathwayId})},d.updatePathwayPriority=function(i){this.pathwayPriority=i;var o,u=this.penalizedPathways,h=performance.now();Object.keys(u).forEach(function(B){h-u[B]>3e5&&delete u[B]});for(var p=0;p<i.length;p++){var v=i[p];if(!(v in u)){if(v===this.pathwayId)return;var y=this.hls.nextLoadLevel,A=this.hls.levels[y];if((o=this.getLevelsForPathway(v)).length>0){this.log('Setting Pathway to "'+v+'"'),this.pathwayId=v,Zf(o),this.hls.trigger(x.LEVELS_UPDATED,{levels:o});var D=this.hls.levels[y];A&&D&&this.levels&&(D.attrs["STABLE-VARIANT-ID"]!==A.attrs["STABLE-VARIANT-ID"]&&D.bitrate!==A.bitrate&&this.log("Unstable Pathways change from bitrate "+A.bitrate+" to "+D.bitrate),this.hls.nextLoadLevel=y);break}}}},d.getPathwayForGroupId=function(i,o,u){for(var h=this.getLevelsForPathway(u).concat(this.levels||[]),p=0;p<h.length;p++)if(o===Gr_AUDIO_TRACK&&h[p].hasAudioGroup(i)||o===Gr_SUBTITLE_TRACK&&h[p].hasSubtitleGroup(i))return h[p].pathwayId;return u},d.clonePathways=function(i){var o=this,u=this.levels;if(u){var h={},p={};i.forEach(function(v){var y=v.ID,A=v["BASE-ID"],D=v["URI-REPLACEMENT"];if(!u.some(function(ee){return ee.pathwayId===y})){var B=o.getLevelsForPathway(A).map(function(ee){var re=new ze(ee.attrs);re["PATHWAY-ID"]=y;var ye=re.AUDIO&&re.AUDIO+"_clone_"+y,we=re.SUBTITLES&&re.SUBTITLES+"_clone_"+y;ye&&(h[re.AUDIO]=ye,re.AUDIO=ye),we&&(p[re.SUBTITLES]=we,re.SUBTITLES=we);var Ye=Tu(ee.uri,re["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",D),Ue=new ui({attrs:re,audioCodec:ee.audioCodec,bitrate:ee.bitrate,height:ee.height,name:ee.name,url:Ye,videoCodec:ee.videoCodec,width:ee.width});if(ee.audioGroups)for(var Xe=1;Xe<ee.audioGroups.length;Xe++)Ue.addGroupId("audio",ee.audioGroups[Xe]+"_clone_"+y);if(ee.subtitleGroups)for(var vt=1;vt<ee.subtitleGroups.length;vt++)Ue.addGroupId("text",ee.subtitleGroups[vt]+"_clone_"+y);return Ue});u.push.apply(u,B),Jc(o.audioTracks,h,D,y),Jc(o.subtitleTracks,p,D,y)}})}},d.loadSteeringManifest=function(i){var p,o=this,u=this.hls.config,h=u.loader;this.loader&&this.loader.destroy(),this.loader=new h(u);try{p=new self.URL(i)}catch{return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+i)}if("data:"!==p.protocol){var v=0|(this.hls.bandwidthEstimate||u.abrEwmaDefaultEstimate);p.searchParams.set("_HLS_pathway",this.pathwayId),p.searchParams.set("_HLS_throughput",""+v)}var y={responseType:"json",url:p.href},A=u.steeringManifestLoadPolicy.default,D=A.errorRetry||A.timeoutRetry||{},B={loadPolicy:A,timeout:A.maxLoadTimeMs,maxRetry:D.maxNumRetry||0,retryDelay:D.retryDelayMs||0,maxRetryDelay:D.maxRetryDelayMs||0},ee={onSuccess:function(ye,we,Ye,Ue){o.log('Loaded steering manifest: "'+p+'"');var Xe=ye.data;if(1===Xe.VERSION){o.updated=performance.now(),o.timeToLoad=Xe.TTL;var vt=Xe["RELOAD-URI"],wt=Xe["PATHWAY-CLONES"],jt=Xe["PATHWAY-PRIORITY"];if(vt)try{o.uri=new self.URL(vt,p).href}catch{return o.enabled=!1,void o.log("Failed to parse Steering Manifest RELOAD-URI: "+vt)}o.scheduleRefresh(o.uri||Ye.url),wt&&o.clonePathways(wt);var Ht={steeringManifest:Xe,url:p.toString()};o.hls.trigger(x.STEERING_MANIFEST_LOADED,Ht),jt&&o.updatePathwayPriority(jt)}else o.log("Steering VERSION "+Xe.VERSION+" not supported!")},onError:function(ye,we,Ye,Ue){if(o.log("Error loading steering manifest: "+ye.code+" "+ye.text+" ("+we.url+")"),o.stopLoad(),410===ye.code)return o.enabled=!1,void o.log("Steering manifest "+we.url+" no longer available");var Xe=1e3*o.timeToLoad;if(429!==ye.code)o.scheduleRefresh(o.uri||we.url,Xe);else{var vt=o.loader;if("function"==typeof vt?.getResponseHeader){var wt=vt.getResponseHeader("Retry-After");wt&&(Xe=1e3*parseFloat(wt))}o.log("Steering manifest "+we.url+" rate limited")}},onTimeout:function(ye,we,Ye){o.log("Timeout loading steering manifest ("+we.url+")"),o.scheduleRefresh(o.uri||we.url)}};this.log("Requesting steering manifest: "+p),this.loader.load(y,B,ee)},d.scheduleRefresh=function(i,o){var u=this;void 0===o&&(o=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout(function(){var h,p=null==(h=u.hls)?void 0:h.media;!p||p.ended?u.scheduleRefresh(i,1e3*u.timeToLoad):u.loadSteeringManifest(i)},o)},g}();function Jc(g,d,c,i){g&&Object.keys(d).forEach(function(o){var u=g.filter(function(h){return h.groupId===o}).map(function(h){var p=_({},h);return p.details=void 0,p.attrs=new ze(p.attrs),p.url=p.attrs.URI=Tu(h.url,h.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",c),p.groupId=p.attrs["GROUP-ID"]=d[o],p.attrs["PATHWAY-ID"]=i,p});g.push.apply(g,u)})}function Tu(g,d,c,i){var p,o=i.HOST,u=i.PARAMS,h=i[c];d&&(p=h?.[d],p&&(g=p));var v=new self.URL(g);return o&&!p&&(v.host=o),u&&Object.keys(u).sort().forEach(function(y){y&&v.searchParams.set(y,u[y])}),v.href}var cp=/^age:\s*[\d.]+\s*$/im,Su=function(){function g(c){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=c&&c.xhrSetup||null,this.stats=new Tt,this.retryDelay=0}var d=g.prototype;return d.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null},d.abortInternal=function(){var i=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),i&&(i.onreadystatechange=null,i.onprogress=null,4!==i.readyState&&(this.stats.aborted=!0,i.abort()))},d.abort=function(){var i;this.abortInternal(),null!=(i=this.callbacks)&&i.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},d.load=function(i,o,u){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=i,this.config=o,this.callbacks=u,this.loadInternal()},d.loadInternal=function(){var i=this,o=this.config,u=this.context;if(o&&u){var h=this.loader=new self.XMLHttpRequest,p=this.stats;p.loading.first=0,p.loaded=0,p.aborted=!1;var v=this.xhrSetup;v?Promise.resolve().then(function(){if(!i.stats.aborted)return v(h,u.url)}).catch(function(y){return h.open("GET",u.url,!0),v(h,u.url)}).then(function(){i.stats.aborted||i.openAndSendXhr(h,u,o)}).catch(function(y){i.callbacks.onError({code:h.status,text:y.message},u,h,p)}):this.openAndSendXhr(h,u,o)}},d.openAndSendXhr=function(i,o,u){i.readyState||i.open("GET",o.url,!0);var h=o.headers,p=u.loadPolicy,v=p.maxTimeToFirstByteMs,y=p.maxLoadTimeMs;if(h)for(var A in h)i.setRequestHeader(A,h[A]);o.rangeEnd&&i.setRequestHeader("Range","bytes="+o.rangeStart+"-"+(o.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=o.responseType,self.clearTimeout(this.requestTimeout),u.timeout=v&&$(v)?v:y,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),u.timeout),i.send()},d.readystatechange=function(){var i=this.context,o=this.loader,u=this.stats;if(i&&o){var h=o.readyState,p=this.config;if(!u.aborted&&h>=2&&(0===u.loading.first&&(u.loading.first=Math.max(self.performance.now(),u.loading.start),p.timeout!==p.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),p.timeout=p.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),p.loadPolicy.maxLoadTimeMs-(u.loading.first-u.loading.start)))),4===h)){self.clearTimeout(this.requestTimeout),o.onreadystatechange=null,o.onprogress=null;var v=o.status,y="text"!==o.responseType;if(v>=200&&v<300&&(y&&o.response||null!==o.responseText)){u.loading.end=Math.max(self.performance.now(),u.loading.first);var A=y?o.response:o.responseText;if(u.loaded=u.total="arraybuffer"===o.responseType?A.byteLength:A.length,u.bwEstimate=8e3*u.total/(u.loading.end-u.loading.first),!this.callbacks)return;var B=this.callbacks.onProgress;if(B&&B(u,i,A,o),!this.callbacks)return;this.callbacks.onSuccess({url:o.responseURL,data:A,code:v},u,i,o)}else{var re=p.loadPolicy.errorRetry;ru(re,u.retry,!1,{url:i.url,data:void 0,code:v})?this.retry(re):(Le.error(v+" while loading "+i.url),this.callbacks.onError({code:v,text:o.statusText},i,o,u))}}}},d.loadtimeout=function(){var i,o=null==(i=this.config)?void 0:i.loadPolicy.timeoutRetry;if(ru(o,this.stats.retry,!0))this.retry(o);else{var h;Le.warn("timeout while loading "+(null==(h=this.context)?void 0:h.url));var p=this.callbacks;p&&(this.abortInternal(),p.onTimeout(this.stats,this.context,this.loader))}},d.retry=function(i){var o=this.context,u=this.stats;this.retryDelay=ns(i,u.retry),u.retry++,Le.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+o?.url+", retrying "+u.retry+"/"+i.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},d.loadprogress=function(i){var o=this.stats;o.loaded=i.loaded,i.lengthComputable&&(o.total=i.total)},d.getCacheAge=function(){var i=null;if(this.loader&&cp.test(this.loader.getAllResponseHeaders())){var o=this.loader.getResponseHeader("age");i=o?parseFloat(o):null}return i},d.getResponseHeader=function(i){return this.loader&&new RegExp("^"+i+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(i):null},g}();var ef=/(\d+)-(\d+)\/(\d+)/,fp=function(){function g(c){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=c.fetchSetup||ds,this.controller=new self.AbortController,this.stats=new Tt}var d=g.prototype;return d.destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},d.abortInternal=function(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())},d.abort=function(){var i;this.abortInternal(),null!=(i=this.callbacks)&&i.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},d.load=function(i,o,u){var h=this,p=this.stats;if(p.loading.start)throw new Error("Loader can only be used once.");p.loading.start=self.performance.now();var v=function ph(g,d){var c={method:"GET",mode:"cors",credentials:"same-origin",signal:d,headers:new self.Headers(_({},g.headers))};return g.rangeEnd&&c.headers.set("Range","bytes="+g.rangeStart+"-"+String(g.rangeEnd-1)),c}(i,this.controller.signal),y=u.onProgress,A="arraybuffer"===i.responseType,D=A?"byteLength":"length",B=o.loadPolicy,ee=B.maxTimeToFirstByteMs,re=B.maxLoadTimeMs;this.context=i,this.config=o,this.callbacks=u,this.request=this.fetchSetup(i,v),self.clearTimeout(this.requestTimeout),o.timeout=ee&&$(ee)?ee:re,this.requestTimeout=self.setTimeout(function(){h.abortInternal(),u.onTimeout(p,i,h.response)},o.timeout),self.fetch(this.request).then(function(ye){h.response=h.loader=ye;var we=Math.max(self.performance.now(),p.loading.start);if(self.clearTimeout(h.requestTimeout),o.timeout=re,h.requestTimeout=self.setTimeout(function(){h.abortInternal(),u.onTimeout(p,i,h.response)},re-(we-p.loading.start)),!ye.ok)throw new hp(ye.statusText||"fetch, bad network response",ye.status,ye);return p.loading.first=we,p.total=function dp(g){var d=g.get("Content-Range");if(d){var c=function mh(g){var d=ef.exec(g);if(d)return parseInt(d[2])-parseInt(d[1])+1}(d);if($(c))return c}var i=g.get("Content-Length");if(i)return parseInt(i)}(ye.headers)||p.total,y&&$(o.highWaterMark)?h.loadProgressively(ye,p,i,o.highWaterMark,y):A?ye.arrayBuffer():"json"===i.responseType?ye.json():ye.text()}).then(function(ye){var we=h.response;if(!we)throw new Error("loader destroyed");self.clearTimeout(h.requestTimeout),p.loading.end=Math.max(self.performance.now(),p.loading.first);var Ye=ye[D];Ye&&(p.loaded=p.total=Ye);var Ue={url:we.url,data:ye,code:we.status};y&&!$(o.highWaterMark)&&y(p,i,ye,we),u.onSuccess(Ue,p,i,we)}).catch(function(ye){self.clearTimeout(h.requestTimeout),p.aborted||u.onError({code:ye&&ye.code||0,text:ye?ye.message:null},i,ye?ye.details:null,p)})},d.getCacheAge=function(){var i=null;if(this.response){var o=this.response.headers.get("age");i=o?parseFloat(o):null}return i},d.getResponseHeader=function(i){return this.response?this.response.headers.get(i):null},d.loadProgressively=function(i,o,u,h,p){void 0===h&&(h=0);var v=new Vo,y=i.body.getReader();return function D(){return y.read().then(function(B){if(B.done)return v.dataLength&&p(o,u,v.flush(),i),Promise.resolve(new ArrayBuffer(0));var ee=B.value,re=ee.length;return o.loaded+=re,re<h||v.dataLength?(v.push(ee),v.dataLength>=h&&p(o,u,v.flush(),i)):p(o,u,ee,i),D()}).catch(function(){return Promise.reject()})}()},g}();function ds(g,d){return new self.Request(g.url,d)}var hp=function(g){function d(c,i,o){var u;return(u=g.call(this,c)||this).code=void 0,u.details=void 0,u.code=i,u.details=o,u}return E(d,g),d}(T(Error)),tf=/\s/,cd={newCue:function(d,c,i,o){for(var h,p,v,y,A,u=[],D=self.VTTCue||self.TextTrackCue,B=0;B<o.rows.length;B++)if(v=!0,y=0,A="",!(h=o.rows[B]).isEmpty()){for(var ee,re=0;re<h.chars.length;re++)tf.test(h.chars[re].uchar)&&v?y++:(A+=h.chars[re].uchar,v=!1);h.cueStartTime=c,c===i&&(i+=1e-4),y>=16?y--:y++;var ye=Ae(A.trim()),we=We(c,i,ye);null!=d&&null!=(ee=d.cues)&&ee.getCueById(we)||((p=new D(c,i,ye)).id=we,p.line=B+1,p.align="left",p.position=10+Math.min(80,10*Math.floor(8*y/32)),u.push(p))}return d&&u.length&&(u.sort(function(Ye,Ue){return"auto"===Ye.line||"auto"===Ue.line?0:Ye.line>8&&Ue.line>8?Ue.line-Ye.line:Ye.line-Ue.line}),u.forEach(function(Ye){return yr(d,Ye)})),u}},sc=fr(fr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Su,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Fc,bufferController:_u,capLevelController:kn,errorController:Sl,fpsController:Kn,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:xn,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},function fd(){return{cueHandler:cd,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:od,subtitleTrackController:$c,timelineController:on,audioStreamController:id,audioTrackController:gh,emeController:ar,cmcdController:up,contentSteeringController:Sy});function nf(g){return g&&"object"==typeof g?Array.isArray(g)?g.map(nf):Object.keys(g).reduce(function(d,c){return d[c]=nf(g[c]),d},{}):g}function yh(g){var d=g.loader;d!==fp&&d!==Su?(Le.log("[config]: Custom loader detected, cannot enable progressive streaming"),g.progressive=!1):function ud(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}()&&(g.loader=fp,g.progressive=!0,g.enableSoftwareAES=!0,Le.log("[config]: Progressive streaming enabled, using FetchLoader"))}var rf,Eh=function(g){function d(i,o){var u;return(u=g.call(this,i,"[level-controller]")||this)._levels=[],u._firstLevel=-1,u._maxAutoLevel=-1,u._startLevel=void 0,u.currentLevel=null,u.currentLevelIndex=-1,u.manualLevelIndex=-1,u.steering=void 0,u.onParsedComplete=void 0,u.steering=o,u._registerListeners(),u}E(d,g);var c=d.prototype;return c._registerListeners=function(){var o=this.hls;o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_LOADED,this.onManifestLoaded,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this),o.on(x.ERROR,this.onError,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this),o.off(x.ERROR,this.onError,this)},c.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),g.prototype.destroy.call(this)},c.stopLoad=function(){this._levels.forEach(function(u){u.loadError=0,u.fragmentError=0}),g.prototype.stopLoad.call(this)},c.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1},c.onManifestLoading=function(o,u){this.resetLevels()},c.onManifestLoaded=function(o,u){var h=this.hls.config.preferManagedMediaSource,p=[],v={},y={},A=!1,D=!1,B=!1;u.levels.forEach(function(ee){var re,ye,we=ee.attrs,Ye=ee.audioCodec,Ue=ee.videoCodec;-1!==(null==(re=Ye)?void 0:re.indexOf("mp4a.40.34"))&&(rf||(rf=/chrome|firefox/i.test(navigator.userAgent)),rf&&(ee.audioCodec=Ye=void 0)),Ye&&(ee.audioCodec=Ye=qo(Ye,h)),0===(null==(ye=Ue)?void 0:ye.indexOf("avc1"))&&(Ue=ee.videoCodec=function Na(g){var d=g.split(".");if(d.length>2){var c=d.shift()+".";return(c+=parseInt(d.shift()).toString(16))+("000"+parseInt(d.shift()).toString(16)).slice(-4)}return g}(Ue));var wt=ee.unknownCodecs;if(A||(A=!(!ee.width||!ee.height)),D||(D=!!Ue),B||(B=!!Ye),!(null!=wt&&wt.length||Ye&&!qr(Ye,"audio",h)||Ue&&!qr(Ue,"video",h))){var $n=(we["PATHWAY-ID"]||".")+"-"+ee.bitrate+"-"+we.RESOLUTION+"-"+we["FRAME-RATE"]+"-"+we.CODECS+"-"+we["VIDEO-RANGE"]+"-"+we["HDCP-LEVEL"];if(v[$n])if(v[$n].uri===ee.url||ee.attrs["PATHWAY-ID"])v[$n].addGroupId("audio",we.AUDIO),v[$n].addGroupId("text",we.SUBTITLES);else{var nr=y[$n]+=1;ee.attrs["PATHWAY-ID"]=new Array(nr+1).join(".");var Hr=new ui(ee);v[$n]=Hr,p.push(Hr)}else{var vr=new ui(ee);v[$n]=vr,y[$n]=1,p.push(vr)}}}),this.filterAndSortMediaOptions(p,u,A,D,B)},c.filterAndSortMediaOptions=function(o,u,h,p,v){var y=this,A=[],D=[],B=o;if((h||p)&&v&&(B=B.filter(function(Nt){return(!!Nt.videoCodec||!(!Nt.width||!Nt.height))&&function Rc(g){return!!g&&Es.indexOf(g)>-1}(Nt.videoRange)})),0!==B.length){if(u.audioTracks){var ee=this.hls.config.preferManagedMediaSource;_h(A=u.audioTracks.filter(function(Nt){return!Nt.audioCodec||qr(Nt.audioCodec,"audio",ee)}))}u.subtitles&&_h(D=u.subtitles);var re=B.slice(0);B.sort(function(Nt,en){if(Nt.attrs["HDCP-LEVEL"]!==en.attrs["HDCP-LEVEL"])return(Nt.attrs["HDCP-LEVEL"]||"")>(en.attrs["HDCP-LEVEL"]||"")?1:-1;if(h&&Nt.height!==en.height)return Nt.height-en.height;if(Nt.frameRate!==en.frameRate)return Nt.frameRate-en.frameRate;if(Nt.videoRange!==en.videoRange)return Es.indexOf(Nt.videoRange)-Es.indexOf(en.videoRange);if(Nt.videoCodec!==en.videoCodec){var tn=Kr(Nt.videoCodec),yn=Kr(en.videoCodec);if(tn!==yn)return yn-tn}if(Nt.uri===en.uri&&Nt.codecSet!==en.codecSet){var An=or(Nt.codecSet),$n=or(en.codecSet);if(An!==$n)return $n-An}return Nt.averageBitrate!==en.averageBitrate?Nt.averageBitrate-en.averageBitrate:0});var ye=re[0];if(this.steering&&(B=this.steering.filterParsedLevels(B)).length!==re.length)for(var we=0;we<re.length;we++)if(re[we].pathwayId===B[0].pathwayId){ye=re[we];break}this._levels=B;for(var Ye=0;Ye<B.length;Ye++)if(B[Ye]===ye){var Ue;this._firstLevel=Ye;var Xe=ye.bitrate,vt=this.hls.bandwidthEstimate;if(this.log("manifest loaded, "+B.length+" level(s) found, first bitrate: "+Xe),void 0===(null==(Ue=this.hls.userConfig)?void 0:Ue.abrEwmaDefaultEstimate)){var wt=Math.min(Xe,this.hls.config.abrEwmaDefaultEstimateMax);wt>vt&&vt===sc.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=wt)}break}var Ht={levels:B,audioTracks:A,subtitleTracks:D,sessionData:u.sessionData,sessionKeys:u.sessionKeys,firstLevel:this._firstLevel,stats:u.stats,audio:v,video:p,altAudio:!(v&&!p)&&A.some(function(Nt){return!!Nt.url})};this.hls.trigger(x.MANIFEST_PARSED,Ht),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then(function(){if(y.hls){u.levels.length&&y.warn("One or more CODECS in variant not supported: "+JSON.stringify(u.levels[0].attrs));var Nt=new Error("no level with compatible codecs found in manifest");y.hls.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:u.url,error:Nt,reason:Nt.message})}})},c.onError=function(o,u){u.fatal||!u.context||u.context.type===Gr_LEVEL&&u.context.level===this.level&&this.checkRetry(u)},c.onFragBuffered=function(o,u){var h=u.frag;if(void 0!==h&&h.type===mr_MAIN){var p=h.elementaryStreams;if(!Object.keys(p).some(function(y){return!!p[y]}))return;var v=this._levels[h.level];null!=v&&v.loadError&&(this.log("Resetting level error count of "+v.loadError+" on frag buffered"),v.loadError=0)}},c.onLevelLoaded=function(o,u){var h,A,p=u.level,v=u.details,y=this._levels[p];if(!y)return this.warn("Invalid level index "+p),void(null!=(A=u.deliveryDirectives)&&A.skip&&(v.deltaUpdateFailed=!0));p===this.currentLevelIndex?(0===y.fragmentError&&(y.loadError=0),this.playlistLoaded(p,u,y.details)):null!=(h=u.deliveryDirectives)&&h.skip&&(v.deltaUpdateFailed=!0)},c.loadPlaylist=function(o){g.prototype.loadPlaylist.call(this);var u=this.currentLevelIndex,h=this.currentLevel;if(h&&this.shouldLoadPlaylist(h)){var p=h.uri;if(o)try{p=o.addDirectives(p)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}var v=h.attrs["PATHWAY-ID"];this.log("Loading level index "+u+(void 0!==o?.msn?" at sn "+o.msn+" part "+o.part:"")+" with"+(v?" Pathway "+v:"")+" "+p),this.clearTimer(),this.hls.trigger(x.LEVEL_LOADING,{url:p,level:u,pathwayId:h.attrs["PATHWAY-ID"],id:0,deliveryDirectives:o||null})}},c.removeLevel=function(o){var h,u=this,p=this._levels.filter(function(v,y){return y!==o||(u.steering&&u.steering.removeLevel(v),v===u.currentLevel&&(u.currentLevel=null,u.currentLevelIndex=-1,v.details&&v.details.fragments.forEach(function(A){return A.level=-1})),!1)});Zf(p),this._levels=p,this.currentLevelIndex>-1&&null!=(h=this.currentLevel)&&h.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(x.LEVELS_UPDATED,{levels:p})},c.onLevelsUpdated=function(o,u){this._levels=u.levels},c.checkMaxAutoUpdated=function(){var o=this.hls,u=o.autoLevelCapping,h=o.maxAutoLevel,p=o.maxHdcpLevel;this._maxAutoLevel!==h&&(this._maxAutoLevel=h,this.hls.trigger(x.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:u,levels:this.levels,maxAutoLevel:h,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:p}))},De(d,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(o){var u=this._levels;if(0!==u.length){if(o<0||o>=u.length){var h=new Error("invalid level idx"),p=o<0;if(this.hls.trigger(x.ERROR,{type:_e.OTHER_ERROR,details:he.LEVEL_SWITCH_ERROR,level:o,fatal:p,error:h,reason:h.message}),p)return;o=Math.min(o,u.length-1)}var v=this.currentLevelIndex,y=this.currentLevel,A=y?y.attrs["PATHWAY-ID"]:void 0,D=u[o],B=D.attrs["PATHWAY-ID"];if(this.currentLevelIndex=o,this.currentLevel=D,v!==o||!D.details||!y||A!==B){this.log("Switching to level "+o+" ("+(D.height?D.height+"p ":"")+(D.videoRange?D.videoRange+" ":"")+(D.codecSet?D.codecSet+" ":"")+"@"+D.bitrate+")"+(B?" with Pathway "+B:"")+" from level "+v+(A?" with Pathway "+A:"")),this.hls.trigger(x.LEVEL_SWITCHING,{level:o,attrs:D.attrs,details:D.details,bitrate:D.bitrate,averageBitrate:D.averageBitrate,maxBitrate:D.maxBitrate,realBitrate:D.realBitrate,width:D.width,height:D.height,codecSet:D.codecSet,audioCodec:D.audioCodec,videoCodec:D.videoCodec,audioGroups:D.audioGroups,subtitleGroups:D.subtitleGroups,loaded:D.loaded,loadError:D.loadError,fragmentError:D.fragmentError,name:D.name,id:D.id,uri:D.uri,url:D.url,urlId:0,audioGroupIds:D.audioGroupIds,textGroupIds:D.textGroupIds});var re=D.details;if(!re||re.live){var ye=this.switchParams(D.uri,y?.details);this.loadPlaylist(ye)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(o){this.manualLevelIndex=o,void 0===this._startLevel&&(this._startLevel=o),-1!==o&&(this.level=o)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(o){this._firstLevel=o}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var o=this.hls.config.startLevel;return void 0!==o?o:this.hls.firstAutoLevel}return this._startLevel},set:function(o){this._startLevel=o}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(o){this.level=o,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=o)}}]),d}(bl);function _h(g){var d={};g.forEach(function(c){var i=c.groupId||"";c.id=d[i]=d[i]||0,d[i]++})}var af=function(){function g(c){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=c}var d=g.prototype;return d.abort=function(i){for(var o in this.keyUriToKeyInfo){var u=this.keyUriToKeyInfo[o].loader;if(u){var h;if(i&&i!==(null==(h=u.context)?void 0:h.frag.type))return;u.abort()}}},d.detach=function(){for(var i in this.keyUriToKeyInfo){var o=this.keyUriToKeyInfo[i];(o.mediaKeySessionContext||o.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[i]}},d.destroy=function(){for(var i in this.detach(),this.keyUriToKeyInfo){var o=this.keyUriToKeyInfo[i].loader;o&&o.destroy()}this.keyUriToKeyInfo={}},d.createKeyLoadError=function(i,o,u,h,p){return void 0===o&&(o=he.KEY_LOAD_ERROR),new ya({type:_e.NETWORK_ERROR,details:o,fatal:!1,frag:i,response:p,error:u,networkDetails:h})},d.loadClear=function(i,o){var u=this;if(this.emeController&&this.config.emeEnabled)for(var h=i.sn,p=i.cc,v=function(){var D=o[y];if(p<=D.cc&&("initSegment"===h||"initSegment"===D.sn||h<D.sn))return u.emeController.selectKeySystemFormat(D).then(function(B){D.setKeyFormat(B)}),1},y=0;y<o.length&&!v();y++);},d.load=function(i){var o=this;return!i.decryptdata&&i.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(i).then(function(u){return o.loadInternal(i,u)}):this.loadInternal(i)},d.loadInternal=function(i,o){var u,h;o&&i.setKeyFormat(o);var p=i.decryptdata;if(!p){var v=new Error(o?"Expected frag.decryptdata to be defined after setting format "+o:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(i,he.KEY_LOAD_ERROR,v))}var y=p.uri;if(!y)return Promise.reject(this.createKeyLoadError(i,he.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+y+'"')));var D,A=this.keyUriToKeyInfo[y];if(null!=(u=A)&&u.decryptdata.key)return p.key=A.decryptdata.key,Promise.resolve({frag:i,keyInfo:A});if(null!=(h=A)&&h.keyLoadPromise)switch(null==(D=A.mediaKeySessionContext)?void 0:D.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return A.keyLoadPromise.then(function(B){return p.key=B.keyInfo.decryptdata.key,{frag:i,keyInfo:A}})}switch(A=this.keyUriToKeyInfo[y]={decryptdata:p,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},p.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===p.keyFormat?this.loadKeyHTTP(A,i):this.loadKeyEME(A,i);case"AES-128":return this.loadKeyHTTP(A,i);default:return Promise.reject(this.createKeyLoadError(i,he.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+p.method+'"')))}},d.loadKeyEME=function(i,o){var u={frag:o,keyInfo:i};if(this.emeController&&this.config.emeEnabled){var h=this.emeController.loadKey(u);if(h)return(i.keyLoadPromise=h.then(function(p){return i.mediaKeySessionContext=p,u})).catch(function(p){throw i.keyLoadPromise=null,p})}return Promise.resolve(u)},d.loadKeyHTTP=function(i,o){var u=this,h=this.config,v=new(0,h.loader)(h);return o.keyLoader=i.loader=v,i.keyLoadPromise=new Promise(function(y,A){var D={keyInfo:i,frag:o,responseType:"arraybuffer",url:i.decryptdata.uri},B=h.keyLoadPolicy.default;v.load(D,{loadPolicy:B,timeout:B.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:function(we,Ye,Ue,Xe){var vt=Ue.frag,wt=Ue.keyInfo;if(!vt.decryptdata||wt!==u.keyUriToKeyInfo[Ue.url])return A(u.createKeyLoadError(vt,he.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),Xe));wt.decryptdata.key=vt.decryptdata.key=new Uint8Array(we.data),vt.keyLoader=null,wt.loader=null,y({frag:vt,keyInfo:wt})},onError:function(we,Ye,Ue,Xe){u.resetLoader(Ye),A(u.createKeyLoadError(o,he.KEY_LOAD_ERROR,new Error("HTTP Error "+we.code+" loading key "+we.text),Ue,fr({url:D.url,data:void 0},we)))},onTimeout:function(we,Ye,Ue){u.resetLoader(Ye),A(u.createKeyLoadError(o,he.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),Ue))},onAbort:function(we,Ye,Ue){u.resetLoader(Ye),A(u.createKeyLoadError(o,he.INTERNAL_ABORTED,new Error("key loading aborted"),Ue))}})})},d.resetLoader=function(i){var o=i.frag,u=i.keyInfo,h=i.url,p=u.loader;o.keyLoader===p&&(o.keyLoader=null,u.loader=null),delete this.keyUriToKeyInfo[h],p&&p.destroy()},g}();function ol(){return self.SourceBuffer||self.WebKitSourceBuffer}function Th(){if(!fi())return!1;var d=ol();return!d||d.prototype&&"function"==typeof d.prototype.appendBuffer&&"function"==typeof d.prototype.remove}var Ho=function(){function g(c,i,o,u){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=c,this.media=i,this.fragmentTracker=o,this.hls=u}var d=g.prototype;return d.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},d.poll=function(i,o){var u=this.config,h=this.media,p=this.stalled;if(null!==h){var v=h.currentTime,y=h.seeking,A=this.seeking&&!y,D=!this.seeking&&y;if(this.seeking=y,v!==i){if(this.moved=!0,y||(this.nudgeRetry=0),null!==p){if(this.stallReported){var B=self.performance.now()-p;Le.warn("playback not stuck anymore @"+v+", after "+Math.round(B)+"ms"),this.stallReported=!1}this.stalled=null}return}if(D||A)return void(this.stalled=null);if(h.paused&&!y||h.ended||0===h.playbackRate||!Mi.getBuffered(h).length)return void(this.nudgeRetry=0);var ee=Mi.bufferInfo(h,v,0),re=ee.nextStart||0;if(y){var ye=ee.len>2,we=!re||o&&o.start<=v||re-v>2&&!this.fragmentTracker.getPartialFragment(v);if(ye||we)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var Ye;if(!(ee.len>0||re))return;var Xe=Math.max(re,ee.start||0)-v,vt=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,jt=(null==vt||null==(Ye=vt.details)?void 0:Ye.live)?2*vt.details.targetduration:2,Ht=this.fragmentTracker.getPartialFragment(v);if(Xe>0&&(Xe<=jt||Ht))return void(h.paused||this._trySkipBufferHole(Ht))}var Nt=self.performance.now();if(null===p)return void(this.stalled=Nt);var en=Nt-p;if(y||!(en>=250)||(this._reportStall(ee),this.media)){var tn=Mi.bufferInfo(h,v,u.maxBufferHole);this._tryFixBufferStall(tn,en)}}},d._tryFixBufferStall=function(i,o){var u=this.config,p=this.media;if(null!==p){var v=p.currentTime,y=this.fragmentTracker.getPartialFragment(v);if(y&&(this._trySkipBufferHole(y)||!this.media))return;(i.len>u.maxBufferHole||i.nextStart&&i.nextStart-v<u.maxBufferHole)&&o>1e3*u.highBufferWatchdogPeriod&&(Le.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},d._reportStall=function(i){var o=this.hls,u=this.media;if(!this.stallReported&&u){this.stallReported=!0;var p=new Error("Playback stalling at @"+u.currentTime+" due to low buffer ("+JSON.stringify(i)+")");Le.warn(p.message),o.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.BUFFER_STALLED_ERROR,fatal:!1,error:p,buffer:i.len})}},d._trySkipBufferHole=function(i){var o=this.config,u=this.hls,h=this.media;if(null===h)return 0;var p=h.currentTime,v=Mi.bufferInfo(h,p,0),y=p<v.start?v.start:v.nextStart;if(y){var B=y-p;if(B>0&&(v.len<=o.maxBufferHole||v.len>0&&v.len<1&&h.readyState<3)){if(B>o.maxBufferHole){var ee=this.fragmentTracker,re=!1;if(0===p){var ye=ee.getAppendedFrag(0,mr_MAIN);ye&&y<ye.end&&(re=!0)}if(!re){var we=i||ee.getAppendedFrag(p,mr_MAIN);if(we){for(var Ye=!1,Ue=we.end;Ue<y;){var Xe=ee.getPartialFragment(Ue);if(!Xe){Ye=!0;break}Ue+=Xe.duration}if(Ye)return 0}}}var vt=Math.max(y+.05,p+.1);if(Le.warn("skipping hole, adjusting currentTime from "+p+" to "+vt),this.moved=!0,this.stalled=null,h.currentTime=vt,i&&!i.gap){var wt=new Error("fragment loaded with buffer holes, seeking from "+p+" to "+vt);u.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:wt,reason:wt.message,frag:i})}return vt}}return 0},d._tryNudgeBuffer=function(){var i=this.config,o=this.hls,u=this.media,h=this.nudgeRetry;if(null!==u){var p=u.currentTime;if(this.nudgeRetry++,h<i.nudgeMaxRetry){var v=p+(h+1)*i.nudgeOffset,y=new Error("Nudging 'currentTime' from "+p+" to "+v);Le.warn(y.message),u.currentTime=v,o.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.BUFFER_NUDGE_ON_STALL,error:y,fatal:!1})}else{var A=new Error("Playhead still not moving while enough data buffered @"+p+" after "+i.nudgeMaxRetry+" nudges");Le.error(A.message),o.trigger(x.ERROR,{type:_e.MEDIA_ERROR,details:he.BUFFER_STALLED_ERROR,error:A,fatal:!0})}}},g}(),mp=function(g){function d(i,o,u){var h;return(h=g.call(this,i,o,u,"[stream-controller]",mr_MAIN)||this).audioCodecSwap=!1,h.gapController=null,h.level=-1,h._forceStartLoad=!1,h.altAudio=!1,h.audioOnly=!1,h.fragPlaying=null,h.onvplaying=null,h.onvseeked=null,h.fragLastKbps=0,h.couldBacktrack=!1,h.backtrackFragment=null,h.audioCodecSwitch=!1,h.videoBuffer=null,h._registerListeners(),h}E(d,g);var c=d.prototype;return c._registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_PARSED,this.onManifestParsed,this),o.on(x.LEVEL_LOADING,this.onLevelLoading,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),o.on(x.ERROR,this.onError,this),o.on(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.on(x.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),o.on(x.BUFFER_CREATED,this.onBufferCreated,this),o.on(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_PARSED,this.onManifestParsed,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),o.off(x.ERROR,this.onError,this),o.off(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.off(x.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),o.off(x.BUFFER_CREATED,this.onBufferCreated,this),o.off(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this)},c.onHandlerDestroying=function(){this._unregisterListeners(),g.prototype.onHandlerDestroying.call(this)},c.startLoad=function(o){if(this.levels){var u=this.lastCurrentTime,h=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var p=h.startLevel;-1===p&&(h.config.testBandwidth&&this.levels.length>1?(p=0,this.bitrateTest=!0):p=h.firstAutoLevel),h.nextLoadLevel=p,this.level=h.loadLevel,this.loadedmetadata=!1}u>0&&-1===o&&(this.log("Override startPosition with lastCurrentTime @"+u.toFixed(3)),o=u),this.state=En_IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()}else this._forceStartLoad=!0,this.state=En_STOPPED},c.stopLoad=function(){this._forceStartLoad=!1,g.prototype.stopLoad.call(this)},c.doTick=function(){switch(this.state){case En_WAITING_LEVEL:var o=this.levels,u=this.level,h=o?.[u],p=h?.details;if(p&&(!p.live||this.levelLastLoaded===h)){if(this.waitForCdnTuneIn(p))break;this.state=En_IDLE;break}if(this.hls.nextLoadLevel!==this.level){this.state=En_IDLE;break}break;case En_FRAG_LOADING_WAITING_RETRY:var v,y=self.performance.now(),A=this.retryDate;if(!A||y>=A||null!=(v=this.media)&&v.seeking){var D=this.levels,B=this.level,ee=D?.[B];this.resetStartWhenNotLoaded(ee||null),this.state=En_IDLE}}this.state===En_IDLE&&this.doTickIdle(),this.onTickEnd()},c.onTickEnd=function(){g.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},c.doTickIdle=function(){var o=this.hls,h=this.levels,y=o.nextLoadLevel;if(null!==this.levelLastLoaded&&(this.media||!this.startFragRequested&&o.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&null!=h&&h[y]){var A=h[y],D=this.getMainFwdBufferInfo();if(null!==D){var B=this.getLevelDetails();if(B&&this._streamEnded(D,B)){var ee={};return this.altAudio&&(ee.type="video"),this.hls.trigger(x.BUFFER_EOS,ee),void(this.state=En_ENDED)}o.loadLevel!==y&&-1===o.manualLevel&&this.log("Adapting to level "+y+" from level "+this.level),this.level=o.nextLoadLevel=y;var re=A.details;if(!re||this.state===En_WAITING_LEVEL||re.live&&this.levelLastLoaded!==A)return this.level=y,void(this.state=En_WAITING_LEVEL);var ye=D.len,we=this.getMaxBufferLength(A.maxBitrate);if(!(ye>=we)){this.backtrackFragment&&this.backtrackFragment.start>D.end&&(this.backtrackFragment=null);var Ye=this.backtrackFragment?this.backtrackFragment.start:D.end,Ue=this.getNextFragment(Ye,re);if(this.couldBacktrack&&!this.fragPrevious&&Ue&&"initSegment"!==Ue.sn&&this.fragmentTracker.getState(Ue)!==Qi_OK){var Xe,vt=(null!=(Xe=this.backtrackFragment)?Xe:Ue).sn,jt=re.fragments[vt-re.startSN-1];jt&&Ue.cc===jt.cc&&(Ue=jt,this.fragmentTracker.removeFragment(jt))}else this.backtrackFragment&&D.len&&(this.backtrackFragment=null);if(Ue&&this.isLoopLoading(Ue,Ye)){if(!Ue.gap){var Nt=this.audioOnly&&!this.altAudio?Rt_AUDIO:Rt_VIDEO,en=(Nt===Rt_VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;en&&this.afterBufferFlushed(en,Nt,mr_MAIN)}Ue=this.getNextFragmentLoopLoading(Ue,re,D,mr_MAIN,we)}Ue&&(Ue.initSegment&&!Ue.initSegment.data&&!this.bitrateTest&&(Ue=Ue.initSegment),this.loadFragment(Ue,A,Ye))}}}},c.loadFragment=function(o,u,h){var p=this.fragmentTracker.getState(o);this.fragCurrent=o,p===Qi_NOT_LOADED||p===Qi_PARTIAL?"initSegment"===o.sn?this._loadInitSegment(o,u):this.bitrateTest?(this.log("Fragment "+o.sn+" of level "+o.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(o,u)):(this.startFragRequested=!0,g.prototype.loadFragment.call(this,o,u,h)):this.clearTrackerIfNeeded(o)},c.getBufferedFrag=function(o){return this.fragmentTracker.getBufferedFrag(o,mr_MAIN)},c.followingBufferedFrag=function(o){return o?this.getBufferedFrag(o.end+.5):null},c.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},c.nextLevelSwitch=function(){var o=this.levels,u=this.media;if(null!=u&&u.readyState){var h,p=this.getAppendedFrag(u.currentTime);p&&p.start>1&&this.flushMainBuffer(0,p.start-1);var v=this.getLevelDetails();if(null!=v&&v.live){var y=this.getMainFwdBufferInfo();if(!y||y.len<2*v.targetduration)return}if(!u.paused&&o){var B=this.fragLastKbps;h=B&&this.fragCurrent?this.fragCurrent.duration*o[this.hls.nextLoadLevel].maxBitrate/(1e3*B)+1:0}else h=0;var ee=this.getBufferedFrag(u.currentTime+h);if(ee){var re=this.followingBufferedFrag(ee);if(re){this.abortCurrentFrag();var we=re.duration,Ye=Math.max(ee.end,(re.maxStartPTS?re.maxStartPTS:re.start)+Math.min(Math.max(we-this.config.maxFragLookUpTolerance,we*(this.couldBacktrack?.5:.125)),we*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(Ye,Number.POSITIVE_INFINITY)}}}},c.abortCurrentFrag=function(){var o=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,o&&(o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.state){case En_KEY_LOADING:case En_FRAG_LOADING:case En_FRAG_LOADING_WAITING_RETRY:case En_PARSING:case En_PARSED:this.state=En_IDLE}this.nextLoadPosition=this.getLoadPosition()},c.flushMainBuffer=function(o,u){g.prototype.flushMainBuffer.call(this,o,u,this.altAudio?"video":null)},c.onMediaAttached=function(o,u){g.prototype.onMediaAttached.call(this,o,u);var h=u.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),h.addEventListener("playing",this.onvplaying),h.addEventListener("seeked",this.onvseeked),this.gapController=new Ho(this.config,h,this.fragmentTracker,this.hls)},c.onMediaDetaching=function(){var o=this.media;o&&this.onvplaying&&this.onvseeked&&(o.removeEventListener("playing",this.onvplaying),o.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),g.prototype.onMediaDetaching.call(this)},c.onMediaPlaying=function(){this.tick()},c.onMediaSeeked=function(){var o=this.media,u=o?o.currentTime:null;$(u)&&this.log("Media seeked to "+u.toFixed(3));var h=this.getMainFwdBufferInfo();null!==h&&0!==h.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(h?h.len:"empty")+")")},c.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(x.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1},c.onManifestParsed=function(o,u){var h=!1,p=!1;u.levels.forEach(function(v){var y=v.audioCodec;y&&(h=h||-1!==y.indexOf("mp4a.40.2"),p=p||-1!==y.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=h&&p&&!function bh(){var g,d=ol();return"function"==typeof(null==d||null==(g=d.prototype)?void 0:g.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=u.levels,this.startFragRequested=!1},c.onLevelLoading=function(o,u){var h=this.levels;if(h&&this.state===En_IDLE){var p=h[u.level];(!p.details||p.details.live&&this.levelLastLoaded!==p||this.waitForCdnTuneIn(p.details))&&(this.state=En_WAITING_LEVEL)}},c.onLevelLoaded=function(o,u){var h,p=this.levels,v=u.level,y=u.details;if(p){this.log("Level "+v+" loaded ["+y.startSN+","+y.endSN+"]"+(y.lastPartSn?"[part-"+y.lastPartSn+"-"+y.lastPartIndex+"]":"")+", cc ["+y.startCC+", "+y.endCC+"] duration:"+y.totalduration);var D=p[v],B=this.fragCurrent;B&&(this.state===En_FRAG_LOADING||this.state===En_FRAG_LOADING_WAITING_RETRY)&&B.level!==u.level&&B.loader&&this.abortCurrentFrag();var ee=0;if(y.live||null!=(h=D.details)&&h.live){var re;if(this.checkLiveUpdate(y),y.deltaUpdateFailed)return;ee=this.alignPlaylists(y,D.details,null==(re=this.levelLastLoaded)?void 0:re.details)}if(D.details=y,this.levelLastLoaded=D,this.hls.trigger(x.LEVEL_UPDATED,{details:y,level:v}),this.state===En_WAITING_LEVEL){if(this.waitForCdnTuneIn(y))return;this.state=En_IDLE}this.startFragRequested?y.live&&this.synchronizeToLiveEdge(y):this.setStartPosition(y,ee),this.tick()}else this.warn("Levels were reset while loading level "+v)},c._handleFragmentLoadProgress=function(o){var u,h=o.frag,p=o.part,v=o.payload,y=this.levels;if(y){var A=y[h.level],D=A.details;if(!D)return this.warn("Dropping fragment "+h.sn+" of level "+h.level+" after level details were reset"),void this.fragmentTracker.removeFragment(h);var B=A.videoCodec,ee=D.PTSKnown||!D.live,re=null==(u=h.initSegment)?void 0:u.data,ye=this._getAudioCodec(A),we=this.transmuxer=this.transmuxer||new el(this.hls,mr_MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),Ye=p?p.index:-1,Xe=new bo(h.level,h.sn,h.stats.chunkCount,v.byteLength,Ye,-1!==Ye);we.push(v,re,ye,B,h,p,D.totalduration,ee,Xe,this.initPTS[h.cc])}else this.warn("Levels were reset while fragment load was in progress. Fragment "+h.sn+" of level "+h.level+" will not be buffered")},c.onAudioTrackSwitching=function(o,u){var h=this.altAudio;if(!u.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var v=this.fragCurrent;v&&(this.log("Switching to main audio track, cancel main fragment load"),v.abortRequests(),this.fragmentTracker.removeFragment(v)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var y=this.hls;h&&(y.trigger(x.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),y.trigger(x.AUDIO_TRACK_SWITCHED,u)}},c.onAudioTrackSwitched=function(o,u){var p=!!this.hls.audioTracks[u.id].url;if(p){var v=this.videoBuffer;v&&this.mediaBuffer!==v&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=v)}this.altAudio=p,this.tick()},c.onBufferCreated=function(o,u){var p,v,h=u.tracks,y=!1;for(var A in h){var D=h[A];if("main"===D.id){if(v=A,p=D,"video"===A){var B=h[A];B&&(this.videoBuffer=B.buffer)}}else y=!0}y&&p?(this.log("Alternate track found, use "+v+".buffered to schedule main fragment loading"),this.mediaBuffer=p.buffer):this.mediaBuffer=this.media},c.onFragBuffered=function(o,u){var h=u.frag,p=u.part;if(!h||h.type===mr_MAIN){if(this.fragContextChanged(h))return this.warn("Fragment "+h.sn+(p?" p: "+p.index:"")+" of level "+h.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===En_PARSED&&(this.state=En_IDLE));var v=p?p.stats:h.stats;this.fragLastKbps=Math.round(8*v.total/(v.buffering.end-v.loading.first)),"initSegment"!==h.sn&&(this.fragPrevious=h),this.fragBufferedComplete(h,p)}},c.onError=function(o,u){var h;if(u.fatal)this.state=En_ERROR;else switch(u.details){case he.FRAG_GAP:case he.FRAG_PARSING_ERROR:case he.FRAG_DECRYPT_ERROR:case he.FRAG_LOAD_ERROR:case he.FRAG_LOAD_TIMEOUT:case he.KEY_LOAD_ERROR:case he.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(mr_MAIN,u);break;case he.LEVEL_LOAD_ERROR:case he.LEVEL_LOAD_TIMEOUT:case he.LEVEL_PARSING_ERROR:!u.levelRetry&&this.state===En_WAITING_LEVEL&&(null==(h=u.context)?void 0:h.type)===Gr_LEVEL&&(this.state=En_IDLE);break;case he.BUFFER_APPEND_ERROR:case he.BUFFER_FULL_ERROR:if(!u.parent||"main"!==u.parent)return;if(u.details===he.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(u)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case he.INTERNAL_EXCEPTION:this.recoverWorkerError(u)}},c.checkBuffer=function(){var o=this.media,u=this.gapController;o&&u&&o.readyState&&(!this.loadedmetadata&&Mi.getBuffered(o).length||u.poll(this.lastCurrentTime,this.state!==En_IDLE?this.fragCurrent:null),this.lastCurrentTime=o.currentTime)},c.onFragLoadEmergencyAborted=function(){this.state=En_IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},c.onBufferFlushed=function(o,u){var h=u.type;(h!==Rt_AUDIO||this.audioOnly&&!this.altAudio)&&(this.afterBufferFlushed((h===Rt_VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,h,mr_MAIN),this.tick())},c.onLevelsUpdated=function(o,u){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=u.levels},c.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},c.seekToStartPos=function(){var o=this.media;if(o){var u=o.currentTime,h=this.startPosition;if(h>=0&&u<h){if(o.seeking)return void this.log("could not seek to "+h+", already seeking at "+u);var p=Mi.getBuffered(o),y=(p.length?p.start(0):0)-h;y>0&&(y<this.config.maxBufferHole||y<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+y+" to match buffer start"),this.startPosition=h+=y),this.log("seek to target start position "+h+" from current time "+u),o.currentTime=h}}},c._getAudioCodec=function(o){var u=this.config.defaultAudioCodec||o.audioCodec;return this.audioCodecSwap&&u&&(this.log("Swapping audio codec"),u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),u},c._loadBitrateTestFrag=function(o,u){var h=this;o.bitrateTest=!0,this._doFragLoad(o,u).then(function(p){var v=h.hls;if(p&&!h.fragContextChanged(o)){u.fragmentError=0,h.state=En_IDLE,h.startFragRequested=!1,h.bitrateTest=!1;var y=o.stats;y.parsing.start=y.parsing.end=y.buffering.start=y.buffering.end=self.performance.now(),v.trigger(x.FRAG_LOADED,p),o.bitrateTest=!1}})},c._handleTransmuxComplete=function(o){var u,h="main",p=this.hls,v=o.remuxResult,y=o.chunkMeta,A=this.getCurrentContext(y);if(A){var D=A.frag,B=A.part,ee=A.level,re=v.video,ye=v.text,we=v.id3,Ye=v.initSegment,Ue=ee.details,Xe=this.altAudio?void 0:v.audio;if(this.fragContextChanged(D))this.fragmentTracker.removeFragment(D);else{if(this.state=En_PARSING,Ye){if(null!=Ye&&Ye.tracks){var vt=D.initSegment||D;this._bufferInitSegment(ee,Ye.tracks,vt,y),p.trigger(x.FRAG_PARSING_INIT_SEGMENT,{frag:vt,id:h,tracks:Ye.tracks})}var wt=Ye.initPTS,jt=Ye.timescale;$(wt)&&(this.initPTS[D.cc]={baseTime:wt,timescale:jt},p.trigger(x.INIT_PTS_FOUND,{frag:D,id:h,initPTS:wt,timescale:jt}))}if(re&&Ue&&"initSegment"!==D.sn){var Ht=Ue.fragments[D.sn-1-Ue.startSN],Nt=D.sn===Ue.startSN,en=!Ht||D.cc>Ht.cc;if(!1!==v.independent){var tn=re.startPTS,yn=re.endPTS,An=re.startDTS,$n=re.endDTS;if(B)B.elementaryStreams[re.type]={startPTS:tn,endPTS:yn,startDTS:An,endDTS:$n};else if(re.firstKeyFrame&&re.independent&&1===y.id&&!en&&(this.couldBacktrack=!0),re.dropped&&re.independent){var vr=this.getMainFwdBufferInfo(),nr=(vr?vr.end:this.getLoadPosition())+this.config.maxBufferHole;if(!Nt&&nr<(re.firstKeyFramePTS?re.firstKeyFramePTS:tn)-this.config.maxBufferHole&&!en)return void this.backtrack(D);en&&(D.gap=!0),D.setElementaryStreamInfo(re.type,D.start,yn,D.start,$n,!0)}else Nt&&tn>2&&(D.gap=!0);D.setElementaryStreamInfo(re.type,tn,yn,An,$n),this.backtrackFragment&&(this.backtrackFragment=D),this.bufferFragmentData(re,D,B,y,Nt||en)}else{if(!Nt&&!en)return void this.backtrack(D);D.gap=!0}}if(Xe){var Nr=Xe.startPTS,ni=Xe.endPTS,Qr=Xe.startDTS,Br=Xe.endDTS;B&&(B.elementaryStreams[Rt_AUDIO]={startPTS:Nr,endPTS:ni,startDTS:Qr,endDTS:Br}),D.setElementaryStreamInfo(Rt_AUDIO,Nr,ni,Qr,Br),this.bufferFragmentData(Xe,D,B,y)}Ue&&null!=we&&null!=(u=we.samples)&&u.length&&p.trigger(x.FRAG_PARSING_METADATA,{id:h,frag:D,details:Ue,samples:we.samples}),Ue&&ye&&p.trigger(x.FRAG_PARSING_USERDATA,{id:h,frag:D,details:Ue,samples:ye.samples})}}else this.resetWhenMissingContext(y)},c._bufferInitSegment=function(o,u,h,p){var v=this;if(this.state===En_PARSING){this.audioOnly=!!u.audio&&!u.video,this.altAudio&&!this.audioOnly&&delete u.audio;var y=u.audio,A=u.video,D=u.audiovideo;if(y){var B=o.audioCodec,ee=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(B&&(B=-1!==B.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==y.metadata.channelCount&&-1===ee.indexOf("firefox")&&(B="mp4a.40.5")),B&&-1!==B.indexOf("mp4a.40.5")&&-1!==ee.indexOf("android")&&"audio/mpeg"!==y.container&&this.log("Android: force audio codec to "+(B="mp4a.40.2")),o.audioCodec&&o.audioCodec!==B&&this.log('Swapping manifest audio codec "'+o.audioCodec+'" for "'+B+'"'),y.levelCodec=B,y.id="main",this.log("Init audio buffer, container:"+y.container+", codecs[selected/level/parsed]=["+(B||"")+"/"+(o.audioCodec||"")+"/"+y.codec+"]")}A&&(A.levelCodec=o.videoCodec,A.id="main",this.log("Init video buffer, container:"+A.container+", codecs[level/parsed]=["+(o.videoCodec||"")+"/"+A.codec+"]")),D&&this.log("Init audiovideo buffer, container:"+D.container+", codecs[level/parsed]=["+o.codecs+"/"+D.codec+"]"),this.hls.trigger(x.BUFFER_CODECS,u),Object.keys(u).forEach(function(re){var we=u[re].initSegment;null!=we&&we.byteLength&&v.hls.trigger(x.BUFFER_APPENDING,{type:re,data:we,frag:h,part:null,chunkMeta:p,parent:h.type})}),this.tickImmediate()}},c.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,mr_MAIN)},c.backtrack=function(o){this.couldBacktrack=!0,this.backtrackFragment=o,this.resetTransmuxer(),this.flushBufferGap(o),this.fragmentTracker.removeFragment(o),this.fragPrevious=null,this.nextLoadPosition=o.start,this.state=En_IDLE},c.checkFragmentChanged=function(){var o=this.media,u=null;if(o&&o.readyState>1&&!1===o.seeking){var h=o.currentTime;if(Mi.isBuffered(o,h)?u=this.getAppendedFrag(h):Mi.isBuffered(o,h+.1)&&(u=this.getAppendedFrag(h+.1)),u){this.backtrackFragment=null;var p=this.fragPlaying,v=u.level;(!p||u.sn!==p.sn||p.level!==v)&&(this.fragPlaying=u,this.hls.trigger(x.FRAG_CHANGED,{frag:u}),(!p||p.level!==v)&&this.hls.trigger(x.LEVEL_SWITCHED,{level:v}))}}},De(d,[{key:"nextLevel",get:function(){var o=this.nextBufferedFrag;return o?o.level:-1}},{key:"currentFrag",get:function(){var o=this.media;return o?this.fragPlaying||this.getAppendedFrag(o.currentTime):null}},{key:"currentProgramDateTime",get:function(){var o=this.media;if(o){var u=o.currentTime,h=this.currentFrag;if(h&&$(u)&&$(h.programDateTime))return new Date(h.programDateTime+1e3*(u-h.start))}return null}},{key:"currentLevel",get:function(){var o=this.currentFrag;return o?o.level:-1}},{key:"nextBufferedFrag",get:function(){var o=this.currentFrag;return o?this.followingBufferedFrag(o):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),d}(rs),hd=function(){function g(c){void 0===c&&(c={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new ls,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,Qe(c.debug||!1,"Hls instance");var i=this.config=function gp(g,d){if((d.liveSyncDurationCount||d.liveMaxLatencyDurationCount)&&(d.liveSyncDuration||d.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==d.liveMaxLatencyDurationCount&&(void 0===d.liveSyncDurationCount||d.liveMaxLatencyDurationCount<=d.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==d.liveMaxLatencyDuration&&(void 0===d.liveSyncDuration||d.liveMaxLatencyDuration<=d.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var c=nf(g),o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(function(u){var h=("level"===u?"playlist":u)+"LoadPolicy",p=void 0===d[h],v=[];o.forEach(function(y){var A=u+"Loading"+y,D=d[A];if(void 0!==D&&p){v.push(A);var B=c[h].default;switch(d[h]={default:B},y){case"TimeOut":B.maxLoadTimeMs=D,B.maxTimeToFirstByteMs=D;break;case"MaxRetry":B.errorRetry.maxNumRetry=D,B.timeoutRetry.maxNumRetry=D;break;case"RetryDelay":B.errorRetry.retryDelayMs=D,B.timeoutRetry.retryDelayMs=D;break;case"MaxRetryTimeout":B.errorRetry.maxRetryDelayMs=D,B.timeoutRetry.maxRetryDelayMs=D}}}),v.length&&Le.warn('hls.js config: "'+v.join('", "')+'" setting(s) are deprecated, use "'+h+'": '+JSON.stringify(d[h]))}),fr(fr({},c),d)}(g.DefaultConfig,c);this.userConfig=c,i.progressive&&yh(i);var o=i.abrController,u=i.bufferController,h=i.capLevelController,v=i.fpsController,y=new(0,i.errorController)(this),A=this.abrController=new o(this),D=this.bufferController=new u(this),B=this.capLevelController=new h(this),ee=new v(this),re=new Gu(this),ye=new Ku(this),we=i.contentSteeringController,Ye=we?new we(this):null,Ue=this.levelController=new Eh(this,Ye),Xe=new kc(this),vt=new af(this.config),wt=this.streamController=new mp(this,Xe,vt);B.setStreamController(wt),ee.setStreamController(wt);var jt=[re,Ue,wt];Ye&&jt.splice(1,0,Ye),this.networkControllers=jt;var Ht=[A,D,B,ee,ye,Xe];this.audioTrackController=this.createController(i.audioTrackController,jt);var Nt=i.audioStreamController;Nt&&jt.push(new Nt(this,Xe,vt)),this.subtitleTrackController=this.createController(i.subtitleTrackController,jt);var en=i.subtitleStreamController;en&&jt.push(new en(this,Xe,vt)),this.createController(i.timelineController,Ht),vt.emeController=this.emeController=this.createController(i.emeController,Ht),this.cmcdController=this.createController(i.cmcdController,Ht),this.latencyController=this.createController(wc,Ht),this.coreComponents=Ht,jt.push(y);var tn=y.onErrorOut;"function"==typeof tn&&this.on(x.ERROR,tn,y)}g.isMSESupported=function(){return Th()},g.isSupported=function(){return function Sh(){if(!Th())return!1;var g=fi();return"function"==typeof g?.isTypeSupported&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(function(d){return g.isTypeSupported(li(d,"video"))})||["mp4a.40.2","fLaC"].some(function(d){return g.isTypeSupported(li(d,"audio"))}))}()},g.getMediaSource=function(){return fi()};var d=g.prototype;return d.createController=function(i,o){if(i){var u=new i(this);return o&&o.push(u),u}return null},d.on=function(i,o,u){void 0===u&&(u=this),this._emitter.on(i,o,u)},d.once=function(i,o,u){void 0===u&&(u=this),this._emitter.once(i,o,u)},d.removeAllListeners=function(i){this._emitter.removeAllListeners(i)},d.off=function(i,o,u,h){void 0===u&&(u=this),this._emitter.off(i,o,u,h)},d.listeners=function(i){return this._emitter.listeners(i)},d.emit=function(i,o,u){return this._emitter.emit(i,o,u)},d.trigger=function(i,o){if(this.config.debug)return this.emit(i,i,o);try{return this.emit(i,i,o)}catch(h){Le.error("An internal error happened while handling event "+i+'. Error message: "'+h.message+'". Here is a stacktrace:',h),this.triggeringException||(this.triggeringException=!0,this.trigger(x.ERROR,{type:_e.OTHER_ERROR,details:he.INTERNAL_EXCEPTION,fatal:i===x.ERROR,event:i,error:h}),this.triggeringException=!1)}return!1},d.listenerCount=function(i){return this._emitter.listenerCount(i)},d.destroy=function(){Le.log("destroy"),this.trigger(x.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(o){return o.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(o){return o.destroy()}),this.coreComponents.length=0;var i=this.config;i.xhrSetup=i.fetchSetup=void 0,this.userConfig=null},d.attachMedia=function(i){Le.log("attachMedia"),this._media=i,this.trigger(x.MEDIA_ATTACHING,{media:i})},d.detachMedia=function(){Le.log("detachMedia"),this.trigger(x.MEDIA_DETACHING,void 0),this._media=null},d.loadSource=function(i){this.stopLoad();var o=this.media,u=this.url,h=this.url=Ne.buildAbsoluteURL(self.location.href,i,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,Le.log("loadSource:"+h),o&&u&&(u!==h||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(o)),this.trigger(x.MANIFEST_LOADING,{url:i})},d.startLoad=function(i){void 0===i&&(i=-1),Le.log("startLoad("+i+")"),this.started=!0,this.networkControllers.forEach(function(o){o.startLoad(i)})},d.stopLoad=function(){Le.log("stopLoad"),this.started=!1,this.networkControllers.forEach(function(i){i.stopLoad()})},d.resumeBuffering=function(){this.started&&this.networkControllers.forEach(function(i){"fragmentLoader"in i&&i.startLoad(-1)})},d.pauseBuffering=function(){this.networkControllers.forEach(function(i){"fragmentLoader"in i&&i.stopLoad()})},d.swapAudioCodec=function(){Le.log("swapAudioCodec"),this.streamController.swapAudioCodec()},d.recoverMediaError=function(){Le.log("recoverMediaError");var i=this._media;this.detachMedia(),i&&this.attachMedia(i)},d.removeLevel=function(i){this.levelController.removeLevel(i)},d.setAudioOption=function(i){var o;return null==(o=this.audioTrackController)?void 0:o.setAudioOption(i)},d.setSubtitleOption=function(i){var o;return null==(o=this.subtitleTrackController)||o.setSubtitleOption(i),null},De(g,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(i){Le.log("set currentLevel:"+i),this.levelController.manualLevel=i,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(i){Le.log("set nextLevel:"+i),this.levelController.manualLevel=i,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(i){Le.log("set loadLevel:"+i),this.levelController.manualLevel=i}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(i){this.levelController.nextLoadLevel=i}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(i){Le.log("set firstLevel:"+i),this.levelController.firstLevel=i}},{key:"startLevel",get:function(){var i=this.levelController.startLevel;return-1===i&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:i},set:function(i){Le.log("set startLevel:"+i),-1!==i&&(i=Math.max(i,this.minAutoLevel)),this.levelController.startLevel=i}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(i){var o=!!i;o!==this.config.capLevelToPlayerSize&&(o?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=o)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(i){this._autoLevelCapping!==i&&(Le.log("set autoLevelCapping:"+i),this._autoLevelCapping=i,this.levelController.checkMaxAutoUpdated())}},{key:"bandwidthEstimate",get:function(){var i=this.abrController.bwEstimator;return i?i.getEstimate():NaN},set:function(i){this.abrController.resetEstimator(i)}},{key:"ttfbEstimate",get:function(){var i=this.abrController.bwEstimator;return i?i.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(i){(function $r(g){return Xl.indexOf(g)>-1})(i)&&this._maxHdcpLevel!==i&&(this._maxHdcpLevel=i,this.levelController.checkMaxAutoUpdated())}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var i=this.levels,o=this.config.minAutoBitrate;if(!i)return 0;for(var u=i.length,h=0;h<u;h++)if(i[h].maxBitrate>=o)return h;return 0}},{key:"maxAutoLevel",get:function(){var h,i=this.levels,o=this.autoLevelCapping,u=this.maxHdcpLevel;if(h=-1===o&&null!=i&&i.length?i.length-1:o,u)for(var p=h;p--;){var v=i[p].attrs["HDCP-LEVEL"];if(v&&v<=u)return p}return h}},{key:"firstAutoLevel",get:function(){return this.abrController.firstAutoLevel}},{key:"nextAutoLevel",get:function(){return this.abrController.nextAutoLevel},set:function(i){this.abrController.nextAutoLevel=i}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"allAudioTracks",get:function(){var i=this.audioTrackController;return i?i.allAudioTracks:[]}},{key:"audioTracks",get:function(){var i=this.audioTrackController;return i?i.audioTracks:[]}},{key:"audioTrack",get:function(){var i=this.audioTrackController;return i?i.audioTrack:-1},set:function(i){var o=this.audioTrackController;o&&(o.audioTrack=i)}},{key:"allSubtitleTracks",get:function(){var i=this.subtitleTrackController;return i?i.allSubtitleTracks:[]}},{key:"subtitleTracks",get:function(){var i=this.subtitleTrackController;return i?i.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var i=this.subtitleTrackController;return i?i.subtitleTrack:-1},set:function(i){var o=this.subtitleTrackController;o&&(o.subtitleTrack=i)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var i=this.subtitleTrackController;return!!i&&i.subtitleDisplay},set:function(i){var o=this.subtitleTrackController;o&&(o.subtitleDisplay=i)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(i){this.config.lowLatencyMode=i}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.5.5"}},{key:"Events",get:function(){return x}},{key:"ErrorTypes",get:function(){return _e}},{key:"ErrorDetails",get:function(){return he}},{key:"DefaultConfig",get:function(){return g.defaultConfig?g.defaultConfig:sc},set:function(i){g.defaultConfig=i}}]),g}();return hd.defaultConfig=void 0,hd}()}(!1)},86:(Ra,Jr,Ti)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Logger=void 0;var Er=Ti(161);Object.defineProperty(Jr,"Logger",{enumerable:!0,get:function(){return Er.Logger}})},161:(Ra,Jr)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Logger=void 0,Jr.Logger=class Ti{debug;context;constructor(fr,Ut=!1){this.debug=Ut,this.context=fr}d(fr){this.debug&&console.debug(this.context,"DEBUG:"+(new Date).toJSON()+":",fr)}i(fr){console.info(this.context,"INFO:"+(new Date).toJSON()+":",fr)}e(fr){console.error(this.context,"- ERROR:"+(new Date).toJSON()+":",fr)}w(fr){console.warn(this.context,"WARN:"+(new Date).toJSON()+":",fr)}trace(){console.trace()}}},660:(Ra,Jr,Ti)=>{"use strict";Jr.J5=Jr.X6=Jr.tX=void 0;var fr=Ti(687);Object.defineProperty(Jr,"tX",{enumerable:!0,get:function(){return fr.DashTech}});var Ut=Ti(375);Object.defineProperty(Jr,"X6",{enumerable:!0,get:function(){return Ut.HlsTech}});var $e=Ti(477);Object.defineProperty(Jr,"J5",{enumerable:!0,get:function(){return $e.Player}})},477:(Ra,Jr,Ti)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Player=void 0;const Er=Ti(86);Jr.Player=class fr{url="";player=null;volume=.99;headers=null;protData=null;logger=null;debug=!1;muted=!1;eventHandlers={};is_live=!1;autoplay=!1;onLicenseError=null;subtitlesUrl="";tech=null;event_handler_count=0;videoElement=document.createElement("video");available_events=["manifestLoaded","streamInitialized","abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];constructor(){this.logger=new Er.Logger("Player")}init($e,ne,De,H,_,E,k,V){this.logger.debug=_,this.url=De,this.tech=$e,this.videoElement=ne,this.url=De,this.debug=_,this.muted=!1,this.volume=.99,this.headers=E,this.autoplay=H,this.protData=k,this.videoElement=ne,this.onLicenseError=V,this.assignEventListeners(),this.tech.init(this.videoElement,this.url,this.autoplay,this.debug,this.handleEvent,this.headers,this.protData,this.onLicenseError)}getUrl(){return this.url}getTech(){return this.tech}play(){this.videoElement.play()}pause(){this.videoElement.pause()}seek($e){this.videoElement.currentTime=$e}getCurrentTime(){return this.videoElement.currentTime}getDuration(){return this.videoElement.duration}isLive(){return null!=this.tech&&this.tech.isLive()}setAudioTrack($e){null!=this.tech&&this.tech.setAudioTrack($e)}getQualities(){return null!=this.tech?this.tech.getQualities():[]}setQuality($e){null!=this.tech&&this.tech.setQuality($e)}getCurrentQuality(){return null!=this.tech?this.tech.getCurrentQuality():{index:0,width:0,height:0,bitrate:0,bitrateStr:"0k"}}getAudioTracks(){return null!=this.tech?this.tech.getAudioTracks():[]}setMaxQuality(){null!=this.tech&&this.tech.setMaxQuality()}setPlaybackRate($e){this.videoElement.playbackRate=$e}setVolume($e){this.muted||(this.videoElement.volume=1==$e?.99:$e),this.volume=$e}getVolume(){return this.volume}mute(){this.muted=!0,this.videoElement.volume=0}unmute(){this.muted=!1,this.videoElement.volume=this.volume}isMuted(){return this.muted}loadSubtitles($e){this.subtitlesUrl=$e,this.clearVideoElement();var ne=document.createElement("track");ne.label="Subtitle",ne.kind="subtitles",ne.default=!0,ne.src=$e,this.videoElement.appendChild(ne)}getSubtitlesUrl(){return this.subtitlesUrl}clearVideoElement(){this.clearNode(this.videoElement)}handleEvent=$e=>{if($e.type in this.eventHandlers)for(var ne in"metricChanged"!=$e.type&&"timeupdate"!=$e.type&&this.logger.d($e.type),this.eventHandlers[$e.type])this.eventHandlers[$e.type][ne]($e)};addEventHandler($e,ne){$e in this.eventHandlers||(this.eventHandlers[$e]={});var De="handler_"+this.event_handler_count++;return this.eventHandlers[$e][De]=ne,De}removeEventHandler($e,ne){delete this.eventHandlers[$e][ne]}assignEventListeners(){for(var $e=0;$e<this.available_events.length;$e++)this.videoElement.addEventListener(this.available_events[$e],this.handleEvent,!1)}clearEventHandlers(){for(var $e=0;$e<this.available_events.length;$e++)this.videoElement.removeEventListener(this.available_events[$e],this.handleEvent,!1)}clearNode($e){for(;$e.hasChildNodes();)$e.removeChild($e.lastChild)}destroy(){this.logger.d("Player destroy"),this.clearVideoElement(),this.clearEventHandlers(),null!=this.tech&&this.tech.destroy(),this.tech=null}}},687:(Ra,Jr,Ti)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.DashTech=void 0;const Er=Ti(86),fr=Ti(584),Ut=Ti(433);Jr.DashTech=class $e{url="";player=null;headers=null;logger=new Er.Logger("DashTech");eventHandler=null;is_live=!1;autoplay=!1;onLicenseError=null;videoElement=null;defaultHandler=De=>{this.eventHandler(De)};ascertainStreamType=De=>{"dynamic"==De.data.type&&(this.is_live=!0),this.eventHandler(De)};playerErrorHandler=De=>{this.logger.e(De.error.message),111==De.error.code||"key_session"==De.error&&this.onLicenseError()?this.onLicenseError():(this.eventHandler?this.eventHandler(De):this.logger.w("eventHandler is undefined"),this.defaultHandler(De),this.destroy())};init(De,H,_,E,k,V,w,F){this.logger.debug=E,this.url=H,this.headers=V,this.autoplay=_,this.videoElement=De,this.onLicenseError=F,this.player=(0,fr.MediaPlayer)().create(),this.eventHandler=k,this.attachHandlers(),typeof this.player.setFastSwitchEnabled<"u"&&this.player.setFastSwitchEnabled(!0),typeof this.player.getDebug().setLogToBrowserConsole<"u"&&this.player.getDebug().setLogToBrowserConsole(E),null!=w&&(this.player.getProtectionController().setRobustnessLevel("SW_SECURE_CRYPTO"),this.player.setProtectionData(w));var G=T=>{for(var M in this.headers)T.setRequestHeader(M,this.headers[M]);return T};null!=this.headers&&this.player.extend("RequestModifier",()=>({modifyRequestHeader:G}),!0),this.player.label="dash",this.logger.d("initializing"),this.player.initialize(this.videoElement,this.url,this.autoplay)}attachHandlers(){this.player.on(fr.MediaPlayer.events.METRIC_CHANGED,this.defaultHandler),this.player.on(fr.MediaPlayer.events.STREAM_INITIALIZED,this.defaultHandler),this.player.on(fr.MediaPlayer.events.MANIFEST_LOADED,this.ascertainStreamType),this.player.on(fr.MediaPlayer.events.ERROR,this.playerErrorHandler)}detachHandlers(){this.player.off(fr.MediaPlayer.events.METRIC_CHANGED,this.defaultHandler),this.player.off(fr.MediaPlayer.events.STREAM_INITIALIZED,this.defaultHandler),this.player.off(fr.MediaPlayer.events.MANIFEST_LOADED,this.ascertainStreamType),this.player.off(fr.MediaPlayer.events.ERROR,this.playerErrorHandler)}getPlayer(){return this.player}isLive(){return this.is_live}getAudioTracks(){for(var De=this.player.getTracksFor("audio"),H=[],_=0;_<De.length;_++)""==De[_].lang&&(De[_].lang="Audio "+_),""==De[_].name&&(De[_].name="Audio "+_),H.push({lang:De[_].lang,name:De[_].name,index:De[_].index});return H}setAudioTrack(De){for(var H=this.player.getTracksFor("audio"),_=0;_<H.length;_++)if(H[_].index==De)return void this.player.setCurrentTrack(H[_])}getQualities(){var De=this.player.getBitrateInfoListFor("video"),H=[];H.push(_={index:-1,bitrate:0,bitrateStr:"Auto",width:0,height:0});for(var E=0;E<De.length;E++){var _;(_={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0}).index=De[E].qualityIndex,_.bitrate=De[E].bitrate,_.bitrateStr=Ut.Utils.calcBitrateStr(De[E].bitrate),_.width=De[E].width,_.height=De[E].height,H.push(_)}return H}setQuality(De){-1!=(De=parseInt(De))?(typeof this.player.setAutoSwitchQuality<"u"?this.player.setAutoSwitchQuality(!1):typeof this.player.setAutoSwitchQualityFor<"u"?this.player.setAutoSwitchQualityFor("video",!1):typeof this.player.updateSettings<"u"&&this.player.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),this.player.setQualityFor("video",De)):typeof this.player.setAutoSwitchQuality<"u"?this.player.setAutoSwitchQuality(!0):typeof this.player.setAutoSwitchQualityFor<"u"?this.player.setAutoSwitchQualityFor("video",!0):typeof this.player.updateSettings<"u"&&this.player.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}})}getCurrentQuality(){var De=this.player.getQualityFor("video"),H=this.getQualities();for(var _ in H)if(De==H[_].index)return H[_];var E={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0};return E.index=De.qualityIndex,E.bitrate=De.bitrate,E.bitrateStr=Math.floor(De.bitrate/1e3)+"k",E.width=De.width,E.height=De.height,E}setMaxQuality(){for(var De=this.getQualities(),H=De[0],_=1;_<De.length;_++)De[_].bitrate>H.bitrate&&(H=De[_]);this.setQuality(H.index)}destroy(){null!=this.player&&(this.detachHandlers(),this.logger.d("Dashjs destroy"),this.player.reset(),this.player=null)}}},375:function(Ra,Jr,Ti){"use strict";var Er=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.HlsTech=void 0;const fr=Er(Ti(857)),Ut=Ti(86),$e=Ti(433);Jr.HlsTech=class ne{url="";player=null;headers=null;logger=new Ut.Logger("HlsTech");recover_take=0;is_live=!1;eventHandler=null;autoplay=!1;onLicenseError=null;videoElement=document.createElement("video");manifestParsedHandler=(H,_)=>{_.type=H,this.eventHandler(_),!0===this.autoplay&&this.videoElement.play()};levelLoadedHandler=(H,_)=>{null!=_.details&&"VOD"!==_.details.type&&(this.is_live=!0),_.type=H,this.eventHandler(_)};errorHandler=(H,_)=>{if(_.type=H,this.logger.i({event:H,data:_}),this.eventHandler(_),_.fatal)switch(_.type){case fr.default.ErrorTypes.MEDIA_ERROR:this.logger.e("Media error"),1==this.recover_take&&this.player.swapAudioCodec(),this.player.recoverMediaError(),this.recover_take++;break;case fr.default.ErrorTypes.NETWORK_ERROR:this.logger.e("Network error"),this.player.startLoad();break;default:this.logger.e("Unrecoverable error"),this.destroy()}};init(H,_,E,k,V,w,F,G){this.url=_,this.headers=w,this.autoplay=E,this.logger.debug=k,this.videoElement=H,this.onLicenseError=G,this.videoElement=H,this.player=new fr.default({enableWorker:!1,debug:k,xhrSetup:(T,M)=>{for(var O in this.headers)T.setRequestHeader(O,this.headers[O])}}),this.attachHandlers(),this.eventHandler=V,this.player.loadSource(this.url),this.player.attachMedia(this.videoElement)}attachHandlers(){this.player.on(fr.default.Events.MANIFEST_PARSED,this.manifestParsedHandler),this.player.on(fr.default.Events.LEVEL_LOADED,this.levelLoadedHandler),this.player.on(fr.default.Events.ERROR,this.errorHandler)}detachHandlers(){this.player.off(fr.default.Events.MANIFEST_PARSED,this.manifestParsedHandler),this.player.off(fr.default.Events.LEVEL_LOADED,this.levelLoadedHandler),this.player.off(fr.default.Events.ERROR,this.errorHandler)}getPlayer(){return this.player}isLive(){return this.is_live}getAudioTracks(){for(var H=this.player.audioTracks,_=[],E=0;E<H.length;E++)_.push({name:H[E].name,index:E,lang:H[E].lang});return _}setAudioTrack(H){this.player.audioTrack=H+1}getQualities(){var H=this.player.levels,_=[];_.push(E={index:-1,bitrate:0,bitrateStr:"Auto",width:0,height:0});for(var k=0;k<H.length;k++){var E;(E={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0}).index=null!=H[k].level?H[k].level:k,E.bitrate=H[k].bitrate,E.bitrateStr=$e.Utils.calcBitrateStr(H[k].bitrate),E.height=H[k].height,_.push(E)}return _}setQuality(H){this.player.currentLevel=H}getCurrentQuality(){var H=this.getQualities();for(var _ in H)if(this.player.currentLevel==H[_].index)return H[_];return{index:0,bitrate:0,bitrateStr:"0k",height:0,width:0}}setMaxQuality(){for(var H=this.getQualities(),_=-1,E=0,k=0;k<H.length;k++)H[k].bitrate>E&&(E=H[k].bitrate,_=k);this.setQuality(_)}destroy(){null!=this.player&&(this.logger.d("Hlsjs destroy"),this.detachHandlers(),this.player.destroy(),this.player=null)}}},433:(Ra,Jr)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Utils=void 0,Jr.Utils=class Ti{static calcBitrateStr(fr){var Ut=fr+"bps";return fr>1e3&&(Ut=Math.floor(fr/1e3)+"kbps"),fr>1e6&&(Ut=Math.floor(fr/1e6)+"mbps"),Ut}}}},Ra=>{Ra(Ra.s=930)}]);